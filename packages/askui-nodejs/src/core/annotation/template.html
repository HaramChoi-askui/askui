<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Annotated Image</title>
</head>

<body>
    <bounding-box-renderer></bounding-box-renderer>
    <script>
        (() => {
            "use strict";
            var e, v = {},
                b = {};

            function a(e) {
                var n = b[e];
                if (void 0 !== n) return n.exports;
                var r = b[e] = {
                    exports: {}
                };
                return v[e](r, r.exports, a), r.exports
            }
            a.m = v, e = [], a.O = (n, r, t, f) => {
                if (!r) {
                    var o = 1 / 0;
                    for (u = 0; u < e.length; u++) {
                        for (var [r, t, f] = e[u], s = !0, l = 0; l < r.length; l++)(!1 & f || o >= f) && Object.keys(a.O).every(i => a.O[i](r[l])) ? r.splice(l--, 1) : (s = !1, f < o && (o = f));
                        if (s) {
                            e.splice(u--, 1);
                            var c = t();
                            void 0 !== c && (n = c)
                        }
                    }
                    return n
                }
                f = f || 0;
                for (var u = e.length; u > 0 && e[u - 1][2] > f; u--) e[u] = e[u - 1];
                e[u] = [r, t, f]
            }, a.n = e => {
                var n = e && e.__esModule ? () => e.default : () => e;
                return a.d(n, {
                    a: n
                }), n
            }, a.d = (e, n) => {
                for (var r in n) a.o(n, r) && !a.o(e, r) && Object.defineProperty(e, r, {
                    enumerable: !0,
                    get: n[r]
                })
            }, a.o = (e, n) => Object.prototype.hasOwnProperty.call(e, n), (() => {
                var e = {
                    666: 0
                };
                a.O.j = t => 0 === e[t];
                var n = (t, f) => {
                        var l, c, [u, o, s] = f,
                            _ = 0;
                        for (l in o) a.o(o, l) && (a.m[l] = o[l]);
                        if (s) var d = s(a);
                        for (t && t(f); _ < u.length; _++) a.o(e, c = u[_]) && e[c] && e[c][0](), e[u[_]] = 0;
                        return a.O(d)
                    },
                    r = self.webpackChunkbounding_box_renderer = self.webpackChunkbounding_box_renderer || [];
                r.forEach(n.bind(null, 0)), r.push = n.bind(null, r.push.bind(r))
            })()
        })();
        (self.webpackChunkbounding_box_renderer = self.webpackChunkbounding_box_renderer || []).push([
            [429], {
                142: () => {
                    ! function(X, oe) {
                        "use strict";

                        function ge() {
                            var e = Ue.splice(0, Ue.length);
                            for (F = 0; e.length;) e.shift().call(null, e.shift())
                        }

                        function ye(e, r) {
                            for (var i = 0, h = e.length; i < h; i++) Ae(e[i], r)
                        }

                        function Ve(e) {
                            return function(r) {
                                L(r) && (Ae(r, e), le.length && ye(r.querySelectorAll(le), e))
                            }
                        }

                        function Ie(e) {
                            var r = R.call(e, "is"),
                                i = e.nodeName.toUpperCase(),
                                h = Ee.call(He, r ? st + r.toUpperCase() : qe + i);
                            return r && -1 < h && !Je(i, r) ? -1 : h
                        }

                        function Je(e, r) {
                            return -1 < le.indexOf(e + '[is="' + r + '"]')
                        }

                        function Qe(e) {
                            var r = e.currentTarget,
                                i = e.attrChange,
                                h = e.attrName,
                                s = e.target,
                                o = e[ot] || 2,
                                l = e[pt] || 3;
                            !n || s && s !== r || !r[pe] || "style" === h || e.prevValue === e.newValue && ("" !== e.newValue || i !== o && i !== l) || r[pe](h, i === o ? null : e.prevValue, i === l ? null : e.newValue)
                        }

                        function et(e) {
                            var r = Ve(e);
                            return function(i) {
                                Ue.push(r, i.target), F && clearTimeout(F), F = setTimeout(ge, 1)
                            }
                        }

                        function he(e) {
                            k && (k = !1, e.currentTarget.removeEventListener(bt, he)), le.length && ye((e.target || A).querySelectorAll(le), e.detail === me ? me : Le), G && function() {
                                for (var e, r = 0, i = T.length; r < i; r++) De.contains(e = T[r]) || (i--, T.splice(r--, 1), Ae(e, me))
                            }()
                        }

                        function ve(e, r) {
                            var i = this;
                            K.call(i, e, r), je.call(i, {
                                target: i
                            })
                        }

                        function Ze(e, r, i) {
                            var h = r.apply(e, i),
                                s = Ie(h);
                            return -1 < s && ae(h, We[s]), i.pop() && le.length && function(e) {
                                for (var r, i = 0, h = e.length; i < h; i++) ae(r = e[i], We[Ie(r)])
                            }(h.querySelectorAll(le)), h
                        }

                        function Fe(e, r) {
                            b(e, r), Ge ? Ge.observe(e, re) : (I && (e.setAttribute = ve, e[de] = nt(e), e[be](Et, je)), e[be](Oe, Qe)), e[ze] && n && (e.created = !0, e[ze](), e.created = !1)
                        }

                        function U(e) {
                            throw new Error("A " + e + " type is already registered")
                        }

                        function Ae(e, r) {
                            var i, h, s = Ie(e); - 1 < s && !B.call(e, "TEMPLATE") && (we(e, We[s]), s = 0, r !== Le || e[Le] ? r !== me || e[me] || (e[Le] = !1, e[me] = !0, h = "disconnected", s = 1) : (e[me] = !1, e[Le] = !0, h = "connected", s = 1, G && Ee.call(T, e) < 0 && T.push(e)), s && (i = e[r + ce] || e[h + ce]) && i.call(e))
                        }

                        function ke() {}

                        function J(e, r, i) {
                            var h = i && i[te] || "",
                                s = r.prototype,
                                o = w(s),
                                l = r.observedAttributes || Ne,
                                d = {
                                    prototype: o
                                };
                            x(o, ze, {
                                value: function() {
                                    if (f) f = !1;
                                    else if (!this[$e]) {
                                        this[$e] = !0, new r(this), s[ze] && s[ze].call(this);
                                        var p = m[v.get(r)];
                                        (!t || p.create.length > 1) && tt(this)
                                    }
                                }
                            }), x(o, pe, {
                                value: function(p) {
                                    -1 < Ee.call(l, p) && s[pe] && s[pe].apply(this, arguments)
                                }
                            }), s[rt] && x(o, vt, {
                                value: s[rt]
                            }), s[mt] && x(o, kt, {
                                value: s[mt]
                            }), h && (d[te] = h), e = e.toUpperCase(), m[e] = {
                                constructor: r,
                                create: h ? [h, C(e)] : [e]
                            }, v.set(r, e), A[se](e.toLowerCase(), d), ut(e), E[e].r()
                        }

                        function gt(e) {
                            var r = m[e.toUpperCase()];
                            return r && r.constructor
                        }

                        function yt(e) {
                            return "string" == typeof e ? e : e && e.is || ""
                        }

                        function tt(e) {
                            for (var r, i = e[pe], h = i ? e.attributes : Ne, s = h.length; s--;) i.call(e, (r = h[s]).name || r.nodeName, null, r.value || r.nodeValue)
                        }

                        function ut(e) {
                            return (e = e.toUpperCase()) in E || (E[e] = {}, E[e].p = new c(function(r) {
                                E[e].r = r
                            })), E[e].p
                        }

                        function ft() {
                            Me && delete X.customElements, Re(X, "customElements", {
                                configurable: !0,
                                value: new ke
                            }), Re(X, "CustomElementRegistry", {
                                configurable: !0,
                                value: ke
                            });
                            for (var e = ht.get(/^HTML[A-Z]*[a-z]/), r = e.length; r--;

                                function(i) {
                                    var h = X[i];
                                    if (h) {
                                        X[i] = function(s) {
                                            var o, l;
                                            return s || (s = this), s[$e] || (f = !0, o = m[v.get(s.constructor)], (s = (l = t && 1 === o.create.length) ? Reflect.construct(h, Ne, o.constructor) : A.createElement.apply(A, o.create))[$e] = !0, f = !1, l || tt(s)), s
                                        }, X[i].prototype = h.prototype;
                                        try {
                                            h.prototype.constructor = X[i]
                                        } catch (s) {
                                            Re(h, $e, {
                                                value: X[i]
                                            })
                                        }
                                    }
                                }(e[r]));
                            A.createElement = function(i, h) {
                                var s = yt(h);
                                return s ? O.call(this, i, C(s)) : O.call(this, i)
                            }, ue || (W = !0, A[se](""))
                        }
                        var A = X.document,
                            ne = X.Object,
                            ht = function(e) {
                                var r, i, h, s, o = /^[A-Z]+[a-z]/,
                                    d = function(_, g) {
                                        (g = g.toLowerCase()) in p || (p[_] = (p[_] || []).concat(g), p[g] = p[g.toUpperCase()] = _)
                                    },
                                    p = (ne.create || ne)(null),
                                    y = {};
                                for (i in e)
                                    for (s in e[i])
                                        for (p[s] = h = e[i][s], r = 0; r < h.length; r++) p[h[r].toLowerCase()] = p[h[r].toUpperCase()] = s;
                                return y.get = function(_) {
                                    return "string" == typeof _ ? p[_] || (o.test(_) ? [] : "") : function(_) {
                                        var g, M = [];
                                        for (g in p) _.test(g) && M.push(g);
                                        return M
                                    }(_)
                                }, y.set = function(_, g) {
                                    return o.test(_) ? d(_, g) : d(g, _), y
                                }, y
                            }({
                                collections: {
                                    HTMLAllCollection: ["all"],
                                    HTMLCollection: ["forms"],
                                    HTMLFormControlsCollection: ["elements"],
                                    HTMLOptionsCollection: ["options"]
                                },
                                elements: {
                                    Element: ["element"],
                                    HTMLAnchorElement: ["a"],
                                    HTMLAppletElement: ["applet"],
                                    HTMLAreaElement: ["area"],
                                    HTMLAttachmentElement: ["attachment"],
                                    HTMLAudioElement: ["audio"],
                                    HTMLBRElement: ["br"],
                                    HTMLBaseElement: ["base"],
                                    HTMLBodyElement: ["body"],
                                    HTMLButtonElement: ["button"],
                                    HTMLCanvasElement: ["canvas"],
                                    HTMLContentElement: ["content"],
                                    HTMLDListElement: ["dl"],
                                    HTMLDataElement: ["data"],
                                    HTMLDataListElement: ["datalist"],
                                    HTMLDetailsElement: ["details"],
                                    HTMLDialogElement: ["dialog"],
                                    HTMLDirectoryElement: ["dir"],
                                    HTMLDivElement: ["div"],
                                    HTMLDocument: ["document"],
                                    HTMLElement: ["element", "abbr", "address", "article", "aside", "b", "bdi", "bdo", "cite", "code", "command", "dd", "dfn", "dt", "em", "figcaption", "figure", "footer", "header", "i", "kbd", "mark", "nav", "noscript", "rp", "rt", "ruby", "s", "samp", "section", "small", "strong", "sub", "summary", "sup", "u", "var", "wbr"],
                                    HTMLEmbedElement: ["embed"],
                                    HTMLFieldSetElement: ["fieldset"],
                                    HTMLFontElement: ["font"],
                                    HTMLFormElement: ["form"],
                                    HTMLFrameElement: ["frame"],
                                    HTMLFrameSetElement: ["frameset"],
                                    HTMLHRElement: ["hr"],
                                    HTMLHeadElement: ["head"],
                                    HTMLHeadingElement: ["h1", "h2", "h3", "h4", "h5", "h6"],
                                    HTMLHtmlElement: ["html"],
                                    HTMLIFrameElement: ["iframe"],
                                    HTMLImageElement: ["img"],
                                    HTMLInputElement: ["input"],
                                    HTMLKeygenElement: ["keygen"],
                                    HTMLLIElement: ["li"],
                                    HTMLLabelElement: ["label"],
                                    HTMLLegendElement: ["legend"],
                                    HTMLLinkElement: ["link"],
                                    HTMLMapElement: ["map"],
                                    HTMLMarqueeElement: ["marquee"],
                                    HTMLMediaElement: ["media"],
                                    HTMLMenuElement: ["menu"],
                                    HTMLMenuItemElement: ["menuitem"],
                                    HTMLMetaElement: ["meta"],
                                    HTMLMeterElement: ["meter"],
                                    HTMLModElement: ["del", "ins"],
                                    HTMLOListElement: ["ol"],
                                    HTMLObjectElement: ["object"],
                                    HTMLOptGroupElement: ["optgroup"],
                                    HTMLOptionElement: ["option"],
                                    HTMLOutputElement: ["output"],
                                    HTMLParagraphElement: ["p"],
                                    HTMLParamElement: ["param"],
                                    HTMLPictureElement: ["picture"],
                                    HTMLPreElement: ["pre"],
                                    HTMLProgressElement: ["progress"],
                                    HTMLQuoteElement: ["blockquote", "q", "quote"],
                                    HTMLScriptElement: ["script"],
                                    HTMLSelectElement: ["select"],
                                    HTMLShadowElement: ["shadow"],
                                    HTMLSlotElement: ["slot"],
                                    HTMLSourceElement: ["source"],
                                    HTMLSpanElement: ["span"],
                                    HTMLStyleElement: ["style"],
                                    HTMLTableCaptionElement: ["caption"],
                                    HTMLTableCellElement: ["td", "th"],
                                    HTMLTableColElement: ["col", "colgroup"],
                                    HTMLTableElement: ["table"],
                                    HTMLTableRowElement: ["tr"],
                                    HTMLTableSectionElement: ["thead", "tbody", "tfoot"],
                                    HTMLTemplateElement: ["template"],
                                    HTMLTextAreaElement: ["textarea"],
                                    HTMLTimeElement: ["time"],
                                    HTMLTitleElement: ["title"],
                                    HTMLTrackElement: ["track"],
                                    HTMLUListElement: ["ul"],
                                    HTMLUnknownElement: ["unknown", "vhgroupv", "vkeygen"],
                                    HTMLVideoElement: ["video"]
                                },
                                nodes: {
                                    Attr: ["node"],
                                    Audio: ["audio"],
                                    CDATASection: ["node"],
                                    CharacterData: ["node"],
                                    Comment: ["#comment"],
                                    Document: ["#document"],
                                    DocumentFragment: ["#document-fragment"],
                                    DocumentType: ["node"],
                                    HTMLDocument: ["#document"],
                                    Image: ["img"],
                                    Option: ["option"],
                                    ProcessingInstruction: ["node"],
                                    ShadowRoot: ["#shadow-root"],
                                    Text: ["#text"],
                                    XMLDocument: ["xml"]
                                }
                            });
                        "object" != typeof oe && (oe = {
                            type: oe || "auto"
                        });
                        var Ue, je, Be, nt, Ge, ie, we, ae, Ce, e, r, i, h, s, se = "registerElement",
                            dt = 1e5 * X.Math.random() >> 0,
                            de = "__" + se + dt,
                            be = "addEventListener",
                            Le = "attached",
                            ce = "Callback",
                            me = "detached",
                            te = "extends",
                            pe = "attributeChanged" + ce,
                            vt = Le + ce,
                            rt = "connected" + ce,
                            mt = "disconnected" + ce,
                            ze = "created" + ce,
                            kt = me + ce,
                            ot = "ADDITION",
                            pt = "REMOVAL",
                            Oe = "DOMAttrModified",
                            bt = "DOMContentLoaded",
                            Et = "DOMSubtreeModified",
                            qe = "<",
                            st = "=",
                            Mt = /^[A-Z][._A-Z0-9]*-[-._A-Z0-9]*$/,
                            wt = ["ANNOTATION-XML", "COLOR-PROFILE", "FONT-FACE", "FONT-FACE-SRC", "FONT-FACE-URI", "FONT-FACE-FORMAT", "FONT-FACE-NAME", "MISSING-GLYPH"],
                            He = [],
                            We = [],
                            le = "",
                            De = A.documentElement,
                            Ee = He.indexOf || function(e) {
                                for (var r = this.length; r-- && this[r] !== e;);
                                return r
                            },
                            it = ne.prototype,
                            Pe = it.hasOwnProperty,
                            at = it.isPrototypeOf,
                            Re = ne.defineProperty,
                            Ne = [],
                            Xe = ne.getOwnPropertyDescriptor,
                            Y = ne.getOwnPropertyNames,
                            Ct = ne.getPrototypeOf,
                            Ye = ne.setPrototypeOf,
                            Se = !!ne.__proto__,
                            $e = "__dreCEv1",
                            Me = X.customElements,
                            t = !/^force/.test(oe.type) && !!(Me && Me.define && Me.get && Me.whenDefined),
                            a = ne.create || ne,
                            u = X.Map || function() {
                                var e, r = [],
                                    i = [];
                                return {
                                    get: function(h) {
                                        return i[Ee.call(r, h)]
                                    },
                                    set: function(h, s) {
                                        (e = Ee.call(r, h)) < 0 ? i[r.push(h) - 1] = s : i[e] = s
                                    }
                                }
                            },
                            c = X.Promise || function(e) {
                                function r(o) {
                                    for (h = !0; i.length;) i.shift()(o)
                                }
                                var i = [],
                                    h = !1,
                                    s = {
                                        catch: function() {
                                            return s
                                        },
                                        then: function(o) {
                                            return i.push(o), h && setTimeout(r, 1), s
                                        }
                                    };
                                return e(r), s
                            },
                            f = !1,
                            m = a(null),
                            E = a(null),
                            v = new u,
                            C = function(e) {
                                return e.toLowerCase()
                            },
                            w = ne.create || function e(r) {
                                return r ? (e.prototype = r, new e) : this
                            },
                            b = Ye || (Se ? function(e, r) {
                                return e.__proto__ = r, e
                            } : Y && Xe ? function() {
                                function e(r, i) {
                                    for (var h, s = Y(i), o = 0, l = s.length; o < l; o++) Pe.call(r, h = s[o]) || Re(r, h, Xe(i, h))
                                }
                                return function(r, i) {
                                    do {
                                        e(r, i)
                                    } while ((i = Ct(i)) && !at.call(i, r));
                                    return r
                                }
                            }() : function(e, r) {
                                for (var i in r) e[i] = r[i];
                                return e
                            }),
                            H = X.MutationObserver || X.WebKitMutationObserver,
                            S = X.HTMLAnchorElement,
                            P = (X.HTMLElement || X.Element || X.Node).prototype,
                            G = !at.call(P, De),
                            x = G ? function(e, r, i) {
                                return e[r] = i.value, e
                            } : Re,
                            L = G ? function(e) {
                                return 1 === e.nodeType
                            } : function(e) {
                                return at.call(P, e)
                            },
                            T = G && [],
                            Z = P.attachShadow,
                            z = P.cloneNode,
                            B = P.closest || function(e) {
                                for (var r = this; r && r.nodeName !== e;) r = r.parentNode;
                                return r
                            },
                            $ = P.dispatchEvent,
                            R = P.getAttribute,
                            Q = P.hasAttribute,
                            V = P.removeAttribute,
                            K = P.setAttribute,
                            N = A.createElement,
                            j = A.importNode,
                            O = N,
                            re = H && {
                                attributes: !0,
                                characterData: !0,
                                attributeOldValue: !0
                            },
                            Te = H || function(e) {
                                I = !1, De.removeEventListener(Oe, Te)
                            },
                            F = 0,
                            ue = se in A && !/^force-all/.test(oe.type),
                            fe = !0,
                            W = !1,
                            I = !0,
                            k = !0,
                            n = !0;
                        if (H && ((Ce = A.createElement("div")).innerHTML = "<div><div></div></div>", new H(function(e, r) {
                                if (e[0] && "childList" == e[0].type && !e[0].removedNodes[0].childNodes.length) {
                                    var i = (Ce = Xe(P, "innerHTML")) && Ce.set;
                                    i && Re(P, "innerHTML", {
                                        set: function(h) {
                                            for (; this.lastChild;) this.removeChild(this.lastChild);
                                            i.call(this, h)
                                        }
                                    })
                                }
                                r.disconnect(), Ce = null
                            }).observe(Ce, {
                                childList: !0,
                                subtree: !0
                            }), Ce.innerHTML = ""), ue || (Ye || Se ? (we = function(e, r) {
                                at.call(r, e) || Fe(e, r)
                            }, ae = Fe) : ae = we = function(e, r) {
                                e[de] || (e[de] = ne(!0), Fe(e, r))
                            }, G ? (I = !1, e = Xe(P, be), r = e.value, i = function(o) {
                                var l = new CustomEvent(Oe, {
                                    bubbles: !0
                                });
                                l.attrName = o, l.prevValue = R.call(this, o), l.newValue = null, l[pt] = l.attrChange = 2, V.call(this, o), $.call(this, l)
                            }, h = function(o, l) {
                                var d = Q.call(this, o),
                                    p = d && R.call(this, o),
                                    y = new CustomEvent(Oe, {
                                        bubbles: !0
                                    });
                                K.call(this, o, l), y.attrName = o, y.prevValue = d ? p : null, y.newValue = l, d ? y.MODIFICATION = y.attrChange = 1 : y[ot] = y.attrChange = 0, $.call(this, y)
                            }, s = function(o) {
                                var l, d = o.currentTarget,
                                    p = d[de],
                                    y = o.propertyName;
                                p.hasOwnProperty(y) && (p = p[y], (l = new CustomEvent(Oe, {
                                    bubbles: !0
                                })).attrName = p.name, l.prevValue = p.value || null, l.newValue = p.value = d[y] || null, null == l.prevValue ? l[ot] = l.attrChange = 0 : l.MODIFICATION = l.attrChange = 1, $.call(d, l))
                            }, e.value = function(o, l, d) {
                                o === Oe && this[pe] && this.setAttribute !== h && (this[de] = {
                                    className: {
                                        name: "class",
                                        value: this.className
                                    }
                                }, this.setAttribute = h, this.removeAttribute = i, r.call(this, "propertychange", s)), r.call(this, o, l, d)
                            }, Re(P, be, e)) : H || (De[be](Oe, Te), De.setAttribute(de, 1), De.removeAttribute(de), I && (je = function(e) {
                                var r, i, h, s = this;
                                if (s === e.target) {
                                    for (h in r = s[de], s[de] = i = nt(s), i) {
                                        if (!(h in r)) return Be(0, s, h, r[h], i[h], ot);
                                        if (i[h] !== r[h]) return Be(1, s, h, r[h], i[h], "MODIFICATION")
                                    }
                                    for (h in r)
                                        if (!(h in i)) return Be(2, s, h, r[h], i[h], pt)
                                }
                            }, Be = function(e, r, i, h, s, o) {
                                var l = {
                                    attrChange: e,
                                    currentTarget: r,
                                    attrName: i,
                                    prevValue: h,
                                    newValue: s
                                };
                                l[o] = e, Qe(l)
                            }, nt = function(e) {
                                for (var r, i, h = {}, s = e.attributes, o = 0, l = s.length; o < l; o++) "setAttribute" !== (i = (r = s[o]).name) && (h[i] = r.value);
                                return h
                            })), A[se] = function(e, r) {
                                if (i = e.toUpperCase(), fe && (fe = !1, H ? (Ge = function(p, y) {
                                        function _(g, M) {
                                            for (var D = 0, q = g.length; D < q; M(g[D++]));
                                        }
                                        return new H(function(g) {
                                            for (var M, D, q, ee = 0, _e = g.length; ee < _e; ee++) "childList" === (M = g[ee]).type ? (_(M.addedNodes, p), _(M.removedNodes, y)) : (D = M.target, n && D[pe] && "style" !== M.attributeName && (q = R.call(D, M.attributeName)) !== M.oldValue && D[pe](M.attributeName, M.oldValue, q))
                                        })
                                    }(Ve(Le), Ve(me)), (ie = function(p) {
                                        return Ge.observe(p, {
                                            childList: !0,
                                            subtree: !0
                                        }), p
                                    })(A), Z && (P.attachShadow = function() {
                                        return ie(Z.apply(this, arguments))
                                    })) : (Ue = [], A[be]("DOMNodeInserted", et(Le)), A[be]("DOMNodeRemoved", et(me))), A[be](bt, he), A[be]("readystatechange", he), A.importNode = function(p, y) {
                                        switch (p.nodeType) {
                                            case 1:
                                                return Ze(A, j, [p, !!y]);
                                            case 11:
                                                for (var _ = A.createDocumentFragment(), g = p.childNodes, M = g.length, D = 0; D < M; D++) _.appendChild(A.importNode(g[D], !!y));
                                                return _;
                                            default:
                                                return z.call(p, !!y)
                                        }
                                    }, P.cloneNode = function(p) {
                                        return Ze(this, z, [!!p])
                                    }), W) return W = !1;
                                if (-2 < Ee.call(He, st + i) + Ee.call(He, qe + i) && U(e), !Mt.test(i) || -1 < Ee.call(wt, i)) throw new Error("The type " + e + " is invalid");
                                var i, h, s = function() {
                                        return l ? A.createElement(d, i) : A.createElement(d)
                                    },
                                    o = r || it,
                                    l = Pe.call(o, te),
                                    d = l ? r[te].toUpperCase() : i;
                                return l && -1 < Ee.call(He, qe + d) && U(d), h = He.push((l ? st : qe) + i) - 1, le = le.concat(le.length ? "," : "", l ? d + '[is="' + e.toLowerCase() + '"]' : d), s.prototype = We[h] = Pe.call(o, "prototype") ? o.prototype : w(P), le.length && ye(A.querySelectorAll(le), Le), s
                            }, A.createElement = O = function(e, r) {
                                var i = yt(r),
                                    h = i ? N.call(A, e, C(i)) : N.call(A, e),
                                    s = "" + e,
                                    o = Ee.call(He, (i ? st : qe) + (i || s).toUpperCase()),
                                    l = -1 < o;
                                return i && (h.setAttribute("is", i = i.toLowerCase()), l && (l = Je(s.toUpperCase(), i))), n = !A.createElement.innerHTMLHelper, l && ae(h, We[o]), h
                            }), addEventListener("beforeunload", function() {
                                delete A.createElement, delete A.importNode, delete A[se]
                            }, !1), ke.prototype = {
                                constructor: ke,
                                define: t ? function(e, r, i) {
                                    if (i) J(e, r, i);
                                    else {
                                        var h = e.toUpperCase();
                                        m[h] = {
                                            constructor: r,
                                            create: [h]
                                        }, v.set(r, h), Me.define(e, r)
                                    }
                                } : J,
                                get: t ? function(e) {
                                    return Me.get(e) || gt(e)
                                } : gt,
                                whenDefined: t ? function(e) {
                                    return c.race([Me.whenDefined(e), ut(e)])
                                } : ut
                            }, !Me || /^force/.test(oe.type)) ft();
                        else if (!oe.noBuiltIn) try {
                            ! function(e, r, i) {
                                var h = new RegExp("^<a\\s+is=('|\")" + i + "\\1></a>$");
                                if (r[te] = "a", (e.prototype = w(S.prototype)).constructor = e, X.customElements.define(i, e, r), !h.test(A.createElement("a", {
                                        is: i
                                    }).outerHTML) || !h.test((new e).outerHTML)) throw r
                            }(function e() {
                                return Reflect.construct(S, [], e)
                            }, {}, "document-register-element-a" + dt)
                        } catch (e) {
                            ft()
                        }
                        if (!oe.noBuiltIn) try {
                            if (N.call(A, "a", "a").outerHTML.indexOf("is") < 0) throw {}
                        } catch (e) {
                            C = function(r) {
                                return {
                                    is: r.toLowerCase()
                                }
                            }
                        }
                    }(window)
                },
                277: () => {
                    "use strict";
                    ! function(t) {
                        const a = t.performance;

                        function u(I) {
                            a && a.mark && a.mark(I)
                        }

                        function c(I, k) {
                            a && a.measure && a.measure(I, k)
                        }
                        u("Zone");
                        const f = t.__Zone_symbol_prefix || "__zone_symbol__";

                        function m(I) {
                            return f + I
                        }
                        const E = !0 === t[m("forceDuplicateZoneCheck")];
                        if (t.Zone) {
                            if (E || "function" != typeof t.Zone.__symbol__) throw new Error("Zone already loaded.");
                            return t.Zone
                        }
                        let v = (() => {
                            class I {
                                constructor(n, e) {
                                    this._parent = n, this._name = e ? e.name || "unnamed" : "<root>", this._properties = e && e.properties || {}, this._zoneDelegate = new w(this, this._parent && this._parent._zoneDelegate, e)
                                }
                                static assertZonePatched() {
                                    if (t.Promise !== re.ZoneAwarePromise) throw new Error("Zone.js has detected that ZoneAwarePromise `(window|global).Promise` has been overwritten.\nMost likely cause is that a Promise polyfill has been loaded after Zone.js (Polyfilling Promise api is not necessary when zone.js is loaded. If you must load one, do so before loading zone.js.)")
                                }
                                static get root() {
                                    let n = I.current;
                                    for (; n.parent;) n = n.parent;
                                    return n
                                }
                                static get current() {
                                    return F.zone
                                }
                                static get currentTask() {
                                    return ue
                                }
                                static __load_patch(n, e, r = !1) {
                                    if (re.hasOwnProperty(n)) {
                                        if (!r && E) throw Error("Already loaded patch: " + n)
                                    } else if (!t["__Zone_disable_" + n]) {
                                        const i = "Zone:" + n;
                                        u(i), re[n] = e(t, I, Te), c(i, i)
                                    }
                                }
                                get parent() {
                                    return this._parent
                                }
                                get name() {
                                    return this._name
                                }
                                get(n) {
                                    const e = this.getZoneWith(n);
                                    if (e) return e._properties[n]
                                }
                                getZoneWith(n) {
                                    let e = this;
                                    for (; e;) {
                                        if (e._properties.hasOwnProperty(n)) return e;
                                        e = e._parent
                                    }
                                    return null
                                }
                                fork(n) {
                                    if (!n) throw new Error("ZoneSpec required!");
                                    return this._zoneDelegate.fork(this, n)
                                }
                                wrap(n, e) {
                                    if ("function" != typeof n) throw new Error("Expecting function got: " + n);
                                    const r = this._zoneDelegate.intercept(this, n, e),
                                        i = this;
                                    return function() {
                                        return i.runGuarded(r, this, arguments, e)
                                    }
                                }
                                run(n, e, r, i) {
                                    F = {
                                        parent: F,
                                        zone: this
                                    };
                                    try {
                                        return this._zoneDelegate.invoke(this, n, e, r, i)
                                    } finally {
                                        F = F.parent
                                    }
                                }
                                runGuarded(n, e = null, r, i) {
                                    F = {
                                        parent: F,
                                        zone: this
                                    };
                                    try {
                                        try {
                                            return this._zoneDelegate.invoke(this, n, e, r, i)
                                        } catch (h) {
                                            if (this._zoneDelegate.handleError(this, h)) throw h
                                        }
                                    } finally {
                                        F = F.parent
                                    }
                                }
                                runTask(n, e, r) {
                                    if (n.zone != this) throw new Error("A task can only be run in the zone of creation! (Creation: " + (n.zone || z).name + "; Execution: " + this.name + ")");
                                    if (n.state === B && (n.type === O || n.type === j)) return;
                                    const i = n.state != Q;
                                    i && n._transitionTo(Q, R), n.runCount++;
                                    const h = ue;
                                    ue = n, F = {
                                        parent: F,
                                        zone: this
                                    };
                                    try {
                                        n.type == j && n.data && !n.data.isPeriodic && (n.cancelFn = void 0);
                                        try {
                                            return this._zoneDelegate.invokeTask(this, n, e, r)
                                        } catch (s) {
                                            if (this._zoneDelegate.handleError(this, s)) throw s
                                        }
                                    } finally {
                                        n.state !== B && n.state !== K && (n.type == O || n.data && n.data.isPeriodic ? i && n._transitionTo(R, Q) : (n.runCount = 0, this._updateTaskCount(n, -1), i && n._transitionTo(B, Q, B))), F = F.parent, ue = h
                                    }
                                }
                                scheduleTask(n) {
                                    if (n.zone && n.zone !== this) {
                                        let r = this;
                                        for (; r;) {
                                            if (r === n.zone) throw Error(`can not reschedule task to ${this.name} which is descendants of the original zone ${n.zone.name}`);
                                            r = r.parent
                                        }
                                    }
                                    n._transitionTo($, B);
                                    const e = [];
                                    n._zoneDelegates = e, n._zone = this;
                                    try {
                                        n = this._zoneDelegate.scheduleTask(this, n)
                                    } catch (r) {
                                        throw n._transitionTo(K, $, B), this._zoneDelegate.handleError(this, r), r
                                    }
                                    return n._zoneDelegates === e && this._updateTaskCount(n, 1), n.state == $ && n._transitionTo(R, $), n
                                }
                                scheduleMicroTask(n, e, r, i) {
                                    return this.scheduleTask(new b(N, n, e, r, i, void 0))
                                }
                                scheduleMacroTask(n, e, r, i, h) {
                                    return this.scheduleTask(new b(j, n, e, r, i, h))
                                }
                                scheduleEventTask(n, e, r, i, h) {
                                    return this.scheduleTask(new b(O, n, e, r, i, h))
                                }
                                cancelTask(n) {
                                    if (n.zone != this) throw new Error("A task can only be cancelled in the zone of creation! (Creation: " + (n.zone || z).name + "; Execution: " + this.name + ")");
                                    n._transitionTo(V, R, Q);
                                    try {
                                        this._zoneDelegate.cancelTask(this, n)
                                    } catch (e) {
                                        throw n._transitionTo(K, V), this._zoneDelegate.handleError(this, e), e
                                    }
                                    return this._updateTaskCount(n, -1), n._transitionTo(B, V), n.runCount = 0, n
                                }
                                _updateTaskCount(n, e) {
                                    const r = n._zoneDelegates; - 1 == e && (n._zoneDelegates = null);
                                    for (let i = 0; i < r.length; i++) r[i]._updateTaskCount(n.type, e)
                                }
                            }
                            return I.__symbol__ = m, I
                        })();
                        const C = {
                            name: "",
                            onHasTask: (I, k, n, e) => I.hasTask(n, e),
                            onScheduleTask: (I, k, n, e) => I.scheduleTask(n, e),
                            onInvokeTask: (I, k, n, e, r, i) => I.invokeTask(n, e, r, i),
                            onCancelTask: (I, k, n, e) => I.cancelTask(n, e)
                        };
                        class w {
                            constructor(k, n, e) {
                                this._taskCounts = {
                                    microTask: 0,
                                    macroTask: 0,
                                    eventTask: 0
                                }, this.zone = k, this._parentDelegate = n, this._forkZS = e && (e && e.onFork ? e : n._forkZS), this._forkDlgt = e && (e.onFork ? n : n._forkDlgt), this._forkCurrZone = e && (e.onFork ? this.zone : n._forkCurrZone), this._interceptZS = e && (e.onIntercept ? e : n._interceptZS), this._interceptDlgt = e && (e.onIntercept ? n : n._interceptDlgt), this._interceptCurrZone = e && (e.onIntercept ? this.zone : n._interceptCurrZone), this._invokeZS = e && (e.onInvoke ? e : n._invokeZS), this._invokeDlgt = e && (e.onInvoke ? n : n._invokeDlgt), this._invokeCurrZone = e && (e.onInvoke ? this.zone : n._invokeCurrZone), this._handleErrorZS = e && (e.onHandleError ? e : n._handleErrorZS), this._handleErrorDlgt = e && (e.onHandleError ? n : n._handleErrorDlgt), this._handleErrorCurrZone = e && (e.onHandleError ? this.zone : n._handleErrorCurrZone), this._scheduleTaskZS = e && (e.onScheduleTask ? e : n._scheduleTaskZS), this._scheduleTaskDlgt = e && (e.onScheduleTask ? n : n._scheduleTaskDlgt), this._scheduleTaskCurrZone = e && (e.onScheduleTask ? this.zone : n._scheduleTaskCurrZone), this._invokeTaskZS = e && (e.onInvokeTask ? e : n._invokeTaskZS), this._invokeTaskDlgt = e && (e.onInvokeTask ? n : n._invokeTaskDlgt), this._invokeTaskCurrZone = e && (e.onInvokeTask ? this.zone : n._invokeTaskCurrZone), this._cancelTaskZS = e && (e.onCancelTask ? e : n._cancelTaskZS), this._cancelTaskDlgt = e && (e.onCancelTask ? n : n._cancelTaskDlgt), this._cancelTaskCurrZone = e && (e.onCancelTask ? this.zone : n._cancelTaskCurrZone), this._hasTaskZS = null, this._hasTaskDlgt = null, this._hasTaskDlgtOwner = null, this._hasTaskCurrZone = null;
                                const r = e && e.onHasTask;
                                (r || n && n._hasTaskZS) && (this._hasTaskZS = r ? e : C, this._hasTaskDlgt = n, this._hasTaskDlgtOwner = this, this._hasTaskCurrZone = k, e.onScheduleTask || (this._scheduleTaskZS = C, this._scheduleTaskDlgt = n, this._scheduleTaskCurrZone = this.zone), e.onInvokeTask || (this._invokeTaskZS = C, this._invokeTaskDlgt = n, this._invokeTaskCurrZone = this.zone), e.onCancelTask || (this._cancelTaskZS = C, this._cancelTaskDlgt = n, this._cancelTaskCurrZone = this.zone))
                            }
                            fork(k, n) {
                                return this._forkZS ? this._forkZS.onFork(this._forkDlgt, this.zone, k, n) : new v(k, n)
                            }
                            intercept(k, n, e) {
                                return this._interceptZS ? this._interceptZS.onIntercept(this._interceptDlgt, this._interceptCurrZone, k, n, e) : n
                            }
                            invoke(k, n, e, r, i) {
                                return this._invokeZS ? this._invokeZS.onInvoke(this._invokeDlgt, this._invokeCurrZone, k, n, e, r, i) : n.apply(e, r)
                            }
                            handleError(k, n) {
                                return !this._handleErrorZS || this._handleErrorZS.onHandleError(this._handleErrorDlgt, this._handleErrorCurrZone, k, n)
                            }
                            scheduleTask(k, n) {
                                let e = n;
                                if (this._scheduleTaskZS) this._hasTaskZS && e._zoneDelegates.push(this._hasTaskDlgtOwner), e = this._scheduleTaskZS.onScheduleTask(this._scheduleTaskDlgt, this._scheduleTaskCurrZone, k, n), e || (e = n);
                                else if (n.scheduleFn) n.scheduleFn(n);
                                else {
                                    if (n.type != N) throw new Error("Task is missing scheduleFn.");
                                    T(n)
                                }
                                return e
                            }
                            invokeTask(k, n, e, r) {
                                return this._invokeTaskZS ? this._invokeTaskZS.onInvokeTask(this._invokeTaskDlgt, this._invokeTaskCurrZone, k, n, e, r) : n.callback.apply(e, r)
                            }
                            cancelTask(k, n) {
                                let e;
                                if (this._cancelTaskZS) e = this._cancelTaskZS.onCancelTask(this._cancelTaskDlgt, this._cancelTaskCurrZone, k, n);
                                else {
                                    if (!n.cancelFn) throw Error("Task is not cancelable");
                                    e = n.cancelFn(n)
                                }
                                return e
                            }
                            hasTask(k, n) {
                                try {
                                    this._hasTaskZS && this._hasTaskZS.onHasTask(this._hasTaskDlgt, this._hasTaskCurrZone, k, n)
                                } catch (e) {
                                    this.handleError(k, e)
                                }
                            }
                            _updateTaskCount(k, n) {
                                const e = this._taskCounts,
                                    r = e[k],
                                    i = e[k] = r + n;
                                if (i < 0) throw new Error("More tasks executed then were scheduled.");
                                0 != r && 0 != i || this.hasTask(this.zone, {
                                    microTask: e.microTask > 0,
                                    macroTask: e.macroTask > 0,
                                    eventTask: e.eventTask > 0,
                                    change: k
                                })
                            }
                        }
                        class b {
                            constructor(k, n, e, r, i, h) {
                                if (this._zone = null, this.runCount = 0, this._zoneDelegates = null, this._state = "notScheduled", this.type = k, this.source = n, this.data = r, this.scheduleFn = i, this.cancelFn = h, !e) throw new Error("callback is not defined");
                                this.callback = e;
                                const s = this;
                                this.invoke = k === O && r && r.useG ? b.invokeTask : function() {
                                    return b.invokeTask.call(t, s, this, arguments)
                                }
                            }
                            static invokeTask(k, n, e) {
                                k || (k = this), fe++;
                                try {
                                    return k.runCount++, k.zone.runTask(k, n, e)
                                } finally {
                                    1 == fe && Z(), fe--
                                }
                            }
                            get zone() {
                                return this._zone
                            }
                            get state() {
                                return this._state
                            }
                            cancelScheduleRequest() {
                                this._transitionTo(B, $)
                            }
                            _transitionTo(k, n, e) {
                                if (this._state !== n && this._state !== e) throw new Error(`${this.type} '${this.source}': can not transition to '${k}', expecting state '${n}'${e?" or '"+e+"'":""}, was '${this._state}'.`);
                                this._state = k, k == B && (this._zoneDelegates = null)
                            }
                            toString() {
                                return this.data && void 0 !== this.data.handleId ? this.data.handleId.toString() : Object.prototype.toString.call(this)
                            }
                            toJSON() {
                                return {
                                    type: this.type,
                                    state: this.state,
                                    source: this.source,
                                    zone: this.zone.name,
                                    runCount: this.runCount
                                }
                            }
                        }
                        const H = m("setTimeout"),
                            S = m("Promise"),
                            P = m("then");
                        let L, G = [],
                            x = !1;

                        function T(I) {
                            if (0 === fe && 0 === G.length)
                                if (L || t[S] && (L = t[S].resolve(0)), L) {
                                    let k = L[P];
                                    k || (k = L.then), k.call(L, Z)
                                } else t[H](Z, 0);
                            I && G.push(I)
                        }

                        function Z() {
                            if (!x) {
                                for (x = !0; G.length;) {
                                    const I = G;
                                    G = [];
                                    for (let k = 0; k < I.length; k++) {
                                        const n = I[k];
                                        try {
                                            n.zone.runTask(n, null, null)
                                        } catch (e) {
                                            Te.onUnhandledError(e)
                                        }
                                    }
                                }
                                Te.microtaskDrainDone(), x = !1
                            }
                        }
                        const z = {
                                name: "NO ZONE"
                            },
                            B = "notScheduled",
                            $ = "scheduling",
                            R = "scheduled",
                            Q = "running",
                            V = "canceling",
                            K = "unknown",
                            N = "microTask",
                            j = "macroTask",
                            O = "eventTask",
                            re = {},
                            Te = {
                                symbol: m,
                                currentZoneFrame: () => F,
                                onUnhandledError: W,
                                microtaskDrainDone: W,
                                scheduleMicroTask: T,
                                showUncaughtError: () => !v[m("ignoreConsoleErrorUncaughtError")],
                                patchEventTarget: () => [],
                                patchOnProperties: W,
                                patchMethod: () => W,
                                bindArguments: () => [],
                                patchThen: () => W,
                                patchMacroTask: () => W,
                                patchEventPrototype: () => W,
                                isIEOrEdge: () => !1,
                                getGlobalObjects: () => {},
                                ObjectDefineProperty: () => W,
                                ObjectGetOwnPropertyDescriptor: () => {},
                                ObjectCreate: () => {},
                                ArraySlice: () => [],
                                patchClass: () => W,
                                wrapWithCurrentZone: () => W,
                                filterProperties: () => [],
                                attachOriginToPatched: () => W,
                                _redefineProperty: () => W,
                                patchCallbacks: () => W
                            };
                        let F = {
                                parent: null,
                                zone: new v(null, null)
                            },
                            ue = null,
                            fe = 0;

                        function W() {}
                        c("Zone", "Zone"), t.Zone = v
                    }("undefined" != typeof window && window || "undefined" != typeof self && self || global);
                    const oe = Object.getOwnPropertyDescriptor,
                        ge = Object.defineProperty,
                        ye = Object.getPrototypeOf,
                        _t = Object.create,
                        Ve = Array.prototype.slice,
                        Ie = "addEventListener",
                        Je = "removeEventListener",
                        Qe = Zone.__symbol__(Ie),
                        et = Zone.__symbol__(Je),
                        he = "true",
                        ve = "false",
                        Ze = Zone.__symbol__("");

                    function Fe(t, a) {
                        return Zone.current.wrap(t, a)
                    }

                    function lt(t, a, u, c, f) {
                        return Zone.current.scheduleMacroTask(t, a, u, c, f)
                    }
                    const U = Zone.__symbol__,
                        Ae = "undefined" != typeof window,
                        ke = Ae ? window : void 0,
                        J = Ae && ke || "object" == typeof self && self || global,
                        yt = [null];

                    function tt(t, a) {
                        for (let u = t.length - 1; u >= 0; u--) "function" == typeof t[u] && (t[u] = Fe(t[u], a + "_" + u));
                        return t
                    }

                    function ft(t) {
                        return !t || !1 !== t.writable && !("function" == typeof t.get && void 0 === t.set)
                    }
                    const A = "undefined" != typeof WorkerGlobalScope && self instanceof WorkerGlobalScope,
                        ne = !("nw" in J) && void 0 !== J.process && "[object process]" === {}.toString.call(J.process),
                        ht = !ne && !A && !(!Ae || !ke.HTMLElement),
                        Ue = void 0 !== J.process && "[object process]" === {}.toString.call(J.process) && !A && !(!Ae || !ke.HTMLElement),
                        je = {},
                        Be = function(t) {
                            if (!(t = t || J.event)) return;
                            let a = je[t.type];
                            a || (a = je[t.type] = U("ON_PROPERTY" + t.type));
                            const u = this || t.target || J,
                                c = u[a];
                            let f;
                            if (ht && u === ke && "error" === t.type) {
                                const m = t;
                                f = c && c.call(this, m.message, m.filename, m.lineno, m.colno, m.error), !0 === f && t.preventDefault()
                            } else f = c && c.apply(this, arguments), null != f && !f && t.preventDefault();
                            return f
                        };

                    function nt(t, a, u) {
                        let c = oe(t, a);
                        if (!c && u && oe(u, a) && (c = {
                                enumerable: !0,
                                configurable: !0
                            }), !c || !c.configurable) return;
                        const f = U("on" + a + "patched");
                        if (t.hasOwnProperty(f) && t[f]) return;
                        delete c.writable, delete c.value;
                        const m = c.get,
                            E = c.set,
                            v = a.substr(2);
                        let C = je[v];
                        C || (C = je[v] = U("ON_PROPERTY" + v)), c.set = function(w) {
                            let b = this;
                            !b && t === J && (b = J), b && (b[C] && b.removeEventListener(v, Be), E && E.apply(b, yt), "function" == typeof w ? (b[C] = w, b.addEventListener(v, Be, !1)) : b[C] = null)
                        }, c.get = function() {
                            let w = this;
                            if (!w && t === J && (w = J), !w) return null;
                            const b = w[C];
                            if (b) return b;
                            if (m) {
                                let H = m && m.call(this);
                                if (H) return c.set.call(this, H), "function" == typeof w.removeAttribute && w.removeAttribute(a), H
                            }
                            return null
                        }, ge(t, a, c), t[f] = !0
                    }

                    function Ge(t, a, u) {
                        if (a)
                            for (let c = 0; c < a.length; c++) nt(t, "on" + a[c], u);
                        else {
                            const c = [];
                            for (const f in t) "on" == f.substr(0, 2) && c.push(f);
                            for (let f = 0; f < c.length; f++) nt(t, c[f], u)
                        }
                    }
                    const ie = U("originalInstance");

                    function we(t) {
                        const a = J[t];
                        if (!a) return;
                        J[U(t)] = a, J[t] = function() {
                            const f = tt(arguments, t);
                            switch (f.length) {
                                case 0:
                                    this[ie] = new a;
                                    break;
                                case 1:
                                    this[ie] = new a(f[0]);
                                    break;
                                case 2:
                                    this[ie] = new a(f[0], f[1]);
                                    break;
                                case 3:
                                    this[ie] = new a(f[0], f[1], f[2]);
                                    break;
                                case 4:
                                    this[ie] = new a(f[0], f[1], f[2], f[3]);
                                    break;
                                default:
                                    throw new Error("Arg list too long.")
                            }
                        }, se(J[t], a);
                        const u = new a(function() {});
                        let c;
                        for (c in u) "XMLHttpRequest" === t && "responseBlob" === c || function(f) {
                            "function" == typeof u[f] ? J[t].prototype[f] = function() {
                                return this[ie][f].apply(this[ie], arguments)
                            } : ge(J[t].prototype, f, {
                                set: function(m) {
                                    "function" == typeof m ? (this[ie][f] = Fe(m, t + "." + f), se(this[ie][f], m)) : this[ie][f] = m
                                },
                                get: function() {
                                    return this[ie][f]
                                }
                            })
                        }(c);
                        for (c in a) "prototype" !== c && a.hasOwnProperty(c) && (J[t][c] = a[c])
                    }

                    function ae(t, a, u) {
                        let c = t;
                        for (; c && !c.hasOwnProperty(a);) c = ye(c);
                        !c && t[a] && (c = t);
                        const f = U(a);
                        let m = null;
                        if (c && (!(m = c[f]) || !c.hasOwnProperty(f)) && (m = c[f] = c[a], ft(c && oe(c, a)))) {
                            const v = u(m, f, a);
                            c[a] = function() {
                                return v(this, arguments)
                            }, se(c[a], m)
                        }
                        return m
                    }

                    function Ce(t, a, u) {
                        let c = null;

                        function f(m) {
                            const E = m.data;
                            return E.args[E.cbIdx] = function() {
                                m.invoke.apply(this, arguments)
                            }, c.apply(E.target, E.args), m
                        }
                        c = ae(t, a, m => function(E, v) {
                            const C = u(E, v);
                            return C.cbIdx >= 0 && "function" == typeof v[C.cbIdx] ? lt(C.name, v[C.cbIdx], C, f) : m.apply(E, v)
                        })
                    }

                    function se(t, a) {
                        t[U("OriginalDelegate")] = a
                    }
                    let dt = !1,
                        de = !1;

                    function Le() {
                        if (dt) return de;
                        dt = !0;
                        try {
                            const t = ke.navigator.userAgent;
                            (-1 !== t.indexOf("MSIE ") || -1 !== t.indexOf("Trident/") || -1 !== t.indexOf("Edge/")) && (de = !0)
                        } catch (t) {}
                        return de
                    }
                    Zone.__load_patch("ZoneAwarePromise", (t, a, u) => {
                        const c = Object.getOwnPropertyDescriptor,
                            f = Object.defineProperty,
                            E = u.symbol,
                            v = [],
                            C = !0 === t[E("DISABLE_WRAPPING_UNCAUGHT_PROMISE_REJECTION")],
                            w = E("Promise"),
                            b = E("then");
                        u.onUnhandledError = s => {
                            if (u.showUncaughtError()) {
                                const o = s && s.rejection;
                                o ? console.error("Unhandled Promise rejection:", o instanceof Error ? o.message : o, "; Zone:", s.zone.name, "; Task:", s.task && s.task.source, "; Value:", o, o instanceof Error ? o.stack : void 0) : console.error(s)
                            }
                        }, u.microtaskDrainDone = () => {
                            for (; v.length;) {
                                const s = v.shift();
                                try {
                                    s.zone.runGuarded(() => {
                                        throw s.throwOriginal ? s.rejection : s
                                    })
                                } catch (o) {
                                    P(o)
                                }
                            }
                        };
                        const S = E("unhandledPromiseRejectionHandler");

                        function P(s) {
                            u.onUnhandledError(s);
                            try {
                                const o = a[S];
                                "function" == typeof o && o.call(this, s)
                            } catch (o) {}
                        }

                        function G(s) {
                            return s && s.then
                        }

                        function x(s) {
                            return s
                        }

                        function L(s) {
                            return n.reject(s)
                        }
                        const T = E("state"),
                            Z = E("value"),
                            z = E("finally"),
                            B = E("parentPromiseValue"),
                            $ = E("parentPromiseState"),
                            Q = null,
                            V = !0,
                            K = !1;

                        function j(s, o) {
                            return l => {
                                try {
                                    F(s, o, l)
                                } catch (d) {
                                    F(s, !1, d)
                                }
                            }
                        }
                        const Te = E("currentTaskTrace");

                        function F(s, o, l) {
                            const d = function() {
                                let s = !1;
                                return function(l) {
                                    return function() {
                                        s || (s = !0, l.apply(null, arguments))
                                    }
                                }
                            }();
                            if (s === l) throw new TypeError("Promise resolved with itself");
                            if (s[T] === Q) {
                                let p = null;
                                try {
                                    ("object" == typeof l || "function" == typeof l) && (p = l && l.then)
                                } catch (y) {
                                    return d(() => {
                                        F(s, !1, y)
                                    })(), s
                                }
                                if (o !== K && l instanceof n && l.hasOwnProperty(T) && l.hasOwnProperty(Z) && l[T] !== Q) fe(l), F(s, l[T], l[Z]);
                                else if (o !== K && "function" == typeof p) try {
                                    p.call(l, d(j(s, o)), d(j(s, !1)))
                                } catch (y) {
                                    d(() => {
                                        F(s, !1, y)
                                    })()
                                } else {
                                    s[T] = o;
                                    const y = s[Z];
                                    if (s[Z] = l, s[z] === z && o === V && (s[T] = s[$], s[Z] = s[B]), o === K && l instanceof Error) {
                                        const _ = a.currentTask && a.currentTask.data && a.currentTask.data.__creationTrace__;
                                        _ && f(l, Te, {
                                            configurable: !0,
                                            enumerable: !1,
                                            writable: !0,
                                            value: _
                                        })
                                    }
                                    for (let _ = 0; _ < y.length;) W(s, y[_++], y[_++], y[_++], y[_++]);
                                    if (0 == y.length && o == K) {
                                        s[T] = 0;
                                        let _ = l;
                                        try {
                                            throw new Error("Uncaught (in promise): " + function(s) {
                                                return s && s.toString === Object.prototype.toString ? (s.constructor && s.constructor.name || "") + ": " + JSON.stringify(s) : s ? s.toString() : Object.prototype.toString.call(s)
                                            }(l) + (l && l.stack ? "\n" + l.stack : ""))
                                        } catch (g) {
                                            _ = g
                                        }
                                        C && (_.throwOriginal = !0), _.rejection = l, _.promise = s, _.zone = a.current, _.task = a.currentTask, v.push(_), u.scheduleMicroTask()
                                    }
                                }
                            }
                            return s
                        }
                        const ue = E("rejectionHandledHandler");

                        function fe(s) {
                            if (0 === s[T]) {
                                try {
                                    const o = a[ue];
                                    o && "function" == typeof o && o.call(this, {
                                        rejection: s[Z],
                                        promise: s
                                    })
                                } catch (o) {}
                                s[T] = K;
                                for (let o = 0; o < v.length; o++) s === v[o].promise && v.splice(o, 1)
                            }
                        }

                        function W(s, o, l, d, p) {
                            fe(s);
                            const y = s[T],
                                _ = y ? "function" == typeof d ? d : x : "function" == typeof p ? p : L;
                            o.scheduleMicroTask("Promise.then", () => {
                                try {
                                    const g = s[Z],
                                        M = !!l && z === l[z];
                                    M && (l[B] = g, l[$] = y);
                                    const D = o.run(_, void 0, M && _ !== L && _ !== x ? [] : [g]);
                                    F(l, !0, D)
                                } catch (g) {
                                    F(l, !1, g)
                                }
                            }, l)
                        }
                        const k = function() {};
                        class n {
                            static toString() {
                                return "function ZoneAwarePromise() { [native code] }"
                            }
                            static resolve(o) {
                                return F(new this(null), V, o)
                            }
                            static reject(o) {
                                return F(new this(null), K, o)
                            }
                            static race(o) {
                                let l, d, p = new this((g, M) => {
                                    l = g, d = M
                                });

                                function y(g) {
                                    l(g)
                                }

                                function _(g) {
                                    d(g)
                                }
                                for (let g of o) G(g) || (g = this.resolve(g)), g.then(y, _);
                                return p
                            }
                            static all(o) {
                                return n.allWithCallback(o)
                            }
                            static allSettled(o) {
                                return (this && this.prototype instanceof n ? this : n).allWithCallback(o, {
                                    thenCallback: d => ({
                                        status: "fulfilled",
                                        value: d
                                    }),
                                    errorCallback: d => ({
                                        status: "rejected",
                                        reason: d
                                    })
                                })
                            }
                            static allWithCallback(o, l) {
                                let d, p, y = new this((D, q) => {
                                        d = D, p = q
                                    }),
                                    _ = 2,
                                    g = 0;
                                const M = [];
                                for (let D of o) {
                                    G(D) || (D = this.resolve(D));
                                    const q = g;
                                    try {
                                        D.then(ee => {
                                            M[q] = l ? l.thenCallback(ee) : ee, _--, 0 === _ && d(M)
                                        }, ee => {
                                            l ? (M[q] = l.errorCallback(ee), _--, 0 === _ && d(M)) : p(ee)
                                        })
                                    } catch (ee) {
                                        p(ee)
                                    }
                                    _++, g++
                                }
                                return _ -= 2, 0 === _ && d(M), y
                            }
                            constructor(o) {
                                const l = this;
                                if (!(l instanceof n)) throw new Error("Must be an instanceof Promise.");
                                l[T] = Q, l[Z] = [];
                                try {
                                    o && o(j(l, V), j(l, K))
                                } catch (d) {
                                    F(l, !1, d)
                                }
                            }
                            get[Symbol.toStringTag]() {
                                return "Promise"
                            }
                            get[Symbol.species]() {
                                return n
                            }
                            then(o, l) {
                                let d = this.constructor[Symbol.species];
                                (!d || "function" != typeof d) && (d = this.constructor || n);
                                const p = new d(k),
                                    y = a.current;
                                return this[T] == Q ? this[Z].push(y, p, o, l) : W(this, y, p, o, l), p
                            } catch (o) {
                                return this.then(null, o)
                            } finally(o) {
                                let l = this.constructor[Symbol.species];
                                (!l || "function" != typeof l) && (l = n);
                                const d = new l(k);
                                d[z] = z;
                                const p = a.current;
                                return this[T] == Q ? this[Z].push(p, d, o, o) : W(this, p, d, o, o), d
                            }
                        }
                        n.resolve = n.resolve, n.reject = n.reject, n.race = n.race, n.all = n.all;
                        const e = t[w] = t.Promise;
                        t.Promise = n;
                        const r = E("thenPatched");

                        function i(s) {
                            const o = s.prototype,
                                l = c(o, "then");
                            if (l && (!1 === l.writable || !l.configurable)) return;
                            const d = o.then;
                            o[b] = d, s.prototype.then = function(p, y) {
                                return new n((g, M) => {
                                    d.call(this, g, M)
                                }).then(p, y)
                            }, s[r] = !0
                        }
                        return u.patchThen = i, e && (i(e), ae(t, "fetch", s => function(s) {
                            return function(o, l) {
                                let d = s.apply(o, l);
                                if (d instanceof n) return d;
                                let p = d.constructor;
                                return p[r] || i(p), d
                            }
                        }(s))), Promise[a.__symbol__("uncaughtPromiseErrors")] = v, n
                    }), Zone.__load_patch("toString", t => {
                        const a = Function.prototype.toString,
                            u = U("OriginalDelegate"),
                            c = U("Promise"),
                            f = U("Error"),
                            m = function() {
                                if ("function" == typeof this) {
                                    const w = this[u];
                                    if (w) return "function" == typeof w ? a.call(w) : Object.prototype.toString.call(w);
                                    if (this === Promise) {
                                        const b = t[c];
                                        if (b) return a.call(b)
                                    }
                                    if (this === Error) {
                                        const b = t[f];
                                        if (b) return a.call(b)
                                    }
                                }
                                return a.call(this)
                            };
                        m[u] = a, Function.prototype.toString = m;
                        const E = Object.prototype.toString;
                        Object.prototype.toString = function() {
                            return "function" == typeof Promise && this instanceof Promise ? "[object Promise]" : E.call(this)
                        }
                    });
                    let ce = !1;
                    if ("undefined" != typeof window) try {
                        const t = Object.defineProperty({}, "passive", {
                            get: function() {
                                ce = !0
                            }
                        });
                        window.addEventListener("test", t, t), window.removeEventListener("test", t, t)
                    } catch (t) {
                        ce = !1
                    }
                    const me = {
                            useG: !0
                        },
                        te = {},
                        pe = {},
                        vt = new RegExp("^" + Ze + "(\\w+)(true|false)$"),
                        rt = U("propagationStopped");

                    function mt(t, a) {
                        const u = (a ? a(t) : t) + ve,
                            c = (a ? a(t) : t) + he,
                            f = Ze + u,
                            m = Ze + c;
                        te[t] = {}, te[t][ve] = f, te[t][he] = m
                    }

                    function ze(t, a, u) {
                        const c = u && u.add || Ie,
                            f = u && u.rm || Je,
                            m = u && u.listeners || "eventListeners",
                            E = u && u.rmAll || "removeAllListeners",
                            v = U(c),
                            C = "." + c + ":",
                            H = function(L, T, Z) {
                                if (L.isRemoved) return;
                                const z = L.callback;
                                "object" == typeof z && z.handleEvent && (L.callback = $ => z.handleEvent($), L.originalDelegate = z), L.invoke(L, T, [Z]);
                                const B = L.options;
                                B && "object" == typeof B && B.once && T[f].call(T, Z.type, L.originalDelegate ? L.originalDelegate : L.callback, B)
                            },
                            S = function(L) {
                                if (!(L = L || t.event)) return;
                                const T = this || L.target || t,
                                    Z = T[te[L.type][ve]];
                                if (Z)
                                    if (1 === Z.length) H(Z[0], T, L);
                                    else {
                                        const z = Z.slice();
                                        for (let B = 0; B < z.length && (!L || !0 !== L[rt]); B++) H(z[B], T, L)
                                    }
                            },
                            P = function(L) {
                                if (!(L = L || t.event)) return;
                                const T = this || L.target || t,
                                    Z = T[te[L.type][he]];
                                if (Z)
                                    if (1 === Z.length) H(Z[0], T, L);
                                    else {
                                        const z = Z.slice();
                                        for (let B = 0; B < z.length && (!L || !0 !== L[rt]); B++) H(z[B], T, L)
                                    }
                            };

                        function G(L, T) {
                            if (!L) return !1;
                            let Z = !0;
                            T && void 0 !== T.useG && (Z = T.useG);
                            const z = T && T.vh;
                            let B = !0;
                            T && void 0 !== T.chkDup && (B = T.chkDup);
                            let $ = !1;
                            T && void 0 !== T.rt && ($ = T.rt);
                            let R = L;
                            for (; R && !R.hasOwnProperty(c);) R = ye(R);
                            if (!R && L[c] && (R = L), !R || R[v]) return !1;
                            const Q = T && T.eventNameToString,
                                V = {},
                                K = R[v] = R[c],
                                N = R[U(f)] = R[f],
                                j = R[U(m)] = R[m],
                                O = R[U(E)] = R[E];
                            let re;

                            function Te(o, l) {
                                return !ce && "object" == typeof o && o ? !!o.capture : ce && l ? "boolean" == typeof o ? {
                                    capture: o,
                                    passive: !0
                                } : o ? "object" == typeof o && !1 !== o.passive ? Object.assign(Object.assign({}, o), {
                                    passive: !0
                                }) : o : {
                                    passive: !0
                                } : o
                            }
                            T && T.prepend && (re = R[U(T.prepend)] = R[T.prepend]);
                            const k = Z ? function(o) {
                                    if (!V.isExisting) return K.call(V.target, V.eventName, V.capture ? P : S, V.options)
                                } : function(o) {
                                    return K.call(V.target, V.eventName, o.invoke, V.options)
                                },
                                n = Z ? function(o) {
                                    if (!o.isRemoved) {
                                        const l = te[o.eventName];
                                        let d;
                                        l && (d = l[o.capture ? he : ve]);
                                        const p = d && o.target[d];
                                        if (p)
                                            for (let y = 0; y < p.length; y++)
                                                if (p[y] === o) {
                                                    p.splice(y, 1), o.isRemoved = !0, 0 === p.length && (o.allRemoved = !0, o.target[d] = null);
                                                    break
                                                }
                                    }
                                    if (o.allRemoved) return N.call(o.target, o.eventName, o.capture ? P : S, o.options)
                                } : function(o) {
                                    return N.call(o.target, o.eventName, o.invoke, o.options)
                                },
                                r = T && T.diff ? T.diff : function(o, l) {
                                    const d = typeof l;
                                    return "function" === d && o.callback === l || "object" === d && o.originalDelegate === l
                                },
                                i = Zone[U("UNPATCHED_EVENTS")],
                                h = t[U("PASSIVE_EVENTS")],
                                s = function(o, l, d, p, y = !1, _ = !1) {
                                    return function() {
                                        const g = this || t;
                                        let M = arguments[0];
                                        T && T.transferEventName && (M = T.transferEventName(M));
                                        let D = arguments[1];
                                        if (!D) return o.apply(this, arguments);
                                        if (ne && "uncaughtException" === M) return o.apply(this, arguments);
                                        let q = !1;
                                        if ("function" != typeof D) {
                                            if (!D.handleEvent) return o.apply(this, arguments);
                                            q = !0
                                        }
                                        if (z && !z(o, D, g, arguments)) return;
                                        const ee = ce && !!h && -1 !== h.indexOf(M),
                                            _e = Te(arguments[2], ee);
                                        if (i)
                                            for (let Ke = 0; Ke < i.length; Ke++)
                                                if (M === i[Ke]) return ee ? o.call(g, M, D, _e) : o.apply(this, arguments);
                                        const Nt = !!_e && ("boolean" == typeof _e || _e.capture),
                                            Ht = !(!_e || "object" != typeof _e) && _e.once,
                                            Zt = Zone.current;
                                        let Ot = te[M];
                                        Ot || (mt(M, Q), Ot = te[M]);
                                        const Dt = Ot[Nt ? he : ve];
                                        let Lt, ct = g[Dt],
                                            Rt = !1;
                                        if (ct) {
                                            if (Rt = !0, B)
                                                for (let Ke = 0; Ke < ct.length; Ke++)
                                                    if (r(ct[Ke], D)) return
                                        } else ct = g[Dt] = [];
                                        const St = g.constructor.name,
                                            It = pe[St];
                                        It && (Lt = It[M]), Lt || (Lt = St + l + (Q ? Q(M) : M)), V.options = _e, Ht && (V.options.once = !1), V.target = g, V.capture = Nt, V.eventName = M, V.isExisting = Rt;
                                        const Tt = Z ? me : void 0;
                                        Tt && (Tt.taskData = V);
                                        const xe = Zt.scheduleEventTask(Lt, D, Tt, d, p);
                                        return V.target = null, Tt && (Tt.taskData = null), Ht && (_e.once = !0), !ce && "boolean" == typeof xe.options || (xe.options = _e), xe.target = g, xe.capture = Nt, xe.eventName = M, q && (xe.originalDelegate = D), _ ? ct.unshift(xe) : ct.push(xe), y ? g : void 0
                                    }
                                };
                            return R[c] = s(K, C, k, n, $), re && (R.prependListener = s(re, ".prependListener:", function(o) {
                                return re.call(V.target, V.eventName, o.invoke, V.options)
                            }, n, $, !0)), R[f] = function() {
                                const o = this || t;
                                let l = arguments[0];
                                T && T.transferEventName && (l = T.transferEventName(l));
                                const d = arguments[2],
                                    p = !!d && ("boolean" == typeof d || d.capture),
                                    y = arguments[1];
                                if (!y) return N.apply(this, arguments);
                                if (z && !z(N, y, o, arguments)) return;
                                const _ = te[l];
                                let g;
                                _ && (g = _[p ? he : ve]);
                                const M = g && o[g];
                                if (M)
                                    for (let D = 0; D < M.length; D++) {
                                        const q = M[D];
                                        if (r(q, y)) return M.splice(D, 1), q.isRemoved = !0, 0 === M.length && (q.allRemoved = !0, o[g] = null, "string" == typeof l) && (o[Ze + "ON_PROPERTY" + l] = null), q.zone.cancelTask(q), $ ? o : void 0
                                    }
                                return N.apply(this, arguments)
                            }, R[m] = function() {
                                const o = this || t;
                                let l = arguments[0];
                                T && T.transferEventName && (l = T.transferEventName(l));
                                const d = [],
                                    p = kt(o, Q ? Q(l) : l);
                                for (let y = 0; y < p.length; y++) {
                                    const _ = p[y];
                                    d.push(_.originalDelegate ? _.originalDelegate : _.callback)
                                }
                                return d
                            }, R[E] = function() {
                                const o = this || t;
                                let l = arguments[0];
                                if (l) {
                                    T && T.transferEventName && (l = T.transferEventName(l));
                                    const d = te[l];
                                    if (d) {
                                        const _ = o[d[ve]],
                                            g = o[d[he]];
                                        if (_) {
                                            const M = _.slice();
                                            for (let D = 0; D < M.length; D++) {
                                                const q = M[D];
                                                this[f].call(this, l, q.originalDelegate ? q.originalDelegate : q.callback, q.options)
                                            }
                                        }
                                        if (g) {
                                            const M = g.slice();
                                            for (let D = 0; D < M.length; D++) {
                                                const q = M[D];
                                                this[f].call(this, l, q.originalDelegate ? q.originalDelegate : q.callback, q.options)
                                            }
                                        }
                                    }
                                } else {
                                    const d = Object.keys(o);
                                    for (let p = 0; p < d.length; p++) {
                                        const _ = vt.exec(d[p]);
                                        let g = _ && _[1];
                                        g && "removeListener" !== g && this[E].call(this, g)
                                    }
                                    this[E].call(this, "removeListener")
                                }
                                if ($) return this
                            }, se(R[c], K), se(R[f], N), O && se(R[E], O), j && se(R[m], j), !0
                        }
                        let x = [];
                        for (let L = 0; L < a.length; L++) x[L] = G(a[L], u);
                        return x
                    }

                    function kt(t, a) {
                        if (!a) {
                            const m = [];
                            for (let E in t) {
                                const v = vt.exec(E);
                                let C = v && v[1];
                                if (C && (!a || C === a)) {
                                    const w = t[E];
                                    if (w)
                                        for (let b = 0; b < w.length; b++) m.push(w[b])
                                }
                            }
                            return m
                        }
                        let u = te[a];
                        u || (mt(a), u = te[a]);
                        const c = t[u[ve]],
                            f = t[u[he]];
                        return c ? f ? c.concat(f) : c.slice() : f ? f.slice() : []
                    }

                    function ot(t, a) {
                        const u = t.Event;
                        u && u.prototype && a.patchMethod(u.prototype, "stopImmediatePropagation", c => function(f, m) {
                            f[rt] = !0, c && c.apply(f, m)
                        })
                    }

                    function pt(t, a, u, c, f) {
                        const m = Zone.__symbol__(c);
                        if (a[m]) return;
                        const E = a[m] = a[c];
                        a[c] = function(v, C, w) {
                            return C && C.prototype && f.forEach(function(b) {
                                const H = `${u}.${c}::` + b,
                                    S = C.prototype;
                                if (S.hasOwnProperty(b)) {
                                    const P = t.ObjectGetOwnPropertyDescriptor(S, b);
                                    P && P.value ? (P.value = t.wrapWithCurrentZone(P.value, H), t._redefineProperty(C.prototype, b, P)) : S[b] && (S[b] = t.wrapWithCurrentZone(S[b], H))
                                } else S[b] && (S[b] = t.wrapWithCurrentZone(S[b], H))
                            }), E.call(a, v, C, w)
                        }, t.attachOriginToPatched(a[c], E)
                    }
                    const Et = ["absolutedeviceorientation", "afterinput", "afterprint", "appinstalled", "beforeinstallprompt", "beforeprint", "beforeunload", "devicelight", "devicemotion", "deviceorientation", "deviceorientationabsolute", "deviceproximity", "hashchange", "languagechange", "message", "mozbeforepaint", "offline", "online", "paint", "pageshow", "pagehide", "popstate", "rejectionhandled", "storage", "unhandledrejection", "unload", "userproximity", "vrdisplayconnected", "vrdisplaydisconnected", "vrdisplaypresentchange"],
                        st = ["encrypted", "waitingforkey", "msneedkey", "mozinterruptbegin", "mozinterruptend"],
                        le = ["load"],
                        De = ["blur", "error", "focus", "load", "resize", "scroll", "messageerror"],
                        Ee = ["bounce", "finish", "start"],
                        it = ["loadstart", "progress", "abort", "error", "load", "progress", "timeout", "loadend", "readystatechange"],
                        Pe = ["upgradeneeded", "complete", "abort", "success", "error", "blocked", "versionchange", "close"],
                        at = ["close", "error", "open", "message"],
                        Re = ["error", "message"],
                        Ne = ["abort", "animationcancel", "animationend", "animationiteration", "auxclick", "beforeinput", "blur", "cancel", "canplay", "canplaythrough", "change", "compositionstart", "compositionupdate", "compositionend", "cuechange", "click", "close", "contextmenu", "curechange", "dblclick", "drag", "dragend", "dragenter", "dragexit", "dragleave", "dragover", "drop", "durationchange", "emptied", "ended", "error", "focus", "focusin", "focusout", "gotpointercapture", "input", "invalid", "keydown", "keypress", "keyup", "load", "loadstart", "loadeddata", "loadedmetadata", "lostpointercapture", "mousedown", "mouseenter", "mouseleave", "mousemove", "mouseout", "mouseover", "mouseup", "mousewheel", "orientationchange", "pause", "play", "playing", "pointercancel", "pointerdown", "pointerenter", "pointerleave", "pointerlockchange", "mozpointerlockchange", "webkitpointerlockerchange", "pointerlockerror", "mozpointerlockerror", "webkitpointerlockerror", "pointermove", "pointout", "pointerover", "pointerup", "progress", "ratechange", "reset", "resize", "scroll", "seeked", "seeking", "select", "selectionchange", "selectstart", "show", "sort", "stalled", "submit", "suspend", "timeupdate", "volumechange", "touchcancel", "touchmove", "touchstart", "touchend", "transitioncancel", "transitionend", "waiting", "wheel"].concat(["webglcontextrestored", "webglcontextlost", "webglcontextcreationerror"], ["autocomplete", "autocompleteerror"], ["toggle"], ["afterscriptexecute", "beforescriptexecute", "DOMContentLoaded", "freeze", "fullscreenchange", "mozfullscreenchange", "webkitfullscreenchange", "msfullscreenchange", "fullscreenerror", "mozfullscreenerror", "webkitfullscreenerror", "msfullscreenerror", "readystatechange", "visibilitychange", "resume"], Et, ["beforecopy", "beforecut", "beforepaste", "copy", "cut", "paste", "dragstart", "loadend", "animationstart", "search", "transitionrun", "transitionstart", "webkitanimationend", "webkitanimationiteration", "webkitanimationstart", "webkittransitionend"], ["activate", "afterupdate", "ariarequest", "beforeactivate", "beforedeactivate", "beforeeditfocus", "beforeupdate", "cellchange", "controlselect", "dataavailable", "datasetchanged", "datasetcomplete", "errorupdate", "filterchange", "layoutcomplete", "losecapture", "move", "moveend", "movestart", "propertychange", "resizeend", "resizestart", "rowenter", "rowexit", "rowsdelete", "rowsinserted", "command", "compassneedscalibration", "deactivate", "help", "mscontentzoom", "msmanipulationstatechanged", "msgesturechange", "msgesturedoubletap", "msgestureend", "msgesturehold", "msgesturestart", "msgesturetap", "msgotpointercapture", "msinertiastart", "mslostpointercapture", "mspointercancel", "mspointerdown", "mspointerenter", "mspointerhover", "mspointerleave", "mspointermove", "mspointerout", "mspointerover", "mspointerup", "pointerout", "mssitemodejumplistitemremoved", "msthumbnailclick", "stop", "storagecommit"]);

                    function Xe(t, a, u) {
                        if (!u || 0 === u.length) return a;
                        const c = u.filter(m => m.target === t);
                        if (!c || 0 === c.length) return a;
                        const f = c[0].ignoreProperties;
                        return a.filter(m => -1 === f.indexOf(m))
                    }

                    function Y(t, a, u, c) {
                        t && Ge(t, Xe(t, a, u), c)
                    }
                    Zone.__load_patch("util", (t, a, u) => {
                        u.patchOnProperties = Ge, u.patchMethod = ae, u.bindArguments = tt, u.patchMacroTask = Ce;
                        const c = a.__symbol__("BLACK_LISTED_EVENTS"),
                            f = a.__symbol__("UNPATCHED_EVENTS");
                        t[f] && (t[c] = t[f]), t[c] && (a[c] = a[f] = t[c]), u.patchEventPrototype = ot, u.patchEventTarget = ze, u.isIEOrEdge = Le, u.ObjectDefineProperty = ge, u.ObjectGetOwnPropertyDescriptor = oe, u.ObjectCreate = _t, u.ArraySlice = Ve, u.patchClass = we, u.wrapWithCurrentZone = Fe, u.filterProperties = Xe, u.attachOriginToPatched = se, u._redefineProperty = Object.defineProperty, u.patchCallbacks = pt, u.getGlobalObjects = () => ({
                            globalSources: pe,
                            zoneSymbolEventNames: te,
                            eventNames: Ne,
                            isBrowser: ht,
                            isMix: Ue,
                            isNode: ne,
                            TRUE_STR: he,
                            FALSE_STR: ve,
                            ZONE_SYMBOL_PREFIX: Ze,
                            ADD_EVENT_LISTENER_STR: Ie,
                            REMOVE_EVENT_LISTENER_STR: Je
                        })
                    });
                    const Ye = U("zoneTask");

                    function Se(t, a, u, c) {
                        let f = null,
                            m = null;
                        u += c;
                        const E = {};

                        function v(w) {
                            const b = w.data;
                            return b.args[0] = function() {
                                return w.invoke.apply(this, arguments)
                            }, b.handleId = f.apply(t, b.args), w
                        }

                        function C(w) {
                            return m.call(t, w.data.handleId)
                        }
                        f = ae(t, a += c, w => function(b, H) {
                            if ("function" == typeof H[0]) {
                                const S = {
                                        isPeriodic: "Interval" === c,
                                        delay: "Timeout" === c || "Interval" === c ? H[1] || 0 : void 0,
                                        args: H
                                    },
                                    P = H[0];
                                H[0] = function() {
                                    try {
                                        return P.apply(this, arguments)
                                    } finally {
                                        S.isPeriodic || ("number" == typeof S.handleId ? delete E[S.handleId] : S.handleId && (S.handleId[Ye] = null))
                                    }
                                };
                                const G = lt(a, H[0], S, v, C);
                                if (!G) return G;
                                const x = G.data.handleId;
                                return "number" == typeof x ? E[x] = G : x && (x[Ye] = G), x && x.ref && x.unref && "function" == typeof x.ref && "function" == typeof x.unref && (G.ref = x.ref.bind(x), G.unref = x.unref.bind(x)), "number" == typeof x || x ? x : G
                            }
                            return w.apply(t, H)
                        }), m = ae(t, u, w => function(b, H) {
                            const S = H[0];
                            let P;
                            "number" == typeof S ? P = E[S] : (P = S && S[Ye], P || (P = S)), P && "string" == typeof P.type ? "notScheduled" !== P.state && (P.cancelFn && P.data.isPeriodic || 0 === P.runCount) && ("number" == typeof S ? delete E[S] : S && (S[Ye] = null), P.zone.cancelTask(P)) : w.apply(t, H)
                        })
                    }
                    Zone.__load_patch("legacy", t => {
                        const a = t[Zone.__symbol__("legacyPatch")];
                        a && a()
                    }), Zone.__load_patch("queueMicrotask", (t, a, u) => {
                        u.patchMethod(t, "queueMicrotask", c => function(f, m) {
                            a.current.scheduleMicroTask("queueMicrotask", m[0])
                        })
                    }), Zone.__load_patch("timers", t => {
                        const a = "set",
                            u = "clear";
                        Se(t, a, u, "Timeout"), Se(t, a, u, "Interval"), Se(t, a, u, "Immediate")
                    }), Zone.__load_patch("requestAnimationFrame", t => {
                        Se(t, "request", "cancel", "AnimationFrame"), Se(t, "mozRequest", "mozCancel", "AnimationFrame"), Se(t, "webkitRequest", "webkitCancel", "AnimationFrame")
                    }), Zone.__load_patch("blocking", (t, a) => {
                        const u = ["alert", "prompt", "confirm"];
                        for (let c = 0; c < u.length; c++) ae(t, u[c], (m, E, v) => function(C, w) {
                            return a.current.run(m, t, w, v)
                        })
                    }), Zone.__load_patch("EventTarget", (t, a, u) => {
                        (function(t, a) {
                            a.patchEventPrototype(t, a)
                        })(t, u),
                        function(t, a) {
                            if (Zone[a.symbol("patchEventTarget")]) return;
                            const {
                                eventNames: u,
                                zoneSymbolEventNames: c,
                                TRUE_STR: f,
                                FALSE_STR: m,
                                ZONE_SYMBOL_PREFIX: E
                            } = a.getGlobalObjects();
                            for (let C = 0; C < u.length; C++) {
                                const w = u[C],
                                    S = E + (w + m),
                                    P = E + (w + f);
                                c[w] = {}, c[w][m] = S, c[w][f] = P
                            }
                            const v = t.EventTarget;
                            v && v.prototype && a.patchEventTarget(t, [v && v.prototype])
                        }(t, u);
                        const c = t.XMLHttpRequestEventTarget;
                        c && c.prototype && u.patchEventTarget(t, [c.prototype])
                    }), Zone.__load_patch("MutationObserver", (t, a, u) => {
                        we("MutationObserver"), we("WebKitMutationObserver")
                    }), Zone.__load_patch("IntersectionObserver", (t, a, u) => {
                        we("IntersectionObserver")
                    }), Zone.__load_patch("FileReader", (t, a, u) => {
                        we("FileReader")
                    }), Zone.__load_patch("on_property", (t, a, u) => {
                        ! function(t, a) {
                            if (ne && !Ue || Zone[t.symbol("patchEvents")]) return;
                            const u = "undefined" != typeof WebSocket,
                                c = a.__Zone_ignore_on_properties;
                            if (ht) {
                                const E = window,
                                    v = function() {
                                        try {
                                            const t = ke.navigator.userAgent;
                                            if (-1 !== t.indexOf("MSIE ") || -1 !== t.indexOf("Trident/")) return !0
                                        } catch (t) {}
                                        return !1
                                    }() ? [{
                                        target: E,
                                        ignoreProperties: ["error"]
                                    }] : [];
                                Y(E, Ne.concat(["messageerror"]), c && c.concat(v), ye(E)), Y(Document.prototype, Ne, c), void 0 !== E.SVGElement && Y(E.SVGElement.prototype, Ne, c), Y(Element.prototype, Ne, c), Y(HTMLElement.prototype, Ne, c), Y(HTMLMediaElement.prototype, st, c), Y(HTMLFrameSetElement.prototype, Et.concat(De), c), Y(HTMLBodyElement.prototype, Et.concat(De), c), Y(HTMLFrameElement.prototype, le, c), Y(HTMLIFrameElement.prototype, le, c);
                                const C = E.HTMLMarqueeElement;
                                C && Y(C.prototype, Ee, c);
                                const w = E.Worker;
                                w && Y(w.prototype, Re, c)
                            }
                            const f = a.XMLHttpRequest;
                            f && Y(f.prototype, it, c);
                            const m = a.XMLHttpRequestEventTarget;
                            m && Y(m && m.prototype, it, c), "undefined" != typeof IDBIndex && (Y(IDBIndex.prototype, Pe, c), Y(IDBRequest.prototype, Pe, c), Y(IDBOpenDBRequest.prototype, Pe, c), Y(IDBDatabase.prototype, Pe, c), Y(IDBTransaction.prototype, Pe, c), Y(IDBCursor.prototype, Pe, c)), u && Y(WebSocket.prototype, at, c)
                        }(u, t)
                    }), Zone.__load_patch("customElements", (t, a, u) => {
                        ! function(t, a) {
                            const {
                                isBrowser: u,
                                isMix: c
                            } = a.getGlobalObjects();
                            (u || c) && t.customElements && "customElements" in t && a.patchCallbacks(a, t.customElements, "customElements", "define", ["connectedCallback", "disconnectedCallback", "adoptedCallback", "attributeChangedCallback"])
                        }(t, u)
                    }), Zone.__load_patch("XHR", (t, a) => {
                        ! function(w) {
                            const b = w.XMLHttpRequest;
                            if (!b) return;
                            const H = b.prototype;
                            let P = H[Qe],
                                G = H[et];
                            if (!P) {
                                const N = w.XMLHttpRequestEventTarget;
                                if (N) {
                                    const j = N.prototype;
                                    P = j[Qe], G = j[et]
                                }
                            }
                            const x = "readystatechange",
                                L = "scheduled";

                            function T(N) {
                                const j = N.data,
                                    O = j.target;
                                O[m] = !1, O[v] = !1;
                                const re = O[f];
                                P || (P = O[Qe], G = O[et]), re && G.call(O, x, re);
                                const Te = O[f] = () => {
                                    if (O.readyState === O.DONE)
                                        if (!j.aborted && O[m] && N.state === L) {
                                            const ue = O[a.__symbol__("loadfalse")];
                                            if (0 !== O.status && ue && ue.length > 0) {
                                                const fe = N.invoke;
                                                N.invoke = function() {
                                                    const W = O[a.__symbol__("loadfalse")];
                                                    for (let I = 0; I < W.length; I++) W[I] === N && W.splice(I, 1);
                                                    !j.aborted && N.state === L && fe.call(N)
                                                }, ue.push(N)
                                            } else N.invoke()
                                        } else !j.aborted && !1 === O[m] && (O[v] = !0)
                                };
                                return P.call(O, x, Te), O[u] || (O[u] = N), V.apply(O, j.args), O[m] = !0, N
                            }

                            function Z() {}

                            function z(N) {
                                const j = N.data;
                                return j.aborted = !0, K.apply(j.target, j.args)
                            }
                            const B = ae(H, "open", () => function(N, j) {
                                    return N[c] = 0 == j[2], N[E] = j[1], B.apply(N, j)
                                }),
                                R = U("fetchTaskAborting"),
                                Q = U("fetchTaskScheduling"),
                                V = ae(H, "send", () => function(N, j) {
                                    if (!0 === a.current[Q] || N[c]) return V.apply(N, j); {
                                        const O = {
                                                target: N,
                                                url: N[E],
                                                isPeriodic: !1,
                                                args: j,
                                                aborted: !1
                                            },
                                            re = lt("XMLHttpRequest.send", Z, O, T, z);
                                        N && !0 === N[v] && !O.aborted && re.state === L && re.invoke()
                                    }
                                }),
                                K = ae(H, "abort", () => function(N, j) {
                                    const O = function(N) {
                                        return N[u]
                                    }(N);
                                    if (O && "string" == typeof O.type) {
                                        if (null == O.cancelFn || O.data && O.data.aborted) return;
                                        O.zone.cancelTask(O)
                                    } else if (!0 === a.current[R]) return K.apply(N, j)
                                })
                        }(t);
                        const u = U("xhrTask"),
                            c = U("xhrSync"),
                            f = U("xhrListener"),
                            m = U("xhrScheduled"),
                            E = U("xhrURL"),
                            v = U("xhrErrorBeforeScheduled")
                    }), Zone.__load_patch("geolocation", t => {
                        t.navigator && t.navigator.geolocation && function(t, a) {
                            const u = t.constructor.name;
                            for (let c = 0; c < a.length; c++) {
                                const f = a[c],
                                    m = t[f];
                                if (m) {
                                    if (!ft(oe(t, f))) continue;
                                    t[f] = (v => {
                                        const C = function() {
                                            return v.apply(this, tt(arguments, u + "." + f))
                                        };
                                        return se(C, v), C
                                    })(m)
                                }
                            }
                        }(t.navigator.geolocation, ["getCurrentPosition", "watchPosition"])
                    }), Zone.__load_patch("PromiseRejectionEvent", (t, a) => {
                        function u(c) {
                            return function(f) {
                                kt(t, c).forEach(E => {
                                    const v = t.PromiseRejectionEvent;
                                    if (v) {
                                        const C = new v(c, {
                                            promise: f.promise,
                                            reason: f.rejection
                                        });
                                        E.invoke(C)
                                    }
                                })
                            }
                        }
                        t.PromiseRejectionEvent && (a[U("unhandledPromiseRejectionHandler")] = u("unhandledrejection"), a[U("rejectionHandledHandler")] = u("rejectionhandled"))
                    })
                },
                435: (X, oe, ge) => {
                    "use strict";
                    ge(277), ge(142)
                }
            },
            X => {
                X(X.s = 435)
            }
        ]);
        (self.webpackChunkbounding_box_renderer = self.webpackChunkbounding_box_renderer || []).push([
                    [179], {
                        255: zi => {
                            function Ee(Fn) {
                                return Promise.resolve().then(() => {
                                    var b = new Error("Cannot find module '" + Fn + "'");
                                    throw b.code = "MODULE_NOT_FOUND", b
                                })
                            }
                            Ee.keys = () => [], Ee.resolve = Ee, Ee.id = 255, zi.exports = Ee
                        },
                        258: (zi, Ee, Fn) => {
                            var v, f, m, d, a, u, b = b || {
                                version: "5.0.0"
                            };
                            if (Ee.fabric = b, "undefined" != typeof document && "undefined" != typeof window) b.document = document instanceof("undefined" != typeof HTMLDocument ? HTMLDocument : Document) ? document : document.implementation.createHTMLDocument(""), b.window = window;
                            else {
                                var Ht = new(Fn(450).JSDOM)(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"), {
                                    features: {
                                        FetchExternalResources: ["img"]
                                    },
                                    resources: "usable"
                                }).window;
                                b.document = Ht.document, b.jsdomImplForWrapper = Fn(529).implForWrapper, b.nodeCanvas = Fn(536).Canvas, b.window = Ht, DOMParser = b.window.DOMParser
                            }

                            function li(v, f) {
                                var m = v.canvas,
                                    d = f.targetCanvas,
                                    a = d.getContext("2d");
                                a.translate(0, d.height), a.scale(1, -1), a.drawImage(m, 0, m.height - d.height, d.width, d.height, 0, 0, d.width, d.height)
                            }

                            function qr(v, f) {
                                var d = f.targetCanvas.getContext("2d"),
                                    a = f.destinationWidth,
                                    u = f.destinationHeight,
                                    o = a * u * 4,
                                    h = new Uint8Array(this.imageBuffer, 0, o),
                                    p = new Uint8ClampedArray(this.imageBuffer, 0, o);
                                v.readPixels(0, 0, a, u, v.RGBA, v.UNSIGNED_BYTE, h);
                                var l = new ImageData(p, a, u);
                                d.putImageData(l, 0, 0)
                            }
                            b.isTouchSupported = "ontouchstart" in b.window || "ontouchstart" in b.document || b.window && b.window.navigator && b.window.navigator.maxTouchPoints > 0, b.isLikelyNode = "undefined" != typeof Buffer && "undefined" == typeof window, b.SHARED_ATTRIBUTES = ["display", "transform", "fill", "fill-opacity", "fill-rule", "opacity", "stroke", "stroke-dasharray", "stroke-linecap", "stroke-dashoffset", "stroke-linejoin", "stroke-miterlimit", "stroke-opacity", "stroke-width", "id", "paint-order", "vector-effect", "instantiated_by_use", "clip-path"], b.DPI = 96, b.reNum = "(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)", b.commaWsp = "(?:\\s+,?\\s*|,\\s*)", b.rePathCommand = /([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/gi, b.reNonWord = /[ \n\.,;!\?\-]/, b.fontPaths = {}, b.iMatrix = [1, 0, 0, 1, 0, 0], b.svgNS = "http://www.w3.org/2000/svg", b.perfLimitSizeTotal = 2097152, b.maxCacheSideLimit = 4096, b.minCacheSideLimit = 256, b.charWidthsCache = {}, b.textureSize = 2048, b.disableStyleCopyPaste = !1, b.enableGLFiltering = !0, b.devicePixelRatio = b.window.devicePixelRatio || b.window.webkitDevicePixelRatio || b.window.mozDevicePixelRatio || 1, b.browserShadowBlurConstant = 1, b.arcToSegmentsCache = {}, b.boundsOfCurveCache = {}, b.cachesBoundsOfCurve = !0, b.forceGLPutImageData = !1, b.initFilterBackend = function() {
                                    return b.enableGLFiltering && b.isWebglSupported && b.isWebglSupported(b.textureSize) ? (console.log("max texture size: " + b.maxTextureSize), new b.WebglFilterBackend({
                                        tileSize: b.textureSize
                                    })) : b.Canvas2dFilterBackend ? new b.Canvas2dFilterBackend : void 0
                                }, "undefined" != typeof document && "undefined" != typeof window && (window.fabric = b),
                                function() {
                                    function v(o, h) {
                                        if (this.__eventListeners[o]) {
                                            var p = this.__eventListeners[o];
                                            h ? p[p.indexOf(h)] = !1 : b.util.array.fill(p, !1)
                                        }
                                    }

                                    function m(o, h) {
                                        var p = function() {
                                            h.apply(this, arguments), this.off(o, p)
                                        }.bind(this);
                                        this.on(o, p)
                                    }
                                    b.Observable = {
                                        fire: function(o, h) {
                                            if (!this.__eventListeners) return this;
                                            var p = this.__eventListeners[o];
                                            if (!p) return this;
                                            for (var l = 0, y = p.length; l < y; l++) p[l] && p[l].call(this, h || {});
                                            return this.__eventListeners[o] = p.filter(function(C) {
                                                return !1 !== C
                                            }), this
                                        },
                                        on: function(o, h) {
                                            if (this.__eventListeners || (this.__eventListeners = {}), 1 === arguments.length)
                                                for (var p in o) this.on(p, o[p]);
                                            else this.__eventListeners[o] || (this.__eventListeners[o] = []), this.__eventListeners[o].push(h);
                                            return this
                                        },
                                        once: function(o, h) {
                                            if (1 === arguments.length)
                                                for (var p in o) m.call(this, p, o[p]);
                                            else m.call(this, o, h);
                                            return this
                                        },
                                        off: function(o, h) {
                                            if (!this.__eventListeners) return this;
                                            if (0 === arguments.length)
                                                for (o in this.__eventListeners) v.call(this, o);
                                            else if (1 === arguments.length && "object" == typeof arguments[0])
                                                for (var p in o) v.call(this, p, o[p]);
                                            else v.call(this, o, h);
                                            return this
                                        }
                                    }
                                }(), b.Collection = {
                                    _objects: [],
                                    add: function() {
                                        if (this._objects.push.apply(this._objects, arguments), this._onObjectAdded)
                                            for (var v = 0, f = arguments.length; v < f; v++) this._onObjectAdded(arguments[v]);
                                        return this.renderOnAddRemove && this.requestRenderAll(), this
                                    },
                                    insertAt: function(v, f, m) {
                                        var d = this._objects;
                                        return m ? d[f] = v : d.splice(f, 0, v), this._onObjectAdded && this._onObjectAdded(v), this.renderOnAddRemove && this.requestRenderAll(), this
                                    },
                                    remove: function() {
                                        for (var f, v = this._objects, m = !1, d = 0, a = arguments.length; d < a; d++) - 1 !== (f = v.indexOf(arguments[d])) && (m = !0, v.splice(f, 1), this._onObjectRemoved && this._onObjectRemoved(arguments[d]));
                                        return this.renderOnAddRemove && m && this.requestRenderAll(), this
                                    },
                                    forEachObject: function(v, f) {
                                        for (var m = this.getObjects(), d = 0, a = m.length; d < a; d++) v.call(f, m[d], d, m);
                                        return this
                                    },
                                    getObjects: function(v) {
                                        return void 0 === v ? this._objects.concat() : this._objects.filter(function(f) {
                                            return f.type === v
                                        })
                                    },
                                    item: function(v) {
                                        return this._objects[v]
                                    },
                                    isEmpty: function() {
                                        return 0 === this._objects.length
                                    },
                                    size: function() {
                                        return this._objects.length
                                    },
                                    contains: function(v, f) {
                                        return this._objects.indexOf(v) > -1 || !!f && this._objects.some(function(m) {
                                            return "function" == typeof m.contains && m.contains(v, !0)
                                        })
                                    },
                                    complexity: function() {
                                        return this._objects.reduce(function(v, f) {
                                            return v + (f.complexity ? f.complexity() : 0)
                                        }, 0)
                                    }
                                }, b.CommonMethods = {
                                    _setOptions: function(v) {
                                        for (var f in v) this.set(f, v[f])
                                    },
                                    _initGradient: function(v, f) {
                                        v && v.colorStops && !(v instanceof b.Gradient) && this.set(f, new b.Gradient(v))
                                    },
                                    _initPattern: function(v, f, m) {
                                        !v || !v.source || v instanceof b.Pattern ? m && m() : this.set(f, new b.Pattern(v, m))
                                    },
                                    _setObject: function(v) {
                                        for (var f in v) this._set(f, v[f])
                                    },
                                    set: function(v, f) {
                                        return "object" == typeof v ? this._setObject(v) : this._set(v, f), this
                                    },
                                    _set: function(v, f) {
                                        this[v] = f
                                    },
                                    toggle: function(v) {
                                        var f = this.get(v);
                                        return "boolean" == typeof f && this.set(v, !f), this
                                    },
                                    get: function(v) {
                                        return this[v]
                                    }
                                }, v = Ee, f = Math.sqrt, m = Math.atan2, d = Math.pow, a = Math.PI / 180, u = Math.PI / 2, b.util = {
                                    cos: function(o) {
                                        if (0 === o) return 1;
                                        switch (o < 0 && (o = -o), o / u) {
                                            case 1:
                                            case 3:
                                                return 0;
                                            case 2:
                                                return -1
                                        }
                                        return Math.cos(o)
                                    },
                                    sin: function(o) {
                                        if (0 === o) return 0;
                                        var p = 1;
                                        switch (o < 0 && (p = -1), o / u) {
                                            case 1:
                                                return p;
                                            case 2:
                                                return 0;
                                            case 3:
                                                return -p
                                        }
                                        return Math.sin(o)
                                    },
                                    removeFromArray: function(o, h) {
                                        var p = o.indexOf(h);
                                        return -1 !== p && o.splice(p, 1), o
                                    },
                                    getRandomInt: function(o, h) {
                                        return Math.floor(Math.random() * (h - o + 1)) + o
                                    },
                                    degreesToRadians: function(o) {
                                        return o * a
                                    },
                                    radiansToDegrees: function(o) {
                                        return o / a
                                    },
                                    rotatePoint: function(o, h, p) {
                                        var l = new b.Point(o.x - h.x, o.y - h.y),
                                            y = b.util.rotateVector(l, p);
                                        return new b.Point(y.x, y.y).addEquals(h)
                                    },
                                    rotateVector: function(o, h) {
                                        var p = b.util.sin(h),
                                            l = b.util.cos(h);
                                        return {
                                            x: o.x * l - o.y * p,
                                            y: o.x * p + o.y * l
                                        }
                                    },
                                    createVector: function(o, h) {
                                        return new b.Point(h.x - o.x, h.y - o.y)
                                    },
                                    calcAngleBetweenVectors: function(o, h) {
                                        return Math.acos((o.x * h.x + o.y * h.y) / (Math.hypot(o.x, o.y) * Math.hypot(h.x, h.y)))
                                    },
                                    getHatVector: function(o) {
                                        return new b.Point(o.x, o.y).multiply(1 / Math.hypot(o.x, o.y))
                                    },
                                    getBisector: function(o, h, p) {
                                        var l = b.util.createVector(o, h),
                                            y = b.util.createVector(o, p),
                                            C = b.util.calcAngleBetweenVectors(l, y),
                                            D = b.util.calcAngleBetweenVectors(b.util.rotateVector(l, C), y);
                                        return {
                                            vector: b.util.getHatVector(b.util.rotateVector(l, C * (0 === D ? 1 : -1) / 2)),
                                            angle: C
                                        }
                                    },
                                    projectStrokeOnPoints: function(o, h, p) {
                                        var l = [],
                                            y = h.strokeWidth / 2,
                                            C = h.strokeUniform ? new b.Point(1 / h.scaleX, 1 / h.scaleY) : new b.Point(1, 1),
                                            D = function(E) {
                                                var T = y / Math.hypot(E.x, E.y);
                                                return new b.Point(E.x * T * C.x, E.y * T * C.y)
                                            };
                                        return o.length <= 1 || o.forEach(function(E, T) {
                                            var F, B, I = new b.Point(E.x, E.y);
                                            0 === T ? (B = o[T + 1], F = p ? D(b.util.createVector(B, I)).addEquals(I) : o[o.length - 1]) : T === o.length - 1 ? (F = o[T - 1], B = p ? D(b.util.createVector(F, I)).addEquals(I) : o[0]) : (F = o[T - 1], B = o[T + 1]);
                                            var ue, de, G = b.util.getBisector(I, F, B),
                                                ie = G.vector;
                                            if ("miter" === h.strokeLineJoin && (ue = -y / Math.sin(G.angle / 2), de = new b.Point(ie.x * ue * C.x, ie.y * ue * C.y), Math.hypot(de.x, de.y) / y <= h.strokeMiterLimit)) return l.push(I.add(de)), void l.push(I.subtract(de));
                                            ue = -y * Math.SQRT2, de = new b.Point(ie.x * ue * C.x, ie.y * ue * C.y), l.push(I.add(de)), l.push(I.subtract(de))
                                        }), l
                                    },
                                    transformPoint: function(o, h, p) {
                                        return p ? new b.Point(h[0] * o.x + h[2] * o.y, h[1] * o.x + h[3] * o.y) : new b.Point(h[0] * o.x + h[2] * o.y + h[4], h[1] * o.x + h[3] * o.y + h[5])
                                    },
                                    makeBoundingBoxFromPoints: function(o, h) {
                                        if (h)
                                            for (var p = 0; p < o.length; p++) o[p] = b.util.transformPoint(o[p], h);
                                        var l = [o[0].x, o[1].x, o[2].x, o[3].x],
                                            y = b.util.array.min(l),
                                            D = b.util.array.max(l) - y,
                                            E = [o[0].y, o[1].y, o[2].y, o[3].y],
                                            T = b.util.array.min(E);
                                        return {
                                            left: y,
                                            top: T,
                                            width: D,
                                            height: b.util.array.max(E) - T
                                        }
                                    },
                                    invertTransform: function(o) {
                                        var h = 1 / (o[0] * o[3] - o[1] * o[2]),
                                            p = [h * o[3], -h * o[1], -h * o[2], h * o[0]],
                                            l = b.util.transformPoint({
                                                x: o[4],
                                                y: o[5]
                                            }, p, !0);
                                        return p[4] = -l.x, p[5] = -l.y, p
                                    },
                                    toFixed: function(o, h) {
                                        return parseFloat(Number(o).toFixed(h))
                                    },
                                    parseUnit: function(o, h) {
                                        var p = /\D{0,2}$/.exec(o),
                                            l = parseFloat(o);
                                        switch (h || (h = b.Text.DEFAULT_SVG_FONT_SIZE), p[0]) {
                                            case "mm":
                                                return l * b.DPI / 25.4;
                                            case "cm":
                                                return l * b.DPI / 2.54;
                                            case "in":
                                                return l * b.DPI;
                                            case "pt":
                                                return l * b.DPI / 72;
                                            case "pc":
                                                return l * b.DPI / 72 * 12;
                                            case "em":
                                                return l * h;
                                            default:
                                                return l
                                        }
                                    },
                                    falseFunction: function() {
                                        return !1
                                    },
                                    getKlass: function(o, h) {
                                        return o = b.util.string.camelize(o.charAt(0).toUpperCase() + o.slice(1)), b.util.resolveNamespace(h)[o]
                                    },
                                    getSvgAttributes: function(o) {
                                        var h = ["instantiated_by_use", "style", "id", "class"];
                                        switch (o) {
                                            case "linearGradient":
                                                h = h.concat(["x1", "y1", "x2", "y2", "gradientUnits", "gradientTransform"]);
                                                break;
                                            case "radialGradient":
                                                h = h.concat(["gradientUnits", "gradientTransform", "cx", "cy", "r", "fx", "fy", "fr"]);
                                                break;
                                            case "stop":
                                                h = h.concat(["offset", "stop-color", "stop-opacity"])
                                        }
                                        return h
                                    },
                                    resolveNamespace: function(o) {
                                        if (!o) return b;
                                        var l, h = o.split("."),
                                            p = h.length,
                                            y = v || b.window;
                                        for (l = 0; l < p; ++l) y = y[h[l]];
                                        return y
                                    },
                                    loadImage: function(o, h, p, l) {
                                        if (o) {
                                            var y = b.util.createImage(),
                                                C = function() {
                                                    h && h.call(p, y, !1), y = y.onload = y.onerror = null
                                                };
                                            y.onload = C, y.onerror = function() {
                                                b.log("Error loading " + y.src), h && h.call(p, null, !0), y = y.onload = y.onerror = null
                                            }, 0 !== o.indexOf("data") && null != l && (y.crossOrigin = l), "data:image/svg" === o.substring(0, 14) && (y.onload = null, b.util.loadImageInDom(y, C)), y.src = o
                                        } else h && h.call(p, o)
                                    },
                                    loadImageInDom: function(o, h) {
                                        var p = b.document.createElement("div");
                                        p.style.width = p.style.height = "1px", p.style.left = p.style.top = "-100%", p.style.position = "absolute", p.appendChild(o), b.document.querySelector("body").appendChild(p), o.onload = function() {
                                            h(), p.parentNode.removeChild(p), p = null
                                        }
                                    },
                                    enlivenObjects: function(o, h, p, l) {
                                        var y = [],
                                            C = 0,
                                            D = (o = o || []).length;

                                        function E() {
                                            ++C === D && h && h(y.filter(function(T) {
                                                return T
                                            }))
                                        }
                                        D ? o.forEach(function(T, I) {
                                            T && T.type ? b.util.getKlass(T.type, p).fromObject(T, function(B, G) {
                                                G || (y[I] = B), l && l(T, B, G), E()
                                            }) : E()
                                        }) : h && h(y)
                                    },
                                    enlivenObjectEnlivables: function(o, h, p) {
                                        var l = b.Object.ENLIVEN_PROPS.filter(function(y) {
                                            return !!o[y]
                                        });
                                        b.util.enlivenObjects(l.map(function(y) {
                                            return o[y]
                                        }), function(y) {
                                            var C = {};
                                            l.forEach(function(D, E) {
                                                C[D] = y[E], h && (h[D] = y[E])
                                            }), p && p(C)
                                        })
                                    },
                                    enlivenPatterns: function(o, h) {
                                        function p() {
                                            ++y === C && h && h(l)
                                        }
                                        var l = [],
                                            y = 0,
                                            C = (o = o || []).length;
                                        C ? o.forEach(function(D, E) {
                                            D && D.source ? new b.Pattern(D, function(T) {
                                                l[E] = T, p()
                                            }) : (l[E] = D, p())
                                        }) : h && h(l)
                                    },
                                    groupSVGElements: function(o, h, p) {
                                        var l;
                                        return o && 1 === o.length ? o[0] : (h && (h.width && h.height ? h.centerPoint = {
                                            x: h.width / 2,
                                            y: h.height / 2
                                        } : (delete h.width, delete h.height)), l = new b.Group(o, h), void 0 !== p && (l.sourcePath = p), l)
                                    },
                                    populateWithProperties: function(o, h, p) {
                                        if (p && "[object Array]" === Object.prototype.toString.call(p))
                                            for (var l = 0, y = p.length; l < y; l++) p[l] in o && (h[p[l]] = o[p[l]])
                                    },
                                    createCanvasElement: function() {
                                        return b.document.createElement("canvas")
                                    },
                                    copyCanvasElement: function(o) {
                                        var h = b.util.createCanvasElement();
                                        return h.width = o.width, h.height = o.height, h.getContext("2d").drawImage(o, 0, 0), h
                                    },
                                    toDataURL: function(o, h, p) {
                                        return o.toDataURL("image/" + h, p)
                                    },
                                    createImage: function() {
                                        return b.document.createElement("img")
                                    },
                                    multiplyTransformMatrices: function(o, h, p) {
                                        return [o[0] * h[0] + o[2] * h[1], o[1] * h[0] + o[3] * h[1], o[0] * h[2] + o[2] * h[3], o[1] * h[2] + o[3] * h[3], p ? 0 : o[0] * h[4] + o[2] * h[5] + o[4], p ? 0 : o[1] * h[4] + o[3] * h[5] + o[5]]
                                    },
                                    qrDecompose: function(o) {
                                        var h = m(o[1], o[0]),
                                            p = d(o[0], 2) + d(o[1], 2),
                                            l = f(p),
                                            y = (o[0] * o[3] - o[2] * o[1]) / l,
                                            C = m(o[0] * o[2] + o[1] * o[3], p);
                                        return {
                                            angle: h / a,
                                            scaleX: l,
                                            scaleY: y,
                                            skewX: C / a,
                                            skewY: 0,
                                            translateX: o[4],
                                            translateY: o[5]
                                        }
                                    },
                                    calcRotateMatrix: function(o) {
                                        if (!o.angle) return b.iMatrix.concat();
                                        var h = b.util.degreesToRadians(o.angle),
                                            p = b.util.cos(h),
                                            l = b.util.sin(h);
                                        return [p, l, -l, p, 0, 0]
                                    },
                                    calcDimensionsMatrix: function(o) {
                                        var h = void 0 === o.scaleX ? 1 : o.scaleX,
                                            p = void 0 === o.scaleY ? 1 : o.scaleY,
                                            l = [o.flipX ? -h : h, 0, 0, o.flipY ? -p : p, 0, 0],
                                            y = b.util.multiplyTransformMatrices,
                                            C = b.util.degreesToRadians;
                                        return o.skewX && (l = y(l, [1, 0, Math.tan(C(o.skewX)), 1], !0)), o.skewY && (l = y(l, [1, Math.tan(C(o.skewY)), 0, 1], !0)), l
                                    },
                                    composeMatrix: function(o) {
                                        var h = [1, 0, 0, 1, o.translateX || 0, o.translateY || 0],
                                            p = b.util.multiplyTransformMatrices;
                                        return o.angle && (h = p(h, b.util.calcRotateMatrix(o))), (1 !== o.scaleX || 1 !== o.scaleY || o.skewX || o.skewY || o.flipX || o.flipY) && (h = p(h, b.util.calcDimensionsMatrix(o))), h
                                    },
                                    resetObjectTransform: function(o) {
                                        o.scaleX = 1, o.scaleY = 1, o.skewX = 0, o.skewY = 0, o.flipX = !1, o.flipY = !1, o.rotate(0)
                                    },
                                    saveObjectTransform: function(o) {
                                        return {
                                            scaleX: o.scaleX,
                                            scaleY: o.scaleY,
                                            skewX: o.skewX,
                                            skewY: o.skewY,
                                            angle: o.angle,
                                            left: o.left,
                                            flipX: o.flipX,
                                            flipY: o.flipY,
                                            top: o.top
                                        }
                                    },
                                    isTransparent: function(o, h, p, l) {
                                        l > 0 && (h > l ? h -= l : h = 0, p > l ? p -= l : p = 0);
                                        var C, y = !0,
                                            E = o.getImageData(h, p, 2 * l || 1, 2 * l || 1),
                                            T = E.data.length;
                                        for (C = 3; C < T && 0 != (y = E.data[C] <= 0); C += 4);
                                        return E = null, y
                                    },
                                    parsePreserveAspectRatioAttribute: function(o) {
                                        var C, h = "meet",
                                            y = o.split(" ");
                                        return y && y.length && ("meet" !== (h = y.pop()) && "slice" !== h ? (C = h, h = "meet") : y.length && (C = y.pop())), {
                                            meetOrSlice: h,
                                            alignX: "none" !== C ? C.slice(1, 4) : "none",
                                            alignY: "none" !== C ? C.slice(5, 8) : "none"
                                        }
                                    },
                                    clearFabricFontCache: function(o) {
                                        (o = (o || "").toLowerCase()) ? b.charWidthsCache[o] && delete b.charWidthsCache[o]: b.charWidthsCache = {}
                                    },
                                    limitDimsByArea: function(o, h) {
                                        var p = Math.sqrt(h * o),
                                            l = Math.floor(h / p);
                                        return {
                                            x: Math.floor(p),
                                            y: l
                                        }
                                    },
                                    capValue: function(o, h, p) {
                                        return Math.max(o, Math.min(h, p))
                                    },
                                    findScaleToFit: function(o, h) {
                                        return Math.min(h.width / o.width, h.height / o.height)
                                    },
                                    findScaleToCover: function(o, h) {
                                        return Math.max(h.width / o.width, h.height / o.height)
                                    },
                                    matrixToSVG: function(o) {
                                        return "matrix(" + o.map(function(h) {
                                            return b.util.toFixed(h, b.Object.NUM_FRACTION_DIGITS)
                                        }).join(" ") + ")"
                                    },
                                    removeTransformFromObject: function(o, h) {
                                        var p = b.util.invertTransform(h),
                                            l = b.util.multiplyTransformMatrices(p, o.calcOwnMatrix());
                                        b.util.applyTransformToObject(o, l)
                                    },
                                    addTransformToObject: function(o, h) {
                                        b.util.applyTransformToObject(o, b.util.multiplyTransformMatrices(h, o.calcOwnMatrix()))
                                    },
                                    applyTransformToObject: function(o, h) {
                                        var p = b.util.qrDecompose(h),
                                            l = new b.Point(p.translateX, p.translateY);
                                        o.flipX = !1, o.flipY = !1, o.set("scaleX", p.scaleX), o.set("scaleY", p.scaleY), o.skewX = p.skewX, o.skewY = p.skewY, o.angle = p.angle, o.setPositionByOrigin(l, "center", "center")
                                    },
                                    sizeAfterTransform: function(o, h, p) {
                                        var l = o / 2,
                                            y = h / 2,
                                            C = [{
                                                x: -l,
                                                y: -y
                                            }, {
                                                x: l,
                                                y: -y
                                            }, {
                                                x: -l,
                                                y
                                            }, {
                                                x: l,
                                                y
                                            }],
                                            D = b.util.calcDimensionsMatrix(p),
                                            E = b.util.makeBoundingBoxFromPoints(C, D);
                                        return {
                                            x: E.width,
                                            y: E.height
                                        }
                                    },
                                    mergeClipPaths: function(o, h) {
                                        var p = o,
                                            l = h;
                                        p.inverted && !l.inverted && (p = h, l = o), b.util.applyTransformToObject(l, b.util.multiplyTransformMatrices(b.util.invertTransform(p.calcTransformMatrix()), l.calcTransformMatrix()));
                                        var y = p.inverted && l.inverted;
                                        return y && (p.inverted = l.inverted = !1), new b.Group([p], {
                                            clipPath: l,
                                            inverted: y
                                        })
                                    }
                                },
                                function() {
                                    var v = Array.prototype.join,
                                        f = {
                                            m: 2,
                                            l: 2,
                                            h: 1,
                                            v: 1,
                                            c: 6,
                                            s: 4,
                                            q: 4,
                                            t: 2,
                                            a: 7
                                        },
                                        m = {
                                            m: "l",
                                            M: "L"
                                        };

                                    function d(O, N, k, L, $, R, A, V, W, Q, z) {
                                        var te = b.util.cos(O),
                                            oe = b.util.sin(O),
                                            ce = b.util.cos(N),
                                            X = b.util.sin(N),
                                            U = k * $ * ce - L * R * X + A,
                                            J = L * $ * ce + k * R * X + V;
                                        return ["C", Q + W * (-k * $ * oe - L * R * te), z + W * (-L * $ * oe + k * R * te), U + W * (k * $ * X + L * R * ce), J + W * (L * $ * X - k * R * ce), U, J]
                                    }

                                    function u(O, N, k, L) {
                                        var $ = Math.atan2(N, O),
                                            R = Math.atan2(L, k);
                                        return R >= $ ? R - $ : 2 * Math.PI - ($ - R)
                                    }

                                    function h(O, N, k) {
                                        for (var z = function(O, N, k, L, $, R, A) {
                                                var V = Math.PI,
                                                    W = A * V / 180,
                                                    Q = b.util.sin(W),
                                                    z = b.util.cos(W),
                                                    te = 0,
                                                    oe = 0,
                                                    ce = -z * O * .5 - Q * N * .5,
                                                    X = -z * N * .5 + Q * O * .5,
                                                    U = (k = Math.abs(k)) * k,
                                                    J = (L = Math.abs(L)) * L,
                                                    ee = X * X,
                                                    q = ce * ce,
                                                    ne = U * J - U * ee - J * q,
                                                    he = 0;
                                                if (ne < 0) {
                                                    var Ie = Math.sqrt(1 - ne / (U * J));
                                                    k *= Ie, L *= Ie
                                                } else he = ($ === R ? -1 : 1) * Math.sqrt(ne / (U * ee + J * q));
                                                var ve = he * k * X / L,
                                                    Z = -he * L * ce / k,
                                                    Ce = z * ve - Q * Z + .5 * O,
                                                    Re = Q * ve + z * Z + .5 * N,
                                                    Ue = u(1, 0, (ce - ve) / k, (X - Z) / L),
                                                    Ze = u((ce - ve) / k, (X - Z) / L, (-ce - ve) / k, (-X - Z) / L);
                                                0 === R && Ze > 0 ? Ze -= 2 * V : 1 === R && Ze < 0 && (Ze += 2 * V);
                                                for (var Ge = Math.ceil(Math.abs(Ze / V * 2)), wt = [], at = Ze / Ge, $n = 8 / 3 * Math.sin(at / 4) * Math.sin(at / 4) / Math.sin(at / 2), Ei = Ue + at, Jt = 0; Jt < Ge; Jt++) wt[Jt] = d(Ue, Ei, z, Q, k, L, Ce, Re, $n, te, oe), te = wt[Jt][5], oe = wt[Jt][6], Ue = Ei, Ei += at;
                                                return wt
                                            }(k[6] - O, k[7] - N, k[1], k[2], k[4], k[5], k[3]), te = 0, oe = z.length; te < oe; te++) z[te][1] += O, z[te][2] += N, z[te][3] += O, z[te][4] += N, z[te][5] += O, z[te][6] += N;
                                        return z
                                    }

                                    function l(O, N, k, L) {
                                        return Math.sqrt((k - O) * (k - O) + (L - N) * (L - N))
                                    }

                                    function T(O, N, k, L, $, R, A, V) {
                                        return function(W) {
                                            var Q = function(O) {
                                                    return O * O * O
                                                }(W),
                                                z = function(O) {
                                                    return 3 * O * O * (1 - O)
                                                }(W),
                                                te = function(O) {
                                                    return 3 * O * (1 - O) * (1 - O)
                                                }(W),
                                                oe = function(O) {
                                                    return (1 - O) * (1 - O) * (1 - O)
                                                }(W);
                                            return {
                                                x: A * Q + $ * z + k * te + O * oe,
                                                y: V * Q + R * z + L * te + N * oe
                                            }
                                        }
                                    }

                                    function I(O, N, k, L, $, R, A, V) {
                                        return function(W) {
                                            var Q = 1 - W;
                                            return Math.atan2(3 * Q * Q * (L - N) + 6 * Q * W * (R - L) + 3 * W * W * (V - R), 3 * Q * Q * (k - O) + 6 * Q * W * ($ - k) + 3 * W * W * (A - $))
                                        }
                                    }

                                    function ie(O, N, k, L, $, R) {
                                        return function(A) {
                                            var V = function(O) {
                                                    return O * O
                                                }(A),
                                                W = function(O) {
                                                    return 2 * O * (1 - O)
                                                }(A),
                                                Q = function(O) {
                                                    return (1 - O) * (1 - O)
                                                }(A);
                                            return {
                                                x: $ * V + k * W + O * Q,
                                                y: R * V + L * W + N * Q
                                            }
                                        }
                                    }

                                    function le(O, N, k, L, $, R) {
                                        return function(A) {
                                            var V = 1 - A;
                                            return Math.atan2(2 * V * (L - N) + 2 * A * (R - L), 2 * V * (k - O) + 2 * A * ($ - k))
                                        }
                                    }

                                    function ue(O, N, k) {
                                        var $, A, L = {
                                                x: N,
                                                y: k
                                            },
                                            R = 0;
                                        for (A = 1; A <= 100; A += 1) $ = O(A / 100), R += l(L.x, L.y, $.x, $.y), L = $;
                                        return R
                                    }

                                    function fe(O) {
                                        for (var L, Q, z, te, N = 0, k = O.length, $ = 0, R = 0, A = 0, V = 0, W = [], oe = 0; oe < k; oe++) {
                                            switch (z = {
                                                x: $,
                                                y: R,
                                                command: (L = O[oe])[0]
                                            }, L[0]) {
                                                case "M":
                                                    z.length = 0, A = $ = L[1], V = R = L[2];
                                                    break;
                                                case "L":
                                                    z.length = l($, R, L[1], L[2]), $ = L[1], R = L[2];
                                                    break;
                                                case "C":
                                                    Q = T($, R, L[1], L[2], L[3], L[4], L[5], L[6]), te = I($, R, L[1], L[2], L[3], L[4], L[5], L[6]), z.iterator = Q, z.angleFinder = te, z.length = ue(Q, $, R), $ = L[5], R = L[6];
                                                    break;
                                                case "Q":
                                                    Q = ie($, R, L[1], L[2], L[3], L[4]), te = le($, R, L[1], L[2], L[3], L[4]), z.iterator = Q, z.angleFinder = te, z.length = ue(Q, $, R), $ = L[3], R = L[4];
                                                    break;
                                                case "Z":
                                                case "z":
                                                    z.destX = A, z.destY = V, z.length = l($, R, A, V), $ = A, R = V
                                            }
                                            N += z.length, W.push(z)
                                        }
                                        return W.push({
                                            length: N,
                                            x: $,
                                            y: R
                                        }), W
                                    }
                                    b.util.joinPath = function(O) {
                                        return O.map(function(N) {
                                            return N.join(" ")
                                        }).join(" ")
                                    }, b.util.parsePath = function(O) {
                                        var L, $, te, oe, ce, N = [],
                                            k = [],
                                            R = b.rePathCommand,
                                            A = "[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?\\s*",
                                            V = "(" + A + ")" + b.commaWsp,
                                            W = "([01])" + b.commaWsp + "?",
                                            z = new RegExp(V + "?" + V + "?" + V + W + W + V + "?(" + A + ")", "g");
                                        if (!O || !O.match) return N;
                                        for (var U, X = 0, J = (ce = O.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi)).length; X < J; X++) {
                                            oe = (L = ce[X]).slice(1).trim(), k.length = 0;
                                            var ee = L.charAt(0);
                                            if (U = [ee], "a" === ee.toLowerCase())
                                                for (var q; q = z.exec(oe);)
                                                    for (var ne = 1; ne < q.length; ne++) k.push(q[ne]);
                                            else
                                                for (; te = R.exec(oe);) k.push(te[0]);
                                            ne = 0;
                                            for (var he = k.length; ne < he; ne++) $ = parseFloat(k[ne]), isNaN($) || U.push($);
                                            var Ie = f[ee.toLowerCase()],
                                                ve = m[ee] || ee;
                                            if (U.length - 1 > Ie)
                                                for (var Z = 1, Ce = U.length; Z < Ce; Z += Ie) N.push([ee].concat(U.slice(Z, Z + Ie))), ee = ve;
                                            else N.push(U)
                                        }
                                        return N
                                    }, b.util.makePathSimpler = function(O) {
                                        var A, V, W, z, te, oe, N = 0,
                                            k = 0,
                                            L = O.length,
                                            $ = 0,
                                            R = 0,
                                            Q = [];
                                        for (V = 0; V < L; ++V) {
                                            switch (W = !1, (A = O[V].slice(0))[0]) {
                                                case "l":
                                                    A[0] = "L", A[1] += N, A[2] += k;
                                                case "L":
                                                    N = A[1], k = A[2];
                                                    break;
                                                case "h":
                                                    A[1] += N;
                                                case "H":
                                                    A[0] = "L", A[2] = k, N = A[1];
                                                    break;
                                                case "v":
                                                    A[1] += k;
                                                case "V":
                                                    A[0] = "L", k = A[1], A[1] = N, A[2] = k;
                                                    break;
                                                case "m":
                                                    A[0] = "M", A[1] += N, A[2] += k;
                                                case "M":
                                                    N = A[1], k = A[2], $ = A[1], R = A[2];
                                                    break;
                                                case "c":
                                                    A[0] = "C", A[1] += N, A[2] += k, A[3] += N, A[4] += k, A[5] += N, A[6] += k;
                                                case "C":
                                                    te = A[3], oe = A[4], N = A[5], k = A[6];
                                                    break;
                                                case "s":
                                                    A[0] = "S", A[1] += N, A[2] += k, A[3] += N, A[4] += k;
                                                case "S":
                                                    "C" === z ? (te = 2 * N - te, oe = 2 * k - oe) : (te = N, oe = k), N = A[3], k = A[4], A[0] = "C", A[5] = A[3], A[6] = A[4], A[3] = A[1], A[4] = A[2], A[1] = te, A[2] = oe, te = A[3], oe = A[4];
                                                    break;
                                                case "q":
                                                    A[0] = "Q", A[1] += N, A[2] += k, A[3] += N, A[4] += k;
                                                case "Q":
                                                    te = A[1], oe = A[2], N = A[3], k = A[4];
                                                    break;
                                                case "t":
                                                    A[0] = "T", A[1] += N, A[2] += k;
                                                case "T":
                                                    "Q" === z ? (te = 2 * N - te, oe = 2 * k - oe) : (te = N, oe = k), A[0] = "Q", N = A[1], k = A[2], A[1] = te, A[2] = oe, A[3] = N, A[4] = k;
                                                    break;
                                                case "a":
                                                    A[0] = "A", A[6] += N, A[7] += k;
                                                case "A":
                                                    W = !0, Q = Q.concat(h(N, k, A)), N = A[6], k = A[7];
                                                    break;
                                                case "z":
                                                case "Z":
                                                    N = $, k = R
                                            }
                                            W || Q.push(A), z = A[0]
                                        }
                                        return Q
                                    }, b.util.getSmoothPathFromPoints = function(O, N) {
                                        var L, k = [],
                                            $ = new b.Point(O[0].x, O[0].y),
                                            R = new b.Point(O[1].x, O[1].y),
                                            A = O.length,
                                            V = 1,
                                            W = 0,
                                            Q = A > 2;
                                        for (Q && (V = O[2].x < R.x ? -1 : O[2].x === R.x ? 0 : 1, W = O[2].y < R.y ? -1 : O[2].y === R.y ? 0 : 1), k.push(["M", $.x - V * (N = N || 0), $.y - W * N]), L = 1; L < A; L++) {
                                            if (!$.eq(R)) {
                                                var z = $.midPointFrom(R);
                                                k.push(["Q", $.x, $.y, z.x, z.y])
                                            }
                                            $ = O[L], L + 1 < O.length && (R = O[L + 1])
                                        }
                                        return Q && (V = $.x > O[L - 2].x ? 1 : $.x === O[L - 2].x ? 0 : -1, W = $.y > O[L - 2].y ? 1 : $.y === O[L - 2].y ? 0 : -1), k.push(["L", $.x + V * N, $.y + W * N]), k
                                    }, b.util.getPathSegmentsInfo = fe, b.util.getBoundsOfCurve = function(O, N, k, L, $, R, A, V) {
                                        var W;
                                        if (b.cachesBoundsOfCurve && (W = v.call(arguments), b.boundsOfCurveCache[W])) return b.boundsOfCurveCache[W];
                                        var U, J, ee, q, ne, he, Ie, ve, Q = Math.sqrt,
                                            z = Math.min,
                                            te = Math.max,
                                            oe = Math.abs,
                                            ce = [],
                                            X = [
                                                [],
                                                []
                                            ];
                                        J = 6 * O - 12 * k + 6 * $, U = -3 * O + 9 * k - 9 * $ + 3 * A, ee = 3 * k - 3 * O;
                                        for (var Z = 0; Z < 2; ++Z)
                                            if (Z > 0 && (J = 6 * N - 12 * L + 6 * R, U = -3 * N + 9 * L - 9 * R + 3 * V, ee = 3 * L - 3 * N), oe(U) < 1e-12) {
                                                if (oe(J) < 1e-12) continue;
                                                0 < (q = -ee / J) && q < 1 && ce.push(q)
                                            } else !((Ie = J * J - 4 * ee * U) < 0) && (0 < (ne = (-J + (ve = Q(Ie))) / (2 * U)) && ne < 1 && ce.push(ne), 0 < (he = (-J - ve) / (2 * U)) && he < 1 && ce.push(he));
                                        for (var Ge, Ue = ce.length, Ze = Ue; Ue--;) X[0][Ue] = (Ge = 1 - (q = ce[Ue])) * Ge * Ge * O + 3 * Ge * Ge * q * k + 3 * Ge * q * q * $ + q * q * q * A, X[1][Ue] = Ge * Ge * Ge * N + 3 * Ge * Ge * q * L + 3 * Ge * q * q * R + q * q * q * V;
                                        X[0][Ze] = O, X[1][Ze] = N, X[0][Ze + 1] = A, X[1][Ze + 1] = V;
                                        var wt = [{
                                            x: z.apply(null, X[0]),
                                            y: z.apply(null, X[1])
                                        }, {
                                            x: te.apply(null, X[0]),
                                            y: te.apply(null, X[1])
                                        }];
                                        return b.cachesBoundsOfCurve && (b.boundsOfCurveCache[W] = wt), wt
                                    }, b.util.getPointOnPath = function(O, N, k) {
                                        k || (k = fe(O));
                                        for (var L = 0; N - k[L].length > 0 && L < k.length - 2;) N -= k[L].length, L++;
                                        var W, $ = k[L],
                                            R = N / $.length,
                                            V = O[L];
                                        switch ($.command) {
                                            case "M":
                                                return {
                                                    x: $.x,
                                                    y: $.y,
                                                    angle: 0
                                                };
                                            case "Z":
                                            case "z":
                                                return (W = new b.Point($.x, $.y).lerp(new b.Point($.destX, $.destY), R)).angle = Math.atan2($.destY - $.y, $.destX - $.x), W;
                                            case "L":
                                                return (W = new b.Point($.x, $.y).lerp(new b.Point(V[1], V[2]), R)).angle = Math.atan2(V[2] - $.y, V[1] - $.x), W;
                                            case "C":
                                            case "Q":
                                                return function(O, N) {
                                                    for (var A, V, z, k = 0, L = 0, $ = O.iterator, R = {
                                                            x: O.x,
                                                            y: O.y
                                                        }, W = .01, Q = O.angleFinder; L < N && W > 1e-4;) A = $(k), z = k, (V = l(R.x, R.y, A.x, A.y)) + L > N ? (k -= W, W /= 2) : (R = A, k += W, L += V);
                                                    return A.angle = Q(z), A
                                                }($, N)
                                        }
                                    }, b.util.transformPath = function(O, N, k) {
                                        return k && (N = b.util.multiplyTransformMatrices(N, [1, 0, 0, 1, -k.x, -k.y])), O.map(function(L) {
                                            for (var $ = L.slice(0), R = {}, A = 1; A < L.length - 1; A += 2) R.x = L[A], R.y = L[A + 1], R = b.util.transformPoint(R, N), $[A] = R.x, $[A + 1] = R.y;
                                            return $
                                        })
                                    }
                                }(),
                                function() {
                                    var v = Array.prototype.slice;

                                    function u(o, h, p) {
                                        if (o && 0 !== o.length) {
                                            var l = o.length - 1,
                                                y = h ? o[l][h] : o[l];
                                            if (h)
                                                for (; l--;) p(o[l][h], y) && (y = o[l][h]);
                                            else
                                                for (; l--;) p(o[l], y) && (y = o[l]);
                                            return y
                                        }
                                    }
                                    b.util.array = {
                                        fill: function(o, h) {
                                            for (var p = o.length; p--;) o[p] = h;
                                            return o
                                        },
                                        invoke: function(o, h) {
                                            for (var p = v.call(arguments, 2), l = [], y = 0, C = o.length; y < C; y++) l[y] = p.length ? o[y][h].apply(o[y], p) : o[y][h].call(o[y]);
                                            return l
                                        },
                                        min: function(o, h) {
                                            return u(o, h, function(p, l) {
                                                return p < l
                                            })
                                        },
                                        max: function(o, h) {
                                            return u(o, h, function(p, l) {
                                                return p >= l
                                            })
                                        }
                                    }
                                }(),
                                function() {
                                    function v(m, d, a) {
                                        if (a)
                                            if (!b.isLikelyNode && d instanceof Element) m = d;
                                            else if (d instanceof Array) {
                                            m = [];
                                            for (var u = 0, o = d.length; u < o; u++) m[u] = v({}, d[u], a)
                                        } else if (d && "object" == typeof d)
                                            for (var h in d) "canvas" === h || "group" === h ? m[h] = null : d.hasOwnProperty(h) && (m[h] = v({}, d[h], a));
                                        else m = d;
                                        else
                                            for (var h in d) m[h] = d[h];
                                        return m
                                    }
                                    b.util.object = {
                                        extend: v,
                                        clone: function(m, d) {
                                            return v({}, m, d)
                                        }
                                    }, b.util.object.extend(b.util, b.Observable)
                                }(),
                                function() {
                                    function a(u, o) {
                                        var h = u.charCodeAt(o);
                                        if (isNaN(h)) return "";
                                        if (h < 55296 || h > 57343) return u.charAt(o);
                                        if (55296 <= h && h <= 56319) {
                                            if (u.length <= o + 1) throw "High surrogate without following low surrogate";
                                            var p = u.charCodeAt(o + 1);
                                            if (56320 > p || p > 57343) throw "High surrogate without following low surrogate";
                                            return u.charAt(o) + u.charAt(o + 1)
                                        }
                                        if (0 === o) throw "Low surrogate without preceding high surrogate";
                                        var l = u.charCodeAt(o - 1);
                                        if (55296 > l || l > 56319) throw "Low surrogate without preceding high surrogate";
                                        return !1
                                    }
                                    b.util.string = {
                                        camelize: function(u) {
                                            return u.replace(/-+(.)?/g, function(o, h) {
                                                return h ? h.toUpperCase() : ""
                                            })
                                        },
                                        capitalize: function(u, o) {
                                            return u.charAt(0).toUpperCase() + (o ? u.slice(1) : u.slice(1).toLowerCase())
                                        },
                                        escapeXml: function(u) {
                                            return u.replace(/&/g, "&amp;").replace(/"/g, "&quot;").replace(/'/g, "&apos;").replace(/</g, "&lt;").replace(/>/g, "&gt;")
                                        },
                                        graphemeSplit: function(u) {
                                            var h, o = 0,
                                                p = [];
                                            for (o = 0; o < u.length; o++) !1 !== (h = a(u, o)) && p.push(h);
                                            return p
                                        }
                                    }
                                }(),
                                function() {
                                    var v = Array.prototype.slice,
                                        f = function() {},
                                        m = function() {
                                            for (var h in {
                                                    toString: 1
                                                })
                                                if ("toString" === h) return !1;
                                            return !0
                                        }(),
                                        d = function(h, p, l) {
                                            for (var y in p) h.prototype[y] = y in h.prototype && "function" == typeof h.prototype[y] && (p[y] + "").indexOf("callSuper") > -1 ? function(C) {
                                                return function() {
                                                    var D = this.constructor.superclass;
                                                    this.constructor.superclass = l;
                                                    var E = p[C].apply(this, arguments);
                                                    if (this.constructor.superclass = D, "initialize" !== C) return E
                                                }
                                            }(y) : p[y], m && (p.toString !== Object.prototype.toString && (h.prototype.toString = p.toString), p.valueOf !== Object.prototype.valueOf && (h.prototype.valueOf = p.valueOf))
                                        };

                                    function a() {}

                                    function u(h) {
                                        for (var p = null, l = this; l.constructor.superclass;) {
                                            var y = l.constructor.superclass.prototype[h];
                                            if (l[h] !== y) {
                                                p = y;
                                                break
                                            }
                                            l = l.constructor.superclass.prototype
                                        }
                                        return p ? arguments.length > 1 ? p.apply(this, v.call(arguments, 1)) : p.call(this) : console.log("tried to callSuper " + h + ", method not found in prototype chain", this)
                                    }
                                    b.util.createClass = function() {
                                        var h = null,
                                            p = v.call(arguments, 0);

                                        function l() {
                                            this.initialize.apply(this, arguments)
                                        }
                                        "function" == typeof p[0] && (h = p.shift()), l.superclass = h, l.subclasses = [], h && (a.prototype = h.prototype, l.prototype = new a, h.subclasses.push(l));
                                        for (var y = 0, C = p.length; y < C; y++) d(l, p[y], h);
                                        return l.prototype.initialize || (l.prototype.initialize = f), l.prototype.constructor = l, l.prototype.callSuper = u, l
                                    }
                                }(),
                                function() {
                                    var v = !!b.document.createElement("div").attachEvent,
                                        f = ["touchstart", "touchmove", "touchend"];
                                    b.util.addListener = function(d, a, u, o) {
                                        d && d.addEventListener(a, u, !v && o)
                                    }, b.util.removeListener = function(d, a, u, o) {
                                        d && d.removeEventListener(a, u, !v && o)
                                    }, b.util.getPointer = function(d) {
                                        var u = b.util.getScrollLeftTop(d.target),
                                            o = function(d) {
                                                var a = d.changedTouches;
                                                return a && a[0] ? a[0] : d
                                            }(d);
                                        return {
                                            x: o.clientX + u.left,
                                            y: o.clientY + u.top
                                        }
                                    }, b.util.isTouchEvent = function(d) {
                                        return f.indexOf(d.type) > -1 || "touch" === d.pointerType
                                    }
                                }(),
                                function() {
                                    var f = b.document.createElement("div"),
                                        a = /alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,
                                        u = function(o) {
                                            return o
                                        };
                                    "string" == typeof f.style.opacity ? u = function(o, h) {
                                        return o.style.opacity = h, o
                                    } : "string" == typeof f.style.filter && (u = function(o, h) {
                                        var p = o.style;
                                        return o.currentStyle && !o.currentStyle.hasLayout && (p.zoom = 1), a.test(p.filter) ? p.filter = p.filter.replace(a, h = h >= .9999 ? "" : "alpha(opacity=" + 100 * h + ")") : p.filter += " alpha(opacity=" + 100 * h + ")", o
                                    }), b.util.setStyle = function(o, h) {
                                        var p = o.style;
                                        if (!p) return o;
                                        if ("string" == typeof h) return o.style.cssText += ";" + h, h.indexOf("opacity") > -1 ? u(o, h.match(/opacity:\s*(\d?\.?\d*)/)[1]) : o;
                                        for (var l in h) "opacity" === l ? u(o, h[l]) : p["float" === l || "cssFloat" === l ? void 0 === p.styleFloat ? "cssFloat" : "styleFloat" : l] = h[l];
                                        return o
                                    }
                                }(),
                                function() {
                                    var m, l, E, T, v = Array.prototype.slice,
                                        d = function(E) {
                                            return v.call(E, 0)
                                        };
                                    try {
                                        m = d(b.document.childNodes) instanceof Array
                                    } catch (E) {}

                                    function a(E, T) {
                                        var I = b.document.createElement(E);
                                        for (var F in T) "class" === F ? I.className = T[F] : "for" === F ? I.htmlFor = T[F] : I.setAttribute(F, T[F]);
                                        return I
                                    }

                                    function h(E) {
                                        for (var T = 0, I = 0, F = b.document.documentElement, B = b.document.body || {
                                                scrollLeft: 0,
                                                scrollTop: 0
                                            }; E && (E.parentNode || E.host) && ((E = E.parentNode || E.host) === b.document ? (T = B.scrollLeft || F.scrollLeft || 0, I = B.scrollTop || F.scrollTop || 0) : (T += E.scrollLeft || 0, I += E.scrollTop || 0), 1 !== E.nodeType || "fixed" !== E.style.position););
                                        return {
                                            left: T,
                                            top: I
                                        }
                                    }
                                    m || (d = function(E) {
                                        for (var T = new Array(E.length), I = E.length; I--;) T[I] = E[I];
                                        return T
                                    }), l = b.document.defaultView && b.document.defaultView.getComputedStyle ? function(E, T) {
                                        var I = b.document.defaultView.getComputedStyle(E, null);
                                        return I ? I[T] : void 0
                                    } : function(E, T) {
                                        var I = E.style[T];
                                        return !I && E.currentStyle && (I = E.currentStyle[T]), I
                                    }, T = "userSelect" in (E = b.document.documentElement.style) ? "userSelect" : "MozUserSelect" in E ? "MozUserSelect" : "WebkitUserSelect" in E ? "WebkitUserSelect" : "KhtmlUserSelect" in E ? "KhtmlUserSelect" : "", b.util.makeElementUnselectable = function(B) {
                                        return void 0 !== B.onselectstart && (B.onselectstart = b.util.falseFunction), T ? B.style[T] = "none" : "string" == typeof B.unselectable && (B.unselectable = "on"), B
                                    }, b.util.makeElementSelectable = function(B) {
                                        return void 0 !== B.onselectstart && (B.onselectstart = null), T ? B.style[T] = "" : "string" == typeof B.unselectable && (B.unselectable = ""), B
                                    }, b.util.setImageSmoothing = function(E, T) {
                                        E.imageSmoothingEnabled = E.imageSmoothingEnabled || E.webkitImageSmoothingEnabled || E.mozImageSmoothingEnabled || E.msImageSmoothingEnabled || E.oImageSmoothingEnabled, E.imageSmoothingEnabled = T
                                    }, b.util.getById = function(E) {
                                        return "string" == typeof E ? b.document.getElementById(E) : E
                                    }, b.util.toArray = d, b.util.addClass = function(E, T) {
                                        E && -1 === (" " + E.className + " ").indexOf(" " + T + " ") && (E.className += (E.className ? " " : "") + T)
                                    }, b.util.makeElement = a, b.util.wrapElement = function(E, T, I) {
                                        return "string" == typeof T && (T = a(T, I)), E.parentNode && E.parentNode.replaceChild(T, E), T.appendChild(E), T
                                    }, b.util.getScrollLeftTop = h, b.util.getElementOffset = function(E) {
                                        var T, G, I = E && E.ownerDocument,
                                            F = {
                                                left: 0,
                                                top: 0
                                            },
                                            B = {
                                                left: 0,
                                                top: 0
                                            },
                                            ie = {
                                                borderLeftWidth: "left",
                                                borderTopWidth: "top",
                                                paddingLeft: "left",
                                                paddingTop: "top"
                                            };
                                        if (!I) return B;
                                        for (var le in ie) B[ie[le]] += parseInt(l(E, le), 10) || 0;
                                        return T = I.documentElement, void 0 !== E.getBoundingClientRect && (F = E.getBoundingClientRect()), G = h(E), {
                                            left: F.left + G.left - (T.clientLeft || 0) + B.left,
                                            top: F.top + G.top - (T.clientTop || 0) + B.top
                                        }
                                    }, b.util.getNodeCanvas = function(E) {
                                        var T = b.jsdomImplForWrapper(E);
                                        return T._canvas || T._image
                                    }, b.util.cleanUpJsdomNode = function(E) {
                                        if (b.isLikelyNode) {
                                            var T = b.jsdomImplForWrapper(E);
                                            T && (T._image = null, T._canvas = null, T._currentSrc = null, T._attributes = null, T._classList = null)
                                        }
                                    }
                                }(),
                                function() {
                                    function f() {}
                                    b.util.request = function(d, a) {
                                        a || (a = {});
                                        var u = a.method ? a.method.toUpperCase() : "GET",
                                            o = a.onComplete || function() {},
                                            h = new b.window.XMLHttpRequest,
                                            p = a.body || a.parameters;
                                        return h.onreadystatechange = function() {
                                            4 === h.readyState && (o(h), h.onreadystatechange = f)
                                        }, "GET" === u && (p = null, "string" == typeof a.parameters && (d = function(d, a) {
                                            return d + (/\?/.test(d) ? "&" : "?") + a
                                        }(d, a.parameters))), h.open(u, d, !0), ("POST" === u || "PUT" === u) && h.setRequestHeader("Content-Type", "application/x-www-form-urlencoded"), h.send(p), h
                                    }
                                }(), b.log = console.log, b.warn = console.warn,
                                function() {
                                    var v = b.util.object.extend,
                                        f = b.util.object.clone,
                                        m = [];

                                    function d() {
                                        return !1
                                    }

                                    function a(y, C, D, E) {
                                        return -D * Math.cos(y / E * (Math.PI / 2)) + D + C
                                    }
                                    b.util.object.extend(m, {
                                        cancelAll: function() {
                                            var y = this.splice(0);
                                            return y.forEach(function(C) {
                                                C.cancel()
                                            }), y
                                        },
                                        cancelByCanvas: function(y) {
                                            if (!y) return [];
                                            var C = this.filter(function(D) {
                                                return "object" == typeof D.target && D.target.canvas === y
                                            });
                                            return C.forEach(function(D) {
                                                D.cancel()
                                            }), C
                                        },
                                        cancelByTarget: function(y) {
                                            var C = this.findAnimationsByTarget(y);
                                            return C.forEach(function(D) {
                                                D.cancel()
                                            }), C
                                        },
                                        findAnimationIndex: function(y) {
                                            return this.indexOf(this.findAnimation(y))
                                        },
                                        findAnimation: function(y) {
                                            return this.find(function(C) {
                                                return C.cancel === y
                                            })
                                        },
                                        findAnimationsByTarget: function(y) {
                                            return y ? this.filter(function(C) {
                                                return C.target === y
                                            }) : []
                                        }
                                    });
                                    var o = b.window.requestAnimationFrame || b.window.webkitRequestAnimationFrame || b.window.mozRequestAnimationFrame || b.window.oRequestAnimationFrame || b.window.msRequestAnimationFrame || function(y) {
                                            return b.window.setTimeout(y, 1e3 / 60)
                                        },
                                        h = b.window.cancelAnimationFrame || b.window.clearTimeout;

                                    function p() {
                                        return o.apply(b.window, arguments)
                                    }
                                    b.util.animate = function(y) {
                                        y || (y = {});
                                        var D, C = !1,
                                            E = function() {
                                                var T = b.runningAnimations.indexOf(D);
                                                return T > -1 && b.runningAnimations.splice(T, 1)[0]
                                            };
                                        return D = v(f(y), {
                                            cancel: function() {
                                                return C = !0, E()
                                            },
                                            currentValue: "startValue" in y ? y.startValue : 0,
                                            completionRate: 0,
                                            durationRate: 0
                                        }), b.runningAnimations.push(D), p(function(T) {
                                            var G, I = T || +new Date,
                                                F = y.duration || 500,
                                                B = I + F,
                                                ie = y.onChange || d,
                                                le = y.abort || d,
                                                ue = y.onComplete || d,
                                                de = y.easing || a,
                                                fe = "startValue" in y ? y.startValue : 0,
                                                ae = "endValue" in y ? y.endValue : 100,
                                                _e = y.byValue || ae - fe;
                                            y.onStart && y.onStart(),
                                                function be(me) {
                                                    var O = (G = me || +new Date) > B ? F : G - I,
                                                        N = O / F,
                                                        k = de(O, fe, _e, F),
                                                        L = Math.abs((k - fe) / _e);
                                                    if (D.currentValue = k, D.completionRate = L, D.durationRate = N, !C) {
                                                        if (le(k, L, N)) return void E();
                                                        if (G > B) return D.currentValue = ae, D.completionRate = 1, D.durationRate = 1, ie(ae, 1, 1), ue(ae, 1, 1), void E();
                                                        ie(k, L, N), p(be)
                                                    }
                                                }(I)
                                        }), D.cancel
                                    }, b.util.requestAnimFrame = p, b.util.cancelAnimFrame = function() {
                                        return h.apply(b.window, arguments)
                                    }, b.runningAnimations = m
                                }(),
                                function() {
                                    function v(m, d, a) {
                                        var u = "rgba(" + parseInt(m[0] + a * (d[0] - m[0]), 10) + "," + parseInt(m[1] + a * (d[1] - m[1]), 10) + "," + parseInt(m[2] + a * (d[2] - m[2]), 10);
                                        return (u += "," + (m && d ? parseFloat(m[3] + a * (d[3] - m[3])) : 1)) + ")"
                                    }
                                    b.util.animateColor = function(m, d, a, u) {
                                        var o = new b.Color(m).getSource(),
                                            h = new b.Color(d).getSource(),
                                            p = u.onComplete,
                                            l = u.onChange;
                                        return b.util.animate(b.util.object.extend(u = u || {}, {
                                            duration: a || 500,
                                            startValue: o,
                                            endValue: h,
                                            byValue: h,
                                            easing: function(y, C, D, E) {
                                                return v(C, D, u.colorEasing ? u.colorEasing(y, E) : 1 - Math.cos(y / E * (Math.PI / 2)))
                                            },
                                            onComplete: function(y, C, D) {
                                                if (p) return p(v(h, h, 0), C, D)
                                            },
                                            onChange: function(y, C, D) {
                                                if (l) {
                                                    if (Array.isArray(y)) return l(v(y, y, 0), C, D);
                                                    l(y, C, D)
                                                }
                                            }
                                        }))
                                    }
                                }(),
                                function() {
                                    function v(O, N, k, L) {
                                        return O < Math.abs(N) ? (O = N, L = k / 4) : L = 0 === N && 0 === O ? k / (2 * Math.PI) * Math.asin(1) : k / (2 * Math.PI) * Math.asin(N / O), {
                                            a: O,
                                            c: N,
                                            p: k,
                                            s: L
                                        }
                                    }

                                    function f(O, N, k) {
                                        return O.a * Math.pow(2, 10 * (N -= 1)) * Math.sin((N * k - O.s) * (2 * Math.PI) / O.p)
                                    }

                                    function _e(O, N, k, L) {
                                        return k - be(L - O, 0, k, L) + N
                                    }

                                    function be(O, N, k, L) {
                                        return (O /= L) < 1 / 2.75 ? k * (7.5625 * O * O) + N : O < 2 / 2.75 ? k * (7.5625 * (O -= 1.5 / 2.75) * O + .75) + N : O < 2.5 / 2.75 ? k * (7.5625 * (O -= 2.25 / 2.75) * O + .9375) + N : k * (7.5625 * (O -= 2.625 / 2.75) * O + .984375) + N
                                    }
                                    b.util.ease = {
                                        easeInQuad: function(O, N, k, L) {
                                            return k * (O /= L) * O + N
                                        },
                                        easeOutQuad: function(O, N, k, L) {
                                            return -k * (O /= L) * (O - 2) + N
                                        },
                                        easeInOutQuad: function(O, N, k, L) {
                                            return (O /= L / 2) < 1 ? k / 2 * O * O + N : -k / 2 * (--O * (O - 2) - 1) + N
                                        },
                                        easeInCubic: function(O, N, k, L) {
                                            return k * (O /= L) * O * O + N
                                        },
                                        easeOutCubic: function(O, N, k, L) {
                                            return k * ((O = O / L - 1) * O * O + 1) + N
                                        },
                                        easeInOutCubic: function(O, N, k, L) {
                                            return (O /= L / 2) < 1 ? k / 2 * O * O * O + N : k / 2 * ((O -= 2) * O * O + 2) + N
                                        },
                                        easeInQuart: function(O, N, k, L) {
                                            return k * (O /= L) * O * O * O + N
                                        },
                                        easeOutQuart: function(O, N, k, L) {
                                            return -k * ((O = O / L - 1) * O * O * O - 1) + N
                                        },
                                        easeInOutQuart: function(O, N, k, L) {
                                            return (O /= L / 2) < 1 ? k / 2 * O * O * O * O + N : -k / 2 * ((O -= 2) * O * O * O - 2) + N
                                        },
                                        easeInQuint: function(O, N, k, L) {
                                            return k * (O /= L) * O * O * O * O + N
                                        },
                                        easeOutQuint: function(O, N, k, L) {
                                            return k * ((O = O / L - 1) * O * O * O * O + 1) + N
                                        },
                                        easeInOutQuint: function(O, N, k, L) {
                                            return (O /= L / 2) < 1 ? k / 2 * O * O * O * O * O + N : k / 2 * ((O -= 2) * O * O * O * O + 2) + N
                                        },
                                        easeInSine: function(O, N, k, L) {
                                            return -k * Math.cos(O / L * (Math.PI / 2)) + k + N
                                        },
                                        easeOutSine: function(O, N, k, L) {
                                            return k * Math.sin(O / L * (Math.PI / 2)) + N
                                        },
                                        easeInOutSine: function(O, N, k, L) {
                                            return -k / 2 * (Math.cos(Math.PI * O / L) - 1) + N
                                        },
                                        easeInExpo: function(O, N, k, L) {
                                            return 0 === O ? N : k * Math.pow(2, 10 * (O / L - 1)) + N
                                        },
                                        easeOutExpo: function(O, N, k, L) {
                                            return O === L ? N + k : k * (1 - Math.pow(2, -10 * O / L)) + N
                                        },
                                        easeInOutExpo: function(O, N, k, L) {
                                            return 0 === O ? N : O === L ? N + k : (O /= L / 2) < 1 ? k / 2 * Math.pow(2, 10 * (O - 1)) + N : k / 2 * (2 - Math.pow(2, -10 * --O)) + N
                                        },
                                        easeInCirc: function(O, N, k, L) {
                                            return -k * (Math.sqrt(1 - (O /= L) * O) - 1) + N
                                        },
                                        easeOutCirc: function(O, N, k, L) {
                                            return k * Math.sqrt(1 - (O = O / L - 1) * O) + N
                                        },
                                        easeInOutCirc: function(O, N, k, L) {
                                            return (O /= L / 2) < 1 ? -k / 2 * (Math.sqrt(1 - O * O) - 1) + N : k / 2 * (Math.sqrt(1 - (O -= 2) * O) + 1) + N
                                        },
                                        easeInElastic: function(O, N, k, L) {
                                            var R = 0;
                                            return 0 === O ? N : 1 == (O /= L) ? N + k : (R || (R = .3 * L), -f(v(k, k, R, 1.70158), O, L) + N)
                                        },
                                        easeOutElastic: function(O, N, k, L) {
                                            var R = 0;
                                            if (0 === O) return N;
                                            if (1 == (O /= L)) return N + k;
                                            R || (R = .3 * L);
                                            var V = v(k, k, R, 1.70158);
                                            return V.a * Math.pow(2, -10 * O) * Math.sin((O * L - V.s) * (2 * Math.PI) / V.p) + V.c + N
                                        },
                                        easeInOutElastic: function(O, N, k, L) {
                                            var R = 0;
                                            if (0 === O) return N;
                                            if (2 == (O /= L / 2)) return N + k;
                                            R || (R = L * (.3 * 1.5));
                                            var V = v(k, k, R, 1.70158);
                                            return O < 1 ? -.5 * f(V, O, L) + N : V.a * Math.pow(2, -10 * (O -= 1)) * Math.sin((O * L - V.s) * (2 * Math.PI) / V.p) * .5 + V.c + N
                                        },
                                        easeInBack: function(O, N, k, L, $) {
                                            return void 0 === $ && ($ = 1.70158), k * (O /= L) * O * (($ + 1) * O - $) + N
                                        },
                                        easeOutBack: function(O, N, k, L, $) {
                                            return void 0 === $ && ($ = 1.70158), k * ((O = O / L - 1) * O * (($ + 1) * O + $) + 1) + N
                                        },
                                        easeInOutBack: function(O, N, k, L, $) {
                                            return void 0 === $ && ($ = 1.70158), (O /= L / 2) < 1 ? k / 2 * (O * O * ((1 + ($ *= 1.525)) * O - $)) + N : k / 2 * ((O -= 2) * O * ((1 + ($ *= 1.525)) * O + $) + 2) + N
                                        },
                                        easeInBounce: _e,
                                        easeOutBounce: be,
                                        easeInOutBounce: function(O, N, k, L) {
                                            return O < L / 2 ? .5 * _e(2 * O, 0, k, L) + N : .5 * be(2 * O - L, 0, k, L) + .5 * k + N
                                        }
                                    }
                                }(),
                                function(v) {
                                    "use strict";
                                    var f = v.fabric || (v.fabric = {}),
                                        m = f.util.object.extend,
                                        d = f.util.object.clone,
                                        a = f.util.toFixed,
                                        u = f.util.parseUnit,
                                        o = f.util.multiplyTransformMatrices,
                                        C = {
                                            cx: "left",
                                            x: "left",
                                            r: "radius",
                                            cy: "top",
                                            y: "top",
                                            display: "visible",
                                            visibility: "visible",
                                            transform: "transformMatrix",
                                            "fill-opacity": "fillOpacity",
                                            "fill-rule": "fillRule",
                                            "font-family": "fontFamily",
                                            "font-size": "fontSize",
                                            "font-style": "fontStyle",
                                            "font-weight": "fontWeight",
                                            "letter-spacing": "charSpacing",
                                            "paint-order": "paintFirst",
                                            "stroke-dasharray": "strokeDashArray",
                                            "stroke-dashoffset": "strokeDashOffset",
                                            "stroke-linecap": "strokeLineCap",
                                            "stroke-linejoin": "strokeLineJoin",
                                            "stroke-miterlimit": "strokeMiterLimit",
                                            "stroke-opacity": "strokeOpacity",
                                            "stroke-width": "strokeWidth",
                                            "text-decoration": "textDecoration",
                                            "text-anchor": "textAnchor",
                                            opacity: "opacity",
                                            "clip-path": "clipPath",
                                            "clip-rule": "clipRule",
                                            "vector-effect": "strokeUniform",
                                            "image-rendering": "imageSmoothing"
                                        },
                                        D = {
                                            stroke: "strokeOpacity",
                                            fill: "fillOpacity"
                                        },
                                        E = "font-size",
                                        T = "clip-path";

                                    function I(R) {
                                        return R in C ? C[R] : R
                                    }

                                    function F(R, A, V, W) {
                                        var z, Q = "[object Array]" === Object.prototype.toString.call(A);
                                        if ("fill" !== R && "stroke" !== R || "none" !== A) {
                                            if ("strokeUniform" === R) return "non-scaling-stroke" === A;
                                            if ("strokeDashArray" === R) A = "none" === A ? null : A.replace(/,/g, " ").split(/\s+/).map(parseFloat);
                                            else if ("transformMatrix" === R) A = V && V.transformMatrix ? o(V.transformMatrix, f.parseTransformAttribute(A)) : f.parseTransformAttribute(A);
                                            else if ("visible" === R) A = "none" !== A && "hidden" !== A, V && !1 === V.visible && (A = !1);
                                            else if ("opacity" === R) A = parseFloat(A), V && void 0 !== V.opacity && (A *= V.opacity);
                                            else if ("textAnchor" === R) A = "start" === A ? "left" : "end" === A ? "right" : "center";
                                            else if ("charSpacing" === R) z = u(A, W) / W * 1e3;
                                            else if ("paintFirst" === R) {
                                                var te = A.indexOf("fill"),
                                                    oe = A.indexOf("stroke");
                                                A = "fill", (te > -1 && oe > -1 && oe < te || -1 === te && oe > -1) && (A = "stroke")
                                            } else {
                                                if ("href" === R || "xlink:href" === R || "font" === R) return A;
                                                if ("imageSmoothing" === R) return "optimizeQuality" === A;
                                                z = Q ? A.map(u) : u(A, W)
                                            }
                                        } else A = "";
                                        return !Q && isNaN(z) ? A : z
                                    }

                                    function B(R) {
                                        return new RegExp("^(" + R.join("|") + ")\\b", "i")
                                    }

                                    function ie(R, A) {
                                        var Q, z, te, W = [];
                                        for (z = 0, te = A.length; z < te; z++) Q = R.getElementsByTagName(A[z]), W = W.concat(Array.prototype.slice.call(Q));
                                        return W
                                    }

                                    function fe(R, A) {
                                        var V, W = !0;
                                        return (V = _e(R, A.pop())) && A.length && (W = function(R, A) {
                                            for (var V, W = !0; R.parentNode && 1 === R.parentNode.nodeType && A.length;) W && (V = A.pop()), W = _e(R = R.parentNode, V);
                                            return 0 === A.length
                                        }(R, A)), V && W && 0 === A.length
                                    }

                                    function _e(R, A) {
                                        var z, te, V = R.nodeName,
                                            W = R.getAttribute("class"),
                                            Q = R.getAttribute("id");
                                        if (z = new RegExp("^" + V, "i"), A = A.replace(z, ""), Q && A.length && (z = new RegExp("#" + Q + "(?![a-zA-Z\\-]+)", "i"), A = A.replace(z, "")), W && A.length)
                                            for (te = (W = W.split(" ")).length; te--;) z = new RegExp("\\." + W[te] + "(?![a-zA-Z\\-]+)", "i"), A = A.replace(z, "");
                                        return 0 === A.length
                                    }

                                    function be(R, A) {
                                        var V;
                                        if (R.getElementById && (V = R.getElementById(A)), V) return V;
                                        var W, Q, z, te = R.getElementsByTagName("*");
                                        for (Q = 0, z = te.length; Q < z; Q++)
                                            if (A === (W = te[Q]).getAttribute("id")) return W
                                    }
                                    f.svgValidTagNamesRegEx = B(["path", "circle", "polygon", "polyline", "ellipse", "rect", "line", "image", "text"]), f.svgViewBoxElementsRegEx = B(["symbol", "image", "marker", "pattern", "view", "svg"]), f.svgInvalidAncestorsRegEx = B(["pattern", "defs", "symbol", "metadata", "clipPath", "mask", "desc"]), f.svgValidParentsRegEx = B(["symbol", "g", "a", "svg", "clipPath", "defs"]), f.cssRules = {}, f.gradientDefs = {}, f.clipPaths = {}, f.parseTransformAttribute = function() {
                                        function V(Z, Ce, Re) {
                                            Z[Re] = Math.tan(f.util.degreesToRadians(Ce[0]))
                                        }
                                        var Q = f.iMatrix,
                                            z = f.reNum,
                                            te = f.commaWsp,
                                            q = "(?:(?:(matrix)\\s*\\(\\s*(" + z + ")" + te + "(" + z + ")" + te + "(" + z + ")" + te + "(" + z + ")" + te + "(" + z + ")" + te + "(" + z + ")\\s*\\))|(?:(translate)\\s*\\(\\s*(" + z + ")(?:" + te + "(" + z + "))?\\s*\\))|(?:(scale)\\s*\\(\\s*(" + z + ")(?:" + te + "(" + z + "))?\\s*\\))|(?:(rotate)\\s*\\(\\s*(" + z + ")(?:" + te + "(" + z + ")" + te + "(" + z + "))?\\s*\\))|(?:(skewX)\\s*\\(\\s*(" + z + ")\\s*\\))|(?:(skewY)\\s*\\(\\s*(" + z + ")\\s*\\)))",
                                            Ie = new RegExp("^\\s*(?:(?:" + q + "(?:" + te + "*" + q + ")*)?)\\s*$"),
                                            ve = new RegExp(q, "g");
                                        return function(Z) {
                                            var Ce = Q.concat(),
                                                Re = [];
                                            if (!Z || Z && !Ie.test(Z)) return Ce;
                                            Z.replace(ve, function(Ze) {
                                                var Ge = new RegExp(q).exec(Ze).filter(function($n) {
                                                        return !!$n
                                                    }),
                                                    wt = Ge[1],
                                                    at = Ge.slice(2).map(parseFloat);
                                                switch (wt) {
                                                    case "translate":
                                                        ! function(Z, Ce) {
                                                            Z[4] = Ce[0], 2 === Ce.length && (Z[5] = Ce[1])
                                                        }(Ce, at);
                                                        break;
                                                    case "rotate":
                                                        at[0] = f.util.degreesToRadians(at[0]),
                                                            function(Z, Ce) {
                                                                var Re = f.util.cos(Ce[0]),
                                                                    Ue = f.util.sin(Ce[0]),
                                                                    Ze = 0,
                                                                    Ge = 0;
                                                                3 === Ce.length && (Ze = Ce[1], Ge = Ce[2]), Z[0] = Re, Z[1] = Ue, Z[2] = -Ue, Z[3] = Re, Z[4] = Ze - (Re * Ze - Ue * Ge), Z[5] = Ge - (Ue * Ze + Re * Ge)
                                                            }(Ce, at);
                                                        break;
                                                    case "scale":
                                                        ! function(Z, Ce) {
                                                            var Ue = 2 === Ce.length ? Ce[1] : Ce[0];
                                                            Z[0] = Ce[0], Z[3] = Ue
                                                        }(Ce, at);
                                                        break;
                                                    case "skewX":
                                                        V(Ce, at, 2);
                                                        break;
                                                    case "skewY":
                                                        V(Ce, at, 1);
                                                        break;
                                                    case "matrix":
                                                        Ce = at
                                                }
                                                Re.push(Ce.concat()), Ce = Q.concat()
                                            });
                                            for (var Ue = Re[0]; Re.length > 1;) Re.shift(), Ue = f.util.multiplyTransformMatrices(Ue, Re[0]);
                                            return Ue
                                        }
                                    }();
                                    var O = new RegExp("^\\s*(" + f.reNum + "+)\\s*,?\\s*(" + f.reNum + "+)\\s*,?\\s*(" + f.reNum + "+)\\s*,?\\s*(" + f.reNum + "+)\\s*$");

                                    function N(R) {
                                        if (!f.svgViewBoxElementsRegEx.test(R.nodeName)) return {};
                                        var Q, z, te, oe, ce, X, A = R.getAttribute("viewBox"),
                                            V = 1,
                                            W = 1,
                                            U = R.getAttribute("width"),
                                            J = R.getAttribute("height"),
                                            ee = R.getAttribute("x") || 0,
                                            q = R.getAttribute("y") || 0,
                                            ne = R.getAttribute("preserveAspectRatio") || "",
                                            he = !A || !(A = A.match(O)),
                                            Ie = !U || !J || "100%" === U || "100%" === J,
                                            ve = he && Ie,
                                            Z = {},
                                            Ce = "",
                                            Re = 0,
                                            Ue = 0;
                                        if (Z.width = 0, Z.height = 0, Z.toBeParsed = ve, he && (ee || q) && R.parentNode && "#document" !== R.parentNode.nodeName && (Ce = " translate(" + u(ee) + " " + u(q) + ") ", ce = (R.getAttribute("transform") || "") + Ce, R.setAttribute("transform", ce), R.removeAttribute("x"), R.removeAttribute("y")), ve) return Z;
                                        if (he) return Z.width = u(U), Z.height = u(J), Z;
                                        if (Q = -parseFloat(A[1]), z = -parseFloat(A[2]), te = parseFloat(A[3]), oe = parseFloat(A[4]), Z.minX = Q, Z.minY = z, Z.viewBoxWidth = te, Z.viewBoxHeight = oe, Ie ? (Z.width = te, Z.height = oe) : (Z.width = u(U), Z.height = u(J), V = Z.width / te, W = Z.height / oe), "none" !== (ne = f.util.parsePreserveAspectRatioAttribute(ne)).alignX && ("meet" === ne.meetOrSlice && (W = V = V > W ? W : V), "slice" === ne.meetOrSlice && (W = V = V > W ? V : W), Re = Z.width - te * V, Ue = Z.height - oe * V, "Mid" === ne.alignX && (Re /= 2), "Mid" === ne.alignY && (Ue /= 2), "Min" === ne.alignX && (Re = 0), "Min" === ne.alignY && (Ue = 0)), 1 === V && 1 === W && 0 === Q && 0 === z && 0 === ee && 0 === q) return Z;
                                        if ((ee || q) && "#document" !== R.parentNode.nodeName && (Ce = " translate(" + u(ee) + " " + u(q) + ") "), ce = Ce + " matrix(" + V + " 0 0 " + W + " " + (Q * V + Re) + " " + (z * W + Ue) + ") ", "svg" === R.nodeName) {
                                            for (X = R.ownerDocument.createElementNS(f.svgNS, "g"); R.firstChild;) X.appendChild(R.firstChild);
                                            R.appendChild(X)
                                        } else(X = R).removeAttribute("x"), X.removeAttribute("y"), ce = X.getAttribute("transform") + ce;
                                        return X.setAttribute("transform", ce), Z
                                    }

                                    function L(R, A) {
                                        var W = "xlink:href",
                                            z = be(R, A.getAttribute(W).substr(1));
                                        if (z && z.getAttribute(W) && L(R, z), ["gradientTransform", "x1", "x2", "y1", "y2", "gradientUnits", "cx", "cy", "r", "fx", "fy"].forEach(function(oe) {
                                                z && !A.hasAttribute(oe) && z.hasAttribute(oe) && A.setAttribute(oe, z.getAttribute(oe))
                                            }), !A.children.length)
                                            for (var te = z.cloneNode(!0); te.firstChild;) A.appendChild(te.firstChild);
                                        A.removeAttribute(W)
                                    }
                                    f.parseSVGDocument = function(R, A, V, W) {
                                        if (R) {
                                            ! function(R) {
                                                for (var A = ie(R, ["use", "svg:use"]), V = 0; A.length && V < A.length;) {
                                                    var W = A[V],
                                                        Q = W.getAttribute("xlink:href") || W.getAttribute("href");
                                                    if (null === Q) return;
                                                    var ee, q, ne, he, z = Q.substr(1),
                                                        te = W.getAttribute("x") || 0,
                                                        oe = W.getAttribute("y") || 0,
                                                        ce = be(R, z).cloneNode(!0),
                                                        X = (ce.getAttribute("transform") || "") + " translate(" + te + ", " + oe + ")",
                                                        J = A.length,
                                                        Ie = f.svgNS;
                                                    if (N(ce), /^svg$/i.test(ce.nodeName)) {
                                                        var ve = ce.ownerDocument.createElementNS(Ie, "g");
                                                        for (q = 0, he = (ne = ce.attributes).length; q < he; q++) ee = ne.item(q), ve.setAttributeNS(Ie, ee.nodeName, ee.nodeValue);
                                                        for (; ce.firstChild;) ve.appendChild(ce.firstChild);
                                                        ce = ve
                                                    }
                                                    for (q = 0, he = (ne = W.attributes).length; q < he; q++) "x" !== (ee = ne.item(q)).nodeName && "y" !== ee.nodeName && "xlink:href" !== ee.nodeName && "href" !== ee.nodeName && ("transform" === ee.nodeName ? X = ee.nodeValue + " " + X : ce.setAttribute(ee.nodeName, ee.nodeValue));
                                                    ce.setAttribute("transform", X), ce.setAttribute("instantiated_by_use", "1"), ce.removeAttribute("id"), W.parentNode.replaceChild(ce, W), A.length === J && V++
                                                }
                                            }(R);
                                            var z, te, Q = f.Object.__uid++,
                                                oe = N(R),
                                                ce = f.util.toArray(R.getElementsByTagName("*"));
                                            if (oe.crossOrigin = W && W.crossOrigin, oe.svgUid = Q, 0 === ce.length && f.isLikelyNode) {
                                                var X = [];
                                                for (z = 0, te = (ce = R.selectNodes('//*[name(.)!="svg"]')).length; z < te; z++) X[z] = ce[z];
                                                ce = X
                                            }
                                            var U = ce.filter(function(ee) {
                                                return N(ee), f.svgValidTagNamesRegEx.test(ee.nodeName.replace("svg:", "")) && ! function(R, A) {
                                                    for (; R && (R = R.parentNode);)
                                                        if (R.nodeName && A.test(R.nodeName.replace("svg:", "")) && !R.getAttribute("instantiated_by_use")) return !0;
                                                    return !1
                                                }(ee, f.svgInvalidAncestorsRegEx)
                                            });
                                            if (!U || U && !U.length) return void(A && A([], {}));
                                            var J = {};
                                            ce.filter(function(ee) {
                                                return "clipPath" === ee.nodeName.replace("svg:", "")
                                            }).forEach(function(ee) {
                                                var q = ee.getAttribute("id");
                                                J[q] = f.util.toArray(ee.getElementsByTagName("*")).filter(function(ne) {
                                                    return f.svgValidTagNamesRegEx.test(ne.nodeName.replace("svg:", ""))
                                                })
                                            }), f.gradientDefs[Q] = f.getGradientDefs(R), f.cssRules[Q] = f.getCSSRules(R), f.clipPaths[Q] = J, f.parseElements(U, function(ee, q) {
                                                A && (A(ee, oe, q, ce), delete f.gradientDefs[Q], delete f.cssRules[Q], delete f.clipPaths[Q])
                                            }, d(oe), V, W)
                                        }
                                    };
                                    var $ = new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*(" + f.reNum + "(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|" + f.reNum + "))?\\s+(.*)");
                                    m(f, {
                                        parseFontDeclaration: function(R, A) {
                                            var V = R.match($);
                                            if (V) {
                                                var W = V[1],
                                                    Q = V[3],
                                                    z = V[4],
                                                    te = V[5],
                                                    oe = V[6];
                                                W && (A.fontStyle = W), Q && (A.fontWeight = isNaN(parseFloat(Q)) ? Q : parseFloat(Q)), z && (A.fontSize = u(z)), oe && (A.fontFamily = oe), te && (A.lineHeight = "normal" === te ? 1 : te)
                                            }
                                        },
                                        getGradientDefs: function(R) {
                                            var W, V = ie(R, ["linearGradient", "radialGradient", "svg:linearGradient", "svg:radialGradient"]),
                                                Q = 0,
                                                z = {};
                                            for (Q = V.length; Q--;)(W = V[Q]).getAttribute("xlink:href") && L(R, W), z[W.getAttribute("id")] = W;
                                            return z
                                        },
                                        parseAttributes: function(R, A, V) {
                                            if (R) {
                                                var W, z, te, Q = {};
                                                void 0 === V && (V = R.getAttribute("svgUid")), R.parentNode && f.svgValidParentsRegEx.test(R.parentNode.nodeName) && (Q = f.parseAttributes(R.parentNode, A, V));
                                                var oe = A.reduce(function(ne, he) {
                                                        return (W = R.getAttribute(he)) && (ne[he] = W), ne
                                                    }, {}),
                                                    ce = m(function(R, A) {
                                                        var V = {};
                                                        for (var W in f.cssRules[A])
                                                            if (fe(R, W.split(" ")))
                                                                for (var Q in f.cssRules[A][W]) V[Q] = f.cssRules[A][W][Q];
                                                        return V
                                                    }(R, V), f.parseStyleAttribute(R));
                                                oe = m(oe, ce), ce[T] && R.setAttribute(T, ce[T]), z = te = Q.fontSize || f.Text.DEFAULT_SVG_FONT_SIZE, oe[E] && (oe[E] = z = u(oe[E], te));
                                                var X, U, J = {};
                                                for (var ee in oe) U = F(X = I(ee), oe[ee], Q, z), J[X] = U;
                                                J && J.font && f.parseFontDeclaration(J.font, J);
                                                var q = m(Q, J);
                                                return f.svgValidParentsRegEx.test(R.nodeName) ? q : function(R) {
                                                    for (var A in D)
                                                        if (void 0 !== R[D[A]] && "" !== R[A]) {
                                                            if (void 0 === R[A]) {
                                                                if (!f.Object.prototype[A]) continue;
                                                                R[A] = f.Object.prototype[A]
                                                            }
                                                            if (0 !== R[A].indexOf("url(")) {
                                                                var V = new f.Color(R[A]);
                                                                R[A] = V.setAlpha(a(V.getAlpha() * R[D[A]], 2)).toRgba()
                                                            }
                                                        }
                                                    return R
                                                }(q)
                                            }
                                        },
                                        parseElements: function(R, A, V, W, Q) {
                                            new f.ElementsParser(R, A, V, W, Q).parse()
                                        },
                                        parseStyleAttribute: function(R) {
                                            var A = {},
                                                V = R.getAttribute("style");
                                            return V && ("string" == typeof V ? function(R, A) {
                                                var V, W;
                                                R.replace(/;\s*$/, "").split(";").forEach(function(Q) {
                                                    var z = Q.split(":");
                                                    V = z[0].trim().toLowerCase(), W = z[1].trim(), A[V] = W
                                                })
                                            }(V, A) : function(R, A) {
                                                for (var Q in R) void 0 !== R[Q] && (A[Q.toLowerCase()] = R[Q])
                                            }(V, A)), A
                                        },
                                        parsePointsAttribute: function(R) {
                                            if (!R) return null;
                                            var V, W, A = [];
                                            for (V = 0, W = (R = (R = R.replace(/,/g, " ").trim()).split(/\s+/)).length; V < W; V += 2) A.push({
                                                x: parseFloat(R[V]),
                                                y: parseFloat(R[V + 1])
                                            });
                                            return A
                                        },
                                        getCSSRules: function(R) {
                                            var V, W, A = R.getElementsByTagName("style"),
                                                Q = {};
                                            for (V = 0, W = A.length; V < W; V++) {
                                                var te = A[V].textContent;
                                                "" !== (te = te.replace(/\/\*[\s\S]*?\*\//g, "")).trim() && te.split("}").filter(function(oe) {
                                                    return oe.trim()
                                                }).forEach(function(oe) {
                                                    var ce = oe.split("{"),
                                                        X = {},
                                                        J = ce[1].trim().split(";").filter(function(he) {
                                                            return he.trim()
                                                        });
                                                    for (V = 0, W = J.length; V < W; V++) {
                                                        var ee = J[V].split(":"),
                                                            q = ee[0].trim(),
                                                            ne = ee[1].trim();
                                                        X[q] = ne
                                                    }(oe = ce[0].trim()).split(",").forEach(function(he) {
                                                        "" !== (he = he.replace(/^svg/i, "").trim()) && (Q[he] ? f.util.object.extend(Q[he], X) : Q[he] = f.util.object.clone(X))
                                                    })
                                                })
                                            }
                                            return Q
                                        },
                                        loadSVGFromURL: function(R, A, V, W) {
                                            R = R.replace(/^\n\s*/, "").trim(), new f.util.request(R, {
                                                method: "get",
                                                onComplete: function(z) {
                                                    var te = z.responseXML;
                                                    if (!te || !te.documentElement) return A && A(null), !1;
                                                    f.parseSVGDocument(te.documentElement, function(oe, ce, X, U) {
                                                        A && A(oe, ce, X, U)
                                                    }, V, W)
                                                }
                                            })
                                        },
                                        loadSVGFromString: function(R, A, V, W) {
                                            var z = (new f.window.DOMParser).parseFromString(R.trim(), "text/xml");
                                            f.parseSVGDocument(z.documentElement, function(te, oe, ce, X) {
                                                A(te, oe, ce, X)
                                            }, V, W)
                                        }
                                    })
                                }(Ee), b.ElementsParser = function(v, f, m, d, a, u) {
                                    this.elements = v, this.callback = f, this.options = m, this.reviver = d, this.svgUid = m && m.svgUid || 0, this.parsingOptions = a, this.regexUrl = /^url\(['"]?#([^'"]+)['"]?\)/g, this.doc = u
                                },
                                function(v) {
                                    v.parse = function() {
                                        this.instances = new Array(this.elements.length), this.numElements = this.elements.length, this.createObjects()
                                    }, v.createObjects = function() {
                                        var f = this;
                                        this.elements.forEach(function(m, d) {
                                            m.setAttribute("svgUid", f.svgUid), f.createObject(m, d)
                                        })
                                    }, v.findTag = function(f) {
                                        return b[b.util.string.capitalize(f.tagName.replace("svg:", ""))]
                                    }, v.createObject = function(f, m) {
                                        var d = this.findTag(f);
                                        if (d && d.fromElement) try {
                                            d.fromElement(f, this.createCallback(m, f), this.options)
                                        } catch (a) {
                                            b.log(a)
                                        } else this.checkIfDone()
                                    }, v.createCallback = function(f, m) {
                                        var d = this;
                                        return function(a) {
                                            var u;
                                            d.resolveGradient(a, m, "fill"), d.resolveGradient(a, m, "stroke"), a instanceof b.Image && a._originalElement && (u = a.parsePreserveAspectRatioAttribute(m)), a._removeTransformMatrix(u), d.resolveClipPath(a, m), d.reviver && d.reviver(m, a), d.instances[f] = a, d.checkIfDone()
                                        }
                                    }, v.extractPropertyDefinition = function(f, m, d) {
                                        var a = f[m],
                                            u = this.regexUrl;
                                        if (u.test(a)) {
                                            u.lastIndex = 0;
                                            var o = u.exec(a)[1];
                                            return u.lastIndex = 0, b[d][this.svgUid][o]
                                        }
                                    }, v.resolveGradient = function(f, m, d) {
                                        var a = this.extractPropertyDefinition(f, d, "gradientDefs");
                                        if (a) {
                                            var u = m.getAttribute(d + "-opacity"),
                                                o = b.Gradient.fromElement(a, f, u, this.options);
                                            f.set(d, o)
                                        }
                                    }, v.createClipPathCallback = function(f, m) {
                                        return function(d) {
                                            d._removeTransformMatrix(), d.fillRule = d.clipRule, m.push(d)
                                        }
                                    }, v.resolveClipPath = function(f, m) {
                                        var a, o, h, p, d = this.extractPropertyDefinition(f, "clipPath", "clipPaths");
                                        if (d) {
                                            h = [], o = b.util.invertTransform(f.calcTransformMatrix());
                                            for (var y = d[0].parentNode, C = m; C.parentNode && C.getAttribute("clip-path") !== f.clipPath;) C = C.parentNode;
                                            C.parentNode.appendChild(y);
                                            for (var D = 0; D < d.length; D++) this.findTag(a = d[D]).fromElement(a, this.createClipPathCallback(f, h), this.options);
                                            d = 1 === h.length ? h[0] : new b.Group(h), p = b.util.multiplyTransformMatrices(o, d.calcTransformMatrix()), d.clipPath && this.resolveClipPath(d, C);
                                            var l = b.util.qrDecompose(p);
                                            d.flipX = !1, d.flipY = !1, d.set("scaleX", l.scaleX), d.set("scaleY", l.scaleY), d.angle = l.angle, d.skewX = l.skewX, d.skewY = 0, d.setPositionByOrigin({
                                                x: l.translateX,
                                                y: l.translateY
                                            }, "center", "center"), f.clipPath = d
                                        } else delete f.clipPath
                                    }, v.checkIfDone = function() {
                                        0 == --this.numElements && (this.instances = this.instances.filter(function(f) {
                                            return null != f
                                        }), this.callback(this.instances, this.elements))
                                    }
                                }(b.ElementsParser.prototype),
                                function(v) {
                                    "use strict";
                                    var f = v.fabric || (v.fabric = {});

                                    function m(d, a) {
                                        this.x = d, this.y = a
                                    }
                                    f.Point ? f.warn("fabric.Point is already defined") : (f.Point = m, m.prototype = {
                                        type: "point",
                                        constructor: m,
                                        add: function(d) {
                                            return new m(this.x + d.x, this.y + d.y)
                                        },
                                        addEquals: function(d) {
                                            return this.x += d.x, this.y += d.y, this
                                        },
                                        scalarAdd: function(d) {
                                            return new m(this.x + d, this.y + d)
                                        },
                                        scalarAddEquals: function(d) {
                                            return this.x += d, this.y += d, this
                                        },
                                        subtract: function(d) {
                                            return new m(this.x - d.x, this.y - d.y)
                                        },
                                        subtractEquals: function(d) {
                                            return this.x -= d.x, this.y -= d.y, this
                                        },
                                        scalarSubtract: function(d) {
                                            return new m(this.x - d, this.y - d)
                                        },
                                        scalarSubtractEquals: function(d) {
                                            return this.x -= d, this.y -= d, this
                                        },
                                        multiply: function(d) {
                                            return new m(this.x * d, this.y * d)
                                        },
                                        multiplyEquals: function(d) {
                                            return this.x *= d, this.y *= d, this
                                        },
                                        divide: function(d) {
                                            return new m(this.x / d, this.y / d)
                                        },
                                        divideEquals: function(d) {
                                            return this.x /= d, this.y /= d, this
                                        },
                                        eq: function(d) {
                                            return this.x === d.x && this.y === d.y
                                        },
                                        lt: function(d) {
                                            return this.x < d.x && this.y < d.y
                                        },
                                        lte: function(d) {
                                            return this.x <= d.x && this.y <= d.y
                                        },
                                        gt: function(d) {
                                            return this.x > d.x && this.y > d.y
                                        },
                                        gte: function(d) {
                                            return this.x >= d.x && this.y >= d.y
                                        },
                                        lerp: function(d, a) {
                                            return void 0 === a && (a = .5), a = Math.max(Math.min(1, a), 0), new m(this.x + (d.x - this.x) * a, this.y + (d.y - this.y) * a)
                                        },
                                        distanceFrom: function(d) {
                                            var a = this.x - d.x,
                                                u = this.y - d.y;
                                            return Math.sqrt(a * a + u * u)
                                        },
                                        midPointFrom: function(d) {
                                            return this.lerp(d)
                                        },
                                        min: function(d) {
                                            return new m(Math.min(this.x, d.x), Math.min(this.y, d.y))
                                        },
                                        max: function(d) {
                                            return new m(Math.max(this.x, d.x), Math.max(this.y, d.y))
                                        },
                                        toString: function() {
                                            return this.x + "," + this.y
                                        },
                                        setXY: function(d, a) {
                                            return this.x = d, this.y = a, this
                                        },
                                        setX: function(d) {
                                            return this.x = d, this
                                        },
                                        setY: function(d) {
                                            return this.y = d, this
                                        },
                                        setFromPoint: function(d) {
                                            return this.x = d.x, this.y = d.y, this
                                        },
                                        swap: function(d) {
                                            var a = this.x,
                                                u = this.y;
                                            this.x = d.x, this.y = d.y, d.x = a, d.y = u
                                        },
                                        clone: function() {
                                            return new m(this.x, this.y)
                                        }
                                    })
                                }(Ee),
                                function(v) {
                                    "use strict";
                                    var f = v.fabric || (v.fabric = {});

                                    function m(d) {
                                        this.status = d, this.points = []
                                    }
                                    f.Intersection ? f.warn("fabric.Intersection is already defined") : (f.Intersection = m, f.Intersection.prototype = {
                                        constructor: m,
                                        appendPoint: function(d) {
                                            return this.points.push(d), this
                                        },
                                        appendPoints: function(d) {
                                            return this.points = this.points.concat(d), this
                                        }
                                    }, f.Intersection.intersectLineLine = function(d, a, u, o) {
                                        var h, p = (o.x - u.x) * (d.y - u.y) - (o.y - u.y) * (d.x - u.x),
                                            l = (a.x - d.x) * (d.y - u.y) - (a.y - d.y) * (d.x - u.x),
                                            y = (o.y - u.y) * (a.x - d.x) - (o.x - u.x) * (a.y - d.y);
                                        if (0 !== y) {
                                            var C = p / y,
                                                D = l / y;
                                            0 <= C && C <= 1 && 0 <= D && D <= 1 ? (h = new m("Intersection")).appendPoint(new f.Point(d.x + C * (a.x - d.x), d.y + C * (a.y - d.y))) : h = new m
                                        } else h = new m(0 === p || 0 === l ? "Coincident" : "Parallel");
                                        return h
                                    }, f.Intersection.intersectLinePolygon = function(d, a, u) {
                                        var y, C, o = new m,
                                            h = u.length;
                                        for (C = 0; C < h; C++) y = m.intersectLineLine(d, a, u[C], u[(C + 1) % h]), o.appendPoints(y.points);
                                        return o.points.length > 0 && (o.status = "Intersection"), o
                                    }, f.Intersection.intersectPolygonPolygon = function(d, a) {
                                        var h, u = new m,
                                            o = d.length;
                                        for (h = 0; h < o; h++) {
                                            var y = m.intersectLinePolygon(d[h], d[(h + 1) % o], a);
                                            u.appendPoints(y.points)
                                        }
                                        return u.points.length > 0 && (u.status = "Intersection"), u
                                    }, f.Intersection.intersectPolygonRectangle = function(d, a, u) {
                                        var o = a.min(u),
                                            h = a.max(u),
                                            p = new f.Point(h.x, o.y),
                                            l = new f.Point(o.x, h.y),
                                            y = m.intersectLinePolygon(o, p, d),
                                            C = m.intersectLinePolygon(p, h, d),
                                            D = m.intersectLinePolygon(h, l, d),
                                            E = m.intersectLinePolygon(l, o, d),
                                            T = new m;
                                        return T.appendPoints(y.points), T.appendPoints(C.points), T.appendPoints(D.points), T.appendPoints(E.points), T.points.length > 0 && (T.status = "Intersection"), T
                                    })
                                }(Ee),
                                function(v) {
                                    "use strict";
                                    var f = v.fabric || (v.fabric = {});

                                    function m(a) {
                                        a ? this._tryParsingColor(a) : this.setSource([0, 0, 0, 1])
                                    }

                                    function d(a, u, o) {
                                        return o < 0 && (o += 1), o > 1 && (o -= 1), o < 1 / 6 ? a + 6 * (u - a) * o : o < .5 ? u : o < 2 / 3 ? a + (u - a) * (2 / 3 - o) * 6 : a
                                    }
                                    f.Color ? f.warn("fabric.Color is already defined.") : (f.Color = m, f.Color.prototype = {
                                        _tryParsingColor: function(a) {
                                            var u;
                                            a in m.colorNameMap && (a = m.colorNameMap[a]), "transparent" === a && (u = [255, 255, 255, 0]), u || (u = m.sourceFromHex(a)), u || (u = m.sourceFromRgb(a)), u || (u = m.sourceFromHsl(a)), u || (u = [0, 0, 0, 1]), u && this.setSource(u)
                                        },
                                        _rgbToHsl: function(a, u, o) {
                                            var h, p, l, y = f.util.array.max([a /= 255, u /= 255, o /= 255]),
                                                C = f.util.array.min([a, u, o]);
                                            if (l = (y + C) / 2, y === C) h = p = 0;
                                            else {
                                                var D = y - C;
                                                switch (p = l > .5 ? D / (2 - y - C) : D / (y + C), y) {
                                                    case a:
                                                        h = (u - o) / D + (u < o ? 6 : 0);
                                                        break;
                                                    case u:
                                                        h = (o - a) / D + 2;
                                                        break;
                                                    case o:
                                                        h = (a - u) / D + 4
                                                }
                                                h /= 6
                                            }
                                            return [Math.round(360 * h), Math.round(100 * p), Math.round(100 * l)]
                                        },
                                        getSource: function() {
                                            return this._source
                                        },
                                        setSource: function(a) {
                                            this._source = a
                                        },
                                        toRgb: function() {
                                            var a = this.getSource();
                                            return "rgb(" + a[0] + "," + a[1] + "," + a[2] + ")"
                                        },
                                        toRgba: function() {
                                            var a = this.getSource();
                                            return "rgba(" + a[0] + "," + a[1] + "," + a[2] + "," + a[3] + ")"
                                        },
                                        toHsl: function() {
                                            var a = this.getSource(),
                                                u = this._rgbToHsl(a[0], a[1], a[2]);
                                            return "hsl(" + u[0] + "," + u[1] + "%," + u[2] + "%)"
                                        },
                                        toHsla: function() {
                                            var a = this.getSource(),
                                                u = this._rgbToHsl(a[0], a[1], a[2]);
                                            return "hsla(" + u[0] + "," + u[1] + "%," + u[2] + "%," + a[3] + ")"
                                        },
                                        toHex: function() {
                                            var u, o, h, a = this.getSource();
                                            return u = 1 === (u = a[0].toString(16)).length ? "0" + u : u, o = 1 === (o = a[1].toString(16)).length ? "0" + o : o, h = 1 === (h = a[2].toString(16)).length ? "0" + h : h, u.toUpperCase() + o.toUpperCase() + h.toUpperCase()
                                        },
                                        toHexa: function() {
                                            var u, a = this.getSource();
                                            return u = 1 === (u = (u = Math.round(255 * a[3])).toString(16)).length ? "0" + u : u, this.toHex() + u.toUpperCase()
                                        },
                                        getAlpha: function() {
                                            return this.getSource()[3]
                                        },
                                        setAlpha: function(a) {
                                            var u = this.getSource();
                                            return u[3] = a, this.setSource(u), this
                                        },
                                        toGrayscale: function() {
                                            var a = this.getSource(),
                                                u = parseInt((.3 * a[0] + .59 * a[1] + .11 * a[2]).toFixed(0), 10);
                                            return this.setSource([u, u, u, a[3]]), this
                                        },
                                        toBlackWhite: function(a) {
                                            var u = this.getSource(),
                                                o = (.3 * u[0] + .59 * u[1] + .11 * u[2]).toFixed(0),
                                                h = u[3];
                                            return a = a || 127, o = Number(o) < Number(a) ? 0 : 255, this.setSource([o, o, o, h]), this
                                        },
                                        overlayWith: function(a) {
                                            a instanceof m || (a = new m(a));
                                            var y, u = [],
                                                o = this.getAlpha(),
                                                p = this.getSource(),
                                                l = a.getSource();
                                            for (y = 0; y < 3; y++) u.push(Math.round(.5 * p[y] + .5 * l[y]));
                                            return u[3] = o, this.setSource(u), this
                                        }
                                    }, f.Color.reRGBa = /^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i, f.Color.reHSLa = /^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i, f.Color.reHex = /^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i, f.Color.colorNameMap = {
                                        aliceblue: "#F0F8FF",
                                        antiquewhite: "#FAEBD7",
                                        aqua: "#00FFFF",
                                        aquamarine: "#7FFFD4",
                                        azure: "#F0FFFF",
                                        beige: "#F5F5DC",
                                        bisque: "#FFE4C4",
                                        black: "#000000",
                                        blanchedalmond: "#FFEBCD",
                                        blue: "#0000FF",
                                        blueviolet: "#8A2BE2",
                                        brown: "#A52A2A",
                                        burlywood: "#DEB887",
                                        cadetblue: "#5F9EA0",
                                        chartreuse: "#7FFF00",
                                        chocolate: "#D2691E",
                                        coral: "#FF7F50",
                                        cornflowerblue: "#6495ED",
                                        cornsilk: "#FFF8DC",
                                        crimson: "#DC143C",
                                        cyan: "#00FFFF",
                                        darkblue: "#00008B",
                                        darkcyan: "#008B8B",
                                        darkgoldenrod: "#B8860B",
                                        darkgray: "#A9A9A9",
                                        darkgrey: "#A9A9A9",
                                        darkgreen: "#006400",
                                        darkkhaki: "#BDB76B",
                                        darkmagenta: "#8B008B",
                                        darkolivegreen: "#556B2F",
                                        darkorange: "#FF8C00",
                                        darkorchid: "#9932CC",
                                        darkred: "#8B0000",
                                        darksalmon: "#E9967A",
                                        darkseagreen: "#8FBC8F",
                                        darkslateblue: "#483D8B",
                                        darkslategray: "#2F4F4F",
                                        darkslategrey: "#2F4F4F",
                                        darkturquoise: "#00CED1",
                                        darkviolet: "#9400D3",
                                        deeppink: "#FF1493",
                                        deepskyblue: "#00BFFF",
                                        dimgray: "#696969",
                                        dimgrey: "#696969",
                                        dodgerblue: "#1E90FF",
                                        firebrick: "#B22222",
                                        floralwhite: "#FFFAF0",
                                        forestgreen: "#228B22",
                                        fuchsia: "#FF00FF",
                                        gainsboro: "#DCDCDC",
                                        ghostwhite: "#F8F8FF",
                                        gold: "#FFD700",
                                        goldenrod: "#DAA520",
                                        gray: "#808080",
                                        grey: "#808080",
                                        green: "#008000",
                                        greenyellow: "#ADFF2F",
                                        honeydew: "#F0FFF0",
                                        hotpink: "#FF69B4",
                                        indianred: "#CD5C5C",
                                        indigo: "#4B0082",
                                        ivory: "#FFFFF0",
                                        khaki: "#F0E68C",
                                        lavender: "#E6E6FA",
                                        lavenderblush: "#FFF0F5",
                                        lawngreen: "#7CFC00",
                                        lemonchiffon: "#FFFACD",
                                        lightblue: "#ADD8E6",
                                        lightcoral: "#F08080",
                                        lightcyan: "#E0FFFF",
                                        lightgoldenrodyellow: "#FAFAD2",
                                        lightgray: "#D3D3D3",
                                        lightgrey: "#D3D3D3",
                                        lightgreen: "#90EE90",
                                        lightpink: "#FFB6C1",
                                        lightsalmon: "#FFA07A",
                                        lightseagreen: "#20B2AA",
                                        lightskyblue: "#87CEFA",
                                        lightslategray: "#778899",
                                        lightslategrey: "#778899",
                                        lightsteelblue: "#B0C4DE",
                                        lightyellow: "#FFFFE0",
                                        lime: "#00FF00",
                                        limegreen: "#32CD32",
                                        linen: "#FAF0E6",
                                        magenta: "#FF00FF",
                                        maroon: "#800000",
                                        mediumaquamarine: "#66CDAA",
                                        mediumblue: "#0000CD",
                                        mediumorchid: "#BA55D3",
                                        mediumpurple: "#9370DB",
                                        mediumseagreen: "#3CB371",
                                        mediumslateblue: "#7B68EE",
                                        mediumspringgreen: "#00FA9A",
                                        mediumturquoise: "#48D1CC",
                                        mediumvioletred: "#C71585",
                                        midnightblue: "#191970",
                                        mintcream: "#F5FFFA",
                                        mistyrose: "#FFE4E1",
                                        moccasin: "#FFE4B5",
                                        navajowhite: "#FFDEAD",
                                        navy: "#000080",
                                        oldlace: "#FDF5E6",
                                        olive: "#808000",
                                        olivedrab: "#6B8E23",
                                        orange: "#FFA500",
                                        orangered: "#FF4500",
                                        orchid: "#DA70D6",
                                        palegoldenrod: "#EEE8AA",
                                        palegreen: "#98FB98",
                                        paleturquoise: "#AFEEEE",
                                        palevioletred: "#DB7093",
                                        papayawhip: "#FFEFD5",
                                        peachpuff: "#FFDAB9",
                                        peru: "#CD853F",
                                        pink: "#FFC0CB",
                                        plum: "#DDA0DD",
                                        powderblue: "#B0E0E6",
                                        purple: "#800080",
                                        rebeccapurple: "#663399",
                                        red: "#FF0000",
                                        rosybrown: "#BC8F8F",
                                        royalblue: "#4169E1",
                                        saddlebrown: "#8B4513",
                                        salmon: "#FA8072",
                                        sandybrown: "#F4A460",
                                        seagreen: "#2E8B57",
                                        seashell: "#FFF5EE",
                                        sienna: "#A0522D",
                                        silver: "#C0C0C0",
                                        skyblue: "#87CEEB",
                                        slateblue: "#6A5ACD",
                                        slategray: "#708090",
                                        slategrey: "#708090",
                                        snow: "#FFFAFA",
                                        springgreen: "#00FF7F",
                                        steelblue: "#4682B4",
                                        tan: "#D2B48C",
                                        teal: "#008080",
                                        thistle: "#D8BFD8",
                                        tomato: "#FF6347",
                                        turquoise: "#40E0D0",
                                        violet: "#EE82EE",
                                        wheat: "#F5DEB3",
                                        white: "#FFFFFF",
                                        whitesmoke: "#F5F5F5",
                                        yellow: "#FFFF00",
                                        yellowgreen: "#9ACD32"
                                    }, f.Color.fromRgb = function(a) {
                                        return m.fromSource(m.sourceFromRgb(a))
                                    }, f.Color.sourceFromRgb = function(a) {
                                        var u = a.match(m.reRGBa);
                                        if (u) {
                                            var o = parseInt(u[1], 10) / (/%$/.test(u[1]) ? 100 : 1) * (/%$/.test(u[1]) ? 255 : 1),
                                                h = parseInt(u[2], 10) / (/%$/.test(u[2]) ? 100 : 1) * (/%$/.test(u[2]) ? 255 : 1),
                                                p = parseInt(u[3], 10) / (/%$/.test(u[3]) ? 100 : 1) * (/%$/.test(u[3]) ? 255 : 1);
                                            return [parseInt(o, 10), parseInt(h, 10), parseInt(p, 10), u[4] ? parseFloat(u[4]) : 1]
                                        }
                                    }, f.Color.fromRgba = m.fromRgb, f.Color.fromHsl = function(a) {
                                        return m.fromSource(m.sourceFromHsl(a))
                                    }, f.Color.sourceFromHsl = function(a) {
                                        var u = a.match(m.reHSLa);
                                        if (u) {
                                            var l, y, C, o = (parseFloat(u[1]) % 360 + 360) % 360 / 360,
                                                h = parseFloat(u[2]) / (/%$/.test(u[2]) ? 100 : 1),
                                                p = parseFloat(u[3]) / (/%$/.test(u[3]) ? 100 : 1);
                                            if (0 === h) l = y = C = p;
                                            else {
                                                var D = p <= .5 ? p * (h + 1) : p + h - p * h,
                                                    E = 2 * p - D;
                                                l = d(E, D, o + 1 / 3), y = d(E, D, o), C = d(E, D, o - 1 / 3)
                                            }
                                            return [Math.round(255 * l), Math.round(255 * y), Math.round(255 * C), u[4] ? parseFloat(u[4]) : 1]
                                        }
                                    }, f.Color.fromHsla = m.fromHsl, f.Color.fromHex = function(a) {
                                        return m.fromSource(m.sourceFromHex(a))
                                    }, f.Color.sourceFromHex = function(a) {
                                        if (a.match(m.reHex)) {
                                            var u = a.slice(a.indexOf("#") + 1),
                                                o = 3 === u.length || 4 === u.length,
                                                h = 8 === u.length || 4 === u.length,
                                                p = o ? u.charAt(0) + u.charAt(0) : u.substring(0, 2),
                                                l = o ? u.charAt(1) + u.charAt(1) : u.substring(2, 4),
                                                y = o ? u.charAt(2) + u.charAt(2) : u.substring(4, 6),
                                                C = h ? o ? u.charAt(3) + u.charAt(3) : u.substring(6, 8) : "FF";
                                            return [parseInt(p, 16), parseInt(l, 16), parseInt(y, 16), parseFloat((parseInt(C, 16) / 255).toFixed(2))]
                                        }
                                    }, f.Color.fromSource = function(a) {
                                        var u = new m;
                                        return u.setSource(a), u
                                    })
                                }(Ee),
                                function(v) {
                                    "use strict";
                                    var f = v.fabric || (v.fabric = {}),
                                        m = ["e", "se", "s", "sw", "w", "nw", "n", "ne", "e"],
                                        d = ["ns", "nesw", "ew", "nwse"],
                                        a = {},
                                        u = "left",
                                        o = "top",
                                        h = "right",
                                        p = "bottom",
                                        l = "center",
                                        y = {
                                            top: p,
                                            bottom: o,
                                            left: h,
                                            right: u,
                                            center: l
                                        },
                                        C = f.util.radiansToDegrees,
                                        D = Math.sign || function(X) {
                                            return (X > 0) - (X < 0) || +X
                                        };

                                    function E(X, U) {
                                        var J = X.angle + C(Math.atan2(U.y, U.x)) + 360;
                                        return Math.round(J % 360 / 45)
                                    }

                                    function T(X, U) {
                                        var J = U.transform.target,
                                            ee = J.canvas,
                                            q = f.util.object.clone(U);
                                        q.target = J, ee && ee.fire("object:" + X, q), J.fire(X, U)
                                    }

                                    function I(X, U) {
                                        var J = U.canvas,
                                            q = X[J.uniScaleKey];
                                        return J.uniformScaling && !q || !J.uniformScaling && q
                                    }

                                    function F(X) {
                                        return X.originX === l && X.originY === l
                                    }

                                    function B(X, U, J) {
                                        var ee = X.lockScalingX,
                                            q = X.lockScalingY;
                                        return !!(ee && q || !U && (ee || q) && J || ee && "x" === U || q && "y" === U)
                                    }

                                    function fe(X, U, J, ee) {
                                        return {
                                            e: X,
                                            transform: U,
                                            pointer: {
                                                x: J,
                                                y: ee
                                            }
                                        }
                                    }

                                    function ae(X) {
                                        return function(U, J, ee, q) {
                                            var ne = J.target,
                                                he = ne.getCenterPoint(),
                                                Ie = ne.translateToOriginPoint(he, J.originX, J.originY),
                                                ve = X(U, J, ee, q);
                                            return ne.setPositionByOrigin(Ie, J.originX, J.originY), ve
                                        }
                                    }

                                    function _e(X, U) {
                                        return function(J, ee, q, ne) {
                                            var he = U(J, ee, q, ne);
                                            return he && T(X, fe(J, ee, q, ne)), he
                                        }
                                    }

                                    function be(X, U, J, ee, q) {
                                        var ne = X.target,
                                            he = ne.controls[X.corner],
                                            Ie = ne.canvas.getZoom(),
                                            ve = ne.padding / Ie,
                                            Z = ne.toLocalPoint(new f.Point(ee, q), U, J);
                                        return Z.x >= ve && (Z.x -= ve), Z.x <= -ve && (Z.x += ve), Z.y >= ve && (Z.y -= ve), Z.y <= ve && (Z.y += ve), Z.x -= he.offsetX, Z.y -= he.offsetY, Z
                                    }

                                    function me(X) {
                                        return X.flipX !== X.flipY
                                    }

                                    function O(X, U, J, ee, q) {
                                        if (0 !== X[U]) {
                                            var ne = X._getTransformedDimensions()[ee];
                                            X.set(J, q / ne * X[J])
                                        }
                                    }

                                    function N(X, U, J, ee) {
                                        var Z, q = U.target,
                                            ne = q._getTransformedDimensions(0, q.skewY),
                                            he = be(U, U.originX, U.originY, J, ee),
                                            Ie = Math.abs(2 * he.x) - ne.x,
                                            ve = q.skewX;
                                        Ie < 2 ? Z = 0 : (Z = C(Math.atan2(Ie / q.scaleX, ne.y / q.scaleY)), U.originX === u && U.originY === p && (Z = -Z), U.originX === h && U.originY === o && (Z = -Z), me(q) && (Z = -Z));
                                        var Ce = ve !== Z;
                                        if (Ce) {
                                            var Re = q._getTransformedDimensions().y;
                                            q.set("skewX", Z), O(q, "skewY", "scaleY", "y", Re)
                                        }
                                        return Ce
                                    }

                                    function k(X, U, J, ee) {
                                        var Z, q = U.target,
                                            ne = q._getTransformedDimensions(q.skewX, 0),
                                            he = be(U, U.originX, U.originY, J, ee),
                                            Ie = Math.abs(2 * he.y) - ne.y,
                                            ve = q.skewY;
                                        Ie < 2 ? Z = 0 : (Z = C(Math.atan2(Ie / q.scaleY, ne.x / q.scaleX)), U.originX === u && U.originY === p && (Z = -Z), U.originX === h && U.originY === o && (Z = -Z), me(q) && (Z = -Z));
                                        var Ce = ve !== Z;
                                        if (Ce) {
                                            var Re = q._getTransformedDimensions().x;
                                            q.set("skewY", Z), O(q, "skewX", "scaleX", "x", Re)
                                        }
                                        return Ce
                                    }

                                    function A(X, U, J, ee, q) {
                                        var Z, Ce, Re, Ue, wt, at, ne = U.target,
                                            he = ne.lockScalingX,
                                            Ie = ne.lockScalingY,
                                            ve = (q = q || {}).by,
                                            Ze = I(X, ne),
                                            Ge = B(ne, ve, Ze),
                                            $n = U.gestureScale;
                                        if (Ge) return !1;
                                        if ($n) Ce = U.scaleX * $n, Re = U.scaleY * $n;
                                        else {
                                            if (Z = be(U, U.originX, U.originY, J, ee), wt = "y" !== ve ? D(Z.x) : 1, at = "x" !== ve ? D(Z.y) : 1, U.signX || (U.signX = wt), U.signY || (U.signY = at), ne.lockScalingFlip && (U.signX !== wt || U.signY !== at)) return !1;
                                            if (Ue = ne._getTransformedDimensions(), Ze && !ve) {
                                                var Ei = Math.abs(Z.x) + Math.abs(Z.y),
                                                    Jt = U.original,
                                                    Wa = Ei / (Math.abs(Ue.x * Jt.scaleX / ne.scaleX) + Math.abs(Ue.y * Jt.scaleY / ne.scaleY));
                                                Ce = Jt.scaleX * Wa, Re = Jt.scaleY * Wa
                                            } else Ce = Math.abs(Z.x * ne.scaleX / Ue.x), Re = Math.abs(Z.y * ne.scaleY / Ue.y);
                                            F(U) && (Ce *= 2, Re *= 2), U.signX !== wt && "y" !== ve && (U.originX = y[U.originX], Ce *= -1, U.signX = wt), U.signY !== at && "x" !== ve && (U.originY = y[U.originY], Re *= -1, U.signY = at)
                                        }
                                        var Ya = ne.scaleX,
                                            Ga = ne.scaleY;
                                        return ve ? ("x" === ve && ne.set("scaleX", Ce), "y" === ve && ne.set("scaleY", Re)) : (!he && ne.set("scaleX", Ce), !Ie && ne.set("scaleY", Re)), Ya !== ne.scaleX || Ga !== ne.scaleY
                                    }
                                    a.scaleCursorStyleHandler = function(X, U, J) {
                                        var q = I(X, J),
                                            ne = "";
                                        if (0 !== U.x && 0 === U.y ? ne = "x" : 0 === U.x && 0 !== U.y && (ne = "y"), B(J, ne, q)) return "not-allowed";
                                        var he = E(J, U);
                                        return m[he] + "-resize"
                                    }, a.skewCursorStyleHandler = function(X, U, J) {
                                        if (0 !== U.x && J.lockSkewingY || 0 !== U.y && J.lockSkewingX) return "not-allowed";
                                        var q = E(J, U) % 4;
                                        return d[q] + "-resize"
                                    }, a.scaleSkewCursorStyleHandler = function(X, U, J) {
                                        return X[J.canvas.altActionKey] ? a.skewCursorStyleHandler(X, U, J) : a.scaleCursorStyleHandler(X, U, J)
                                    }, a.rotationWithSnapping = _e("rotating", ae(function(X, U, J, ee) {
                                        var q = U,
                                            ne = q.target,
                                            he = ne.translateToOriginPoint(ne.getCenterPoint(), q.originX, q.originY);
                                        if (ne.lockRotation) return !1;
                                        var Ce, Ie = Math.atan2(q.ey - he.y, q.ex - he.x),
                                            ve = Math.atan2(ee - he.y, J - he.x),
                                            Z = C(ve - Ie + q.theta);
                                        if (ne.snapAngle > 0) {
                                            var Re = ne.snapAngle,
                                                Ue = ne.snapThreshold || Re,
                                                Ze = Math.ceil(Z / Re) * Re,
                                                Ge = Math.floor(Z / Re) * Re;
                                            Math.abs(Z - Ge) < Ue ? Z = Ge : Math.abs(Z - Ze) < Ue && (Z = Ze)
                                        }
                                        return Z < 0 && (Z = 360 + Z), Ce = ne.angle !== (Z %= 360), ne.angle = Z, Ce
                                    })), a.scalingEqually = _e("scaling", ae(function(X, U, J, ee) {
                                        return A(X, U, J, ee)
                                    })), a.scalingX = _e("scaling", ae(function(X, U, J, ee) {
                                        return A(X, U, J, ee, {
                                            by: "x"
                                        })
                                    })), a.scalingY = _e("scaling", ae(function(X, U, J, ee) {
                                        return A(X, U, J, ee, {
                                            by: "y"
                                        })
                                    })), a.scalingYOrSkewingX = function(X, U, J, ee) {
                                        return X[U.target.canvas.altActionKey] ? a.skewHandlerX(X, U, J, ee) : a.scalingY(X, U, J, ee)
                                    }, a.scalingXOrSkewingY = function(X, U, J, ee) {
                                        return X[U.target.canvas.altActionKey] ? a.skewHandlerY(X, U, J, ee) : a.scalingX(X, U, J, ee)
                                    }, a.changeWidth = _e("resizing", ae(function(X, U, J, ee) {
                                        var q = U.target,
                                            ne = be(U, U.originX, U.originY, J, ee),
                                            he = q.strokeWidth / (q.strokeUniform ? q.scaleX : 1),
                                            Ie = F(U) ? 2 : 1,
                                            ve = q.width,
                                            Z = Math.abs(ne.x * Ie / q.scaleX) - he;
                                        return q.set("width", Math.max(Z, 0)), ve !== Z
                                    })), a.skewHandlerX = function(X, U, J, ee) {
                                        var he, q = U.target,
                                            ne = q.skewX,
                                            Ie = U.originY;
                                        return !q.lockSkewingX && (0 === ne ? he = be(U, l, l, J, ee).x > 0 ? u : h : (ne > 0 && (he = Ie === o ? u : h), ne < 0 && (he = Ie === o ? h : u), me(q) && (he = he === u ? h : u)), U.originX = he, _e("skewing", ae(N))(X, U, J, ee))
                                    }, a.skewHandlerY = function(X, U, J, ee) {
                                        var he, q = U.target,
                                            ne = q.skewY,
                                            Ie = U.originX;
                                        return !q.lockSkewingY && (0 === ne ? he = be(U, l, l, J, ee).y > 0 ? o : p : (ne > 0 && (he = Ie === u ? o : p), ne < 0 && (he = Ie === u ? p : o), me(q) && (he = he === o ? p : o)), U.originY = he, _e("skewing", ae(k))(X, U, J, ee))
                                    }, a.dragHandler = function(X, U, J, ee) {
                                        var q = U.target,
                                            ne = J - U.offsetX,
                                            he = ee - U.offsetY,
                                            Ie = !q.get("lockMovementX") && q.left !== ne,
                                            ve = !q.get("lockMovementY") && q.top !== he;
                                        return Ie && q.set("left", ne), ve && q.set("top", he), (Ie || ve) && T("moving", fe(X, U, J, ee)), Ie || ve
                                    }, a.scaleOrSkewActionName = function(X, U, J) {
                                        var ee = X[J.canvas.altActionKey];
                                        return 0 === U.x ? ee ? "skewX" : "scaleY" : 0 === U.y ? ee ? "skewY" : "scaleX" : void 0
                                    }, a.rotationStyleHandler = function(X, U, J) {
                                        return J.lockRotation ? "not-allowed" : U.cursorStyle
                                    }, a.fireEvent = T, a.wrapWithFixedAnchor = ae, a.wrapWithFireEvent = _e, a.getLocalPoint = be, f.controlsUtils = a
                                }(Ee),
                                function(v) {
                                    "use strict";
                                    var f = v.fabric || (v.fabric = {}),
                                        m = f.util.degreesToRadians,
                                        d = f.controlsUtils;
                                    d.renderCircleControl = function(o, h, p, l, y) {
                                        l = l || {};
                                        var G, C = this.sizeX || l.cornerSize || y.cornerSize,
                                            D = this.sizeY || l.cornerSize || y.cornerSize,
                                            E = void 0 !== l.transparentCorners ? l.transparentCorners : y.transparentCorners,
                                            T = E ? "stroke" : "fill",
                                            I = !E && (l.cornerStrokeColor || y.cornerStrokeColor),
                                            F = h,
                                            B = p;
                                        o.save(), o.fillStyle = l.cornerColor || y.cornerColor, o.strokeStyle = l.cornerStrokeColor || y.cornerStrokeColor, C > D ? (G = C, o.scale(1, D / C), B = p * C / D) : D > C ? (G = D, o.scale(C / D, 1), F = h * D / C) : G = C, o.lineWidth = 1, o.beginPath(), o.arc(F, B, G / 2, 0, 2 * Math.PI, !1), o[T](), I && o.stroke(), o.restore()
                                    }, d.renderSquareControl = function(o, h, p, l, y) {
                                        l = l || {};
                                        var C = this.sizeX || l.cornerSize || y.cornerSize,
                                            D = this.sizeY || l.cornerSize || y.cornerSize,
                                            E = void 0 !== l.transparentCorners ? l.transparentCorners : y.transparentCorners,
                                            T = E ? "stroke" : "fill",
                                            I = !E && (l.cornerStrokeColor || y.cornerStrokeColor),
                                            F = C / 2,
                                            B = D / 2;
                                        o.save(), o.fillStyle = l.cornerColor || y.cornerColor, o.strokeStyle = l.cornerStrokeColor || y.cornerStrokeColor, o.lineWidth = 1, o.translate(h, p), o.rotate(m(y.angle)), o[T + "Rect"](-F, -B, C, D), I && o.strokeRect(-F, -B, C, D), o.restore()
                                    }
                                }(Ee),
                                function(v) {
                                    "use strict";
                                    var f = v.fabric || (v.fabric = {});
                                    f.Control = function(d) {
                                        for (var a in d) this[a] = d[a]
                                    }, f.Control.prototype = {
                                        visible: !0,
                                        actionName: "scale",
                                        angle: 0,
                                        x: 0,
                                        y: 0,
                                        offsetX: 0,
                                        offsetY: 0,
                                        sizeX: null,
                                        sizeY: null,
                                        touchSizeX: null,
                                        touchSizeY: null,
                                        cursorStyle: "crosshair",
                                        withConnection: !1,
                                        actionHandler: function() {},
                                        mouseDownHandler: function() {},
                                        mouseUpHandler: function() {},
                                        getActionHandler: function() {
                                            return this.actionHandler
                                        },
                                        getMouseDownHandler: function() {
                                            return this.mouseDownHandler
                                        },
                                        getMouseUpHandler: function() {
                                            return this.mouseUpHandler
                                        },
                                        cursorStyleHandler: function(d, a) {
                                            return a.cursorStyle
                                        },
                                        getActionName: function(d, a) {
                                            return a.actionName
                                        },
                                        getVisibility: function(d, a) {
                                            var u = d._controlsVisibility;
                                            return u && void 0 !== u[a] ? u[a] : this.visible
                                        },
                                        setVisibility: function(d) {
                                            this.visible = d
                                        },
                                        positionHandler: function(d, a) {
                                            return f.util.transformPoint({
                                                x: this.x * d.x + this.offsetX,
                                                y: this.y * d.y + this.offsetY
                                            }, a)
                                        },
                                        calcCornerCoords: function(d, a, u, o, h) {
                                            var p, l, y, C, D = h ? this.touchSizeX : this.sizeX,
                                                E = h ? this.touchSizeY : this.sizeY;
                                            if (D && E && D !== E) {
                                                var T = Math.atan2(E, D),
                                                    I = Math.sqrt(D * D + E * E) / 2,
                                                    F = T - f.util.degreesToRadians(d),
                                                    B = Math.PI / 2 - T - f.util.degreesToRadians(d);
                                                p = I * f.util.cos(F), l = I * f.util.sin(F), y = I * f.util.cos(B), C = I * f.util.sin(B)
                                            } else I = .7071067812 * (D && E ? D : a), F = f.util.degreesToRadians(45 - d), p = y = I * f.util.cos(F), l = C = I * f.util.sin(F);
                                            return {
                                                tl: {
                                                    x: u - C,
                                                    y: o - y
                                                },
                                                tr: {
                                                    x: u + p,
                                                    y: o - l
                                                },
                                                bl: {
                                                    x: u - p,
                                                    y: o + l
                                                },
                                                br: {
                                                    x: u + C,
                                                    y: o + y
                                                }
                                            }
                                        },
                                        render: function(d, a, u, o, h) {
                                            switch ((o = o || {}).cornerStyle || h.cornerStyle) {
                                                case "circle":
                                                    f.controlsUtils.renderCircleControl.call(this, d, a, u, o, h);
                                                    break;
                                                default:
                                                    f.controlsUtils.renderSquareControl.call(this, d, a, u, o, h)
                                            }
                                        }
                                    }
                                }(Ee),
                                function() {
                                    function v(u, o) {
                                        var l, y, C, D, h = u.getAttribute("style"),
                                            p = u.getAttribute("offset") || 0;
                                        if (p = (p = parseFloat(p) / (/%$/.test(p) ? 100 : 1)) < 0 ? 0 : p > 1 ? 1 : p, h) {
                                            var E = h.split(/\s*;\s*/);
                                            for ("" === E[E.length - 1] && E.pop(), D = E.length; D--;) {
                                                var T = E[D].split(/\s*:\s*/),
                                                    I = T[0].trim(),
                                                    F = T[1].trim();
                                                "stop-color" === I ? l = F : "stop-opacity" === I && (C = F)
                                            }
                                        }
                                        return l || (l = u.getAttribute("stop-color") || "rgb(0,0,0)"), C || (C = u.getAttribute("stop-opacity")), y = (l = new b.Color(l)).getAlpha(), C = isNaN(parseFloat(C)) ? 1 : parseFloat(C), C *= y * o, {
                                            offset: p,
                                            color: l.toRgb(),
                                            opacity: C
                                        }
                                    }
                                    var d = b.util.object.clone;
                                    b.Gradient = b.util.createClass({
                                        offsetX: 0,
                                        offsetY: 0,
                                        gradientTransform: null,
                                        gradientUnits: "pixels",
                                        type: "linear",
                                        initialize: function(u) {
                                            u || (u = {}), u.coords || (u.coords = {});
                                            var o, h = this;
                                            Object.keys(u).forEach(function(p) {
                                                h[p] = u[p]
                                            }), this.id ? this.id += "_" + b.Object.__uid++ : this.id = b.Object.__uid++, o = {
                                                x1: u.coords.x1 || 0,
                                                y1: u.coords.y1 || 0,
                                                x2: u.coords.x2 || 0,
                                                y2: u.coords.y2 || 0
                                            }, "radial" === this.type && (o.r1 = u.coords.r1 || 0, o.r2 = u.coords.r2 || 0), this.coords = o, this.colorStops = u.colorStops.slice()
                                        },
                                        addColorStop: function(u) {
                                            for (var o in u) {
                                                var h = new b.Color(u[o]);
                                                this.colorStops.push({
                                                    offset: parseFloat(o),
                                                    color: h.toRgb(),
                                                    opacity: h.getAlpha()
                                                })
                                            }
                                            return this
                                        },
                                        toObject: function(u) {
                                            var o = {
                                                type: this.type,
                                                coords: this.coords,
                                                colorStops: this.colorStops,
                                                offsetX: this.offsetX,
                                                offsetY: this.offsetY,
                                                gradientUnits: this.gradientUnits,
                                                gradientTransform: this.gradientTransform ? this.gradientTransform.concat() : this.gradientTransform
                                            };
                                            return b.util.populateWithProperties(this, o, u), o
                                        },
                                        toSVG: function(u, o) {
                                            var p, l, y, C, h = d(this.coords, !0),
                                                D = (o = o || {}, d(this.colorStops, !0)),
                                                E = h.r1 > h.r2,
                                                T = this.gradientTransform ? this.gradientTransform.concat() : b.iMatrix.concat(),
                                                I = -this.offsetX,
                                                F = -this.offsetY,
                                                B = !!o.additionalTransform,
                                                G = "pixels" === this.gradientUnits ? "userSpaceOnUse" : "objectBoundingBox";
                                            if (D.sort(function(fe, ae) {
                                                    return fe.offset - ae.offset
                                                }), "objectBoundingBox" === G ? (I /= u.width, F /= u.height) : (I += u.width / 2, F += u.height / 2), "path" === u.type && "percentage" !== this.gradientUnits && (I -= u.pathOffset.x, F -= u.pathOffset.y), T[4] -= I, T[5] -= F, C = 'id="SVGID_' + this.id + '" gradientUnits="' + G + '"', C += ' gradientTransform="' + (B ? o.additionalTransform + " " : "") + b.util.matrixToSVG(T) + '" ', "linear" === this.type ? y = ["<linearGradient ", C, ' x1="', h.x1, '" y1="', h.y1, '" x2="', h.x2, '" y2="', h.y2, '">\n'] : "radial" === this.type && (y = ["<radialGradient ", C, ' cx="', E ? h.x1 : h.x2, '" cy="', E ? h.y1 : h.y2, '" r="', E ? h.r1 : h.r2, '" fx="', E ? h.x2 : h.x1, '" fy="', E ? h.y2 : h.y1, '">\n']), "radial" === this.type) {
                                                if (E)
                                                    for ((D = D.concat()).reverse(), p = 0, l = D.length; p < l; p++) D[p].offset = 1 - D[p].offset;
                                                var ie = Math.min(h.r1, h.r2);
                                                if (ie > 0) {
                                                    var ue = ie / Math.max(h.r1, h.r2);
                                                    for (p = 0, l = D.length; p < l; p++) D[p].offset += ue * (1 - D[p].offset)
                                                }
                                            }
                                            for (p = 0, l = D.length; p < l; p++) {
                                                var de = D[p];
                                                y.push("<stop ", 'offset="', 100 * de.offset + "%", '" style="stop-color:', de.color, void 0 !== de.opacity ? ";stop-opacity: " + de.opacity : ";", '"/>\n')
                                            }
                                            return y.push("linear" === this.type ? "</linearGradient>\n" : "</radialGradient>\n"), y.join("")
                                        },
                                        toLive: function(u) {
                                            var o, p, l, h = b.util.object.clone(this.coords);
                                            if (this.type) {
                                                for ("linear" === this.type ? o = u.createLinearGradient(h.x1, h.y1, h.x2, h.y2) : "radial" === this.type && (o = u.createRadialGradient(h.x1, h.y1, h.r1, h.x2, h.y2, h.r2)), p = 0, l = this.colorStops.length; p < l; p++) {
                                                    var y = this.colorStops[p].color,
                                                        C = this.colorStops[p].opacity,
                                                        D = this.colorStops[p].offset;
                                                    void 0 !== C && (y = new b.Color(y).setAlpha(C).toRgba()), o.addColorStop(D, y)
                                                }
                                                return o
                                            }
                                        }
                                    }), b.util.object.extend(b.Gradient, {
                                        fromElement: function(u, o, h, p) {
                                            var l = parseFloat(h) / (/%$/.test(h) ? 100 : 1);
                                            l = l < 0 ? 0 : l > 1 ? 1 : l, isNaN(l) && (l = 1);
                                            var C, I, F, ie, y = u.getElementsByTagName("stop"),
                                                D = "userSpaceOnUse" === u.getAttribute("gradientUnits") ? "pixels" : "percentage",
                                                E = u.getAttribute("gradientTransform") || "",
                                                T = [],
                                                B = 0,
                                                G = 0;
                                            for ("linearGradient" === u.nodeName || "LINEARGRADIENT" === u.nodeName ? (C = "linear", I = function(u) {
                                                    return {
                                                        x1: u.getAttribute("x1") || 0,
                                                        y1: u.getAttribute("y1") || 0,
                                                        x2: u.getAttribute("x2") || "100%",
                                                        y2: u.getAttribute("y2") || 0
                                                    }
                                                }(u)) : (C = "radial", I = function(u) {
                                                    return {
                                                        x1: u.getAttribute("fx") || u.getAttribute("cx") || "50%",
                                                        y1: u.getAttribute("fy") || u.getAttribute("cy") || "50%",
                                                        r1: 0,
                                                        x2: u.getAttribute("cx") || "50%",
                                                        y2: u.getAttribute("cy") || "50%",
                                                        r2: u.getAttribute("r") || "50%"
                                                    }
                                                }(u)), F = y.length; F--;) T.push(v(y[F], l));
                                            return ie = b.parseTransformAttribute(E),
                                                function(u, o, h, p) {
                                                    var l, y;
                                                    Object.keys(o).forEach(function(C) {
                                                        "Infinity" === (l = o[C]) ? y = 1: "-Infinity" === l ? y = 0 : (y = parseFloat(o[C], 10), "string" == typeof l && /^(\d+\.\d+)%|(\d+)%$/.test(l) && (y *= .01, "pixels" === p && (("x1" === C || "x2" === C || "r2" === C) && (y *= h.viewBoxWidth || h.width), ("y1" === C || "y2" === C) && (y *= h.viewBoxHeight || h.height)))), o[C] = y
                                                    })
                                                }(0, I, p, D), "pixels" === D && (B = -o.left, G = -o.top), new b.Gradient({
                                                    id: u.getAttribute("id"),
                                                    type: C,
                                                    coords: I,
                                                    colorStops: T,
                                                    gradientUnits: D,
                                                    gradientTransform: ie,
                                                    offsetX: B,
                                                    offsetY: G
                                                })
                                        }
                                    })
                                }(),
                                function() {
                                    "use strict";
                                    var v = b.util.toFixed;
                                    b.Pattern = b.util.createClass({
                                        repeat: "repeat",
                                        offsetX: 0,
                                        offsetY: 0,
                                        crossOrigin: "",
                                        patternTransform: null,
                                        initialize: function(f, m) {
                                            if (f || (f = {}), this.id = b.Object.__uid++, this.setOptions(f), !f.source || f.source && "string" != typeof f.source) m && m(this);
                                            else {
                                                var d = this;
                                                this.source = b.util.createImage(), b.util.loadImage(f.source, function(a, u) {
                                                    d.source = a, m && m(d, u)
                                                }, null, this.crossOrigin)
                                            }
                                        },
                                        toObject: function(f) {
                                            var d, a, m = b.Object.NUM_FRACTION_DIGITS;
                                            return "string" == typeof this.source.src ? d = this.source.src : "object" == typeof this.source && this.source.toDataURL && (d = this.source.toDataURL()), a = {
                                                type: "pattern",
                                                source: d,
                                                repeat: this.repeat,
                                                crossOrigin: this.crossOrigin,
                                                offsetX: v(this.offsetX, m),
                                                offsetY: v(this.offsetY, m),
                                                patternTransform: this.patternTransform ? this.patternTransform.concat() : null
                                            }, b.util.populateWithProperties(this, a, f), a
                                        },
                                        toSVG: function(f) {
                                            var m = "function" == typeof this.source ? this.source() : this.source,
                                                d = m.width / f.width,
                                                a = m.height / f.height,
                                                u = this.offsetX / f.width,
                                                o = this.offsetY / f.height,
                                                h = "";
                                            return ("repeat-x" === this.repeat || "no-repeat" === this.repeat) && (a = 1, o && (a += Math.abs(o))), ("repeat-y" === this.repeat || "no-repeat" === this.repeat) && (d = 1, u && (d += Math.abs(u))), m.src ? h = m.src : m.toDataURL && (h = m.toDataURL()), '<pattern id="SVGID_' + this.id + '" x="' + u + '" y="' + o + '" width="' + d + '" height="' + a + '">\n<image x="0" y="0" width="' + m.width + '" height="' + m.height + '" xlink:href="' + h + '"></image>\n</pattern>\n'
                                        },
                                        setOptions: function(f) {
                                            for (var m in f) this[m] = f[m]
                                        },
                                        toLive: function(f) {
                                            var m = this.source;
                                            return m && (void 0 === m.src || m.complete && 0 !== m.naturalWidth && 0 !== m.naturalHeight) ? f.createPattern(m, this.repeat) : ""
                                        }
                                    })
                                }(),
                                function(v) {
                                    "use strict";
                                    var f = v.fabric || (v.fabric = {}),
                                        m = f.util.toFixed;
                                    f.Shadow ? f.warn("fabric.Shadow is already defined.") : (f.Shadow = f.util.createClass({
                                        color: "rgb(0,0,0)",
                                        blur: 0,
                                        offsetX: 0,
                                        offsetY: 0,
                                        affectStroke: !1,
                                        includeDefaultValues: !0,
                                        nonScaling: !1,
                                        initialize: function(d) {
                                            for (var a in "string" == typeof d && (d = this._parseShadow(d)), d) this[a] = d[a];
                                            this.id = f.Object.__uid++
                                        },
                                        _parseShadow: function(d) {
                                            var a = d.trim(),
                                                u = f.Shadow.reOffsetsAndBlur.exec(a) || [];
                                            return {
                                                color: (a.replace(f.Shadow.reOffsetsAndBlur, "") || "rgb(0,0,0)").trim(),
                                                offsetX: parseFloat(u[1], 10) || 0,
                                                offsetY: parseFloat(u[2], 10) || 0,
                                                blur: parseFloat(u[3], 10) || 0
                                            }
                                        },
                                        toString: function() {
                                            return [this.offsetX, this.offsetY, this.blur, this.color].join("px ")
                                        },
                                        toSVG: function(d) {
                                            var a = 40,
                                                u = 40,
                                                o = f.Object.NUM_FRACTION_DIGITS,
                                                h = f.util.rotateVector({
                                                    x: this.offsetX,
                                                    y: this.offsetY
                                                }, f.util.degreesToRadians(-d.angle)),
                                                l = new f.Color(this.color);
                                            return d.width && d.height && (a = 100 * m((Math.abs(h.x) + this.blur) / d.width, o) + 20, u = 100 * m((Math.abs(h.y) + this.blur) / d.height, o) + 20), d.flipX && (h.x *= -1), d.flipY && (h.y *= -1), '<filter id="SVGID_' + this.id + '" y="-' + u + '%" height="' + (100 + 2 * u) + '%" x="-' + a + '%" width="' + (100 + 2 * a) + '%" >\n\t<feGaussianBlur in="SourceAlpha" stdDeviation="' + m(this.blur ? this.blur / 2 : 0, o) + '"></feGaussianBlur>\n\t<feOffset dx="' + m(h.x, o) + '" dy="' + m(h.y, o) + '" result="oBlur" ></feOffset>\n\t<feFlood flood-color="' + l.toRgb() + '" flood-opacity="' + l.getAlpha() + '"/>\n\t<feComposite in2="oBlur" operator="in" />\n\t<feMerge>\n\t\t<feMergeNode></feMergeNode>\n\t\t<feMergeNode in="SourceGraphic"></feMergeNode>\n\t</feMerge>\n</filter>\n'
                                        },
                                        toObject: function() {
                                            if (this.includeDefaultValues) return {
                                                color: this.color,
                                                blur: this.blur,
                                                offsetX: this.offsetX,
                                                offsetY: this.offsetY,
                                                affectStroke: this.affectStroke,
                                                nonScaling: this.nonScaling
                                            };
                                            var d = {},
                                                a = f.Shadow.prototype;
                                            return ["color", "blur", "offsetX", "offsetY", "affectStroke", "nonScaling"].forEach(function(u) {
                                                this[u] !== a[u] && (d[u] = this[u])
                                            }, this), d
                                        }
                                    }), f.Shadow.reOffsetsAndBlur = /(?:\s|^)(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(\d+(?:\.\d*)?(?:px)?)?(?:\s?|$)(?:$|\s)/)
                                }(Ee),
                                function() {
                                    "use strict";
                                    if (b.StaticCanvas) b.warn("fabric.StaticCanvas is already defined.");
                                    else {
                                        var v = b.util.object.extend,
                                            f = b.util.getElementOffset,
                                            m = b.util.removeFromArray,
                                            d = b.util.toFixed,
                                            a = b.util.transformPoint,
                                            u = b.util.invertTransform,
                                            o = b.util.getNodeCanvas,
                                            h = b.util.createCanvasElement,
                                            p = new Error("Could not initialize `canvas` element");
                                        b.StaticCanvas = b.util.createClass(b.CommonMethods, {
                                            initialize: function(l, y) {
                                                y || (y = {}), this.renderAndResetBound = this.renderAndReset.bind(this), this.requestRenderAllBound = this.requestRenderAll.bind(this), this._initStatic(l, y)
                                            },
                                            backgroundColor: "",
                                            backgroundImage: null,
                                            overlayColor: "",
                                            overlayImage: null,
                                            includeDefaultValues: !0,
                                            stateful: !1,
                                            renderOnAddRemove: !0,
                                            controlsAboveOverlay: !1,
                                            allowTouchScrolling: !1,
                                            imageSmoothingEnabled: !0,
                                            viewportTransform: b.iMatrix.concat(),
                                            backgroundVpt: !0,
                                            overlayVpt: !0,
                                            enableRetinaScaling: !0,
                                            vptCoords: {},
                                            skipOffscreen: !0,
                                            clipPath: void 0,
                                            _initStatic: function(l, y) {
                                                var C = this.requestRenderAllBound;
                                                this._objects = [], this._createLowerCanvas(l), this._initOptions(y), this.interactive || this._initRetinaScaling(), y.overlayImage && this.setOverlayImage(y.overlayImage, C), y.backgroundImage && this.setBackgroundImage(y.backgroundImage, C), y.backgroundColor && this.setBackgroundColor(y.backgroundColor, C), y.overlayColor && this.setOverlayColor(y.overlayColor, C), this.calcOffset()
                                            },
                                            _isRetinaScaling: function() {
                                                return b.devicePixelRatio > 1 && this.enableRetinaScaling
                                            },
                                            getRetinaScaling: function() {
                                                return this._isRetinaScaling() ? Math.max(1, b.devicePixelRatio) : 1
                                            },
                                            _initRetinaScaling: function() {
                                                if (this._isRetinaScaling()) {
                                                    var l = b.devicePixelRatio;
                                                    this.__initRetinaScaling(l, this.lowerCanvasEl, this.contextContainer), this.upperCanvasEl && this.__initRetinaScaling(l, this.upperCanvasEl, this.contextTop)
                                                }
                                            },
                                            __initRetinaScaling: function(l, y, C) {
                                                y.setAttribute("width", this.width * l), y.setAttribute("height", this.height * l), C.scale(l, l)
                                            },
                                            calcOffset: function() {
                                                return this._offset = f(this.lowerCanvasEl), this
                                            },
                                            setOverlayImage: function(l, y, C) {
                                                return this.__setBgOverlayImage("overlayImage", l, y, C)
                                            },
                                            setBackgroundImage: function(l, y, C) {
                                                return this.__setBgOverlayImage("backgroundImage", l, y, C)
                                            },
                                            setOverlayColor: function(l, y) {
                                                return this.__setBgOverlayColor("overlayColor", l, y)
                                            },
                                            setBackgroundColor: function(l, y) {
                                                return this.__setBgOverlayColor("backgroundColor", l, y)
                                            },
                                            __setBgOverlayImage: function(l, y, C, D) {
                                                return "string" == typeof y ? b.util.loadImage(y, function(E, T) {
                                                    if (E) {
                                                        var I = new b.Image(E, D);
                                                        this[l] = I, I.canvas = this
                                                    }
                                                    C && C(E, T)
                                                }, this, D && D.crossOrigin) : (D && y.setOptions(D), this[l] = y, y && (y.canvas = this), C && C(y, !1)), this
                                            },
                                            __setBgOverlayColor: function(l, y, C) {
                                                return this[l] = y, this._initGradient(y, l), this._initPattern(y, l, C), this
                                            },
                                            _createCanvasElement: function() {
                                                var l = h();
                                                if (!l || (l.style || (l.style = {}), void 0 === l.getContext)) throw p;
                                                return l
                                            },
                                            _initOptions: function(l) {
                                                var y = this.lowerCanvasEl;
                                                this._setOptions(l), this.width = this.width || parseInt(y.width, 10) || 0, this.height = this.height || parseInt(y.height, 10) || 0, this.lowerCanvasEl.style && (y.width = this.width, y.height = this.height, y.style.width = this.width + "px", y.style.height = this.height + "px", this.viewportTransform = this.viewportTransform.slice())
                                            },
                                            _createLowerCanvas: function(l) {
                                                this.lowerCanvasEl = l && l.getContext ? l : b.util.getById(l) || this._createCanvasElement(), b.util.addClass(this.lowerCanvasEl, "lower-canvas"), this._originalCanvasStyle = this.lowerCanvasEl.style, this.interactive && this._applyCanvasStyle(this.lowerCanvasEl), this.contextContainer = this.lowerCanvasEl.getContext("2d")
                                            },
                                            getWidth: function() {
                                                return this.width
                                            },
                                            getHeight: function() {
                                                return this.height
                                            },
                                            setWidth: function(l, y) {
                                                return this.setDimensions({
                                                    width: l
                                                }, y)
                                            },
                                            setHeight: function(l, y) {
                                                return this.setDimensions({
                                                    height: l
                                                }, y)
                                            },
                                            setDimensions: function(l, y) {
                                                var C;
                                                for (var D in y = y || {}, l) C = l[D], y.cssOnly || (this._setBackstoreDimension(D, l[D]), C += "px", this.hasLostContext = !0), y.backstoreOnly || this._setCssDimension(D, C);
                                                return this._isCurrentlyDrawing && this.freeDrawingBrush && this.freeDrawingBrush._setBrushStyles(this.contextTop), this._initRetinaScaling(), this.calcOffset(), y.cssOnly || this.requestRenderAll(), this
                                            },
                                            _setBackstoreDimension: function(l, y) {
                                                return this.lowerCanvasEl[l] = y, this.upperCanvasEl && (this.upperCanvasEl[l] = y), this.cacheCanvasEl && (this.cacheCanvasEl[l] = y), this[l] = y, this
                                            },
                                            _setCssDimension: function(l, y) {
                                                return this.lowerCanvasEl.style[l] = y, this.upperCanvasEl && (this.upperCanvasEl.style[l] = y), this.wrapperEl && (this.wrapperEl.style[l] = y), this
                                            },
                                            getZoom: function() {
                                                return this.viewportTransform[0]
                                            },
                                            setViewportTransform: function(l) {
                                                var E, T, I, y = this._activeObject,
                                                    C = this.backgroundImage,
                                                    D = this.overlayImage;
                                                for (this.viewportTransform = l, T = 0, I = this._objects.length; T < I; T++)(E = this._objects[T]).group || E.setCoords(!0);
                                                return y && y.setCoords(), C && C.setCoords(!0), D && D.setCoords(!0), this.calcViewportBoundaries(), this.renderOnAddRemove && this.requestRenderAll(), this
                                            },
                                            zoomToPoint: function(l, y) {
                                                var C = l,
                                                    D = this.viewportTransform.slice(0);
                                                l = a(l, u(this.viewportTransform)), D[0] = y, D[3] = y;
                                                var E = a(l, D);
                                                return D[4] += C.x - E.x, D[5] += C.y - E.y, this.setViewportTransform(D)
                                            },
                                            setZoom: function(l) {
                                                return this.zoomToPoint(new b.Point(0, 0), l), this
                                            },
                                            absolutePan: function(l) {
                                                var y = this.viewportTransform.slice(0);
                                                return y[4] = -l.x, y[5] = -l.y, this.setViewportTransform(y)
                                            },
                                            relativePan: function(l) {
                                                return this.absolutePan(new b.Point(-l.x - this.viewportTransform[4], -l.y - this.viewportTransform[5]))
                                            },
                                            getElement: function() {
                                                return this.lowerCanvasEl
                                            },
                                            _onObjectAdded: function(l) {
                                                this.stateful && l.setupState(), l._set("canvas", this), l.setCoords(), this.fire("object:added", {
                                                    target: l
                                                }), l.fire("added")
                                            },
                                            _onObjectRemoved: function(l) {
                                                this.fire("object:removed", {
                                                    target: l
                                                }), l.fire("removed"), delete l.canvas
                                            },
                                            clearContext: function(l) {
                                                return l.clearRect(0, 0, this.width, this.height), this
                                            },
                                            getContext: function() {
                                                return this.contextContainer
                                            },
                                            clear: function() {
                                                return this.remove.apply(this, this.getObjects()), this.backgroundImage = null, this.overlayImage = null, this.backgroundColor = "", this.overlayColor = "", this._hasITextHandlers && (this.off("mouse:up", this._mouseUpITextHandler), this._iTextInstances = null, this._hasITextHandlers = !1), this.clearContext(this.contextContainer), this.fire("canvas:cleared"), this.renderOnAddRemove && this.requestRenderAll(), this
                                            },
                                            renderAll: function() {
                                                return this.renderCanvas(this.contextContainer, this._objects), this
                                            },
                                            renderAndReset: function() {
                                                this.isRendering = 0, this.renderAll()
                                            },
                                            requestRenderAll: function() {
                                                return this.isRendering || (this.isRendering = b.util.requestAnimFrame(this.renderAndResetBound)), this
                                            },
                                            calcViewportBoundaries: function() {
                                                var l = {},
                                                    y = this.width,
                                                    C = this.height,
                                                    D = u(this.viewportTransform);
                                                return l.tl = a({
                                                    x: 0,
                                                    y: 0
                                                }, D), l.br = a({
                                                    x: y,
                                                    y: C
                                                }, D), l.tr = new b.Point(l.br.x, l.tl.y), l.bl = new b.Point(l.tl.x, l.br.y), this.vptCoords = l, l
                                            },
                                            cancelRequestedRender: function() {
                                                this.isRendering && (b.util.cancelAnimFrame(this.isRendering), this.isRendering = 0)
                                            },
                                            renderCanvas: function(l, y) {
                                                var C = this.viewportTransform,
                                                    D = this.clipPath;
                                                this.cancelRequestedRender(), this.calcViewportBoundaries(), this.clearContext(l), b.util.setImageSmoothing(l, this.imageSmoothingEnabled), this.fire("before:render", {
                                                    ctx: l
                                                }), this._renderBackground(l), l.save(), l.transform(C[0], C[1], C[2], C[3], C[4], C[5]), this._renderObjects(l, y), l.restore(), !this.controlsAboveOverlay && this.interactive && this.drawControls(l), D && (D.canvas = this, D.shouldCache(), D._transformDone = !0, D.renderCache({
                                                    forClipping: !0
                                                }), this.drawClipPathOnCanvas(l)), this._renderOverlay(l), this.controlsAboveOverlay && this.interactive && this.drawControls(l), this.fire("after:render", {
                                                    ctx: l
                                                })
                                            },
                                            drawClipPathOnCanvas: function(l) {
                                                var y = this.viewportTransform,
                                                    C = this.clipPath;
                                                l.save(), l.transform(y[0], y[1], y[2], y[3], y[4], y[5]), l.globalCompositeOperation = "destination-in", C.transform(l), l.scale(1 / C.zoomX, 1 / C.zoomY), l.drawImage(C._cacheCanvas, -C.cacheTranslationX, -C.cacheTranslationY), l.restore()
                                            },
                                            _renderObjects: function(l, y) {
                                                var C, D;
                                                for (C = 0, D = y.length; C < D; ++C) y[C] && y[C].render(l)
                                            },
                                            _renderBackgroundOrOverlay: function(l, y) {
                                                var C = this[y + "Color"],
                                                    D = this[y + "Image"],
                                                    E = this.viewportTransform,
                                                    T = this[y + "Vpt"];
                                                if (C || D) {
                                                    if (C) {
                                                        l.save(), l.beginPath(), l.moveTo(0, 0), l.lineTo(this.width, 0), l.lineTo(this.width, this.height), l.lineTo(0, this.height), l.closePath(), l.fillStyle = C.toLive ? C.toLive(l, this) : C, T && l.transform(E[0], E[1], E[2], E[3], E[4], E[5]), l.transform(1, 0, 0, 1, C.offsetX || 0, C.offsetY || 0);
                                                        var I = C.gradientTransform || C.patternTransform;
                                                        I && l.transform(I[0], I[1], I[2], I[3], I[4], I[5]), l.fill(), l.restore()
                                                    }
                                                    D && (l.save(), T && l.transform(E[0], E[1], E[2], E[3], E[4], E[5]), D.render(l), l.restore())
                                                }
                                            },
                                            _renderBackground: function(l) {
                                                this._renderBackgroundOrOverlay(l, "background")
                                            },
                                            _renderOverlay: function(l) {
                                                this._renderBackgroundOrOverlay(l, "overlay")
                                            },
                                            getCenter: function() {
                                                return {
                                                    top: this.height / 2,
                                                    left: this.width / 2
                                                }
                                            },
                                            centerObjectH: function(l) {
                                                return this._centerObject(l, new b.Point(this.getCenter().left, l.getCenterPoint().y))
                                            },
                                            centerObjectV: function(l) {
                                                return this._centerObject(l, new b.Point(l.getCenterPoint().x, this.getCenter().top))
                                            },
                                            centerObject: function(l) {
                                                var y = this.getCenter();
                                                return this._centerObject(l, new b.Point(y.left, y.top))
                                            },
                                            viewportCenterObject: function(l) {
                                                var y = this.getVpCenter();
                                                return this._centerObject(l, y)
                                            },
                                            viewportCenterObjectH: function(l) {
                                                var y = this.getVpCenter();
                                                return this._centerObject(l, new b.Point(y.x, l.getCenterPoint().y)), this
                                            },
                                            viewportCenterObjectV: function(l) {
                                                var y = this.getVpCenter();
                                                return this._centerObject(l, new b.Point(l.getCenterPoint().x, y.y))
                                            },
                                            getVpCenter: function() {
                                                var l = this.getCenter(),
                                                    y = u(this.viewportTransform);
                                                return a({
                                                    x: l.left,
                                                    y: l.top
                                                }, y)
                                            },
                                            _centerObject: function(l, y) {
                                                return l.setPositionByOrigin(y, "center", "center"), l.setCoords(), this.renderOnAddRemove && this.requestRenderAll(), this
                                            },
                                            toDatalessJSON: function(l) {
                                                return this.toDatalessObject(l)
                                            },
                                            toObject: function(l) {
                                                return this._toObjectMethod("toObject", l)
                                            },
                                            toDatalessObject: function(l) {
                                                return this._toObjectMethod("toDatalessObject", l)
                                            },
                                            _toObjectMethod: function(l, y) {
                                                var C = this.clipPath,
                                                    D = {
                                                        version: b.version,
                                                        objects: this._toObjects(l, y)
                                                    };
                                                return C && !C.excludeFromExport && (D.clipPath = this._toObject(this.clipPath, l, y)), v(D, this.__serializeBgOverlay(l, y)), b.util.populateWithProperties(this, D, y), D
                                            },
                                            _toObjects: function(l, y) {
                                                return this._objects.filter(function(C) {
                                                    return !C.excludeFromExport
                                                }).map(function(C) {
                                                    return this._toObject(C, l, y)
                                                }, this)
                                            },
                                            _toObject: function(l, y, C) {
                                                var D;
                                                this.includeDefaultValues || (D = l.includeDefaultValues, l.includeDefaultValues = !1);
                                                var E = l[y](C);
                                                return this.includeDefaultValues || (l.includeDefaultValues = D), E
                                            },
                                            __serializeBgOverlay: function(l, y) {
                                                var C = {},
                                                    D = this.backgroundImage,
                                                    E = this.overlayImage,
                                                    T = this.backgroundColor,
                                                    I = this.overlayColor;
                                                return T && T.toObject ? T.excludeFromExport || (C.background = T.toObject(y)) : T && (C.background = T), I && I.toObject ? I.excludeFromExport || (C.overlay = I.toObject(y)) : I && (C.overlay = I), D && !D.excludeFromExport && (C.backgroundImage = this._toObject(D, l, y)), E && !E.excludeFromExport && (C.overlayImage = this._toObject(E, l, y)), C
                                            },
                                            svgViewportTransformation: !0,
                                            toSVG: function(l, y) {
                                                l || (l = {}), l.reviver = y;
                                                var C = [];
                                                return this._setSVGPreamble(C, l), this._setSVGHeader(C, l), this.clipPath && C.push('<g clip-path="url(#' + this.clipPath.clipPathId + ')" >\n'), this._setSVGBgOverlayColor(C, "background"), this._setSVGBgOverlayImage(C, "backgroundImage", y), this._setSVGObjects(C, y), this.clipPath && C.push("</g>\n"), this._setSVGBgOverlayColor(C, "overlay"), this._setSVGBgOverlayImage(C, "overlayImage", y), C.push("</svg>"), C.join("")
                                            },
                                            _setSVGPreamble: function(l, y) {
                                                y.suppressPreamble || l.push('<?xml version="1.0" encoding="', y.encoding || "UTF-8", '" standalone="no" ?>\n', '<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ', '"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n')
                                            },
                                            _setSVGHeader: function(l, y) {
                                                var E, C = y.width || this.width,
                                                    D = y.height || this.height,
                                                    T = 'viewBox="0 0 ' + this.width + " " + this.height + '" ',
                                                    I = b.Object.NUM_FRACTION_DIGITS;
                                                y.viewBox ? T = 'viewBox="' + y.viewBox.x + " " + y.viewBox.y + " " + y.viewBox.width + " " + y.viewBox.height + '" ' : this.svgViewportTransformation && (T = 'viewBox="' + d(-(E = this.viewportTransform)[4] / E[0], I) + " " + d(-E[5] / E[3], I) + " " + d(this.width / E[0], I) + " " + d(this.height / E[3], I) + '" '), l.push("<svg ", 'xmlns="http://www.w3.org/2000/svg" ', 'xmlns:xlink="http://www.w3.org/1999/xlink" ', 'version="1.1" ', 'width="', C, '" ', 'height="', D, '" ', T, 'xml:space="preserve">\n', "<desc>Created with Fabric.js ", b.version, "</desc>\n", "<defs>\n", this.createSVGFontFacesMarkup(), this.createSVGRefElementsMarkup(), this.createSVGClipPathMarkup(y), "</defs>\n")
                                            },
                                            createSVGClipPathMarkup: function(l) {
                                                var y = this.clipPath;
                                                return y ? (y.clipPathId = "CLIPPATH_" + b.Object.__uid++, '<clipPath id="' + y.clipPathId + '" >\n' + this.clipPath.toClipPathSVG(l.reviver) + "</clipPath>\n") : ""
                                            },
                                            createSVGRefElementsMarkup: function() {
                                                var l = this;
                                                return ["background", "overlay"].map(function(C) {
                                                    var D = l[C + "Color"];
                                                    if (D && D.toLive) {
                                                        var E = l[C + "Vpt"],
                                                            T = l.viewportTransform;
                                                        return D.toSVG({
                                                            width: l.width / (E ? T[0] : 1),
                                                            height: l.height / (E ? T[3] : 1)
                                                        }, {
                                                            additionalTransform: E ? b.util.matrixToSVG(T) : ""
                                                        })
                                                    }
                                                }).join("")
                                            },
                                            createSVGFontFacesMarkup: function() {
                                                var C, D, E, T, I, B, G, ie, l = "",
                                                    y = {},
                                                    le = b.fontPaths,
                                                    ue = [];
                                                for (this._objects.forEach(function fe(ae) {
                                                        ue.push(ae), ae._objects && ae._objects.forEach(fe)
                                                    }), G = 0, ie = ue.length; G < ie; G++)
                                                    if (D = (C = ue[G]).fontFamily, -1 !== C.type.indexOf("text") && !y[D] && le[D] && (y[D] = !0, C.styles))
                                                        for (I in E = C.styles)
                                                            for (B in T = E[I]) !y[D = T[B].fontFamily] && le[D] && (y[D] = !0);
                                                for (var de in y) l += ["\t\t@font-face {\n", "\t\t\tfont-family: '", de, "';\n", "\t\t\tsrc: url('", le[de], "');\n", "\t\t}\n"].join("");
                                                return l && (l = ['\t<style type="text/css">', "<![CDATA[\n", l, "]]>", "</style>\n"].join("")), l
                                            },
                                            _setSVGObjects: function(l, y) {
                                                var C, D, E, T = this._objects;
                                                for (D = 0, E = T.length; D < E; D++) !(C = T[D]).excludeFromExport && this._setSVGObject(l, C, y)
                                            },
                                            _setSVGObject: function(l, y, C) {
                                                l.push(y.toSVG(C))
                                            },
                                            _setSVGBgOverlayImage: function(l, y, C) {
                                                this[y] && !this[y].excludeFromExport && this[y].toSVG && l.push(this[y].toSVG(C))
                                            },
                                            _setSVGBgOverlayColor: function(l, y) {
                                                var C = this[y + "Color"],
                                                    E = this.width,
                                                    T = this.height;
                                                if (C)
                                                    if (C.toLive) {
                                                        var I = C.repeat,
                                                            F = b.util.invertTransform(this.viewportTransform),
                                                            G = this[y + "Vpt"] ? b.util.matrixToSVG(F) : "";
                                                        l.push('<rect transform="' + G + " translate(", E / 2, ",", T / 2, ')"', ' x="', C.offsetX - E / 2, '" y="', C.offsetY - T / 2, '" ', 'width="', "repeat-y" === I || "no-repeat" === I ? C.source.width : E, '" height="', "repeat-x" === I || "no-repeat" === I ? C.source.height : T, '" fill="url(#SVGID_' + C.id + ')"', "></rect>\n")
                                                    } else l.push('<rect x="0" y="0" width="100%" height="100%" ', 'fill="', C, '"', "></rect>\n")
                                            },
                                            sendToBack: function(l) {
                                                if (!l) return this;
                                                var C, D, E, y = this._activeObject;
                                                if (l === y && "activeSelection" === l.type)
                                                    for (C = (E = y._objects).length; C--;) m(this._objects, D = E[C]), this._objects.unshift(D);
                                                else m(this._objects, l), this._objects.unshift(l);
                                                return this.renderOnAddRemove && this.requestRenderAll(), this
                                            },
                                            bringToFront: function(l) {
                                                if (!l) return this;
                                                var C, D, E, y = this._activeObject;
                                                if (l === y && "activeSelection" === l.type)
                                                    for (E = y._objects, C = 0; C < E.length; C++) m(this._objects, D = E[C]), this._objects.push(D);
                                                else m(this._objects, l), this._objects.push(l);
                                                return this.renderOnAddRemove && this.requestRenderAll(), this
                                            },
                                            sendBackwards: function(l, y) {
                                                if (!l) return this;
                                                var D, E, T, I, F, C = this._activeObject,
                                                    B = 0;
                                                if (l === C && "activeSelection" === l.type)
                                                    for (F = C._objects, D = 0; D < F.length; D++)(T = this._objects.indexOf(E = F[D])) > 0 + B && (I = T - 1, m(this._objects, E), this._objects.splice(I, 0, E)), B++;
                                                else 0 !== (T = this._objects.indexOf(l)) && (I = this._findNewLowerIndex(l, T, y), m(this._objects, l), this._objects.splice(I, 0, l));
                                                return this.renderOnAddRemove && this.requestRenderAll(), this
                                            },
                                            _findNewLowerIndex: function(l, y, C) {
                                                var D, E;
                                                if (C) {
                                                    for (D = y, E = y - 1; E >= 0; --E)
                                                        if (l.intersectsWithObject(this._objects[E]) || l.isContainedWithinObject(this._objects[E]) || this._objects[E].isContainedWithinObject(l)) {
                                                            D = E;
                                                            break
                                                        }
                                                } else D = y - 1;
                                                return D
                                            },
                                            bringForward: function(l, y) {
                                                if (!l) return this;
                                                var D, E, T, I, F, C = this._activeObject,
                                                    B = 0;
                                                if (l === C && "activeSelection" === l.type)
                                                    for (D = (F = C._objects).length; D--;)(T = this._objects.indexOf(E = F[D])) < this._objects.length - 1 - B && (I = T + 1, m(this._objects, E), this._objects.splice(I, 0, E)), B++;
                                                else(T = this._objects.indexOf(l)) !== this._objects.length - 1 && (I = this._findNewUpperIndex(l, T, y), m(this._objects, l), this._objects.splice(I, 0, l));
                                                return this.renderOnAddRemove && this.requestRenderAll(), this
                                            },
                                            _findNewUpperIndex: function(l, y, C) {
                                                var D, E, T;
                                                if (C) {
                                                    for (D = y, E = y + 1, T = this._objects.length; E < T; ++E)
                                                        if (l.intersectsWithObject(this._objects[E]) || l.isContainedWithinObject(this._objects[E]) || this._objects[E].isContainedWithinObject(l)) {
                                                            D = E;
                                                            break
                                                        }
                                                } else D = y + 1;
                                                return D
                                            },
                                            moveTo: function(l, y) {
                                                return m(this._objects, l), this._objects.splice(y, 0, l), this.renderOnAddRemove && this.requestRenderAll()
                                            },
                                            dispose: function() {
                                                return this.isRendering && (b.util.cancelAnimFrame(this.isRendering), this.isRendering = 0), this.forEachObject(function(l) {
                                                    l.dispose && l.dispose(), b.runningAnimations && b.runningAnimations.cancelByTarget(l)
                                                }), this._objects = [], this.backgroundImage && this.backgroundImage.dispose && this.backgroundImage.dispose(), this.backgroundImage = null, this.overlayImage && this.overlayImage.dispose && this.overlayImage.dispose(), this.overlayImage = null, this._iTextInstances = null, this.contextContainer = null, this.lowerCanvasEl.classList.remove("lower-canvas"), b.util.setStyle(this.lowerCanvasEl, this._originalCanvasStyle), delete this._originalCanvasStyle, this.lowerCanvasEl.setAttribute("width", this.width), this.lowerCanvasEl.setAttribute("height", this.height), b.util.cleanUpJsdomNode(this.lowerCanvasEl), this.lowerCanvasEl = void 0, this
                                            },
                                            toString: function() {
                                                return "#<fabric.Canvas (" + this.complexity() + "): { objects: " + this._objects.length + " }>"
                                            }
                                        }), v(b.StaticCanvas.prototype, b.Observable), v(b.StaticCanvas.prototype, b.Collection), v(b.StaticCanvas.prototype, b.DataURLExporter), v(b.StaticCanvas, {
                                            EMPTY_JSON: '{"objects": [], "background": "white"}',
                                            supports: function(l) {
                                                var y = h();
                                                if (!y || !y.getContext) return null;
                                                var C = y.getContext("2d");
                                                if (!C) return null;
                                                switch (l) {
                                                    case "setLineDash":
                                                        return void 0 !== C.setLineDash;
                                                    default:
                                                        return null
                                                }
                                            }
                                        }), b.StaticCanvas.prototype.toJSON = b.StaticCanvas.prototype.toObject, b.isLikelyNode && (b.StaticCanvas.prototype.createPNGStream = function() {
                                            var l = o(this.lowerCanvasEl);
                                            return l && l.createPNGStream()
                                        }, b.StaticCanvas.prototype.createJPEGStream = function(l) {
                                            var y = o(this.lowerCanvasEl);
                                            return y && y.createJPEGStream(l)
                                        })
                                    }
                                }(), b.BaseBrush = b.util.createClass({
                                    color: "rgb(0, 0, 0)",
                                    width: 1,
                                    shadow: null,
                                    strokeLineCap: "round",
                                    strokeLineJoin: "round",
                                    strokeMiterLimit: 10,
                                    strokeDashArray: null,
                                    limitedToCanvasSize: !1,
                                    _setBrushStyles: function(v) {
                                        v.strokeStyle = this.color, v.lineWidth = this.width, v.lineCap = this.strokeLineCap, v.miterLimit = this.strokeMiterLimit, v.lineJoin = this.strokeLineJoin, v.setLineDash(this.strokeDashArray || [])
                                    },
                                    _saveAndTransform: function(v) {
                                        var f = this.canvas.viewportTransform;
                                        v.save(), v.transform(f[0], f[1], f[2], f[3], f[4], f[5])
                                    },
                                    _setShadow: function() {
                                        if (this.shadow) {
                                            var v = this.canvas,
                                                f = this.shadow,
                                                m = v.contextTop,
                                                d = v.getZoom();
                                            v && v._isRetinaScaling() && (d *= b.devicePixelRatio), m.shadowColor = f.color, m.shadowBlur = f.blur * d, m.shadowOffsetX = f.offsetX * d, m.shadowOffsetY = f.offsetY * d
                                        }
                                    },
                                    needsFullRender: function() {
                                        return new b.Color(this.color).getAlpha() < 1 || !!this.shadow
                                    },
                                    _resetShadow: function() {
                                        var v = this.canvas.contextTop;
                                        v.shadowColor = "", v.shadowBlur = v.shadowOffsetX = v.shadowOffsetY = 0
                                    },
                                    _isOutSideCanvas: function(v) {
                                        return v.x < 0 || v.x > this.canvas.getWidth() || v.y < 0 || v.y > this.canvas.getHeight()
                                    }
                                }), b.PencilBrush = b.util.createClass(b.BaseBrush, {
                                    decimate: .4,
                                    drawStraightLine: !1,
                                    straightLineKey: "shiftKey",
                                    initialize: function(v) {
                                        this.canvas = v, this._points = []
                                    },
                                    needsFullRender: function() {
                                        return this.callSuper("needsFullRender") || this._hasStraightLine
                                    },
                                    _drawSegment: function(v, f, m) {
                                        var d = f.midPointFrom(m);
                                        return v.quadraticCurveTo(f.x, f.y, d.x, d.y), d
                                    },
                                    onMouseDown: function(v, f) {
                                        !this.canvas._isMainEvent(f.e) || (this.drawStraightLine = f.e[this.straightLineKey], this._prepareForDrawing(v), this._captureDrawingPath(v), this._render())
                                    },
                                    onMouseMove: function(v, f) {
                                        if (this.canvas._isMainEvent(f.e) && (this.drawStraightLine = f.e[this.straightLineKey], (!0 !== this.limitedToCanvasSize || !this._isOutSideCanvas(v)) && this._captureDrawingPath(v) && this._points.length > 1))
                                            if (this.needsFullRender()) this.canvas.clearContext(this.canvas.contextTop), this._render();
                                            else {
                                                var m = this._points,
                                                    d = m.length,
                                                    a = this.canvas.contextTop;
                                                this._saveAndTransform(a), this.oldEnd && (a.beginPath(), a.moveTo(this.oldEnd.x, this.oldEnd.y)), this.oldEnd = this._drawSegment(a, m[d - 2], m[d - 1], !0), a.stroke(), a.restore()
                                            }
                                    },
                                    onMouseUp: function(v) {
                                        return !this.canvas._isMainEvent(v.e) || (this.drawStraightLine = !1, this.oldEnd = void 0, this._finalizeAndAddPath(), !1)
                                    },
                                    _prepareForDrawing: function(v) {
                                        var f = new b.Point(v.x, v.y);
                                        this._reset(), this._addPoint(f), this.canvas.contextTop.moveTo(f.x, f.y)
                                    },
                                    _addPoint: function(v) {
                                        return !(this._points.length > 1 && v.eq(this._points[this._points.length - 1]) || (this.drawStraightLine && this._points.length > 1 && (this._hasStraightLine = !0, this._points.pop()), this._points.push(v), 0))
                                    },
                                    _reset: function() {
                                        this._points = [], this._setBrushStyles(this.canvas.contextTop), this._setShadow(), this._hasStraightLine = !1
                                    },
                                    _captureDrawingPath: function(v) {
                                        var f = new b.Point(v.x, v.y);
                                        return this._addPoint(f)
                                    },
                                    _render: function(v) {
                                        var f, m, d = this._points[0],
                                            a = this._points[1];
                                        if (this._saveAndTransform(v = v || this.canvas.contextTop), v.beginPath(), 2 === this._points.length && d.x === a.x && d.y === a.y) {
                                            var u = this.width / 1e3;
                                            d = new b.Point(d.x, d.y), a = new b.Point(a.x, a.y), d.x -= u, a.x += u
                                        }
                                        for (v.moveTo(d.x, d.y), f = 1, m = this._points.length; f < m; f++) this._drawSegment(v, d, a), d = this._points[f], a = this._points[f + 1];
                                        v.lineTo(d.x, d.y), v.stroke(), v.restore()
                                    },
                                    convertPointsToSVGPath: function(v) {
                                        return b.util.getSmoothPathFromPoints(v, this.width / 1e3)
                                    },
                                    _isEmptySVGPath: function(v) {
                                        return "M 0 0 Q 0 0 0 0 L 0 0" === b.util.joinPath(v)
                                    },
                                    createPath: function(v) {
                                        var f = new b.Path(v, {
                                            fill: null,
                                            stroke: this.color,
                                            strokeWidth: this.width,
                                            strokeLineCap: this.strokeLineCap,
                                            strokeMiterLimit: this.strokeMiterLimit,
                                            strokeLineJoin: this.strokeLineJoin,
                                            strokeDashArray: this.strokeDashArray
                                        });
                                        return this.shadow && (this.shadow.affectStroke = !0, f.shadow = new b.Shadow(this.shadow)), f
                                    },
                                    decimatePoints: function(v, f) {
                                        if (v.length <= 2) return v;
                                        var a, m = this.canvas.getZoom(),
                                            d = Math.pow(f / m, 2),
                                            u = v.length - 1,
                                            o = v[0],
                                            h = [o];
                                        for (a = 1; a < u - 1; a++) Math.pow(o.x - v[a].x, 2) + Math.pow(o.y - v[a].y, 2) >= d && h.push(o = v[a]);
                                        return h.push(v[u]), h
                                    },
                                    _finalizeAndAddPath: function() {
                                        this.canvas.contextTop.closePath(), this.decimate && (this._points = this.decimatePoints(this._points, this.decimate));
                                        var f = this.convertPointsToSVGPath(this._points);
                                        if (this._isEmptySVGPath(f)) this.canvas.requestRenderAll();
                                        else {
                                            var m = this.createPath(f);
                                            this.canvas.clearContext(this.canvas.contextTop), this.canvas.fire("before:path:created", {
                                                path: m
                                            }), this.canvas.add(m), this.canvas.requestRenderAll(), m.setCoords(), this._resetShadow(), this.canvas.fire("path:created", {
                                                path: m
                                            })
                                        }
                                    }
                                }), b.CircleBrush = b.util.createClass(b.BaseBrush, {
                                    width: 10,
                                    initialize: function(v) {
                                        this.canvas = v, this.points = []
                                    },
                                    drawDot: function(v) {
                                        var f = this.addPoint(v),
                                            m = this.canvas.contextTop;
                                        this._saveAndTransform(m), this.dot(m, f), m.restore()
                                    },
                                    dot: function(v, f) {
                                        v.fillStyle = f.fill, v.beginPath(), v.arc(f.x, f.y, f.radius, 0, 2 * Math.PI, !1), v.closePath(), v.fill()
                                    },
                                    onMouseDown: function(v) {
                                        this.points.length = 0, this.canvas.clearContext(this.canvas.contextTop), this._setShadow(), this.drawDot(v)
                                    },
                                    _render: function() {
                                        var f, m, v = this.canvas.contextTop,
                                            d = this.points;
                                        for (this._saveAndTransform(v), f = 0, m = d.length; f < m; f++) this.dot(v, d[f]);
                                        v.restore()
                                    },
                                    onMouseMove: function(v) {
                                        !0 === this.limitedToCanvasSize && this._isOutSideCanvas(v) || (this.needsFullRender() ? (this.canvas.clearContext(this.canvas.contextTop), this.addPoint(v), this._render()) : this.drawDot(v))
                                    },
                                    onMouseUp: function() {
                                        var f, m, v = this.canvas.renderOnAddRemove;
                                        this.canvas.renderOnAddRemove = !1;
                                        var d = [];
                                        for (f = 0, m = this.points.length; f < m; f++) {
                                            var a = this.points[f],
                                                u = new b.Circle({
                                                    radius: a.radius,
                                                    left: a.x,
                                                    top: a.y,
                                                    originX: "center",
                                                    originY: "center",
                                                    fill: a.fill
                                                });
                                            this.shadow && (u.shadow = new b.Shadow(this.shadow)), d.push(u)
                                        }
                                        var o = new b.Group(d);
                                        o.canvas = this.canvas, this.canvas.fire("before:path:created", {
                                            path: o
                                        }), this.canvas.add(o), this.canvas.fire("path:created", {
                                            path: o
                                        }), this.canvas.clearContext(this.canvas.contextTop), this._resetShadow(), this.canvas.renderOnAddRemove = v, this.canvas.requestRenderAll()
                                    },
                                    addPoint: function(v) {
                                        var f = new b.Point(v.x, v.y),
                                            m = b.util.getRandomInt(Math.max(0, this.width - 20), this.width + 20) / 2,
                                            d = new b.Color(this.color).setAlpha(b.util.getRandomInt(0, 100) / 100).toRgba();
                                        return f.radius = m, f.fill = d, this.points.push(f), f
                                    }
                                }), b.SprayBrush = b.util.createClass(b.BaseBrush, {
                                    width: 10,
                                    density: 20,
                                    dotWidth: 1,
                                    dotWidthVariance: 1,
                                    randomOpacity: !1,
                                    optimizeOverlapping: !0,
                                    initialize: function(v) {
                                        this.canvas = v, this.sprayChunks = []
                                    },
                                    onMouseDown: function(v) {
                                        this.sprayChunks.length = 0, this.canvas.clearContext(this.canvas.contextTop), this._setShadow(), this.addSprayChunk(v), this.render(this.sprayChunkPoints)
                                    },
                                    onMouseMove: function(v) {
                                        !0 === this.limitedToCanvasSize && this._isOutSideCanvas(v) || (this.addSprayChunk(v), this.render(this.sprayChunkPoints))
                                    },
                                    onMouseUp: function() {
                                        var v = this.canvas.renderOnAddRemove;
                                        this.canvas.renderOnAddRemove = !1;
                                        for (var f = [], m = 0, d = this.sprayChunks.length; m < d; m++)
                                            for (var a = this.sprayChunks[m], u = 0, o = a.length; u < o; u++) {
                                                var h = new b.Rect({
                                                    width: a[u].width,
                                                    height: a[u].width,
                                                    left: a[u].x + 1,
                                                    top: a[u].y + 1,
                                                    originX: "center",
                                                    originY: "center",
                                                    fill: this.color
                                                });
                                                f.push(h)
                                            }
                                        this.optimizeOverlapping && (f = this._getOptimizedRects(f));
                                        var p = new b.Group(f);
                                        this.shadow && p.set("shadow", new b.Shadow(this.shadow)), this.canvas.fire("before:path:created", {
                                            path: p
                                        }), this.canvas.add(p), this.canvas.fire("path:created", {
                                            path: p
                                        }), this.canvas.clearContext(this.canvas.contextTop), this._resetShadow(), this.canvas.renderOnAddRemove = v, this.canvas.requestRenderAll()
                                    },
                                    _getOptimizedRects: function(v) {
                                        var m, d, a, f = {};
                                        for (d = 0, a = v.length; d < a; d++) f[m = v[d].left + "" + v[d].top] || (f[m] = v[d]);
                                        var u = [];
                                        for (m in f) u.push(f[m]);
                                        return u
                                    },
                                    render: function(v) {
                                        var m, d, f = this.canvas.contextTop;
                                        for (f.fillStyle = this.color, this._saveAndTransform(f), m = 0, d = v.length; m < d; m++) {
                                            var a = v[m];
                                            void 0 !== a.opacity && (f.globalAlpha = a.opacity), f.fillRect(a.x, a.y, a.width, a.width)
                                        }
                                        f.restore()
                                    },
                                    _render: function() {
                                        var f, m, v = this.canvas.contextTop;
                                        for (v.fillStyle = this.color, this._saveAndTransform(v), f = 0, m = this.sprayChunks.length; f < m; f++) this.render(this.sprayChunks[f]);
                                        v.restore()
                                    },
                                    addSprayChunk: function(v) {
                                        this.sprayChunkPoints = [];
                                        var f, m, d, u, a = this.width / 2;
                                        for (u = 0; u < this.density; u++) {
                                            f = b.util.getRandomInt(v.x - a, v.x + a), m = b.util.getRandomInt(v.y - a, v.y + a), d = this.dotWidthVariance ? b.util.getRandomInt(Math.max(1, this.dotWidth - this.dotWidthVariance), this.dotWidth + this.dotWidthVariance) : this.dotWidth;
                                            var o = new b.Point(f, m);
                                            o.width = d, this.randomOpacity && (o.opacity = b.util.getRandomInt(0, 100) / 100), this.sprayChunkPoints.push(o)
                                        }
                                        this.sprayChunks.push(this.sprayChunkPoints)
                                    }
                                }), b.PatternBrush = b.util.createClass(b.PencilBrush, {
                                    getPatternSrc: function() {
                                        var m = b.util.createCanvasElement(),
                                            d = m.getContext("2d");
                                        return m.width = m.height = 25, d.fillStyle = this.color, d.beginPath(), d.arc(10, 10, 10, 0, 2 * Math.PI, !1), d.closePath(), d.fill(), m
                                    },
                                    getPatternSrcFunction: function() {
                                        return String(this.getPatternSrc).replace("this.color", '"' + this.color + '"')
                                    },
                                    getPattern: function(v) {
                                        return v.createPattern(this.source || this.getPatternSrc(), "repeat")
                                    },
                                    _setBrushStyles: function(v) {
                                        this.callSuper("_setBrushStyles", v), v.strokeStyle = this.getPattern(v)
                                    },
                                    createPath: function(v) {
                                        var f = this.callSuper("createPath", v),
                                            m = f._getLeftTopCoords().scalarAdd(f.strokeWidth / 2);
                                        return f.stroke = new b.Pattern({
                                            source: this.source || this.getPatternSrcFunction(),
                                            offsetX: -m.x,
                                            offsetY: -m.y
                                        }), f
                                    }
                                }),
                                function() {
                                    var v = b.util.getPointer,
                                        f = b.util.degreesToRadians,
                                        m = b.util.isTouchEvent;
                                    for (var d in b.Canvas = b.util.createClass(b.StaticCanvas, {
                                            initialize: function(a, u) {
                                                u || (u = {}), this.renderAndResetBound = this.renderAndReset.bind(this), this.requestRenderAllBound = this.requestRenderAll.bind(this), this._initStatic(a, u), this._initInteractive(), this._createCacheCanvas()
                                            },
                                            uniformScaling: !0,
                                            uniScaleKey: "shiftKey",
                                            centeredScaling: !1,
                                            centeredRotation: !1,
                                            centeredKey: "altKey",
                                            altActionKey: "shiftKey",
                                            interactive: !0,
                                            selection: !0,
                                            selectionKey: "shiftKey",
                                            altSelectionKey: null,
                                            selectionColor: "rgba(100, 100, 255, 0.3)",
                                            selectionDashArray: [],
                                            selectionBorderColor: "rgba(255, 255, 255, 0.3)",
                                            selectionLineWidth: 1,
                                            selectionFullyContained: !1,
                                            hoverCursor: "move",
                                            moveCursor: "move",
                                            defaultCursor: "default",
                                            freeDrawingCursor: "crosshair",
                                            notAllowedCursor: "not-allowed",
                                            containerClass: "canvas-container",
                                            perPixelTargetFind: !1,
                                            targetFindTolerance: 0,
                                            skipTargetFind: !1,
                                            isDrawingMode: !1,
                                            preserveObjectStacking: !1,
                                            snapAngle: 0,
                                            snapThreshold: null,
                                            stopContextMenu: !1,
                                            fireRightClick: !1,
                                            fireMiddleClick: !1,
                                            targets: [],
                                            enablePointerEvents: !1,
                                            _hoveredTarget: null,
                                            _hoveredTargets: [],
                                            _initInteractive: function() {
                                                this._currentTransform = null, this._groupSelector = null, this._initWrapperElement(), this._createUpperCanvas(), this._initEventListeners(), this._initRetinaScaling(), this.freeDrawingBrush = b.PencilBrush && new b.PencilBrush(this), this.calcOffset()
                                            },
                                            _chooseObjectsToRender: function() {
                                                var u, o, h, a = this.getActiveObjects();
                                                if (a.length > 0 && !this.preserveObjectStacking) {
                                                    o = [], h = [];
                                                    for (var p = 0, l = this._objects.length; p < l; p++) - 1 === a.indexOf(u = this._objects[p]) ? o.push(u) : h.push(u);
                                                    a.length > 1 && (this._activeObject._objects = h), o.push.apply(o, h)
                                                } else o = this._objects;
                                                return o
                                            },
                                            renderAll: function() {
                                                return this.contextTopDirty && !this._groupSelector && !this.isDrawingMode && (this.clearContext(this.contextTop), this.contextTopDirty = !1), this.hasLostContext && (this.renderTopLayer(this.contextTop), this.hasLostContext = !1), this.renderCanvas(this.contextContainer, this._chooseObjectsToRender()), this
                                            },
                                            renderTopLayer: function(a) {
                                                a.save(), this.isDrawingMode && this._isCurrentlyDrawing && (this.freeDrawingBrush && this.freeDrawingBrush._render(), this.contextTopDirty = !0), this.selection && this._groupSelector && (this._drawSelection(a), this.contextTopDirty = !0), a.restore()
                                            },
                                            renderTop: function() {
                                                var a = this.contextTop;
                                                return this.clearContext(a), this.renderTopLayer(a), this.fire("after:render"), this
                                            },
                                            _normalizePointer: function(a, u) {
                                                var o = a.calcTransformMatrix(),
                                                    h = b.util.invertTransform(o),
                                                    p = this.restorePointerVpt(u);
                                                return b.util.transformPoint(p, h)
                                            },
                                            isTargetTransparent: function(a, u, o) {
                                                if (a.shouldCache() && a._cacheCanvas && a !== this._activeObject) {
                                                    var h = this._normalizePointer(a, {
                                                            x: u,
                                                            y: o
                                                        }),
                                                        p = Math.max(a.cacheTranslationX + h.x * a.zoomX, 0),
                                                        l = Math.max(a.cacheTranslationY + h.y * a.zoomY, 0);
                                                    return b.util.isTransparent(a._cacheContext, Math.round(p), Math.round(l), this.targetFindTolerance)
                                                }
                                                var y = this.contextCache,
                                                    C = a.selectionBackgroundColor,
                                                    D = this.viewportTransform;
                                                return a.selectionBackgroundColor = "", this.clearContext(y), y.save(), y.transform(D[0], D[1], D[2], D[3], D[4], D[5]), a.render(y), y.restore(), a.selectionBackgroundColor = C, b.util.isTransparent(y, u, o, this.targetFindTolerance)
                                            },
                                            _isSelectionKeyPressed: function(a) {
                                                return "[object Array]" === Object.prototype.toString.call(this.selectionKey) ? !!this.selectionKey.find(function(o) {
                                                    return !0 === a[o]
                                                }) : a[this.selectionKey]
                                            },
                                            _shouldClearSelection: function(a, u) {
                                                var o = this.getActiveObjects(),
                                                    h = this._activeObject;
                                                return !u || u && h && o.length > 1 && -1 === o.indexOf(u) && h !== u && !this._isSelectionKeyPressed(a) || u && !u.evented || u && !u.selectable && h && h !== u
                                            },
                                            _shouldCenterTransform: function(a, u, o) {
                                                var h;
                                                if (a) return "scale" === u || "scaleX" === u || "scaleY" === u || "resizing" === u ? h = this.centeredScaling || a.centeredScaling : "rotate" === u && (h = this.centeredRotation || a.centeredRotation), h ? !o : o
                                            },
                                            _getOriginFromCorner: function(a, u) {
                                                var o = {
                                                    x: a.originX,
                                                    y: a.originY
                                                };
                                                return "ml" === u || "tl" === u || "bl" === u ? o.x = "right" : ("mr" === u || "tr" === u || "br" === u) && (o.x = "left"), "tl" === u || "mt" === u || "tr" === u ? o.y = "bottom" : ("bl" === u || "mb" === u || "br" === u) && (o.y = "top"), o
                                            },
                                            _getActionFromCorner: function(a, u, o, h) {
                                                if (!u || !a) return "drag";
                                                var p = h.controls[u];
                                                return p.getActionName(o, p, h)
                                            },
                                            _setupCurrentTransform: function(a, u, o) {
                                                if (u) {
                                                    var h = this.getPointer(a),
                                                        p = u.__corner,
                                                        l = u.controls[p],
                                                        y = o && p ? l.getActionHandler(a, u, l) : b.controlsUtils.dragHandler,
                                                        C = this._getActionFromCorner(o, p, a, u),
                                                        D = this._getOriginFromCorner(u, p),
                                                        E = a[this.centeredKey],
                                                        T = {
                                                            target: u,
                                                            action: C,
                                                            actionHandler: y,
                                                            corner: p,
                                                            scaleX: u.scaleX,
                                                            scaleY: u.scaleY,
                                                            skewX: u.skewX,
                                                            skewY: u.skewY,
                                                            offsetX: h.x - u.left,
                                                            offsetY: h.y - u.top,
                                                            originX: D.x,
                                                            originY: D.y,
                                                            ex: h.x,
                                                            ey: h.y,
                                                            lastX: h.x,
                                                            lastY: h.y,
                                                            theta: f(u.angle),
                                                            width: u.width * u.scaleX,
                                                            shiftKey: a.shiftKey,
                                                            altKey: E,
                                                            original: b.util.saveObjectTransform(u)
                                                        };
                                                    this._shouldCenterTransform(u, C, E) && (T.originX = "center", T.originY = "center"), T.original.originX = D.x, T.original.originY = D.y, this._currentTransform = T, this._beforeTransform(a)
                                                }
                                            },
                                            setCursor: function(a) {
                                                this.upperCanvasEl.style.cursor = a
                                            },
                                            _drawSelection: function(a) {
                                                var u = this._groupSelector,
                                                    o = new b.Point(u.ex, u.ey),
                                                    h = b.util.transformPoint(o, this.viewportTransform),
                                                    p = new b.Point(u.ex + u.left, u.ey + u.top),
                                                    l = b.util.transformPoint(p, this.viewportTransform),
                                                    y = Math.min(h.x, l.x),
                                                    C = Math.min(h.y, l.y),
                                                    D = Math.max(h.x, l.x),
                                                    E = Math.max(h.y, l.y),
                                                    T = this.selectionLineWidth / 2;
                                                this.selectionColor && (a.fillStyle = this.selectionColor, a.fillRect(y, C, D - y, E - C)), this.selectionLineWidth && this.selectionBorderColor && (a.lineWidth = this.selectionLineWidth, a.strokeStyle = this.selectionBorderColor, y += T, C += T, D -= T, E -= T, b.Object.prototype._setLineDash.call(this, a, this.selectionDashArray), a.strokeRect(y, C, D - y, E - C))
                                            },
                                            findTarget: function(a, u) {
                                                if (!this.skipTargetFind) {
                                                    var y, C, h = this.getPointer(a, !0),
                                                        p = this._activeObject,
                                                        l = this.getActiveObjects(),
                                                        D = m(a),
                                                        E = l.length > 1 && !u || 1 === l.length;
                                                    if (this.targets = [], E && p._findTargetCorner(h, D) || l.length > 1 && !u && p === this._searchPossibleTargets([p], h)) return p;
                                                    if (1 === l.length && p === this._searchPossibleTargets([p], h)) {
                                                        if (!this.preserveObjectStacking) return p;
                                                        y = p, C = this.targets, this.targets = []
                                                    }
                                                    var T = this._searchPossibleTargets(this._objects, h);
                                                    return a[this.altSelectionKey] && T && y && T !== y && (T = y, this.targets = C), T
                                                }
                                            },
                                            _checkTarget: function(a, u, o) {
                                                if (u && u.visible && u.evented && u.containsPoint(a)) {
                                                    if (!this.perPixelTargetFind && !u.perPixelTargetFind || u.isEditing) return !0;
                                                    if (!this.isTargetTransparent(u, o.x, o.y)) return !0
                                                }
                                            },
                                            _searchPossibleTargets: function(a, u) {
                                                for (var o, p, h = a.length; h--;) {
                                                    var l = a[h],
                                                        y = l.group ? this._normalizePointer(l.group, u) : u;
                                                    if (this._checkTarget(y, l, u)) {
                                                        (o = a[h]).subTargetCheck && o instanceof b.Group && (p = this._searchPossibleTargets(o._objects, u)) && this.targets.push(p);
                                                        break
                                                    }
                                                }
                                                return o
                                            },
                                            restorePointerVpt: function(a) {
                                                return b.util.transformPoint(a, b.util.invertTransform(this.viewportTransform))
                                            },
                                            getPointer: function(a, u) {
                                                if (this._absolutePointer && !u) return this._absolutePointer;
                                                if (this._pointer && u) return this._pointer;
                                                var C, o = v(a),
                                                    h = this.upperCanvasEl,
                                                    p = h.getBoundingClientRect(),
                                                    l = p.width || 0,
                                                    y = p.height || 0;
                                                (!l || !y) && ("top" in p && "bottom" in p && (y = Math.abs(p.top - p.bottom)), "right" in p && "left" in p && (l = Math.abs(p.right - p.left))), this.calcOffset(), o.x = o.x - this._offset.left, o.y = o.y - this._offset.top, u || (o = this.restorePointerVpt(o));
                                                var D = this.getRetinaScaling();
                                                return 1 !== D && (o.x /= D, o.y /= D), {
                                                    x: o.x * (C = 0 === l || 0 === y ? {
                                                        width: 1,
                                                        height: 1
                                                    } : {
                                                        width: h.width / l,
                                                        height: h.height / y
                                                    }).width,
                                                    y: o.y * C.height
                                                }
                                            },
                                            _createUpperCanvas: function() {
                                                var a = this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/, ""),
                                                    u = this.lowerCanvasEl,
                                                    o = this.upperCanvasEl;
                                                o ? o.className = "" : (o = this._createCanvasElement(), this.upperCanvasEl = o), b.util.addClass(o, "upper-canvas " + a), this.wrapperEl.appendChild(o), this._copyCanvasStyle(u, o), this._applyCanvasStyle(o), this.contextTop = o.getContext("2d")
                                            },
                                            _createCacheCanvas: function() {
                                                this.cacheCanvasEl = this._createCanvasElement(), this.cacheCanvasEl.setAttribute("width", this.width), this.cacheCanvasEl.setAttribute("height", this.height), this.contextCache = this.cacheCanvasEl.getContext("2d")
                                            },
                                            _initWrapperElement: function() {
                                                this.wrapperEl = b.util.wrapElement(this.lowerCanvasEl, "div", {
                                                    class: this.containerClass
                                                }), b.util.setStyle(this.wrapperEl, {
                                                    width: this.width + "px",
                                                    height: this.height + "px",
                                                    position: "relative"
                                                }), b.util.makeElementUnselectable(this.wrapperEl)
                                            },
                                            _applyCanvasStyle: function(a) {
                                                var u = this.width || a.width,
                                                    o = this.height || a.height;
                                                b.util.setStyle(a, {
                                                    position: "absolute",
                                                    width: u + "px",
                                                    height: o + "px",
                                                    left: 0,
                                                    top: 0,
                                                    "touch-action": this.allowTouchScrolling ? "manipulation" : "none",
                                                    "-ms-touch-action": this.allowTouchScrolling ? "manipulation" : "none"
                                                }), a.width = u, a.height = o, b.util.makeElementUnselectable(a)
                                            },
                                            _copyCanvasStyle: function(a, u) {
                                                u.style.cssText = a.style.cssText
                                            },
                                            getSelectionContext: function() {
                                                return this.contextTop
                                            },
                                            getSelectionElement: function() {
                                                return this.upperCanvasEl
                                            },
                                            getActiveObject: function() {
                                                return this._activeObject
                                            },
                                            getActiveObjects: function() {
                                                var a = this._activeObject;
                                                return a ? "activeSelection" === a.type && a._objects ? a._objects.slice(0) : [a] : []
                                            },
                                            _onObjectRemoved: function(a) {
                                                a === this._activeObject && (this.fire("before:selection:cleared", {
                                                    target: a
                                                }), this._discardActiveObject(), this.fire("selection:cleared", {
                                                    target: a
                                                }), a.fire("deselected")), a === this._hoveredTarget && (this._hoveredTarget = null, this._hoveredTargets = []), this.callSuper("_onObjectRemoved", a)
                                            },
                                            _fireSelectionEvents: function(a, u) {
                                                var o = !1,
                                                    h = this.getActiveObjects(),
                                                    p = [],
                                                    l = [];
                                                a.forEach(function(y) {
                                                    -1 === h.indexOf(y) && (o = !0, y.fire("deselected", {
                                                        e: u,
                                                        target: y
                                                    }), l.push(y))
                                                }), h.forEach(function(y) {
                                                    -1 === a.indexOf(y) && (o = !0, y.fire("selected", {
                                                        e: u,
                                                        target: y
                                                    }), p.push(y))
                                                }), a.length > 0 && h.length > 0 ? o && this.fire("selection:updated", {
                                                    e: u,
                                                    selected: p,
                                                    deselected: l
                                                }) : h.length > 0 ? this.fire("selection:created", {
                                                    e: u,
                                                    selected: p
                                                }) : a.length > 0 && this.fire("selection:cleared", {
                                                    e: u,
                                                    deselected: l
                                                })
                                            },
                                            setActiveObject: function(a, u) {
                                                var o = this.getActiveObjects();
                                                return this._setActiveObject(a, u), this._fireSelectionEvents(o, u), this
                                            },
                                            _setActiveObject: function(a, u) {
                                                return !(this._activeObject === a || !this._discardActiveObject(u, a) || a.onSelect({
                                                    e: u
                                                }) || (this._activeObject = a, 0))
                                            },
                                            _discardActiveObject: function(a, u) {
                                                var o = this._activeObject;
                                                if (o) {
                                                    if (o.onDeselect({
                                                            e: a,
                                                            object: u
                                                        })) return !1;
                                                    this._activeObject = null
                                                }
                                                return !0
                                            },
                                            discardActiveObject: function(a) {
                                                var u = this.getActiveObjects(),
                                                    o = this.getActiveObject();
                                                return u.length && this.fire("before:selection:cleared", {
                                                    target: o,
                                                    e: a
                                                }), this._discardActiveObject(a), this._fireSelectionEvents(u, a), this
                                            },
                                            dispose: function() {
                                                var a = this.wrapperEl;
                                                return this.removeListeners(), a.removeChild(this.upperCanvasEl), a.removeChild(this.lowerCanvasEl), this.contextCache = null, this.contextTop = null, ["upperCanvasEl", "cacheCanvasEl"].forEach(function(u) {
                                                    b.util.cleanUpJsdomNode(this[u]), this[u] = void 0
                                                }.bind(this)), a.parentNode && a.parentNode.replaceChild(this.lowerCanvasEl, this.wrapperEl), delete this.wrapperEl, b.StaticCanvas.prototype.dispose.call(this), this
                                            },
                                            clear: function() {
                                                return this.discardActiveObject(), this.clearContext(this.contextTop), this.callSuper("clear")
                                            },
                                            drawControls: function(a) {
                                                var u = this._activeObject;
                                                u && u._renderControls(a)
                                            },
                                            _toObject: function(a, u, o) {
                                                var h = this._realizeGroupTransformOnObject(a),
                                                    p = this.callSuper("_toObject", a, u, o);
                                                return this._unwindGroupTransformOnObject(a, h), p
                                            },
                                            _realizeGroupTransformOnObject: function(a) {
                                                if (a.group && "activeSelection" === a.group.type && this._activeObject === a.group) {
                                                    var o = {};
                                                    return ["angle", "flipX", "flipY", "left", "scaleX", "scaleY", "skewX", "skewY", "top"].forEach(function(h) {
                                                        o[h] = a[h]
                                                    }), b.util.addTransformToObject(a, this._activeObject.calcOwnMatrix()), o
                                                }
                                                return null
                                            },
                                            _unwindGroupTransformOnObject: function(a, u) {
                                                u && a.set(u)
                                            },
                                            _setSVGObject: function(a, u, o) {
                                                var h = this._realizeGroupTransformOnObject(u);
                                                this.callSuper("_setSVGObject", a, u, o), this._unwindGroupTransformOnObject(u, h)
                                            },
                                            setViewportTransform: function(a) {
                                                this.renderOnAddRemove && this._activeObject && this._activeObject.isEditing && this._activeObject.clearContextTop(), b.StaticCanvas.prototype.setViewportTransform.call(this, a)
                                            }
                                        }), b.StaticCanvas) "prototype" !== d && (b.Canvas[d] = b.StaticCanvas[d])
                                }(),
                                function() {
                                    var v = b.util.addListener,
                                        f = b.util.removeListener,
                                        u = {
                                            passive: !1
                                        };

                                    function o(h, p) {
                                        return h.button && h.button === p - 1
                                    }
                                    b.util.object.extend(b.Canvas.prototype, {
                                        mainTouchId: null,
                                        _initEventListeners: function() {
                                            this.removeListeners(), this._bindEvents(), this.addOrRemove(v, "add")
                                        },
                                        _getEventPrefix: function() {
                                            return this.enablePointerEvents ? "pointer" : "mouse"
                                        },
                                        addOrRemove: function(h, p) {
                                            var l = this.upperCanvasEl,
                                                y = this._getEventPrefix();
                                            h(b.window, "resize", this._onResize), h(l, y + "down", this._onMouseDown), h(l, y + "move", this._onMouseMove, u), h(l, y + "out", this._onMouseOut), h(l, y + "enter", this._onMouseEnter), h(l, "wheel", this._onMouseWheel), h(l, "contextmenu", this._onContextMenu), h(l, "dblclick", this._onDoubleClick), h(l, "dragover", this._onDragOver), h(l, "dragenter", this._onDragEnter), h(l, "dragleave", this._onDragLeave), h(l, "drop", this._onDrop), this.enablePointerEvents || h(l, "touchstart", this._onTouchStart, u), "undefined" != typeof eventjs && p in eventjs && (eventjs[p](l, "gesture", this._onGesture), eventjs[p](l, "drag", this._onDrag), eventjs[p](l, "orientation", this._onOrientationChange), eventjs[p](l, "shake", this._onShake), eventjs[p](l, "longpress", this._onLongPress))
                                        },
                                        removeListeners: function() {
                                            this.addOrRemove(f, "remove");
                                            var h = this._getEventPrefix();
                                            f(b.document, h + "up", this._onMouseUp), f(b.document, "touchend", this._onTouchEnd, u), f(b.document, h + "move", this._onMouseMove, u), f(b.document, "touchmove", this._onMouseMove, u)
                                        },
                                        _bindEvents: function() {
                                            this.eventsBound || (this._onMouseDown = this._onMouseDown.bind(this), this._onTouchStart = this._onTouchStart.bind(this), this._onMouseMove = this._onMouseMove.bind(this), this._onMouseUp = this._onMouseUp.bind(this), this._onTouchEnd = this._onTouchEnd.bind(this), this._onResize = this._onResize.bind(this), this._onGesture = this._onGesture.bind(this), this._onDrag = this._onDrag.bind(this), this._onShake = this._onShake.bind(this), this._onLongPress = this._onLongPress.bind(this), this._onOrientationChange = this._onOrientationChange.bind(this), this._onMouseWheel = this._onMouseWheel.bind(this), this._onMouseOut = this._onMouseOut.bind(this), this._onMouseEnter = this._onMouseEnter.bind(this), this._onContextMenu = this._onContextMenu.bind(this), this._onDoubleClick = this._onDoubleClick.bind(this), this._onDragOver = this._onDragOver.bind(this), this._onDragEnter = this._simpleEventHandler.bind(this, "dragenter"), this._onDragLeave = this._simpleEventHandler.bind(this, "dragleave"), this._onDrop = this._onDrop.bind(this), this.eventsBound = !0)
                                        },
                                        _onGesture: function(h, p) {
                                            this.__onTransformGesture && this.__onTransformGesture(h, p)
                                        },
                                        _onDrag: function(h, p) {
                                            this.__onDrag && this.__onDrag(h, p)
                                        },
                                        _onMouseWheel: function(h) {
                                            this.__onMouseWheel(h)
                                        },
                                        _onMouseOut: function(h) {
                                            var p = this._hoveredTarget;
                                            this.fire("mouse:out", {
                                                target: p,
                                                e: h
                                            }), this._hoveredTarget = null, p && p.fire("mouseout", {
                                                e: h
                                            });
                                            var l = this;
                                            this._hoveredTargets.forEach(function(y) {
                                                l.fire("mouse:out", {
                                                    target: p,
                                                    e: h
                                                }), y && p.fire("mouseout", {
                                                    e: h
                                                })
                                            }), this._hoveredTargets = [], this._iTextInstances && this._iTextInstances.forEach(function(y) {
                                                y.isEditing && y.hiddenTextarea.focus()
                                            })
                                        },
                                        _onMouseEnter: function(h) {
                                            !this._currentTransform && !this.findTarget(h) && (this.fire("mouse:over", {
                                                target: null,
                                                e: h
                                            }), this._hoveredTarget = null, this._hoveredTargets = [])
                                        },
                                        _onOrientationChange: function(h, p) {
                                            this.__onOrientationChange && this.__onOrientationChange(h, p)
                                        },
                                        _onShake: function(h, p) {
                                            this.__onShake && this.__onShake(h, p)
                                        },
                                        _onLongPress: function(h, p) {
                                            this.__onLongPress && this.__onLongPress(h, p)
                                        },
                                        _onDragOver: function(h) {
                                            h.preventDefault();
                                            var p = this._simpleEventHandler("dragover", h);
                                            this._fireEnterLeaveEvents(p, h)
                                        },
                                        _onDrop: function(h) {
                                            return this._simpleEventHandler("drop:before", h), this._simpleEventHandler("drop", h)
                                        },
                                        _onContextMenu: function(h) {
                                            return this.stopContextMenu && (h.stopPropagation(), h.preventDefault()), !1
                                        },
                                        _onDoubleClick: function(h) {
                                            this._cacheTransformEventData(h), this._handleEvent(h, "dblclick"), this._resetTransformEventData(h)
                                        },
                                        getPointerId: function(h) {
                                            var p = h.changedTouches;
                                            return p ? p[0] && p[0].identifier : this.enablePointerEvents ? h.pointerId : -1
                                        },
                                        _isMainEvent: function(h) {
                                            return !0 === h.isPrimary || !1 !== h.isPrimary && ("touchend" === h.type && 0 === h.touches.length || !h.changedTouches || h.changedTouches[0].identifier === this.mainTouchId)
                                        },
                                        _onTouchStart: function(h) {
                                            h.preventDefault(), null === this.mainTouchId && (this.mainTouchId = this.getPointerId(h)), this.__onMouseDown(h), this._resetTransformEventData();
                                            var p = this.upperCanvasEl,
                                                l = this._getEventPrefix();
                                            v(b.document, "touchend", this._onTouchEnd, u), v(b.document, "touchmove", this._onMouseMove, u), f(p, l + "down", this._onMouseDown)
                                        },
                                        _onMouseDown: function(h) {
                                            this.__onMouseDown(h), this._resetTransformEventData();
                                            var p = this.upperCanvasEl,
                                                l = this._getEventPrefix();
                                            f(p, l + "move", this._onMouseMove, u), v(b.document, l + "up", this._onMouseUp), v(b.document, l + "move", this._onMouseMove, u)
                                        },
                                        _onTouchEnd: function(h) {
                                            if (!(h.touches.length > 0)) {
                                                this.__onMouseUp(h), this._resetTransformEventData(), this.mainTouchId = null;
                                                var p = this._getEventPrefix();
                                                f(b.document, "touchend", this._onTouchEnd, u), f(b.document, "touchmove", this._onMouseMove, u);
                                                var l = this;
                                                this._willAddMouseDown && clearTimeout(this._willAddMouseDown), this._willAddMouseDown = setTimeout(function() {
                                                    v(l.upperCanvasEl, p + "down", l._onMouseDown), l._willAddMouseDown = 0
                                                }, 400)
                                            }
                                        },
                                        _onMouseUp: function(h) {
                                            this.__onMouseUp(h), this._resetTransformEventData();
                                            var p = this.upperCanvasEl,
                                                l = this._getEventPrefix();
                                            this._isMainEvent(h) && (f(b.document, l + "up", this._onMouseUp), f(b.document, l + "move", this._onMouseMove, u), v(p, l + "move", this._onMouseMove, u))
                                        },
                                        _onMouseMove: function(h) {
                                            !this.allowTouchScrolling && h.preventDefault && h.preventDefault(), this.__onMouseMove(h)
                                        },
                                        _onResize: function() {
                                            this.calcOffset()
                                        },
                                        _shouldRender: function(h) {
                                            var p = this._activeObject;
                                            return !!(!!p != !!h || p && h && p !== h)
                                        },
                                        __onMouseUp: function(h) {
                                            var p, l = this._currentTransform,
                                                y = this._groupSelector,
                                                C = !1,
                                                D = !y || 0 === y.left && 0 === y.top;
                                            if (this._cacheTransformEventData(h), p = this._target, this._handleEvent(h, "up:before"), o(h, 3)) this.fireRightClick && this._handleEvent(h, "up", 3, D);
                                            else {
                                                if (o(h, 2)) return this.fireMiddleClick && this._handleEvent(h, "up", 2, D), void this._resetTransformEventData();
                                                if (this.isDrawingMode && this._isCurrentlyDrawing) this._onMouseUpInDrawingMode(h);
                                                else if (this._isMainEvent(h)) {
                                                    if (l && (this._finalizeCurrentTransform(h), C = l.actionPerformed), !D) {
                                                        var E = p === this._activeObject;
                                                        this._maybeGroupObjects(h), C || (C = this._shouldRender(p) || !E && p === this._activeObject)
                                                    }
                                                    var T, I;
                                                    if (p) {
                                                        if (T = p._findTargetCorner(this.getPointer(h, !0), b.util.isTouchEvent(h)), p.selectable && p !== this._activeObject && "up" === p.activeOn) this.setActiveObject(p, h), C = !0;
                                                        else {
                                                            var F = p.controls[T],
                                                                B = F && F.getMouseUpHandler(h, p, F);
                                                            B && B(h, l, (I = this.getPointer(h)).x, I.y)
                                                        }
                                                        p.isMoving = !1
                                                    }
                                                    if (l && (l.target !== p || l.corner !== T)) {
                                                        var G = l.target && l.target.controls[l.corner],
                                                            ie = G && G.getMouseUpHandler(h, p, F);
                                                        I = I || this.getPointer(h), ie && ie(h, l, I.x, I.y)
                                                    }
                                                    this._setCursorFromEvent(h, p), this._handleEvent(h, "up", 1, D), this._groupSelector = null, this._currentTransform = null, p && (p.__corner = 0), C ? this.requestRenderAll() : D || this.renderTop()
                                                }
                                            }
                                        },
                                        _simpleEventHandler: function(h, p) {
                                            var l = this.findTarget(p),
                                                y = this.targets,
                                                C = {
                                                    e: p,
                                                    target: l,
                                                    subTargets: y
                                                };
                                            if (this.fire(h, C), l && l.fire(h, C), !y) return l;
                                            for (var D = 0; D < y.length; D++) y[D].fire(h, C);
                                            return l
                                        },
                                        _handleEvent: function(h, p, l, y) {
                                            var C = this._target,
                                                D = this.targets || [],
                                                E = {
                                                    e: h,
                                                    target: C,
                                                    subTargets: D,
                                                    button: l || 1,
                                                    isClick: y || !1,
                                                    pointer: this._pointer,
                                                    absolutePointer: this._absolutePointer,
                                                    transform: this._currentTransform
                                                };
                                            "up" === p && (E.currentTarget = this.findTarget(h), E.currentSubTargets = this.targets), this.fire("mouse:" + p, E), C && C.fire("mouse" + p, E);
                                            for (var T = 0; T < D.length; T++) D[T].fire("mouse" + p, E)
                                        },
                                        _finalizeCurrentTransform: function(h) {
                                            var p = this._currentTransform,
                                                l = p.target,
                                                y = {
                                                    e: h,
                                                    target: l,
                                                    transform: p,
                                                    action: p.action
                                                };
                                            l._scaling && (l._scaling = !1), l.setCoords(), (p.actionPerformed || this.stateful && l.hasStateChanged()) && this._fire("modified", y)
                                        },
                                        _onMouseDownInDrawingMode: function(h) {
                                            this._isCurrentlyDrawing = !0, this.getActiveObject() && this.discardActiveObject(h).requestRenderAll();
                                            var p = this.getPointer(h);
                                            this.freeDrawingBrush.onMouseDown(p, {
                                                e: h,
                                                pointer: p
                                            }), this._handleEvent(h, "down")
                                        },
                                        _onMouseMoveInDrawingMode: function(h) {
                                            if (this._isCurrentlyDrawing) {
                                                var p = this.getPointer(h);
                                                this.freeDrawingBrush.onMouseMove(p, {
                                                    e: h,
                                                    pointer: p
                                                })
                                            }
                                            this.setCursor(this.freeDrawingCursor), this._handleEvent(h, "move")
                                        },
                                        _onMouseUpInDrawingMode: function(h) {
                                            var p = this.getPointer(h);
                                            this._isCurrentlyDrawing = this.freeDrawingBrush.onMouseUp({
                                                e: h,
                                                pointer: p
                                            }), this._handleEvent(h, "up")
                                        },
                                        __onMouseDown: function(h) {
                                            this._cacheTransformEventData(h), this._handleEvent(h, "down:before");
                                            var p = this._target;
                                            if (o(h, 3)) this.fireRightClick && this._handleEvent(h, "down", 3);
                                            else if (o(h, 2)) this.fireMiddleClick && this._handleEvent(h, "down", 2);
                                            else if (this.isDrawingMode) this._onMouseDownInDrawingMode(h);
                                            else if (this._isMainEvent(h) && !this._currentTransform) {
                                                this._previousPointer = l = this._pointer;
                                                var y = this._shouldRender(p),
                                                    C = this._shouldGroup(h, p);
                                                if (this._shouldClearSelection(h, p) ? this.discardActiveObject(h) : C && (this._handleGrouping(h, p), p = this._activeObject), this.selection && (!p || !p.selectable && !p.isEditing && p !== this._activeObject) && (this._groupSelector = {
                                                        ex: this._absolutePointer.x,
                                                        ey: this._absolutePointer.y,
                                                        top: 0,
                                                        left: 0
                                                    }), p) {
                                                    var D = p === this._activeObject;
                                                    p.selectable && "down" === p.activeOn && this.setActiveObject(p, h);
                                                    var E = p._findTargetCorner(this.getPointer(h, !0), b.util.isTouchEvent(h));
                                                    if (p.__corner = E, p === this._activeObject && (E || !C)) {
                                                        this._setupCurrentTransform(h, p, D);
                                                        var T = p.controls[E],
                                                            l = this.getPointer(h),
                                                            I = T && T.getMouseDownHandler(h, p, T);
                                                        I && I(h, this._currentTransform, l.x, l.y)
                                                    }
                                                }
                                                this._handleEvent(h, "down"), (y || C) && this.requestRenderAll()
                                            }
                                        },
                                        _resetTransformEventData: function() {
                                            this._target = null, this._pointer = null, this._absolutePointer = null
                                        },
                                        _cacheTransformEventData: function(h) {
                                            this._resetTransformEventData(), this._pointer = this.getPointer(h, !0), this._absolutePointer = this.restorePointerVpt(this._pointer), this._target = this._currentTransform ? this._currentTransform.target : this.findTarget(h) || null
                                        },
                                        _beforeTransform: function(h) {
                                            var p = this._currentTransform;
                                            this.stateful && p.target.saveState(), this.fire("before:transform", {
                                                e: h,
                                                transform: p
                                            })
                                        },
                                        __onMouseMove: function(h) {
                                            var p, l;
                                            if (this._handleEvent(h, "move:before"), this._cacheTransformEventData(h), this.isDrawingMode) this._onMouseMoveInDrawingMode(h);
                                            else if (this._isMainEvent(h)) {
                                                var y = this._groupSelector;
                                                y ? (y.left = (l = this._absolutePointer).x - y.ex, y.top = l.y - y.ey, this.renderTop()) : this._currentTransform ? this._transformObject(h) : (p = this.findTarget(h) || null, this._setCursorFromEvent(h, p), this._fireOverOutEvents(p, h)), this._handleEvent(h, "move"), this._resetTransformEventData()
                                            }
                                        },
                                        _fireOverOutEvents: function(h, p) {
                                            var l = this._hoveredTarget,
                                                y = this._hoveredTargets,
                                                C = this.targets,
                                                D = Math.max(y.length, C.length);
                                            this.fireSyntheticInOutEvents(h, p, {
                                                oldTarget: l,
                                                evtOut: "mouseout",
                                                canvasEvtOut: "mouse:out",
                                                evtIn: "mouseover",
                                                canvasEvtIn: "mouse:over"
                                            });
                                            for (var E = 0; E < D; E++) this.fireSyntheticInOutEvents(C[E], p, {
                                                oldTarget: y[E],
                                                evtOut: "mouseout",
                                                evtIn: "mouseover"
                                            });
                                            this._hoveredTarget = h, this._hoveredTargets = this.targets.concat()
                                        },
                                        _fireEnterLeaveEvents: function(h, p) {
                                            var l = this._draggedoverTarget,
                                                y = this._hoveredTargets,
                                                C = this.targets,
                                                D = Math.max(y.length, C.length);
                                            this.fireSyntheticInOutEvents(h, p, {
                                                oldTarget: l,
                                                evtOut: "dragleave",
                                                evtIn: "dragenter"
                                            });
                                            for (var E = 0; E < D; E++) this.fireSyntheticInOutEvents(C[E], p, {
                                                oldTarget: y[E],
                                                evtOut: "dragleave",
                                                evtIn: "dragenter"
                                            });
                                            this._draggedoverTarget = h
                                        },
                                        fireSyntheticInOutEvents: function(h, p, l) {
                                            var y, C, T, D = l.oldTarget,
                                                I = D !== h,
                                                F = l.canvasEvtIn,
                                                B = l.canvasEvtOut;
                                            I && (y = {
                                                e: p,
                                                target: h,
                                                previousTarget: D
                                            }, C = {
                                                e: p,
                                                target: D,
                                                nextTarget: h
                                            }), T = h && I, D && I && (B && this.fire(B, C), D.fire(l.evtOut, C)), T && (F && this.fire(F, y), h.fire(l.evtIn, y))
                                        },
                                        __onMouseWheel: function(h) {
                                            this._cacheTransformEventData(h), this._handleEvent(h, "wheel"), this._resetTransformEventData()
                                        },
                                        _transformObject: function(h) {
                                            var p = this.getPointer(h),
                                                l = this._currentTransform;
                                            l.reset = !1, l.shiftKey = h.shiftKey, l.altKey = h[this.centeredKey], this._performTransformAction(h, l, p), l.actionPerformed && this.requestRenderAll()
                                        },
                                        _performTransformAction: function(h, p, l) {
                                            var D = p.action,
                                                E = !1,
                                                T = p.actionHandler;
                                            T && (E = T(h, p, l.x, l.y)), "drag" === D && E && (p.target.isMoving = !0, this.setCursor(p.target.moveCursor || this.moveCursor)), p.actionPerformed = p.actionPerformed || E
                                        },
                                        _fire: b.controlsUtils.fireEvent,
                                        _setCursorFromEvent: function(h, p) {
                                            if (!p) return this.setCursor(this.defaultCursor), !1;
                                            var l = p.hoverCursor || this.hoverCursor,
                                                y = this._activeObject && "activeSelection" === this._activeObject.type ? this._activeObject : null,
                                                C = (!y || !y.contains(p)) && p._findTargetCorner(this.getPointer(h, !0));
                                            C ? this.setCursor(this.getCornerCursor(C, p, h)) : (p.subTargetCheck && this.targets.concat().reverse().map(function(D) {
                                                l = D.hoverCursor || l
                                            }), this.setCursor(l))
                                        },
                                        getCornerCursor: function(h, p, l) {
                                            var y = p.controls[h];
                                            return y.cursorStyleHandler(l, y, p)
                                        }
                                    })
                                }(),
                                function() {
                                    var v = Math.min,
                                        f = Math.max;
                                    b.util.object.extend(b.Canvas.prototype, {
                                        _shouldGroup: function(m, d) {
                                            var a = this._activeObject;
                                            return a && this._isSelectionKeyPressed(m) && d && d.selectable && this.selection && (a !== d || "activeSelection" === a.type) && !d.onSelect({
                                                e: m
                                            })
                                        },
                                        _handleGrouping: function(m, d) {
                                            var a = this._activeObject;
                                            a.__corner || d === a && (!(d = this.findTarget(m, !0)) || !d.selectable) || (a && "activeSelection" === a.type ? this._updateActiveSelection(d, m) : this._createActiveSelection(d, m))
                                        },
                                        _updateActiveSelection: function(m, d) {
                                            var a = this._activeObject,
                                                u = a._objects.slice(0);
                                            a.contains(m) ? (a.removeWithUpdate(m), this._hoveredTarget = m, this._hoveredTargets = this.targets.concat(), 1 === a.size() && this._setActiveObject(a.item(0), d)) : (a.addWithUpdate(m), this._hoveredTarget = a, this._hoveredTargets = this.targets.concat()), this._fireSelectionEvents(u, d)
                                        },
                                        _createActiveSelection: function(m, d) {
                                            var a = this.getActiveObjects(),
                                                u = this._createGroup(m);
                                            this._hoveredTarget = u, this._setActiveObject(u, d), this._fireSelectionEvents(a, d)
                                        },
                                        _createGroup: function(m) {
                                            var d = this._objects,
                                                u = d.indexOf(this._activeObject) < d.indexOf(m) ? [this._activeObject, m] : [m, this._activeObject];
                                            return this._activeObject.isEditing && this._activeObject.exitEditing(), new b.ActiveSelection(u, {
                                                canvas: this
                                            })
                                        },
                                        _groupSelectedObjects: function(m) {
                                            var a, d = this._collectObjects(m);
                                            1 === d.length ? this.setActiveObject(d[0], m) : d.length > 1 && (a = new b.ActiveSelection(d.reverse(), {
                                                canvas: this
                                            }), this.setActiveObject(a, m))
                                        },
                                        _collectObjects: function(m) {
                                            for (var a, d = [], u = this._groupSelector.ex, o = this._groupSelector.ey, h = u + this._groupSelector.left, p = o + this._groupSelector.top, l = new b.Point(v(u, h), v(o, p)), y = new b.Point(f(u, h), f(o, p)), C = !this.selectionFullyContained, D = u === h && o === p, E = this._objects.length; E-- && !((a = this._objects[E]) && a.selectable && a.visible && (C && a.intersectsWithRect(l, y, !0) || a.isContainedWithinRect(l, y, !0) || C && a.containsPoint(l, null, !0) || C && a.containsPoint(y, null, !0)) && (d.push(a), D)););
                                            return d.length > 1 && (d = d.filter(function(T) {
                                                return !T.onSelect({
                                                    e: m
                                                })
                                            })), d
                                        },
                                        _maybeGroupObjects: function(m) {
                                            this.selection && this._groupSelector && this._groupSelectedObjects(m), this.setCursor(this.defaultCursor), this._groupSelector = null
                                        }
                                    })
                                }(), b.util.object.extend(b.StaticCanvas.prototype, {
                                    toDataURL: function(v) {
                                        v || (v = {});
                                        var f = v.format || "png",
                                            m = v.quality || 1,
                                            d = (v.multiplier || 1) * (v.enableRetinaScaling ? this.getRetinaScaling() : 1),
                                            a = this.toCanvasElement(d, v);
                                        return b.util.toDataURL(a, f, m)
                                    },
                                    toCanvasElement: function(v, f) {
                                        var m = ((f = f || {}).width || this.width) * (v = v || 1),
                                            d = (f.height || this.height) * v,
                                            a = this.getZoom(),
                                            u = this.width,
                                            o = this.height,
                                            h = a * v,
                                            p = this.viewportTransform,
                                            C = this.interactive,
                                            D = [h, 0, 0, h, (p[4] - (f.left || 0)) * v, (p[5] - (f.top || 0)) * v],
                                            E = this.enableRetinaScaling,
                                            T = b.util.createCanvasElement(),
                                            I = this.contextTop;
                                        return T.width = m, T.height = d, this.contextTop = null, this.enableRetinaScaling = !1, this.interactive = !1, this.viewportTransform = D, this.width = m, this.height = d, this.calcViewportBoundaries(), this.renderCanvas(T.getContext("2d"), this._objects), this.viewportTransform = p, this.width = u, this.height = o, this.calcViewportBoundaries(), this.interactive = C, this.enableRetinaScaling = E, this.contextTop = I, T
                                    }
                                }), b.util.object.extend(b.StaticCanvas.prototype, {
                                    loadFromJSON: function(v, f, m) {
                                        if (v) {
                                            var d = "string" == typeof v ? JSON.parse(v) : b.util.object.clone(v),
                                                a = this,
                                                u = d.clipPath,
                                                o = this.renderOnAddRemove;
                                            return this.renderOnAddRemove = !1, delete d.clipPath, this._enlivenObjects(d.objects, function(h) {
                                                a.clear(), a._setBgOverlay(d, function() {
                                                    u ? a._enlivenObjects([u], function(p) {
                                                        a.clipPath = p[0], a.__setupCanvas.call(a, d, h, o, f)
                                                    }) : a.__setupCanvas.call(a, d, h, o, f)
                                                })
                                            }, m), this
                                        }
                                    },
                                    __setupCanvas: function(v, f, m, d) {
                                        var a = this;
                                        f.forEach(function(u, o) {
                                            a.insertAt(u, o)
                                        }), this.renderOnAddRemove = m, delete v.objects, delete v.backgroundImage, delete v.overlayImage, delete v.background, delete v.overlay, this._setOptions(v), this.renderAll(), d && d()
                                    },
                                    _setBgOverlay: function(v, f) {
                                        var m = {
                                            backgroundColor: !1,
                                            overlayColor: !1,
                                            backgroundImage: !1,
                                            overlayImage: !1
                                        };
                                        if (v.backgroundImage || v.overlayImage || v.background || v.overlay) {
                                            var d = function() {
                                                m.backgroundImage && m.overlayImage && m.backgroundColor && m.overlayColor && f && f()
                                            };
                                            this.__setBgOverlay("backgroundImage", v.backgroundImage, m, d), this.__setBgOverlay("overlayImage", v.overlayImage, m, d), this.__setBgOverlay("backgroundColor", v.background, m, d), this.__setBgOverlay("overlayColor", v.overlay, m, d)
                                        } else f && f()
                                    },
                                    __setBgOverlay: function(v, f, m, d) {
                                        var a = this;
                                        if (!f) return m[v] = !0, void(d && d());
                                        "backgroundImage" === v || "overlayImage" === v ? b.util.enlivenObjects([f], function(u) {
                                            a[v] = u[0], m[v] = !0, d && d()
                                        }) : this["set" + b.util.string.capitalize(v, !0)](f, function() {
                                            m[v] = !0, d && d()
                                        })
                                    },
                                    _enlivenObjects: function(v, f, m) {
                                        v && 0 !== v.length ? b.util.enlivenObjects(v, function(d) {
                                            f && f(d)
                                        }, null, m) : f && f([])
                                    },
                                    _toDataURL: function(v, f) {
                                        this.clone(function(m) {
                                            f(m.toDataURL(v))
                                        })
                                    },
                                    _toDataURLWithMultiplier: function(v, f, m) {
                                        this.clone(function(d) {
                                            m(d.toDataURLWithMultiplier(v, f))
                                        })
                                    },
                                    clone: function(v, f) {
                                        var m = JSON.stringify(this.toJSON(f));
                                        this.cloneWithoutData(function(d) {
                                            d.loadFromJSON(m, function() {
                                                v && v(d)
                                            })
                                        })
                                    },
                                    cloneWithoutData: function(v) {
                                        var f = b.util.createCanvasElement();
                                        f.width = this.width, f.height = this.height;
                                        var m = new b.Canvas(f);
                                        this.backgroundImage ? (m.setBackgroundImage(this.backgroundImage.src, function() {
                                            m.renderAll(), v && v(m)
                                        }), m.backgroundImageOpacity = this.backgroundImageOpacity, m.backgroundImageStretch = this.backgroundImageStretch) : v && v(m)
                                    }
                                }),
                                function(v) {
                                    "use strict";
                                    var f = v.fabric || (v.fabric = {}),
                                        m = f.util.object.extend,
                                        d = f.util.object.clone,
                                        a = f.util.toFixed,
                                        u = f.util.string.capitalize,
                                        o = f.util.degreesToRadians;
                                    f.Object || (f.Object = f.util.createClass(f.CommonMethods, {
                                        type: "object",
                                        originX: "left",
                                        originY: "top",
                                        top: 0,
                                        left: 0,
                                        width: 0,
                                        height: 0,
                                        scaleX: 1,
                                        scaleY: 1,
                                        flipX: !1,
                                        flipY: !1,
                                        opacity: 1,
                                        angle: 0,
                                        skewX: 0,
                                        skewY: 0,
                                        cornerSize: 13,
                                        touchCornerSize: 24,
                                        transparentCorners: !0,
                                        hoverCursor: null,
                                        moveCursor: null,
                                        padding: 0,
                                        borderColor: "rgb(178,204,255)",
                                        borderDashArray: null,
                                        cornerColor: "rgb(178,204,255)",
                                        cornerStrokeColor: null,
                                        cornerStyle: "rect",
                                        cornerDashArray: null,
                                        centeredScaling: !1,
                                        centeredRotation: !0,
                                        fill: "rgb(0,0,0)",
                                        fillRule: "nonzero",
                                        globalCompositeOperation: "source-over",
                                        backgroundColor: "",
                                        selectionBackgroundColor: "",
                                        stroke: null,
                                        strokeWidth: 1,
                                        strokeDashArray: null,
                                        strokeDashOffset: 0,
                                        strokeLineCap: "butt",
                                        strokeLineJoin: "miter",
                                        strokeMiterLimit: 4,
                                        shadow: null,
                                        borderOpacityWhenMoving: .4,
                                        borderScaleFactor: 1,
                                        minScaleLimit: 0,
                                        selectable: !0,
                                        evented: !0,
                                        visible: !0,
                                        hasControls: !0,
                                        hasBorders: !0,
                                        perPixelTargetFind: !1,
                                        includeDefaultValues: !0,
                                        lockMovementX: !1,
                                        lockMovementY: !1,
                                        lockRotation: !1,
                                        lockScalingX: !1,
                                        lockScalingY: !1,
                                        lockSkewingX: !1,
                                        lockSkewingY: !1,
                                        lockScalingFlip: !1,
                                        excludeFromExport: !1,
                                        objectCaching: !f.isLikelyNode,
                                        statefullCache: !1,
                                        noScaleCache: !0,
                                        strokeUniform: !1,
                                        dirty: !0,
                                        __corner: 0,
                                        paintFirst: "fill",
                                        activeOn: "down",
                                        stateProperties: "top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform".split(" "),
                                        cacheProperties: "fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "),
                                        colorProperties: "fill stroke backgroundColor".split(" "),
                                        clipPath: void 0,
                                        inverted: !1,
                                        absolutePositioned: !1,
                                        initialize: function(l) {
                                            l && this.setOptions(l)
                                        },
                                        _createCacheCanvas: function() {
                                            this._cacheProperties = {}, this._cacheCanvas = f.util.createCanvasElement(), this._cacheContext = this._cacheCanvas.getContext("2d"), this._updateCacheCanvas(), this.dirty = !0
                                        },
                                        _limitCacheSize: function(l) {
                                            var y = f.perfLimitSizeTotal,
                                                C = l.width,
                                                D = l.height,
                                                E = f.maxCacheSideLimit,
                                                T = f.minCacheSideLimit;
                                            if (C <= E && D <= E && C * D <= y) return C < T && (l.width = T), D < T && (l.height = T), l;
                                            var F = f.util.limitDimsByArea(C / D, y),
                                                B = f.util.capValue,
                                                G = B(T, F.x, E),
                                                ie = B(T, F.y, E);
                                            return C > G && (l.zoomX /= C / G, l.width = G, l.capped = !0), D > ie && (l.zoomY /= D / ie, l.height = ie, l.capped = !0), l
                                        },
                                        _getCacheCanvasDimensions: function() {
                                            var l = this.getTotalObjectScaling(),
                                                y = this._getTransformedDimensions(0, 0),
                                                C = y.x * l.scaleX / this.scaleX,
                                                D = y.y * l.scaleY / this.scaleY;
                                            return {
                                                width: C + 2,
                                                height: D + 2,
                                                zoomX: l.scaleX,
                                                zoomY: l.scaleY,
                                                x: C,
                                                y: D
                                            }
                                        },
                                        _updateCacheCanvas: function() {
                                            var l = this.canvas;
                                            if (this.noScaleCache && l && l._currentTransform) {
                                                var C = l._currentTransform.action;
                                                if (this === l._currentTransform.target && C.slice && "scale" === C.slice(0, 5)) return !1
                                            }
                                            var B, G, D = this._cacheCanvas,
                                                E = this._limitCacheSize(this._getCacheCanvasDimensions()),
                                                T = f.minCacheSideLimit,
                                                I = E.width,
                                                F = E.height,
                                                ie = E.zoomX,
                                                le = E.zoomY,
                                                ue = I !== this.cacheWidth || F !== this.cacheHeight,
                                                fe = ue || this.zoomX !== ie || this.zoomY !== le,
                                                ae = 0,
                                                _e = 0,
                                                be = !1;
                                            if (ue) {
                                                var me = this._cacheCanvas.width,
                                                    O = this._cacheCanvas.height,
                                                    N = I > me || F > O;
                                                be = N || (I < .9 * me || F < .9 * O) && me > T && O > T, N && !E.capped && (I > T || F > T) && (ae = .1 * I, _e = .1 * F)
                                            }
                                            return this instanceof f.Text && this.path && (fe = !0, be = !0, ae += this.getHeightOfLine(0) * this.zoomX, _e += this.getHeightOfLine(0) * this.zoomY), !!fe && (be ? (D.width = Math.ceil(I + ae), D.height = Math.ceil(F + _e)) : (this._cacheContext.setTransform(1, 0, 0, 1, 0, 0), this._cacheContext.clearRect(0, 0, D.width, D.height)), B = E.x / 2, G = E.y / 2, this.cacheTranslationX = Math.round(D.width / 2 - B) + B, this.cacheTranslationY = Math.round(D.height / 2 - G) + G, this.cacheWidth = I, this.cacheHeight = F, this._cacheContext.translate(this.cacheTranslationX, this.cacheTranslationY), this._cacheContext.scale(ie, le), this.zoomX = ie, this.zoomY = le, !0)
                                        },
                                        setOptions: function(l) {
                                            this._setOptions(l), this._initGradient(l.fill, "fill"), this._initGradient(l.stroke, "stroke"), this._initPattern(l.fill, "fill"), this._initPattern(l.stroke, "stroke")
                                        },
                                        transform: function(l) {
                                            var C = this.calcTransformMatrix(!(this.group && !this.group._transformDone || this.group && this.canvas && l === this.canvas.contextTop));
                                            l.transform(C[0], C[1], C[2], C[3], C[4], C[5])
                                        },
                                        toObject: function(l) {
                                            var y = f.Object.NUM_FRACTION_DIGITS,
                                                C = {
                                                    type: this.type,
                                                    version: f.version,
                                                    originX: this.originX,
                                                    originY: this.originY,
                                                    left: a(this.left, y),
                                                    top: a(this.top, y),
                                                    width: a(this.width, y),
                                                    height: a(this.height, y),
                                                    fill: this.fill && this.fill.toObject ? this.fill.toObject() : this.fill,
                                                    stroke: this.stroke && this.stroke.toObject ? this.stroke.toObject() : this.stroke,
                                                    strokeWidth: a(this.strokeWidth, y),
                                                    strokeDashArray: this.strokeDashArray ? this.strokeDashArray.concat() : this.strokeDashArray,
                                                    strokeLineCap: this.strokeLineCap,
                                                    strokeDashOffset: this.strokeDashOffset,
                                                    strokeLineJoin: this.strokeLineJoin,
                                                    strokeUniform: this.strokeUniform,
                                                    strokeMiterLimit: a(this.strokeMiterLimit, y),
                                                    scaleX: a(this.scaleX, y),
                                                    scaleY: a(this.scaleY, y),
                                                    angle: a(this.angle, y),
                                                    flipX: this.flipX,
                                                    flipY: this.flipY,
                                                    opacity: a(this.opacity, y),
                                                    shadow: this.shadow && this.shadow.toObject ? this.shadow.toObject() : this.shadow,
                                                    visible: this.visible,
                                                    backgroundColor: this.backgroundColor,
                                                    fillRule: this.fillRule,
                                                    paintFirst: this.paintFirst,
                                                    globalCompositeOperation: this.globalCompositeOperation,
                                                    skewX: a(this.skewX, y),
                                                    skewY: a(this.skewY, y)
                                                };
                                            return this.clipPath && !this.clipPath.excludeFromExport && (C.clipPath = this.clipPath.toObject(l), C.clipPath.inverted = this.clipPath.inverted, C.clipPath.absolutePositioned = this.clipPath.absolutePositioned), f.util.populateWithProperties(this, C, l), this.includeDefaultValues || (C = this._removeDefaultValues(C)), C
                                        },
                                        toDatalessObject: function(l) {
                                            return this.toObject(l)
                                        },
                                        _removeDefaultValues: function(l) {
                                            var y = f.util.getKlass(l.type).prototype;
                                            return y.stateProperties.forEach(function(D) {
                                                "left" !== D && "top" !== D && (l[D] === y[D] && delete l[D], "[object Array]" === Object.prototype.toString.call(l[D]) && "[object Array]" === Object.prototype.toString.call(y[D]) && 0 === l[D].length && 0 === y[D].length && delete l[D])
                                            }), l
                                        },
                                        toString: function() {
                                            return "#<fabric." + u(this.type) + ">"
                                        },
                                        getObjectScaling: function() {
                                            if (!this.group) return {
                                                scaleX: this.scaleX,
                                                scaleY: this.scaleY
                                            };
                                            var l = f.util.qrDecompose(this.calcTransformMatrix());
                                            return {
                                                scaleX: Math.abs(l.scaleX),
                                                scaleY: Math.abs(l.scaleY)
                                            }
                                        },
                                        getTotalObjectScaling: function() {
                                            var l = this.getObjectScaling(),
                                                y = l.scaleX,
                                                C = l.scaleY;
                                            if (this.canvas) {
                                                var D = this.canvas.getZoom(),
                                                    E = this.canvas.getRetinaScaling();
                                                y *= D * E, C *= D * E
                                            }
                                            return {
                                                scaleX: y,
                                                scaleY: C
                                            }
                                        },
                                        getObjectOpacity: function() {
                                            var l = this.opacity;
                                            return this.group && (l *= this.group.getObjectOpacity()), l
                                        },
                                        _set: function(l, y) {
                                            var D = this[l] !== y,
                                                E = !1;
                                            return ("scaleX" === l || "scaleY" === l) && (y = this._constrainScale(y)), "scaleX" === l && y < 0 ? (this.flipX = !this.flipX, y *= -1) : "scaleY" === l && y < 0 ? (this.flipY = !this.flipY, y *= -1) : "shadow" !== l || !y || y instanceof f.Shadow ? "dirty" === l && this.group && this.group.set("dirty", y) : y = new f.Shadow(y), this[l] = y, D && (E = this.group && this.group.isOnACache(), this.cacheProperties.indexOf(l) > -1 ? (this.dirty = !0, E && this.group.set("dirty", !0)) : E && this.stateProperties.indexOf(l) > -1 && this.group.set("dirty", !0)), this
                                        },
                                        setOnGroup: function() {},
                                        getViewportTransform: function() {
                                            return this.canvas && this.canvas.viewportTransform ? this.canvas.viewportTransform : f.iMatrix.concat()
                                        },
                                        isNotVisible: function() {
                                            return 0 === this.opacity || !this.width && !this.height && 0 === this.strokeWidth || !this.visible
                                        },
                                        render: function(l) {
                                            this.isNotVisible() || this.canvas && this.canvas.skipOffscreen && !this.group && !this.isOnScreen() || (l.save(), this._setupCompositeOperation(l), this.drawSelectionBackground(l), this.transform(l), this._setOpacity(l), this._setShadow(l, this), this.shouldCache() ? (this.renderCache(), this.drawCacheOnCanvas(l)) : (this._removeCacheCanvas(), this.dirty = !1, this.drawObject(l), this.objectCaching && this.statefullCache && this.saveState({
                                                propertySet: "cacheProperties"
                                            })), l.restore())
                                        },
                                        renderCache: function(l) {
                                            l = l || {}, this._cacheCanvas || this._createCacheCanvas(), this.isCacheDirty() && (this.statefullCache && this.saveState({
                                                propertySet: "cacheProperties"
                                            }), this.drawObject(this._cacheContext, l.forClipping), this.dirty = !1)
                                        },
                                        _removeCacheCanvas: function() {
                                            this._cacheCanvas = null, this.cacheWidth = 0, this.cacheHeight = 0
                                        },
                                        hasStroke: function() {
                                            return this.stroke && "transparent" !== this.stroke && 0 !== this.strokeWidth
                                        },
                                        hasFill: function() {
                                            return this.fill && "transparent" !== this.fill
                                        },
                                        needsItsOwnCache: function() {
                                            return !!("stroke" === this.paintFirst && this.hasFill() && this.hasStroke() && "object" == typeof this.shadow || this.clipPath)
                                        },
                                        shouldCache: function() {
                                            return this.ownCaching = this.needsItsOwnCache() || this.objectCaching && (!this.group || !this.group.isOnACache()), this.ownCaching
                                        },
                                        willDrawShadow: function() {
                                            return !!this.shadow && (0 !== this.shadow.offsetX || 0 !== this.shadow.offsetY)
                                        },
                                        drawClipPathOnCache: function(l, y) {
                                            if (l.save(), l.globalCompositeOperation = y.inverted ? "destination-out" : "destination-in", y.absolutePositioned) {
                                                var C = f.util.invertTransform(this.calcTransformMatrix());
                                                l.transform(C[0], C[1], C[2], C[3], C[4], C[5])
                                            }
                                            y.transform(l), l.scale(1 / y.zoomX, 1 / y.zoomY), l.drawImage(y._cacheCanvas, -y.cacheTranslationX, -y.cacheTranslationY), l.restore()
                                        },
                                        drawObject: function(l, y) {
                                            var C = this.fill,
                                                D = this.stroke;
                                            y ? (this.fill = "black", this.stroke = "", this._setClippingProperties(l)) : this._renderBackground(l), this._render(l), this._drawClipPath(l, this.clipPath), this.fill = C, this.stroke = D
                                        },
                                        _drawClipPath: function(l, y) {
                                            !y || (y.canvas = this.canvas, y.shouldCache(), y._transformDone = !0, y.renderCache({
                                                forClipping: !0
                                            }), this.drawClipPathOnCache(l, y))
                                        },
                                        drawCacheOnCanvas: function(l) {
                                            l.scale(1 / this.zoomX, 1 / this.zoomY), l.drawImage(this._cacheCanvas, -this.cacheTranslationX, -this.cacheTranslationY)
                                        },
                                        isCacheDirty: function(l) {
                                            if (this.isNotVisible()) return !1;
                                            if (this._cacheCanvas && !l && this._updateCacheCanvas()) return !0;
                                            if (this.dirty || this.clipPath && this.clipPath.absolutePositioned || this.statefullCache && this.hasStateChanged("cacheProperties")) {
                                                if (this._cacheCanvas && !l) {
                                                    var y = this.cacheWidth / this.zoomX,
                                                        C = this.cacheHeight / this.zoomY;
                                                    this._cacheContext.clearRect(-y / 2, -C / 2, y, C)
                                                }
                                                return !0
                                            }
                                            return !1
                                        },
                                        _renderBackground: function(l) {
                                            if (this.backgroundColor) {
                                                var y = this._getNonTransformedDimensions();
                                                l.fillStyle = this.backgroundColor, l.fillRect(-y.x / 2, -y.y / 2, y.x, y.y), this._removeShadow(l)
                                            }
                                        },
                                        _setOpacity: function(l) {
                                            this.group && !this.group._transformDone ? l.globalAlpha = this.getObjectOpacity() : l.globalAlpha *= this.opacity
                                        },
                                        _setStrokeStyles: function(l, y) {
                                            var C = y.stroke;
                                            C && (l.lineWidth = y.strokeWidth, l.lineCap = y.strokeLineCap, l.lineDashOffset = y.strokeDashOffset, l.lineJoin = y.strokeLineJoin, l.miterLimit = y.strokeMiterLimit, C.toLive ? "percentage" === C.gradientUnits || C.gradientTransform || C.patternTransform ? this._applyPatternForTransformedGradient(l, C) : (l.strokeStyle = C.toLive(l, this), this._applyPatternGradientTransform(l, C)) : l.strokeStyle = y.stroke)
                                        },
                                        _setFillStyles: function(l, y) {
                                            var C = y.fill;
                                            C && (C.toLive ? (l.fillStyle = C.toLive(l, this), this._applyPatternGradientTransform(l, y.fill)) : l.fillStyle = C)
                                        },
                                        _setClippingProperties: function(l) {
                                            l.globalAlpha = 1, l.strokeStyle = "transparent", l.fillStyle = "#000000"
                                        },
                                        _setLineDash: function(l, y) {
                                            !y || 0 === y.length || (1 & y.length && y.push.apply(y, y), l.setLineDash(y))
                                        },
                                        _renderControls: function(l, y) {
                                            var E, T, I, C = this.getViewportTransform(),
                                                D = this.calcTransformMatrix();
                                            T = void 0 !== (y = y || {}).hasBorders ? y.hasBorders : this.hasBorders, I = void 0 !== y.hasControls ? y.hasControls : this.hasControls, D = f.util.multiplyTransformMatrices(C, D), E = f.util.qrDecompose(D), l.save(), l.translate(E.translateX, E.translateY), l.lineWidth = 1 * this.borderScaleFactor, this.group || (l.globalAlpha = this.isMoving ? this.borderOpacityWhenMoving : 1), this.flipX && (E.angle -= 180), l.rotate(o(this.group ? E.angle : this.angle)), y.forActiveSelection || this.group ? T && this.drawBordersInGroup(l, E, y) : T && this.drawBorders(l, y), I && this.drawControls(l, y), l.restore()
                                        },
                                        _setShadow: function(l) {
                                            if (this.shadow) {
                                                var D, y = this.shadow,
                                                    C = this.canvas,
                                                    E = C && C.viewportTransform[0] || 1,
                                                    T = C && C.viewportTransform[3] || 1;
                                                D = y.nonScaling ? {
                                                    scaleX: 1,
                                                    scaleY: 1
                                                } : this.getObjectScaling(), C && C._isRetinaScaling() && (E *= f.devicePixelRatio, T *= f.devicePixelRatio), l.shadowColor = y.color, l.shadowBlur = y.blur * f.browserShadowBlurConstant * (E + T) * (D.scaleX + D.scaleY) / 4, l.shadowOffsetX = y.offsetX * E * D.scaleX, l.shadowOffsetY = y.offsetY * T * D.scaleY
                                            }
                                        },
                                        _removeShadow: function(l) {
                                            !this.shadow || (l.shadowColor = "", l.shadowBlur = l.shadowOffsetX = l.shadowOffsetY = 0)
                                        },
                                        _applyPatternGradientTransform: function(l, y) {
                                            if (!y || !y.toLive) return {
                                                offsetX: 0,
                                                offsetY: 0
                                            };
                                            var C = y.gradientTransform || y.patternTransform,
                                                D = -this.width / 2 + y.offsetX || 0,
                                                E = -this.height / 2 + y.offsetY || 0;
                                            return "percentage" === y.gradientUnits ? l.transform(this.width, 0, 0, this.height, D, E) : l.transform(1, 0, 0, 1, D, E), C && l.transform(C[0], C[1], C[2], C[3], C[4], C[5]), {
                                                offsetX: D,
                                                offsetY: E
                                            }
                                        },
                                        _renderPaintInOrder: function(l) {
                                            "stroke" === this.paintFirst ? (this._renderStroke(l), this._renderFill(l)) : (this._renderFill(l), this._renderStroke(l))
                                        },
                                        _render: function() {},
                                        _renderFill: function(l) {
                                            !this.fill || (l.save(), this._setFillStyles(l, this), "evenodd" === this.fillRule ? l.fill("evenodd") : l.fill(), l.restore())
                                        },
                                        _renderStroke: function(l) {
                                            if (this.stroke && 0 !== this.strokeWidth) {
                                                if (this.shadow && !this.shadow.affectStroke && this._removeShadow(l), l.save(), this.strokeUniform && this.group) {
                                                    var y = this.getObjectScaling();
                                                    l.scale(1 / y.scaleX, 1 / y.scaleY)
                                                } else this.strokeUniform && l.scale(1 / this.scaleX, 1 / this.scaleY);
                                                this._setLineDash(l, this.strokeDashArray), this._setStrokeStyles(l, this), l.stroke(), l.restore()
                                            }
                                        },
                                        _applyPatternForTransformedGradient: function(l, y) {
                                            var E, C = this._limitCacheSize(this._getCacheCanvasDimensions()),
                                                D = f.util.createCanvasElement(),
                                                T = this.canvas.getRetinaScaling(),
                                                I = C.x / this.scaleX / T,
                                                F = C.y / this.scaleY / T;
                                            D.width = I, D.height = F, (E = D.getContext("2d")).beginPath(), E.moveTo(0, 0), E.lineTo(I, 0), E.lineTo(I, F), E.lineTo(0, F), E.closePath(), E.translate(I / 2, F / 2), E.scale(C.zoomX / this.scaleX / T, C.zoomY / this.scaleY / T), this._applyPatternGradientTransform(E, y), E.fillStyle = y.toLive(l), E.fill(), l.translate(-this.width / 2 - this.strokeWidth / 2, -this.height / 2 - this.strokeWidth / 2), l.scale(T * this.scaleX / C.zoomX, T * this.scaleY / C.zoomY), l.strokeStyle = E.createPattern(D, "no-repeat")
                                        },
                                        _findCenterFromElement: function() {
                                            return {
                                                x: this.left + this.width / 2,
                                                y: this.top + this.height / 2
                                            }
                                        },
                                        _assignTransformMatrixProps: function() {
                                            if (this.transformMatrix) {
                                                var l = f.util.qrDecompose(this.transformMatrix);
                                                this.flipX = !1, this.flipY = !1, this.set("scaleX", l.scaleX), this.set("scaleY", l.scaleY), this.angle = l.angle, this.skewX = l.skewX, this.skewY = 0
                                            }
                                        },
                                        _removeTransformMatrix: function(l) {
                                            var y = this._findCenterFromElement();
                                            this.transformMatrix && (this._assignTransformMatrixProps(), y = f.util.transformPoint(y, this.transformMatrix)), this.transformMatrix = null, l && (this.scaleX *= l.scaleX, this.scaleY *= l.scaleY, this.cropX = l.cropX, this.cropY = l.cropY, y.x += l.offsetLeft, y.y += l.offsetTop, this.width = l.width, this.height = l.height), this.setPositionByOrigin(y, "center", "center")
                                        },
                                        clone: function(l, y) {
                                            var C = this.toObject(y);
                                            this.constructor.fromObject ? this.constructor.fromObject(C, l) : f.Object._fromObject("Object", C, l)
                                        },
                                        cloneAsImage: function(l, y) {
                                            var C = this.toCanvasElement(y);
                                            return l && l(new f.Image(C)), this
                                        },
                                        toCanvasElement: function(l) {
                                            l || (l = {});
                                            var y = f.util,
                                                C = y.saveObjectTransform(this),
                                                D = this.group,
                                                E = this.shadow,
                                                T = Math.abs,
                                                I = (l.multiplier || 1) * (l.enableRetinaScaling ? f.devicePixelRatio : 1);
                                            delete this.group, l.withoutTransform && y.resetObjectTransform(this), l.withoutShadow && (this.shadow = null);
                                            var ie, ue, fe, F = f.util.createCanvasElement(),
                                                B = this.getBoundingRect(!0, !0),
                                                G = this.shadow,
                                                le = {
                                                    x: 0,
                                                    y: 0
                                                };
                                            G && (ue = G.blur, ie = G.nonScaling ? {
                                                scaleX: 1,
                                                scaleY: 1
                                            } : this.getObjectScaling(), le.x = 2 * Math.round(T(G.offsetX) + ue) * T(ie.scaleX), le.y = 2 * Math.round(T(G.offsetY) + ue) * T(ie.scaleY)), fe = B.height + le.y, F.width = Math.ceil(B.width + le.x), F.height = Math.ceil(fe);
                                            var ae = new f.StaticCanvas(F, {
                                                enableRetinaScaling: !1,
                                                renderOnAddRemove: !1,
                                                skipOffscreen: !1
                                            });
                                            "jpeg" === l.format && (ae.backgroundColor = "#fff"), this.setPositionByOrigin(new f.Point(ae.width / 2, ae.height / 2), "center", "center");
                                            var _e = this.canvas;
                                            ae.add(this);
                                            var be = ae.toCanvasElement(I || 1, l);
                                            return this.shadow = E, this.set("canvas", _e), D && (this.group = D), this.set(C).setCoords(), ae._objects = [], ae.dispose(), ae = null, be
                                        },
                                        toDataURL: function(l) {
                                            return l || (l = {}), f.util.toDataURL(this.toCanvasElement(l), l.format || "png", l.quality || 1)
                                        },
                                        isType: function(l) {
                                            return this.type === l
                                        },
                                        complexity: function() {
                                            return 1
                                        },
                                        toJSON: function(l) {
                                            return this.toObject(l)
                                        },
                                        rotate: function(l) {
                                            var y = ("center" !== this.originX || "center" !== this.originY) && this.centeredRotation;
                                            return y && this._setOriginToCenter(), this.set("angle", l), y && this._resetOrigin(), this
                                        },
                                        centerH: function() {
                                            return this.canvas && this.canvas.centerObjectH(this), this
                                        },
                                        viewportCenterH: function() {
                                            return this.canvas && this.canvas.viewportCenterObjectH(this), this
                                        },
                                        centerV: function() {
                                            return this.canvas && this.canvas.centerObjectV(this), this
                                        },
                                        viewportCenterV: function() {
                                            return this.canvas && this.canvas.viewportCenterObjectV(this), this
                                        },
                                        center: function() {
                                            return this.canvas && this.canvas.centerObject(this), this
                                        },
                                        viewportCenter: function() {
                                            return this.canvas && this.canvas.viewportCenterObject(this), this
                                        },
                                        getLocalPointer: function(l, y) {
                                            y = y || this.canvas.getPointer(l);
                                            var C = new f.Point(y.x, y.y),
                                                D = this._getLeftTopCoords();
                                            return this.angle && (C = f.util.rotatePoint(C, D, o(-this.angle))), {
                                                x: C.x - D.x,
                                                y: C.y - D.y
                                            }
                                        },
                                        _setupCompositeOperation: function(l) {
                                            this.globalCompositeOperation && (l.globalCompositeOperation = this.globalCompositeOperation)
                                        },
                                        dispose: function() {
                                            f.runningAnimations && f.runningAnimations.cancelByTarget(this)
                                        }
                                    }), f.util.createAccessors && f.util.createAccessors(f.Object), m(f.Object.prototype, f.Observable), f.Object.NUM_FRACTION_DIGITS = 2, f.Object.ENLIVEN_PROPS = ["clipPath"], f.Object._fromObject = function(l, y, C, D) {
                                        var E = f[l];
                                        y = d(y, !0), f.util.enlivenPatterns([y.fill, y.stroke], function(T) {
                                            void 0 !== T[0] && (y.fill = T[0]), void 0 !== T[1] && (y.stroke = T[1]), f.util.enlivenObjectEnlivables(y, y, function() {
                                                var I = D ? new E(y[D], y) : new E(y);
                                                C && C(I)
                                            })
                                        })
                                    }, f.Object.__uid = 0)
                                }(Ee),
                                function() {
                                    var v = b.util.degreesToRadians,
                                        f = {
                                            left: -.5,
                                            center: 0,
                                            right: .5
                                        },
                                        m = {
                                            top: -.5,
                                            center: 0,
                                            bottom: .5
                                        };
                                    b.util.object.extend(b.Object.prototype, {
                                        translateToGivenOrigin: function(d, a, u, o, h) {
                                            var y, C, D, p = d.x,
                                                l = d.y;
                                            return "string" == typeof a ? a = f[a] : a -= .5, "string" == typeof o ? o = f[o] : o -= .5, "string" == typeof u ? u = m[u] : u -= .5, "string" == typeof h ? h = m[h] : h -= .5, C = h - u, ((y = o - a) || C) && (D = this._getTransformedDimensions(), p = d.x + y * D.x, l = d.y + C * D.y), new b.Point(p, l)
                                        },
                                        translateToCenterPoint: function(d, a, u) {
                                            var o = this.translateToGivenOrigin(d, a, u, "center", "center");
                                            return this.angle ? b.util.rotatePoint(o, d, v(this.angle)) : o
                                        },
                                        translateToOriginPoint: function(d, a, u) {
                                            var o = this.translateToGivenOrigin(d, "center", "center", a, u);
                                            return this.angle ? b.util.rotatePoint(o, d, v(this.angle)) : o
                                        },
                                        getCenterPoint: function() {
                                            var d = new b.Point(this.left, this.top);
                                            return this.translateToCenterPoint(d, this.originX, this.originY)
                                        },
                                        getPointByOrigin: function(d, a) {
                                            var u = this.getCenterPoint();
                                            return this.translateToOriginPoint(u, d, a)
                                        },
                                        toLocalPoint: function(d, a, u) {
                                            var h, p, o = this.getCenterPoint();
                                            return h = void 0 !== a && void 0 !== u ? this.translateToGivenOrigin(o, "center", "center", a, u) : new b.Point(this.left, this.top), p = new b.Point(d.x, d.y), this.angle && (p = b.util.rotatePoint(p, o, -v(this.angle))), p.subtractEquals(h)
                                        },
                                        setPositionByOrigin: function(d, a, u) {
                                            var o = this.translateToCenterPoint(d, a, u),
                                                h = this.translateToOriginPoint(o, this.originX, this.originY);
                                            this.set("left", h.x), this.set("top", h.y)
                                        },
                                        adjustPosition: function(d) {
                                            var p, l, a = v(this.angle),
                                                u = this.getScaledWidth(),
                                                o = b.util.cos(a) * u,
                                                h = b.util.sin(a) * u;
                                            this.left += o * ((l = "string" == typeof d ? f[d] : d - .5) - (p = "string" == typeof this.originX ? f[this.originX] : this.originX - .5)), this.top += h * (l - p), this.setCoords(), this.originX = d
                                        },
                                        _setOriginToCenter: function() {
                                            this._originalOriginX = this.originX, this._originalOriginY = this.originY;
                                            var d = this.getCenterPoint();
                                            this.originX = "center", this.originY = "center", this.left = d.x, this.top = d.y
                                        },
                                        _resetOrigin: function() {
                                            var d = this.translateToOriginPoint(this.getCenterPoint(), this._originalOriginX, this._originalOriginY);
                                            this.originX = this._originalOriginX, this.originY = this._originalOriginY, this.left = d.x, this.top = d.y, this._originalOriginX = null, this._originalOriginY = null
                                        },
                                        _getLeftTopCoords: function() {
                                            return this.translateToOriginPoint(this.getCenterPoint(), "left", "top")
                                        }
                                    })
                                }(),
                                function() {
                                    var f = b.util,
                                        m = f.degreesToRadians,
                                        d = f.multiplyTransformMatrices,
                                        a = f.transformPoint;
                                    f.object.extend(b.Object.prototype, {
                                        oCoords: null,
                                        aCoords: null,
                                        lineCoords: null,
                                        ownMatrixCache: null,
                                        matrixCache: null,
                                        controls: {},
                                        _getCoords: function(u, o) {
                                            return o ? u ? this.calcACoords() : this.calcLineCoords() : ((!this.aCoords || !this.lineCoords) && this.setCoords(!0), u ? this.aCoords : this.lineCoords)
                                        },
                                        getCoords: function(u, o) {
                                            return function(u) {
                                                return [new b.Point(u.tl.x, u.tl.y), new b.Point(u.tr.x, u.tr.y), new b.Point(u.br.x, u.br.y), new b.Point(u.bl.x, u.bl.y)]
                                            }(this._getCoords(u, o))
                                        },
                                        intersectsWithRect: function(u, o, h, p) {
                                            var l = this.getCoords(h, p);
                                            return "Intersection" === b.Intersection.intersectPolygonRectangle(l, u, o).status
                                        },
                                        intersectsWithObject: function(u, o, h) {
                                            return "Intersection" === b.Intersection.intersectPolygonPolygon(this.getCoords(o, h), u.getCoords(o, h)).status || u.isContainedWithinObject(this, o, h) || this.isContainedWithinObject(u, o, h)
                                        },
                                        isContainedWithinObject: function(u, o, h) {
                                            for (var p = this.getCoords(o, h), y = 0, C = u._getImageLines(o ? u.aCoords : u.lineCoords); y < 4; y++)
                                                if (!u.containsPoint(p[y], C)) return !1;
                                            return !0
                                        },
                                        isContainedWithinRect: function(u, o, h, p) {
                                            var l = this.getBoundingRect(h, p);
                                            return l.left >= u.x && l.left + l.width <= o.x && l.top >= u.y && l.top + l.height <= o.y
                                        },
                                        containsPoint: function(u, o, h, p) {
                                            var l = this._getCoords(h, p),
                                                y = (o = o || this._getImageLines(l), this._findCrossPoints(u, o));
                                            return 0 !== y && y % 2 == 1
                                        },
                                        isOnScreen: function(u) {
                                            if (!this.canvas) return !1;
                                            var o = this.canvas.vptCoords.tl,
                                                h = this.canvas.vptCoords.br;
                                            return !(!this.getCoords(!0, u).some(function(l) {
                                                return l.x <= h.x && l.x >= o.x && l.y <= h.y && l.y >= o.y
                                            }) && !this.intersectsWithRect(o, h, !0, u)) || this._containsCenterOfCanvas(o, h, u)
                                        },
                                        _containsCenterOfCanvas: function(u, o, h) {
                                            return !!this.containsPoint({
                                                x: (u.x + o.x) / 2,
                                                y: (u.y + o.y) / 2
                                            }, null, !0, h)
                                        },
                                        isPartiallyOnScreen: function(u) {
                                            if (!this.canvas) return !1;
                                            var o = this.canvas.vptCoords.tl,
                                                h = this.canvas.vptCoords.br;
                                            return !!this.intersectsWithRect(o, h, !0, u) || this.getCoords(!0, u).every(function(l) {
                                                return (l.x >= h.x || l.x <= o.x) && (l.y >= h.y || l.y <= o.y)
                                            }) && this._containsCenterOfCanvas(o, h, u)
                                        },
                                        _getImageLines: function(u) {
                                            return {
                                                topline: {
                                                    o: u.tl,
                                                    d: u.tr
                                                },
                                                rightline: {
                                                    o: u.tr,
                                                    d: u.br
                                                },
                                                bottomline: {
                                                    o: u.br,
                                                    d: u.bl
                                                },
                                                leftline: {
                                                    o: u.bl,
                                                    d: u.tl
                                                }
                                            }
                                        },
                                        _findCrossPoints: function(u, o) {
                                            var p, l, y, C, E, D = 0;
                                            for (var T in o)
                                                if (!((E = o[T]).o.y < u.y && E.d.y < u.y || E.o.y >= u.y && E.d.y >= u.y || (E.o.x === E.d.x && E.o.x >= u.x ? C = E.o.x : (p = (E.d.y - E.o.y) / (E.d.x - E.o.x), l = u.y - 0 * u.x, y = E.o.y - p * E.o.x, C = -(l - y) / (0 - p)), C >= u.x && (D += 1), 2 !== D))) break;
                                            return D
                                        },
                                        getBoundingRect: function(u, o) {
                                            var h = this.getCoords(u, o);
                                            return f.makeBoundingBoxFromPoints(h)
                                        },
                                        getScaledWidth: function() {
                                            return this._getTransformedDimensions().x
                                        },
                                        getScaledHeight: function() {
                                            return this._getTransformedDimensions().y
                                        },
                                        _constrainScale: function(u) {
                                            return Math.abs(u) < this.minScaleLimit ? u < 0 ? -this.minScaleLimit : this.minScaleLimit : 0 === u ? 1e-4 : u
                                        },
                                        scale: function(u) {
                                            return this._set("scaleX", u), this._set("scaleY", u), this.setCoords()
                                        },
                                        scaleToWidth: function(u, o) {
                                            var h = this.getBoundingRect(o).width / this.getScaledWidth();
                                            return this.scale(u / this.width / h)
                                        },
                                        scaleToHeight: function(u, o) {
                                            var h = this.getBoundingRect(o).height / this.getScaledHeight();
                                            return this.scale(u / this.height / h)
                                        },
                                        calcLineCoords: function() {
                                            var u = this.getViewportTransform(),
                                                o = this.padding,
                                                h = m(this.angle),
                                                y = f.cos(h) * o,
                                                C = f.sin(h) * o,
                                                D = y + C,
                                                E = y - C,
                                                T = this.calcACoords(),
                                                I = {
                                                    tl: a(T.tl, u),
                                                    tr: a(T.tr, u),
                                                    bl: a(T.bl, u),
                                                    br: a(T.br, u)
                                                };
                                            return o && (I.tl.x -= E, I.tl.y -= D, I.tr.x += D, I.tr.y -= E, I.bl.x -= D, I.bl.y += E, I.br.x += E, I.br.y += D), I
                                        },
                                        calcOCoords: function() {
                                            var u = this._calcRotateMatrix(),
                                                o = this._calcTranslateMatrix(),
                                                h = this.getViewportTransform(),
                                                p = d(h, o),
                                                l = d(p, u),
                                                y = (l = d(l, [1 / h[0], 0, 0, 1 / h[3], 0, 0]), this._calculateCurrentDimensions()),
                                                C = {};
                                            return this.forEachControl(function(D, E, T) {
                                                C[E] = D.positionHandler(y, l, T)
                                            }), C
                                        },
                                        calcACoords: function() {
                                            var u = this._calcRotateMatrix(),
                                                o = this._calcTranslateMatrix(),
                                                h = d(o, u),
                                                p = this._getTransformedDimensions(),
                                                l = p.x / 2,
                                                y = p.y / 2;
                                            return {
                                                tl: a({
                                                    x: -l,
                                                    y: -y
                                                }, h),
                                                tr: a({
                                                    x: l,
                                                    y: -y
                                                }, h),
                                                bl: a({
                                                    x: -l,
                                                    y
                                                }, h),
                                                br: a({
                                                    x: l,
                                                    y
                                                }, h)
                                            }
                                        },
                                        setCoords: function(u) {
                                            return this.aCoords = this.calcACoords(), this.lineCoords = this.group ? this.aCoords : this.calcLineCoords(), u || (this.oCoords = this.calcOCoords(), this._setCornerCoords && this._setCornerCoords()), this
                                        },
                                        _calcRotateMatrix: function() {
                                            return f.calcRotateMatrix(this)
                                        },
                                        _calcTranslateMatrix: function() {
                                            var u = this.getCenterPoint();
                                            return [1, 0, 0, 1, u.x, u.y]
                                        },
                                        transformMatrixKey: function(u) {
                                            var o = "_",
                                                h = "";
                                            return !u && this.group && (h = this.group.transformMatrixKey(u) + o), h + this.top + o + this.left + o + this.scaleX + o + this.scaleY + o + this.skewX + o + this.skewY + o + this.angle + o + this.originX + o + this.originY + o + this.width + o + this.height + o + this.strokeWidth + this.flipX + this.flipY
                                        },
                                        calcTransformMatrix: function(u) {
                                            var o = this.calcOwnMatrix();
                                            if (u || !this.group) return o;
                                            var h = this.transformMatrixKey(u),
                                                p = this.matrixCache || (this.matrixCache = {});
                                            return p.key === h ? p.value : (this.group && (o = d(this.group.calcTransformMatrix(!1), o)), p.key = h, p.value = o, o)
                                        },
                                        calcOwnMatrix: function() {
                                            var u = this.transformMatrixKey(!0),
                                                o = this.ownMatrixCache || (this.ownMatrixCache = {});
                                            if (o.key === u) return o.value;
                                            var h = this._calcTranslateMatrix(),
                                                p = {
                                                    angle: this.angle,
                                                    translateX: h[4],
                                                    translateY: h[5],
                                                    scaleX: this.scaleX,
                                                    scaleY: this.scaleY,
                                                    skewX: this.skewX,
                                                    skewY: this.skewY,
                                                    flipX: this.flipX,
                                                    flipY: this.flipY
                                                };
                                            return o.key = u, o.value = f.composeMatrix(p), o.value
                                        },
                                        _getNonTransformedDimensions: function() {
                                            var u = this.strokeWidth;
                                            return {
                                                x: this.width + u,
                                                y: this.height + u
                                            }
                                        },
                                        _getTransformedDimensions: function(u, o) {
                                            void 0 === u && (u = this.skewX), void 0 === o && (o = this.skewY);
                                            var h, p, l, y = 0 === u && 0 === o;
                                            if (this.strokeUniform ? (p = this.width, l = this.height) : (p = (h = this._getNonTransformedDimensions()).x, l = h.y), y) return this._finalizeDimensions(p * this.scaleX, l * this.scaleY);
                                            var C = f.sizeAfterTransform(p, l, {
                                                scaleX: this.scaleX,
                                                scaleY: this.scaleY,
                                                skewX: u,
                                                skewY: o
                                            });
                                            return this._finalizeDimensions(C.x, C.y)
                                        },
                                        _finalizeDimensions: function(u, o) {
                                            return this.strokeUniform ? {
                                                x: u + this.strokeWidth,
                                                y: o + this.strokeWidth
                                            } : {
                                                x: u,
                                                y: o
                                            }
                                        },
                                        _calculateCurrentDimensions: function() {
                                            var u = this.getViewportTransform(),
                                                o = this._getTransformedDimensions();
                                            return a(o, u, !0).scalarAdd(2 * this.padding)
                                        }
                                    })
                                }(), b.util.object.extend(b.Object.prototype, {
                                    sendToBack: function() {
                                        return this.group ? b.StaticCanvas.prototype.sendToBack.call(this.group, this) : this.canvas && this.canvas.sendToBack(this), this
                                    },
                                    bringToFront: function() {
                                        return this.group ? b.StaticCanvas.prototype.bringToFront.call(this.group, this) : this.canvas && this.canvas.bringToFront(this), this
                                    },
                                    sendBackwards: function(v) {
                                        return this.group ? b.StaticCanvas.prototype.sendBackwards.call(this.group, this, v) : this.canvas && this.canvas.sendBackwards(this, v), this
                                    },
                                    bringForward: function(v) {
                                        return this.group ? b.StaticCanvas.prototype.bringForward.call(this.group, this, v) : this.canvas && this.canvas.bringForward(this, v), this
                                    },
                                    moveTo: function(v) {
                                        return this.group && "activeSelection" !== this.group.type ? b.StaticCanvas.prototype.moveTo.call(this.group, this, v) : this.canvas && this.canvas.moveTo(this, v), this
                                    }
                                }),
                                function() {
                                    function v(m, d) {
                                        if (d) {
                                            if (d.toLive) return m + ": url(#SVGID_" + d.id + "); ";
                                            var a = new b.Color(d),
                                                u = m + ": " + a.toRgb() + "; ",
                                                o = a.getAlpha();
                                            return 1 !== o && (u += m + "-opacity: " + o.toString() + "; "), u
                                        }
                                        return m + ": none; "
                                    }
                                    var f = b.util.toFixed;
                                    b.util.object.extend(b.Object.prototype, {
                                        getSvgStyles: function(m) {
                                            var d = this.fillRule ? this.fillRule : "nonzero",
                                                a = this.strokeWidth ? this.strokeWidth : "0",
                                                u = this.strokeDashArray ? this.strokeDashArray.join(" ") : "none",
                                                o = this.strokeDashOffset ? this.strokeDashOffset : "0",
                                                h = this.strokeLineCap ? this.strokeLineCap : "butt",
                                                p = this.strokeLineJoin ? this.strokeLineJoin : "miter",
                                                l = this.strokeMiterLimit ? this.strokeMiterLimit : "4",
                                                y = void 0 !== this.opacity ? this.opacity : "1",
                                                C = this.visible ? "" : " visibility: hidden;",
                                                D = m ? "" : this.getSvgFilter(),
                                                E = v("fill", this.fill);
                                            return [v("stroke", this.stroke), "stroke-width: ", a, "; ", "stroke-dasharray: ", u, "; ", "stroke-linecap: ", h, "; ", "stroke-dashoffset: ", o, "; ", "stroke-linejoin: ", p, "; ", "stroke-miterlimit: ", l, "; ", E, "fill-rule: ", d, "; ", "opacity: ", y, ";", D, C].join("")
                                        },
                                        getSvgSpanStyles: function(m, d) {
                                            var a = "; ",
                                                u = m.fontFamily ? "font-family: " + (-1 === m.fontFamily.indexOf("'") && -1 === m.fontFamily.indexOf('"') ? "'" + m.fontFamily + "'" : m.fontFamily) + a : "",
                                                o = m.strokeWidth ? "stroke-width: " + m.strokeWidth + a : "",
                                                h = (u = u, m.fontSize ? "font-size: " + m.fontSize + "px" + a : ""),
                                                p = m.fontStyle ? "font-style: " + m.fontStyle + a : "",
                                                l = m.fontWeight ? "font-weight: " + m.fontWeight + a : "",
                                                y = m.fill ? v("fill", m.fill) : "",
                                                C = m.stroke ? v("stroke", m.stroke) : "",
                                                D = this.getSvgTextDecoration(m);
                                            return D && (D = "text-decoration: " + D + a), [C, o, u, h, p, l, D, y, m.deltaY ? "baseline-shift: " + -m.deltaY + "; " : "", d ? "white-space: pre; " : ""].join("")
                                        },
                                        getSvgTextDecoration: function(m) {
                                            return ["overline", "underline", "line-through"].filter(function(d) {
                                                return m[d.replace("-", "")]
                                            }).join(" ")
                                        },
                                        getSvgFilter: function() {
                                            return this.shadow ? "filter: url(#SVGID_" + this.shadow.id + ");" : ""
                                        },
                                        getSvgCommons: function() {
                                            return [this.id ? 'id="' + this.id + '" ' : "", this.clipPath ? 'clip-path="url(#' + this.clipPath.clipPathId + ')" ' : ""].join("")
                                        },
                                        getSvgTransform: function(m, d) {
                                            var a = m ? this.calcTransformMatrix() : this.calcOwnMatrix();
                                            return 'transform="' + b.util.matrixToSVG(a) + (d || "") + '" '
                                        },
                                        _setSVGBg: function(m) {
                                            if (this.backgroundColor) {
                                                var d = b.Object.NUM_FRACTION_DIGITS;
                                                m.push("\t\t<rect ", this._getFillAttributes(this.backgroundColor), ' x="', f(-this.width / 2, d), '" y="', f(-this.height / 2, d), '" width="', f(this.width, d), '" height="', f(this.height, d), '"></rect>\n')
                                            }
                                        },
                                        toSVG: function(m) {
                                            return this._createBaseSVGMarkup(this._toSVG(m), {
                                                reviver: m
                                            })
                                        },
                                        toClipPathSVG: function(m) {
                                            return "\t" + this._createBaseClipPathSVGMarkup(this._toSVG(m), {
                                                reviver: m
                                            })
                                        },
                                        _createBaseClipPathSVGMarkup: function(m, d) {
                                            var a = (d = d || {}).reviver,
                                                o = [this.getSvgTransform(!0, d.additionalTransform || ""), this.getSvgCommons()].join(""),
                                                h = m.indexOf("COMMON_PARTS");
                                            return m[h] = o, a ? a(m.join("")) : m.join("")
                                        },
                                        _createBaseSVGMarkup: function(m, d) {
                                            var T, F, a = (d = d || {}).noStyle,
                                                u = d.reviver,
                                                o = a ? "" : 'style="' + this.getSvgStyles() + '" ',
                                                h = d.withShadow ? 'style="' + this.getSvgFilter() + '" ' : "",
                                                p = this.clipPath,
                                                l = this.strokeUniform ? 'vector-effect="non-scaling-stroke" ' : "",
                                                y = p && p.absolutePositioned,
                                                C = this.stroke,
                                                D = this.fill,
                                                E = this.shadow,
                                                I = [],
                                                B = m.indexOf("COMMON_PARTS"),
                                                G = d.additionalTransform;
                                            return p && (p.clipPathId = "CLIPPATH_" + b.Object.__uid++, F = '<clipPath id="' + p.clipPathId + '" >\n' + p.toClipPathSVG(u) + "</clipPath>\n"), y && I.push("<g ", h, this.getSvgCommons(), " >\n"), I.push("<g ", this.getSvgTransform(!1), y ? "" : h + this.getSvgCommons(), " >\n"), T = [o, l, a ? "" : this.addPaintOrder(), " ", G ? 'transform="' + G + '" ' : ""].join(""), m[B] = T, D && D.toLive && I.push(D.toSVG(this)), C && C.toLive && I.push(C.toSVG(this)), E && I.push(E.toSVG(this)), p && I.push(F), I.push(m.join("")), I.push("</g>\n"), y && I.push("</g>\n"), u ? u(I.join("")) : I.join("")
                                        },
                                        addPaintOrder: function() {
                                            return "fill" !== this.paintFirst ? ' paint-order="' + this.paintFirst + '" ' : ""
                                        }
                                    })
                                }(),
                                function() {
                                    var v = b.util.object.extend,
                                        f = "stateProperties";

                                    function m(a, u, o) {
                                        var h = {};
                                        o.forEach(function(l) {
                                            h[l] = a[l]
                                        }), v(a[u], h, !0)
                                    }

                                    function d(a, u, o) {
                                        if (a === u) return !0;
                                        if (Array.isArray(a)) {
                                            if (!Array.isArray(u) || a.length !== u.length) return !1;
                                            for (var h = 0, p = a.length; h < p; h++)
                                                if (!d(a[h], u[h])) return !1;
                                            return !0
                                        }
                                        if (a && "object" == typeof a) {
                                            var y, l = Object.keys(a);
                                            if (!u || "object" != typeof u || !o && l.length !== Object.keys(u).length) return !1;
                                            for (h = 0, p = l.length; h < p; h++)
                                                if ("canvas" !== (y = l[h]) && "group" !== y && !d(a[y], u[y])) return !1;
                                            return !0
                                        }
                                    }
                                    b.util.object.extend(b.Object.prototype, {
                                        hasStateChanged: function(a) {
                                            var u = "_" + (a = a || f);
                                            return Object.keys(this[u]).length < this[a].length || !d(this[u], this, !0)
                                        },
                                        saveState: function(a) {
                                            var u = a && a.propertySet || f,
                                                o = "_" + u;
                                            return this[o] ? (m(this, o, this[u]), a && a.stateProperties && m(this, o, a.stateProperties), this) : this.setupState(a)
                                        },
                                        setupState: function(a) {
                                            var u = (a = a || {}).propertySet || f;
                                            return a.propertySet = u, this["_" + u] = {}, this.saveState(a), this
                                        }
                                    })
                                }(),
                                function() {
                                    var v = b.util.degreesToRadians;
                                    b.util.object.extend(b.Object.prototype, {
                                        _findTargetCorner: function(f, m) {
                                            if (!this.hasControls || this.group || !this.canvas || this.canvas._activeObject !== this) return !1;
                                            var u, o, l, d = f.x,
                                                a = f.y,
                                                h = Object.keys(this.oCoords),
                                                p = h.length - 1;
                                            for (this.__corner = 0; p >= 0; p--)
                                                if (this.isControlVisible(l = h[p]) && (o = this._getImageLines(m ? this.oCoords[l].touchCorner : this.oCoords[l].corner), 0 !== (u = this._findCrossPoints({
                                                        x: d,
                                                        y: a
                                                    }, o)) && u % 2 == 1)) return this.__corner = l, l;
                                            return !1
                                        },
                                        forEachControl: function(f) {
                                            for (var m in this.controls) f(this.controls[m], m, this)
                                        },
                                        _setCornerCoords: function() {
                                            var f = this.oCoords;
                                            for (var m in f) {
                                                var d = this.controls[m];
                                                f[m].corner = d.calcCornerCoords(this.angle, this.cornerSize, f[m].x, f[m].y, !1), f[m].touchCorner = d.calcCornerCoords(this.angle, this.touchCornerSize, f[m].x, f[m].y, !0)
                                            }
                                        },
                                        drawSelectionBackground: function(f) {
                                            if (!this.selectionBackgroundColor || this.canvas && !this.canvas.interactive || this.canvas && this.canvas._activeObject !== this) return this;
                                            f.save();
                                            var m = this.getCenterPoint(),
                                                d = this._calculateCurrentDimensions(),
                                                a = this.canvas.viewportTransform;
                                            return f.translate(m.x, m.y), f.scale(1 / a[0], 1 / a[3]), f.rotate(v(this.angle)), f.fillStyle = this.selectionBackgroundColor, f.fillRect(-d.x / 2, -d.y / 2, d.x, d.y), f.restore(), this
                                        },
                                        drawBorders: function(f, m) {
                                            m = m || {};
                                            var d = this._calculateCurrentDimensions(),
                                                a = this.borderScaleFactor,
                                                u = d.x + a,
                                                o = d.y + a,
                                                h = void 0 !== m.hasControls ? m.hasControls : this.hasControls,
                                                p = !1;
                                            return f.save(), f.strokeStyle = m.borderColor || this.borderColor, this._setLineDash(f, m.borderDashArray || this.borderDashArray), f.strokeRect(-u / 2, -o / 2, u, o), h && (f.beginPath(), this.forEachControl(function(l, y, C) {
                                                l.withConnection && l.getVisibility(C, y) && (p = !0, f.moveTo(l.x * u, l.y * o), f.lineTo(l.x * u + l.offsetX, l.y * o + l.offsetY))
                                            }), p && f.stroke()), f.restore(), this
                                        },
                                        drawBordersInGroup: function(f, m, d) {
                                            d = d || {};
                                            var a = b.util.sizeAfterTransform(this.width, this.height, m),
                                                u = this.strokeWidth,
                                                o = this.strokeUniform,
                                                h = this.borderScaleFactor,
                                                p = a.x + u * (o ? this.canvas.getZoom() : m.scaleX) + h,
                                                l = a.y + u * (o ? this.canvas.getZoom() : m.scaleY) + h;
                                            return f.save(), this._setLineDash(f, d.borderDashArray || this.borderDashArray), f.strokeStyle = d.borderColor || this.borderColor, f.strokeRect(-p / 2, -l / 2, p, l), f.restore(), this
                                        },
                                        drawControls: function(f, m) {
                                            m = m || {}, f.save();
                                            var a, u, d = this.canvas.getRetinaScaling();
                                            return f.setTransform(d, 0, 0, d, 0, 0), f.strokeStyle = f.fillStyle = m.cornerColor || this.cornerColor, this.transparentCorners || (f.strokeStyle = m.cornerStrokeColor || this.cornerStrokeColor), this._setLineDash(f, m.cornerDashArray || this.cornerDashArray), this.setCoords(), this.group && (a = this.group.calcTransformMatrix()), this.forEachControl(function(o, h, p) {
                                                u = p.oCoords[h], o.getVisibility(p, h) && (a && (u = b.util.transformPoint(u, a)), o.render(f, u.x, u.y, m, p))
                                            }), f.restore(), this
                                        },
                                        isControlVisible: function(f) {
                                            return this.controls[f] && this.controls[f].getVisibility(this, f)
                                        },
                                        setControlVisible: function(f, m) {
                                            return this._controlsVisibility || (this._controlsVisibility = {}), this._controlsVisibility[f] = m, this
                                        },
                                        setControlsVisibility: function(f) {
                                            for (var m in f || (f = {}), f) this.setControlVisible(m, f[m]);
                                            return this
                                        },
                                        onDeselect: function() {},
                                        onSelect: function() {}
                                    })
                                }(), b.util.object.extend(b.StaticCanvas.prototype, {
                                    FX_DURATION: 500,
                                    fxCenterObjectH: function(v, f) {
                                        var m = function() {},
                                            d = (f = f || {}).onComplete || m,
                                            a = f.onChange || m,
                                            u = this;
                                        return b.util.animate({
                                            target: this,
                                            startValue: v.left,
                                            endValue: this.getCenter().left,
                                            duration: this.FX_DURATION,
                                            onChange: function(o) {
                                                v.set("left", o), u.requestRenderAll(), a()
                                            },
                                            onComplete: function() {
                                                v.setCoords(), d()
                                            }
                                        })
                                    },
                                    fxCenterObjectV: function(v, f) {
                                        var m = function() {},
                                            d = (f = f || {}).onComplete || m,
                                            a = f.onChange || m,
                                            u = this;
                                        return b.util.animate({
                                            target: this,
                                            startValue: v.top,
                                            endValue: this.getCenter().top,
                                            duration: this.FX_DURATION,
                                            onChange: function(o) {
                                                v.set("top", o), u.requestRenderAll(), a()
                                            },
                                            onComplete: function() {
                                                v.setCoords(), d()
                                            }
                                        })
                                    },
                                    fxRemove: function(v, f) {
                                        var m = function() {},
                                            d = (f = f || {}).onComplete || m,
                                            a = f.onChange || m,
                                            u = this;
                                        return b.util.animate({
                                            target: this,
                                            startValue: v.opacity,
                                            endValue: 0,
                                            duration: this.FX_DURATION,
                                            onChange: function(o) {
                                                v.set("opacity", o), u.requestRenderAll(), a()
                                            },
                                            onComplete: function() {
                                                u.remove(v), d()
                                            }
                                        })
                                    }
                                }), b.util.object.extend(b.Object.prototype, {
                                    animate: function() {
                                        if (arguments[0] && "object" == typeof arguments[0]) {
                                            var f, v = [],
                                                d = [];
                                            for (f in arguments[0]) v.push(f);
                                            for (var a = 0, u = v.length; a < u; a++) d.push(this._animate(f = v[a], arguments[0][f], arguments[1], a !== u - 1));
                                            return d
                                        }
                                        return this._animate.apply(this, arguments)
                                    },
                                    _animate: function(v, f, m, d) {
                                        var u, a = this;
                                        f = f.toString(), m = m ? b.util.object.clone(m) : {}, ~v.indexOf(".") && (u = v.split("."));
                                        var o = a.colorProperties.indexOf(v) > -1 || u && a.colorProperties.indexOf(u[1]) > -1,
                                            h = u ? this.get(u[0])[u[1]] : this.get(v);
                                        "from" in m || (m.from = h), o || (f = ~f.indexOf("=") ? h + parseFloat(f.replace("=", "")) : parseFloat(f));
                                        var p = {
                                            target: this,
                                            startValue: m.from,
                                            endValue: f,
                                            byValue: m.by,
                                            easing: m.easing,
                                            duration: m.duration,
                                            abort: m.abort && function(l, y, C) {
                                                return m.abort.call(a, l, y, C)
                                            },
                                            onChange: function(l, y, C) {
                                                u ? a[u[0]][u[1]] = l : a.set(v, l), !d && m.onChange && m.onChange(l, y, C)
                                            },
                                            onComplete: function(l, y, C) {
                                                d || (a.setCoords(), m.onComplete && m.onComplete(l, y, C))
                                            }
                                        };
                                        return o ? b.util.animateColor(p.startValue, p.endValue, p.duration, p) : b.util.animate(p)
                                    }
                                }),
                                function(v) {
                                    "use strict";
                                    var f = v.fabric || (v.fabric = {}),
                                        m = f.util.object.extend,
                                        d = f.util.object.clone,
                                        a = {
                                            x1: 1,
                                            x2: 1,
                                            y1: 1,
                                            y2: 1
                                        };

                                    function u(o, h) {
                                        var p = o.origin,
                                            l = o.axis1,
                                            y = o.axis2,
                                            C = o.dimension,
                                            D = h.nearest,
                                            E = h.center,
                                            T = h.farthest;
                                        return function() {
                                            switch (this.get(p)) {
                                                case D:
                                                    return Math.min(this.get(l), this.get(y));
                                                case E:
                                                    return Math.min(this.get(l), this.get(y)) + .5 * this.get(C);
                                                case T:
                                                    return Math.max(this.get(l), this.get(y))
                                            }
                                        }
                                    }
                                    f.Line ? f.warn("fabric.Line is already defined") : (f.Line = f.util.createClass(f.Object, {
                                        type: "line",
                                        x1: 0,
                                        y1: 0,
                                        x2: 0,
                                        y2: 0,
                                        cacheProperties: f.Object.prototype.cacheProperties.concat("x1", "x2", "y1", "y2"),
                                        initialize: function(o, h) {
                                            o || (o = [0, 0, 0, 0]), this.callSuper("initialize", h), this.set("x1", o[0]), this.set("y1", o[1]), this.set("x2", o[2]), this.set("y2", o[3]), this._setWidthHeight(h)
                                        },
                                        _setWidthHeight: function(o) {
                                            o || (o = {}), this.width = Math.abs(this.x2 - this.x1), this.height = Math.abs(this.y2 - this.y1), this.left = "left" in o ? o.left : this._getLeftToOriginX(), this.top = "top" in o ? o.top : this._getTopToOriginY()
                                        },
                                        _set: function(o, h) {
                                            return this.callSuper("_set", o, h), void 0 !== a[o] && this._setWidthHeight(), this
                                        },
                                        _getLeftToOriginX: u({
                                            origin: "originX",
                                            axis1: "x1",
                                            axis2: "x2",
                                            dimension: "width"
                                        }, {
                                            nearest: "left",
                                            center: "center",
                                            farthest: "right"
                                        }),
                                        _getTopToOriginY: u({
                                            origin: "originY",
                                            axis1: "y1",
                                            axis2: "y2",
                                            dimension: "height"
                                        }, {
                                            nearest: "top",
                                            center: "center",
                                            farthest: "bottom"
                                        }),
                                        _render: function(o) {
                                            o.beginPath();
                                            var h = this.calcLinePoints();
                                            o.moveTo(h.x1, h.y1), o.lineTo(h.x2, h.y2), o.lineWidth = this.strokeWidth;
                                            var p = o.strokeStyle;
                                            o.strokeStyle = this.stroke || o.fillStyle, this.stroke && this._renderStroke(o), o.strokeStyle = p
                                        },
                                        _findCenterFromElement: function() {
                                            return {
                                                x: (this.x1 + this.x2) / 2,
                                                y: (this.y1 + this.y2) / 2
                                            }
                                        },
                                        toObject: function(o) {
                                            return m(this.callSuper("toObject", o), this.calcLinePoints())
                                        },
                                        _getNonTransformedDimensions: function() {
                                            var o = this.callSuper("_getNonTransformedDimensions");
                                            return "butt" === this.strokeLineCap && (0 === this.width && (o.y -= this.strokeWidth), 0 === this.height && (o.x -= this.strokeWidth)), o
                                        },
                                        calcLinePoints: function() {
                                            var o = this.x1 <= this.x2 ? -1 : 1,
                                                h = this.y1 <= this.y2 ? -1 : 1;
                                            return {
                                                x1: o * this.width * .5,
                                                x2: o * this.width * -.5,
                                                y1: h * this.height * .5,
                                                y2: h * this.height * -.5
                                            }
                                        },
                                        _toSVG: function() {
                                            var o = this.calcLinePoints();
                                            return ["<line ", "COMMON_PARTS", 'x1="', o.x1, '" y1="', o.y1, '" x2="', o.x2, '" y2="', o.y2, '" />\n']
                                        }
                                    }), f.Line.ATTRIBUTE_NAMES = f.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")), f.Line.fromElement = function(o, h, p) {
                                        p = p || {};
                                        var l = f.parseAttributes(o, f.Line.ATTRIBUTE_NAMES);
                                        h(new f.Line([l.x1 || 0, l.y1 || 0, l.x2 || 0, l.y2 || 0], m(l, p)))
                                    }, f.Line.fromObject = function(o, h) {
                                        var l = d(o, !0);
                                        l.points = [o.x1, o.y1, o.x2, o.y2], f.Object._fromObject("Line", l, function(y) {
                                            delete y.points, h && h(y)
                                        }, "points")
                                    })
                                }(Ee),
                                function(v) {
                                    "use strict";
                                    var f = v.fabric || (v.fabric = {}),
                                        m = f.util.degreesToRadians;
                                    f.Circle ? f.warn("fabric.Circle is already defined.") : (f.Circle = f.util.createClass(f.Object, {
                                        type: "circle",
                                        radius: 0,
                                        startAngle: 0,
                                        endAngle: 360,
                                        cacheProperties: f.Object.prototype.cacheProperties.concat("radius", "startAngle", "endAngle"),
                                        _set: function(a, u) {
                                            return this.callSuper("_set", a, u), "radius" === a && this.setRadius(u), this
                                        },
                                        toObject: function(a) {
                                            return this.callSuper("toObject", ["radius", "startAngle", "endAngle"].concat(a))
                                        },
                                        _toSVG: function() {
                                            var a, h = (this.endAngle - this.startAngle) % 360;
                                            if (0 === h) a = ["<circle ", "COMMON_PARTS", 'cx="0" cy="0" ', 'r="', this.radius, '" />\n'];
                                            else {
                                                var p = m(this.startAngle),
                                                    l = m(this.endAngle),
                                                    y = this.radius;
                                                a = ['<path d="M ' + f.util.cos(p) * y + " " + f.util.sin(p) * y, " A " + y + " " + y, " 0 ", +(h > 180 ? "1" : "0") + " 1", " " + f.util.cos(l) * y + " " + f.util.sin(l) * y, '" ', "COMMON_PARTS", " />\n"]
                                            }
                                            return a
                                        },
                                        _render: function(a) {
                                            a.beginPath(), a.arc(0, 0, this.radius, m(this.startAngle), m(this.endAngle), !1), this._renderPaintInOrder(a)
                                        },
                                        getRadiusX: function() {
                                            return this.get("radius") * this.get("scaleX")
                                        },
                                        getRadiusY: function() {
                                            return this.get("radius") * this.get("scaleY")
                                        },
                                        setRadius: function(a) {
                                            return this.radius = a, this.set("width", 2 * a).set("height", 2 * a)
                                        }
                                    }), f.Circle.ATTRIBUTE_NAMES = f.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")), f.Circle.fromElement = function(a, u) {
                                        var o = f.parseAttributes(a, f.Circle.ATTRIBUTE_NAMES);
                                        if (! function(a) {
                                                return "radius" in a && a.radius >= 0
                                            }(o)) throw new Error("value of `r` attribute is required and can not be negative");
                                        o.left = (o.left || 0) - o.radius, o.top = (o.top || 0) - o.radius, u(new f.Circle(o))
                                    }, f.Circle.fromObject = function(a, u) {
                                        f.Object._fromObject("Circle", a, u)
                                    })
                                }(Ee),
                                function(v) {
                                    "use strict";
                                    var f = v.fabric || (v.fabric = {});
                                    f.Triangle ? f.warn("fabric.Triangle is already defined") : (f.Triangle = f.util.createClass(f.Object, {
                                        type: "triangle",
                                        width: 100,
                                        height: 100,
                                        _render: function(m) {
                                            var d = this.width / 2,
                                                a = this.height / 2;
                                            m.beginPath(), m.moveTo(-d, a), m.lineTo(0, -a), m.lineTo(d, a), m.closePath(), this._renderPaintInOrder(m)
                                        },
                                        _toSVG: function() {
                                            var m = this.width / 2,
                                                d = this.height / 2;
                                            return ["<polygon ", "COMMON_PARTS", 'points="', [-m + " " + d, "0 " + -d, m + " " + d].join(","), '" />']
                                        }
                                    }), f.Triangle.fromObject = function(m, d) {
                                        return f.Object._fromObject("Triangle", m, d)
                                    })
                                }(Ee),
                                function(v) {
                                    "use strict";
                                    var f = v.fabric || (v.fabric = {}),
                                        m = 2 * Math.PI;
                                    f.Ellipse ? f.warn("fabric.Ellipse is already defined.") : (f.Ellipse = f.util.createClass(f.Object, {
                                        type: "ellipse",
                                        rx: 0,
                                        ry: 0,
                                        cacheProperties: f.Object.prototype.cacheProperties.concat("rx", "ry"),
                                        initialize: function(d) {
                                            this.callSuper("initialize", d), this.set("rx", d && d.rx || 0), this.set("ry", d && d.ry || 0)
                                        },
                                        _set: function(d, a) {
                                            switch (this.callSuper("_set", d, a), d) {
                                                case "rx":
                                                    this.rx = a, this.set("width", 2 * a);
                                                    break;
                                                case "ry":
                                                    this.ry = a, this.set("height", 2 * a)
                                            }
                                            return this
                                        },
                                        getRx: function() {
                                            return this.get("rx") * this.get("scaleX")
                                        },
                                        getRy: function() {
                                            return this.get("ry") * this.get("scaleY")
                                        },
                                        toObject: function(d) {
                                            return this.callSuper("toObject", ["rx", "ry"].concat(d))
                                        },
                                        _toSVG: function() {
                                            return ["<ellipse ", "COMMON_PARTS", 'cx="0" cy="0" ', 'rx="', this.rx, '" ry="', this.ry, '" />\n']
                                        },
                                        _render: function(d) {
                                            d.beginPath(), d.save(), d.transform(1, 0, 0, this.ry / this.rx, 0, 0), d.arc(0, 0, this.rx, 0, m, !1), d.restore(), this._renderPaintInOrder(d)
                                        }
                                    }), f.Ellipse.ATTRIBUTE_NAMES = f.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")), f.Ellipse.fromElement = function(d, a) {
                                        var u = f.parseAttributes(d, f.Ellipse.ATTRIBUTE_NAMES);
                                        u.left = (u.left || 0) - u.rx, u.top = (u.top || 0) - u.ry, a(new f.Ellipse(u))
                                    }, f.Ellipse.fromObject = function(d, a) {
                                        f.Object._fromObject("Ellipse", d, a)
                                    })
                                }(Ee),
                                function(v) {
                                    "use strict";
                                    var f = v.fabric || (v.fabric = {}),
                                        m = f.util.object.extend;
                                    f.Rect ? f.warn("fabric.Rect is already defined") : (f.Rect = f.util.createClass(f.Object, {
                                        stateProperties: f.Object.prototype.stateProperties.concat("rx", "ry"),
                                        type: "rect",
                                        rx: 0,
                                        ry: 0,
                                        cacheProperties: f.Object.prototype.cacheProperties.concat("rx", "ry"),
                                        initialize: function(d) {
                                            this.callSuper("initialize", d), this._initRxRy()
                                        },
                                        _initRxRy: function() {
                                            this.rx && !this.ry ? this.ry = this.rx : this.ry && !this.rx && (this.rx = this.ry)
                                        },
                                        _render: function(d) {
                                            var a = this.rx ? Math.min(this.rx, this.width / 2) : 0,
                                                u = this.ry ? Math.min(this.ry, this.height / 2) : 0,
                                                o = this.width,
                                                h = this.height,
                                                p = -this.width / 2,
                                                l = -this.height / 2,
                                                y = 0 !== a || 0 !== u,
                                                C = .4477152502;
                                            d.beginPath(), d.moveTo(p + a, l), d.lineTo(p + o - a, l), y && d.bezierCurveTo(p + o - C * a, l, p + o, l + C * u, p + o, l + u), d.lineTo(p + o, l + h - u), y && d.bezierCurveTo(p + o, l + h - C * u, p + o - C * a, l + h, p + o - a, l + h), d.lineTo(p + a, l + h), y && d.bezierCurveTo(p + C * a, l + h, p, l + h - C * u, p, l + h - u), d.lineTo(p, l + u), y && d.bezierCurveTo(p, l + C * u, p + C * a, l, p + a, l), d.closePath(), this._renderPaintInOrder(d)
                                        },
                                        toObject: function(d) {
                                            return this.callSuper("toObject", ["rx", "ry"].concat(d))
                                        },
                                        _toSVG: function() {
                                            return ["<rect ", "COMMON_PARTS", 'x="', -this.width / 2, '" y="', -this.height / 2, '" rx="', this.rx, '" ry="', this.ry, '" width="', this.width, '" height="', this.height, '" />\n']
                                        }
                                    }), f.Rect.ATTRIBUTE_NAMES = f.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")), f.Rect.fromElement = function(d, a, u) {
                                        if (!d) return a(null);
                                        u = u || {};
                                        var o = f.parseAttributes(d, f.Rect.ATTRIBUTE_NAMES);
                                        o.left = o.left || 0, o.top = o.top || 0, o.height = o.height || 0, o.width = o.width || 0;
                                        var h = new f.Rect(m(u ? f.util.object.clone(u) : {}, o));
                                        h.visible = h.visible && h.width > 0 && h.height > 0, a(h)
                                    }, f.Rect.fromObject = function(d, a) {
                                        return f.Object._fromObject("Rect", d, a)
                                    })
                                }(Ee),
                                function(v) {
                                    "use strict";
                                    var f = v.fabric || (v.fabric = {}),
                                        m = f.util.object.extend,
                                        d = f.util.array.min,
                                        a = f.util.array.max,
                                        u = f.util.toFixed,
                                        o = f.util.projectStrokeOnPoints;
                                    f.Polyline ? f.warn("fabric.Polyline is already defined") : (f.Polyline = f.util.createClass(f.Object, {
                                        type: "polyline",
                                        points: null,
                                        exactBoundingBox: !1,
                                        cacheProperties: f.Object.prototype.cacheProperties.concat("points"),
                                        initialize: function(h, p) {
                                            p = p || {}, this.points = h || [], this.callSuper("initialize", p), this._setPositionDimensions(p)
                                        },
                                        _projectStrokeOnPoints: function() {
                                            return o(this.points, this, !0)
                                        },
                                        _setPositionDimensions: function(h) {
                                            var l, p = this._calcDimensions(h),
                                                y = this.exactBoundingBox ? this.strokeWidth : 0;
                                            this.width = p.width - y, this.height = p.height - y, h.fromSVG || (l = this.translateToGivenOrigin({
                                                x: p.left - this.strokeWidth / 2 + y / 2,
                                                y: p.top - this.strokeWidth / 2 + y / 2
                                            }, "left", "top", this.originX, this.originY)), void 0 === h.left && (this.left = h.fromSVG ? p.left : l.x), void 0 === h.top && (this.top = h.fromSVG ? p.top : l.y), this.pathOffset = {
                                                x: p.left + this.width / 2 + y / 2,
                                                y: p.top + this.height / 2 + y / 2
                                            }
                                        },
                                        _calcDimensions: function() {
                                            var h = this.exactBoundingBox ? this._projectStrokeOnPoints() : this.points,
                                                p = d(h, "x") || 0,
                                                l = d(h, "y") || 0;
                                            return {
                                                left: p,
                                                top: l,
                                                width: (a(h, "x") || 0) - p,
                                                height: (a(h, "y") || 0) - l
                                            }
                                        },
                                        toObject: function(h) {
                                            return m(this.callSuper("toObject", h), {
                                                points: this.points.concat()
                                            })
                                        },
                                        _toSVG: function() {
                                            for (var h = [], p = this.pathOffset.x, l = this.pathOffset.y, y = f.Object.NUM_FRACTION_DIGITS, C = 0, D = this.points.length; C < D; C++) h.push(u(this.points[C].x - p, y), ",", u(this.points[C].y - l, y), " ");
                                            return ["<" + this.type + " ", "COMMON_PARTS", 'points="', h.join(""), '" />\n']
                                        },
                                        commonRender: function(h) {
                                            var p, l = this.points.length,
                                                y = this.pathOffset.x,
                                                C = this.pathOffset.y;
                                            if (!l || isNaN(this.points[l - 1].y)) return !1;
                                            h.beginPath(), h.moveTo(this.points[0].x - y, this.points[0].y - C);
                                            for (var D = 0; D < l; D++) h.lineTo((p = this.points[D]).x - y, p.y - C);
                                            return !0
                                        },
                                        _render: function(h) {
                                            !this.commonRender(h) || this._renderPaintInOrder(h)
                                        },
                                        complexity: function() {
                                            return this.get("points").length
                                        }
                                    }), f.Polyline.ATTRIBUTE_NAMES = f.SHARED_ATTRIBUTES.concat(), f.Polyline.fromElementGenerator = function(h) {
                                        return function(p, l, y) {
                                            if (!p) return l(null);
                                            y || (y = {});
                                            var C = f.parsePointsAttribute(p.getAttribute("points")),
                                                D = f.parseAttributes(p, f[h].ATTRIBUTE_NAMES);
                                            D.fromSVG = !0, l(new f[h](C, m(D, y)))
                                        }
                                    }, f.Polyline.fromElement = f.Polyline.fromElementGenerator("Polyline"), f.Polyline.fromObject = function(h, p) {
                                        return f.Object._fromObject("Polyline", h, p, "points")
                                    })
                                }(Ee),
                                function(v) {
                                    "use strict";
                                    var f = v.fabric || (v.fabric = {}),
                                        m = f.util.projectStrokeOnPoints;
                                    f.Polygon ? f.warn("fabric.Polygon is already defined") : (f.Polygon = f.util.createClass(f.Polyline, {
                                        type: "polygon",
                                        _projectStrokeOnPoints: function() {
                                            return m(this.points, this)
                                        },
                                        _render: function(d) {
                                            !this.commonRender(d) || (d.closePath(), this._renderPaintInOrder(d))
                                        }
                                    }), f.Polygon.ATTRIBUTE_NAMES = f.SHARED_ATTRIBUTES.concat(), f.Polygon.fromElement = f.Polyline.fromElementGenerator("Polygon"), f.Polygon.fromObject = function(d, a) {
                                        f.Object._fromObject("Polygon", d, a, "points")
                                    })
                                }(Ee),
                                function(v) {
                                    "use strict";
                                    var f = v.fabric || (v.fabric = {}),
                                        m = f.util.array.min,
                                        d = f.util.array.max,
                                        a = f.util.object.extend,
                                        u = f.util.object.clone,
                                        o = Object.prototype.toString,
                                        h = f.util.toFixed;
                                    f.Path ? f.warn("fabric.Path is already defined") : (f.Path = f.util.createClass(f.Object, {
                                        type: "path",
                                        path: null,
                                        cacheProperties: f.Object.prototype.cacheProperties.concat("path", "fillRule"),
                                        stateProperties: f.Object.prototype.stateProperties.concat("path"),
                                        initialize: function(p, l) {
                                            delete(l = u(l || {})).path, this.callSuper("initialize", l), this._setPath(p || [], l)
                                        },
                                        _setPath: function(p, l) {
                                            var y = "[object Array]" === o.call(p);
                                            this.path = f.util.makePathSimpler(y ? p : f.util.parsePath(p)), f.Polyline.prototype._setPositionDimensions.call(this, l || {})
                                        },
                                        _renderPathCommands: function(p) {
                                            var l, y = 0,
                                                C = 0,
                                                D = 0,
                                                E = 0,
                                                F = -this.pathOffset.x,
                                                B = -this.pathOffset.y;
                                            p.beginPath();
                                            for (var G = 0, ie = this.path.length; G < ie; ++G) switch (l = this.path[G], l[0]) {
                                                case "L":
                                                    p.lineTo((D = l[1]) + F, (E = l[2]) + B);
                                                    break;
                                                case "M":
                                                    y = D = l[1], C = E = l[2], p.moveTo(D + F, E + B);
                                                    break;
                                                case "C":
                                                    p.bezierCurveTo(l[1] + F, l[2] + B, l[3] + F, l[4] + B, (D = l[5]) + F, (E = l[6]) + B);
                                                    break;
                                                case "Q":
                                                    p.quadraticCurveTo(l[1] + F, l[2] + B, l[3] + F, l[4] + B), D = l[3], E = l[4];
                                                    break;
                                                case "z":
                                                case "Z":
                                                    D = y, E = C, p.closePath()
                                            }
                                        },
                                        _render: function(p) {
                                            this._renderPathCommands(p), this._renderPaintInOrder(p)
                                        },
                                        toString: function() {
                                            return "#<fabric.Path (" + this.complexity() + '): { "top": ' + this.top + ', "left": ' + this.left + " }>"
                                        },
                                        toObject: function(p) {
                                            return a(this.callSuper("toObject", p), {
                                                path: this.path.map(function(l) {
                                                    return l.slice()
                                                })
                                            })
                                        },
                                        toDatalessObject: function(p) {
                                            var l = this.toObject(["sourcePath"].concat(p));
                                            return l.sourcePath && delete l.path, l
                                        },
                                        _toSVG: function() {
                                            return ["<path ", "COMMON_PARTS", 'd="', f.util.joinPath(this.path), '" stroke-linecap="round" ', "/>\n"]
                                        },
                                        _getOffsetTransform: function() {
                                            var p = f.Object.NUM_FRACTION_DIGITS;
                                            return " translate(" + h(-this.pathOffset.x, p) + ", " + h(-this.pathOffset.y, p) + ")"
                                        },
                                        toClipPathSVG: function(p) {
                                            var l = this._getOffsetTransform();
                                            return "\t" + this._createBaseClipPathSVGMarkup(this._toSVG(), {
                                                reviver: p,
                                                additionalTransform: l
                                            })
                                        },
                                        toSVG: function(p) {
                                            var l = this._getOffsetTransform();
                                            return this._createBaseSVGMarkup(this._toSVG(), {
                                                reviver: p,
                                                additionalTransform: l
                                            })
                                        },
                                        complexity: function() {
                                            return this.path.length
                                        },
                                        _calcDimensions: function() {
                                            for (var y, I, p = [], l = [], C = 0, D = 0, E = 0, T = 0, F = 0, B = this.path.length; F < B; ++F) {
                                                switch ((y = this.path[F])[0]) {
                                                    case "L":
                                                        E = y[1], T = y[2], I = [];
                                                        break;
                                                    case "M":
                                                        C = E = y[1], D = T = y[2], I = [];
                                                        break;
                                                    case "C":
                                                        I = f.util.getBoundsOfCurve(E, T, y[1], y[2], y[3], y[4], y[5], y[6]), E = y[5], T = y[6];
                                                        break;
                                                    case "Q":
                                                        I = f.util.getBoundsOfCurve(E, T, y[1], y[2], y[1], y[2], y[3], y[4]), E = y[3], T = y[4];
                                                        break;
                                                    case "z":
                                                    case "Z":
                                                        E = C, T = D
                                                }
                                                I.forEach(function(ae) {
                                                    p.push(ae.x), l.push(ae.y)
                                                }), p.push(E), l.push(T)
                                            }
                                            var G = m(p) || 0,
                                                ie = m(l) || 0;
                                            return {
                                                left: G,
                                                top: ie,
                                                width: (d(p) || 0) - G,
                                                height: (d(l) || 0) - ie
                                            }
                                        }
                                    }), f.Path.fromObject = function(p, l) {
                                        "string" == typeof p.sourcePath ? f.loadSVGFromURL(p.sourcePath, function(C) {
                                            var D = C[0];
                                            D.setOptions(p), l && l(D)
                                        }) : f.Object._fromObject("Path", p, l, "path")
                                    }, f.Path.ATTRIBUTE_NAMES = f.SHARED_ATTRIBUTES.concat(["d"]), f.Path.fromElement = function(p, l, y) {
                                        var C = f.parseAttributes(p, f.Path.ATTRIBUTE_NAMES);
                                        C.fromSVG = !0, l(new f.Path(C.d, a(C, y)))
                                    })
                                }(Ee),
                                function(v) {
                                    "use strict";
                                    var f = v.fabric || (v.fabric = {}),
                                        m = f.util.array.min,
                                        d = f.util.array.max;
                                    f.Group || (f.Group = f.util.createClass(f.Object, f.Collection, {
                                        type: "group",
                                        strokeWidth: 0,
                                        subTargetCheck: !1,
                                        cacheProperties: [],
                                        useSetOnGroup: !1,
                                        initialize: function(a, u, o) {
                                            u = u || {}, this._objects = [], o && this.callSuper("initialize", u), this._objects = a || [];
                                            for (var h = this._objects.length; h--;) this._objects[h].group = this;
                                            if (o) this._updateObjectsACoords();
                                            else {
                                                var p = u && u.centerPoint;
                                                void 0 !== u.originX && (this.originX = u.originX), void 0 !== u.originY && (this.originY = u.originY), p || this._calcBounds(), this._updateObjectsCoords(p), delete u.centerPoint, this.callSuper("initialize", u)
                                            }
                                            this.setCoords()
                                        },
                                        _updateObjectsACoords: function() {
                                            for (var u = this._objects.length; u--;) this._objects[u].setCoords(!0)
                                        },
                                        _updateObjectsCoords: function(a) {
                                            a = a || this.getCenterPoint();
                                            for (var u = this._objects.length; u--;) this._updateObjectCoords(this._objects[u], a)
                                        },
                                        _updateObjectCoords: function(a, u) {
                                            a.set({
                                                left: a.left - u.x,
                                                top: a.top - u.y
                                            }), a.group = this, a.setCoords(!0)
                                        },
                                        toString: function() {
                                            return "#<fabric.Group: (" + this.complexity() + ")>"
                                        },
                                        addWithUpdate: function(a) {
                                            var u = !!this.group;
                                            return this._restoreObjectsState(), f.util.resetObjectTransform(this), a && (u && f.util.removeTransformFromObject(a, this.group.calcTransformMatrix()), this._objects.push(a), a.group = this, a._set("canvas", this.canvas)), this._calcBounds(), this._updateObjectsCoords(), this.dirty = !0, u ? this.group.addWithUpdate() : this.setCoords(), this
                                        },
                                        removeWithUpdate: function(a) {
                                            return this._restoreObjectsState(), f.util.resetObjectTransform(this), this.remove(a), this._calcBounds(), this._updateObjectsCoords(), this.setCoords(), this.dirty = !0, this
                                        },
                                        _onObjectAdded: function(a) {
                                            this.dirty = !0, a.group = this, a._set("canvas", this.canvas)
                                        },
                                        _onObjectRemoved: function(a) {
                                            this.dirty = !0, delete a.group
                                        },
                                        _set: function(a, u) {
                                            var o = this._objects.length;
                                            if (this.useSetOnGroup)
                                                for (; o--;) this._objects[o].setOnGroup(a, u);
                                            if ("canvas" === a)
                                                for (; o--;) this._objects[o]._set(a, u);
                                            f.Object.prototype._set.call(this, a, u)
                                        },
                                        toObject: function(a) {
                                            var u = this.includeDefaultValues,
                                                o = this._objects.filter(function(p) {
                                                    return !p.excludeFromExport
                                                }).map(function(p) {
                                                    var l = p.includeDefaultValues;
                                                    p.includeDefaultValues = u;
                                                    var y = p.toObject(a);
                                                    return p.includeDefaultValues = l, y
                                                }),
                                                h = f.Object.prototype.toObject.call(this, a);
                                            return h.objects = o, h
                                        },
                                        toDatalessObject: function(a) {
                                            var u, o = this.sourcePath;
                                            if (o) u = o;
                                            else {
                                                var h = this.includeDefaultValues;
                                                u = this._objects.map(function(l) {
                                                    var y = l.includeDefaultValues;
                                                    l.includeDefaultValues = h;
                                                    var C = l.toDatalessObject(a);
                                                    return l.includeDefaultValues = y, C
                                                })
                                            }
                                            var p = f.Object.prototype.toDatalessObject.call(this, a);
                                            return p.objects = u, p
                                        },
                                        render: function(a) {
                                            this._transformDone = !0, this.callSuper("render", a), this._transformDone = !1
                                        },
                                        shouldCache: function() {
                                            var a = f.Object.prototype.shouldCache.call(this);
                                            if (a)
                                                for (var u = 0, o = this._objects.length; u < o; u++)
                                                    if (this._objects[u].willDrawShadow()) return this.ownCaching = !1, !1;
                                            return a
                                        },
                                        willDrawShadow: function() {
                                            if (f.Object.prototype.willDrawShadow.call(this)) return !0;
                                            for (var a = 0, u = this._objects.length; a < u; a++)
                                                if (this._objects[a].willDrawShadow()) return !0;
                                            return !1
                                        },
                                        isOnACache: function() {
                                            return this.ownCaching || this.group && this.group.isOnACache()
                                        },
                                        drawObject: function(a) {
                                            for (var u = 0, o = this._objects.length; u < o; u++) this._objects[u].render(a);
                                            this._drawClipPath(a, this.clipPath)
                                        },
                                        isCacheDirty: function(a) {
                                            if (this.callSuper("isCacheDirty", a)) return !0;
                                            if (!this.statefullCache) return !1;
                                            for (var u = 0, o = this._objects.length; u < o; u++)
                                                if (this._objects[u].isCacheDirty(!0)) {
                                                    if (this._cacheCanvas) {
                                                        var h = this.cacheWidth / this.zoomX,
                                                            p = this.cacheHeight / this.zoomY;
                                                        this._cacheContext.clearRect(-h / 2, -p / 2, h, p)
                                                    }
                                                    return !0
                                                }
                                            return !1
                                        },
                                        _restoreObjectsState: function() {
                                            var a = this.calcOwnMatrix();
                                            return this._objects.forEach(function(u) {
                                                f.util.addTransformToObject(u, a), delete u.group, u.setCoords()
                                            }), this
                                        },
                                        destroy: function() {
                                            return this._objects.forEach(function(a) {
                                                a.set("dirty", !0)
                                            }), this._restoreObjectsState()
                                        },
                                        dispose: function() {
                                            this.callSuper("dispose"), this.forEachObject(function(a) {
                                                a.dispose && a.dispose()
                                            }), this._objects = []
                                        },
                                        toActiveSelection: function() {
                                            if (this.canvas) {
                                                var a = this._objects,
                                                    u = this.canvas;
                                                this._objects = [];
                                                var o = this.toObject();
                                                delete o.objects;
                                                var h = new f.ActiveSelection([]);
                                                return h.set(o), h.type = "activeSelection", u.remove(this), a.forEach(function(p) {
                                                    p.group = h, p.dirty = !0, u.add(p)
                                                }), h.canvas = u, h._objects = a, u._activeObject = h, h.setCoords(), h
                                            }
                                        },
                                        ungroupOnCanvas: function() {
                                            return this._restoreObjectsState()
                                        },
                                        setObjectsCoords: function() {
                                            return this.forEachObject(function(u) {
                                                u.setCoords(!0)
                                            }), this
                                        },
                                        _calcBounds: function(a) {
                                            for (var h, p, l, E, u = [], o = [], y = ["tr", "br", "bl", "tl"], C = 0, D = this._objects.length, T = y.length; C < D; ++C) {
                                                for (l = (h = this._objects[C]).calcACoords(), E = 0; E < T; E++) u.push(l[p = y[E]].x), o.push(l[p].y);
                                                h.aCoords = l
                                            }
                                            this._getBounds(u, o, a)
                                        },
                                        _getBounds: function(a, u, o) {
                                            var h = new f.Point(m(a), m(u)),
                                                p = new f.Point(d(a), d(u)),
                                                l = h.y || 0,
                                                y = h.x || 0,
                                                D = p.y - h.y || 0;
                                            this.width = p.x - h.x || 0, this.height = D, o || this.setPositionByOrigin({
                                                x: y,
                                                y: l
                                            }, "left", "top")
                                        },
                                        _toSVG: function(a) {
                                            for (var u = ["<g ", "COMMON_PARTS", " >\n"], o = 0, h = this._objects.length; o < h; o++) u.push("\t\t", this._objects[o].toSVG(a));
                                            return u.push("</g>\n"), u
                                        },
                                        getSvgStyles: function() {
                                            var u = this.visible ? "" : " visibility: hidden;";
                                            return [void 0 !== this.opacity && 1 !== this.opacity ? "opacity: " + this.opacity + ";" : "", this.getSvgFilter(), u].join("")
                                        },
                                        toClipPathSVG: function(a) {
                                            for (var u = [], o = 0, h = this._objects.length; o < h; o++) u.push("\t", this._objects[o].toClipPathSVG(a));
                                            return this._createBaseClipPathSVGMarkup(u, {
                                                reviver: a
                                            })
                                        }
                                    }), f.Group.fromObject = function(a, u) {
                                        var o = a.objects,
                                            h = f.util.object.clone(a, !0);
                                        delete h.objects, "string" != typeof o ? f.util.enlivenObjects(o, function(p) {
                                            var l = f.util.object.clone(a, !0);
                                            delete l.objects, f.util.enlivenObjectEnlivables(a, l, function() {
                                                u && u(new f.Group(p, l, !0))
                                            })
                                        }) : f.loadSVGFromURL(o, function(p) {
                                            var l = f.util.groupSVGElements(p, a, o);
                                            l.set(h), u && u(l)
                                        })
                                    })
                                }(Ee),
                                function(v) {
                                    "use strict";
                                    var f = v.fabric || (v.fabric = {});
                                    f.ActiveSelection || (f.ActiveSelection = f.util.createClass(f.Group, {
                                        type: "activeSelection",
                                        initialize: function(m, d) {
                                            d = d || {}, this._objects = m || [];
                                            for (var a = this._objects.length; a--;) this._objects[a].group = this;
                                            d.originX && (this.originX = d.originX), d.originY && (this.originY = d.originY), this._calcBounds(), this._updateObjectsCoords(), f.Object.prototype.initialize.call(this, d), this.setCoords()
                                        },
                                        toGroup: function() {
                                            var m = this._objects.concat();
                                            this._objects = [];
                                            var d = f.Object.prototype.toObject.call(this),
                                                a = new f.Group([]);
                                            if (delete d.type, a.set(d), m.forEach(function(o) {
                                                    o.canvas.remove(o), o.group = a
                                                }), a._objects = m, !this.canvas) return a;
                                            var u = this.canvas;
                                            return u.add(a), u._activeObject = a, a.setCoords(), a
                                        },
                                        onDeselect: function() {
                                            return this.destroy(), !1
                                        },
                                        toString: function() {
                                            return "#<fabric.ActiveSelection: (" + this.complexity() + ")>"
                                        },
                                        shouldCache: function() {
                                            return !1
                                        },
                                        isOnACache: function() {
                                            return !1
                                        },
                                        _renderControls: function(m, d, a) {
                                            m.save(), m.globalAlpha = this.isMoving ? this.borderOpacityWhenMoving : 1, this.callSuper("_renderControls", m, d), void 0 === (a = a || {}).hasControls && (a.hasControls = !1), a.forActiveSelection = !0;
                                            for (var u = 0, o = this._objects.length; u < o; u++) this._objects[u]._renderControls(m, a);
                                            m.restore()
                                        }
                                    }), f.ActiveSelection.fromObject = function(m, d) {
                                        f.util.enlivenObjects(m.objects, function(a) {
                                            delete m.objects, d && d(new f.ActiveSelection(a, m, !0))
                                        })
                                    })
                                }(Ee),
                                function(v) {
                                    "use strict";
                                    var f = b.util.object.extend;
                                    v.fabric || (v.fabric = {}), v.fabric.Image ? b.warn("fabric.Image is already defined.") : (b.Image = b.util.createClass(b.Object, {
                                        type: "image",
                                        strokeWidth: 0,
                                        srcFromAttribute: !1,
                                        _lastScaleX: 1,
                                        _lastScaleY: 1,
                                        _filterScalingX: 1,
                                        _filterScalingY: 1,
                                        minimumScaleTrigger: .5,
                                        stateProperties: b.Object.prototype.stateProperties.concat("cropX", "cropY"),
                                        cacheProperties: b.Object.prototype.cacheProperties.concat("cropX", "cropY"),
                                        cacheKey: "",
                                        cropX: 0,
                                        cropY: 0,
                                        imageSmoothing: !0,
                                        initialize: function(m, d) {
                                            d || (d = {}), this.filters = [], this.cacheKey = "texture" + b.Object.__uid++, this.callSuper("initialize", d), this._initElement(m, d)
                                        },
                                        getElement: function() {
                                            return this._element || {}
                                        },
                                        setElement: function(m, d) {
                                            return this.removeTexture(this.cacheKey), this.removeTexture(this.cacheKey + "_filtered"), this._element = m, this._originalElement = m, this._initConfig(d), 0 !== this.filters.length && this.applyFilters(), this.resizeFilter && this.applyResizeFilters(), this
                                        },
                                        removeTexture: function(m) {
                                            var d = b.filterBackend;
                                            d && d.evictCachesForKey && d.evictCachesForKey(m)
                                        },
                                        dispose: function() {
                                            this.callSuper("dispose"), this.removeTexture(this.cacheKey), this.removeTexture(this.cacheKey + "_filtered"), this._cacheContext = void 0, ["_originalElement", "_element", "_filteredEl", "_cacheCanvas"].forEach(function(m) {
                                                b.util.cleanUpJsdomNode(this[m]), this[m] = void 0
                                            }.bind(this))
                                        },
                                        getCrossOrigin: function() {
                                            return this._originalElement && (this._originalElement.crossOrigin || null)
                                        },
                                        getOriginalSize: function() {
                                            var m = this.getElement();
                                            return {
                                                width: m.naturalWidth || m.width,
                                                height: m.naturalHeight || m.height
                                            }
                                        },
                                        _stroke: function(m) {
                                            if (this.stroke && 0 !== this.strokeWidth) {
                                                var d = this.width / 2,
                                                    a = this.height / 2;
                                                m.beginPath(), m.moveTo(-d, -a), m.lineTo(d, -a), m.lineTo(d, a), m.lineTo(-d, a), m.lineTo(-d, -a), m.closePath()
                                            }
                                        },
                                        toObject: function(m) {
                                            var d = [];
                                            this.filters.forEach(function(u) {
                                                u && d.push(u.toObject())
                                            });
                                            var a = f(this.callSuper("toObject", ["cropX", "cropY"].concat(m)), {
                                                src: this.getSrc(),
                                                crossOrigin: this.getCrossOrigin(),
                                                filters: d
                                            });
                                            return this.resizeFilter && (a.resizeFilter = this.resizeFilter.toObject()), a
                                        },
                                        hasCrop: function() {
                                            return this.cropX || this.cropY || this.width < this._element.width || this.height < this._element.height
                                        },
                                        _toSVG: function() {
                                            var a, m = [],
                                                d = [],
                                                u = this._element,
                                                o = -this.width / 2,
                                                h = -this.height / 2,
                                                p = "",
                                                l = "";
                                            if (!u) return [];
                                            if (this.hasCrop()) {
                                                var y = b.Object.__uid++;
                                                m.push('<clipPath id="imageCrop_' + y + '">\n', '\t<rect x="' + o + '" y="' + h + '" width="' + this.width + '" height="' + this.height + '" />\n', "</clipPath>\n"), p = ' clip-path="url(#imageCrop_' + y + ')" '
                                            }
                                            if (this.imageSmoothing || (l = '" image-rendering="optimizeSpeed'), d.push("\t<image ", "COMMON_PARTS", 'xlink:href="', this.getSvgSrc(!0), '" x="', o - this.cropX, '" y="', h - this.cropY, '" width="', u.width || u.naturalWidth, '" height="', u.height || u.height, l, '"', p, "></image>\n"), this.stroke || this.strokeDashArray) {
                                                var C = this.fill;
                                                this.fill = null, a = ["\t<rect ", 'x="', o, '" y="', h, '" width="', this.width, '" height="', this.height, '" style="', this.getSvgStyles(), '"/>\n'], this.fill = C
                                            }
                                            return "fill" !== this.paintFirst ? m.concat(a, d) : m.concat(d, a)
                                        },
                                        getSrc: function(m) {
                                            var d = m ? this._element : this._originalElement;
                                            return d ? d.toDataURL ? d.toDataURL() : this.srcFromAttribute ? d.getAttribute("src") : d.src : this.src || ""
                                        },
                                        setSrc: function(m, d, a) {
                                            return b.util.loadImage(m, function(u, o) {
                                                this.setElement(u, a), this._setWidthHeight(), d && d(this, o)
                                            }, this, a && a.crossOrigin), this
                                        },
                                        toString: function() {
                                            return '#<fabric.Image: { src: "' + this.getSrc() + '" }>'
                                        },
                                        applyResizeFilters: function() {
                                            var m = this.resizeFilter,
                                                d = this.minimumScaleTrigger,
                                                a = this.getTotalObjectScaling(),
                                                u = a.scaleX,
                                                o = a.scaleY,
                                                h = this._filteredEl || this._originalElement;
                                            if (this.group && this.set("dirty", !0), !m || u > d && o > d) return this._element = h, this._filterScalingX = 1, this._filterScalingY = 1, this._lastScaleX = u, void(this._lastScaleY = o);
                                            b.filterBackend || (b.filterBackend = b.initFilterBackend());
                                            var p = b.util.createCanvasElement(),
                                                l = this._filteredEl ? this.cacheKey + "_filtered" : this.cacheKey,
                                                y = h.width,
                                                C = h.height;
                                            p.width = y, p.height = C, this._element = p, this._lastScaleX = m.scaleX = u, this._lastScaleY = m.scaleY = o, b.filterBackend.applyFilters([m], h, y, C, this._element, l), this._filterScalingX = p.width / this._originalElement.width, this._filterScalingY = p.height / this._originalElement.height
                                        },
                                        applyFilters: function(m) {
                                            if (m = (m = m || this.filters || []).filter(function(h) {
                                                    return h && !h.isNeutralState()
                                                }), this.set("dirty", !0), this.removeTexture(this.cacheKey + "_filtered"), 0 === m.length) return this._element = this._originalElement, this._filteredEl = null, this._filterScalingX = 1, this._filterScalingY = 1, this;
                                            var d = this._originalElement,
                                                a = d.naturalWidth || d.width,
                                                u = d.naturalHeight || d.height;
                                            if (this._element === this._originalElement) {
                                                var o = b.util.createCanvasElement();
                                                o.width = a, o.height = u, this._element = o, this._filteredEl = o
                                            } else this._element = this._filteredEl, this._filteredEl.getContext("2d").clearRect(0, 0, a, u), this._lastScaleX = 1, this._lastScaleY = 1;
                                            return b.filterBackend || (b.filterBackend = b.initFilterBackend()), b.filterBackend.applyFilters(m, this._originalElement, a, u, this._element, this.cacheKey), (this._originalElement.width !== this._element.width || this._originalElement.height !== this._element.height) && (this._filterScalingX = this._element.width / this._originalElement.width, this._filterScalingY = this._element.height / this._originalElement.height), this
                                        },
                                        _render: function(m) {
                                            b.util.setImageSmoothing(m, this.imageSmoothing), !0 !== this.isMoving && this.resizeFilter && this._needsResize() && this.applyResizeFilters(), this._stroke(m), this._renderPaintInOrder(m)
                                        },
                                        drawCacheOnCanvas: function(m) {
                                            b.util.setImageSmoothing(m, this.imageSmoothing), b.Object.prototype.drawCacheOnCanvas.call(this, m)
                                        },
                                        shouldCache: function() {
                                            return this.needsItsOwnCache()
                                        },
                                        _renderFill: function(m) {
                                            var d = this._element;
                                            if (d) {
                                                var a = this._filterScalingX,
                                                    u = this._filterScalingY,
                                                    o = this.width,
                                                    h = this.height,
                                                    p = Math.min,
                                                    l = Math.max,
                                                    y = l(this.cropX, 0),
                                                    C = l(this.cropY, 0),
                                                    D = d.naturalWidth || d.width,
                                                    E = d.naturalHeight || d.height,
                                                    T = y * a,
                                                    I = C * u,
                                                    F = p(o * a, D - T),
                                                    B = p(h * u, E - I),
                                                    G = -o / 2,
                                                    ie = -h / 2,
                                                    le = p(o, D / a - y),
                                                    ue = p(h, E / u - C);
                                                d && m.drawImage(d, T, I, F, B, G, ie, le, ue)
                                            }
                                        },
                                        _needsResize: function() {
                                            var m = this.getTotalObjectScaling();
                                            return m.scaleX !== this._lastScaleX || m.scaleY !== this._lastScaleY
                                        },
                                        _resetWidthHeight: function() {
                                            this.set(this.getOriginalSize())
                                        },
                                        _initElement: function(m, d) {
                                            this.setElement(b.util.getById(m), d), b.util.addClass(this.getElement(), b.Image.CSS_CANVAS)
                                        },
                                        _initConfig: function(m) {
                                            m || (m = {}), this.setOptions(m), this._setWidthHeight(m)
                                        },
                                        _initFilters: function(m, d) {
                                            m && m.length ? b.util.enlivenObjects(m, function(a) {
                                                d && d(a)
                                            }, "fabric.Image.filters") : d && d()
                                        },
                                        _setWidthHeight: function(m) {
                                            m || (m = {});
                                            var d = this.getElement();
                                            this.width = m.width || d.naturalWidth || d.width || 0, this.height = m.height || d.naturalHeight || d.height || 0
                                        },
                                        parsePreserveAspectRatioAttribute: function() {
                                            var C, m = b.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio || ""),
                                                d = this._element.width,
                                                a = this._element.height,
                                                u = 1,
                                                o = 1,
                                                h = 0,
                                                p = 0,
                                                l = 0,
                                                y = 0,
                                                D = this.width,
                                                E = this.height,
                                                T = {
                                                    width: D,
                                                    height: E
                                                };
                                            return !m || "none" === m.alignX && "none" === m.alignY ? (u = D / d, o = E / a) : ("meet" === m.meetOrSlice && (C = (D - d * (u = o = b.util.findScaleToFit(this._element, T))) / 2, "Min" === m.alignX && (h = -C), "Max" === m.alignX && (h = C), C = (E - a * o) / 2, "Min" === m.alignY && (p = -C), "Max" === m.alignY && (p = C)), "slice" === m.meetOrSlice && (C = d - D / (u = o = b.util.findScaleToCover(this._element, T)), "Mid" === m.alignX && (l = C / 2), "Max" === m.alignX && (l = C), C = a - E / o, "Mid" === m.alignY && (y = C / 2), "Max" === m.alignY && (y = C), d = D / u, a = E / o)), {
                                                width: d,
                                                height: a,
                                                scaleX: u,
                                                scaleY: o,
                                                offsetLeft: h,
                                                offsetTop: p,
                                                cropX: l,
                                                cropY: y
                                            }
                                        }
                                    }), b.Image.CSS_CANVAS = "canvas-img", b.Image.prototype.getSvgSrc = b.Image.prototype.getSrc, b.Image.fromObject = function(m, d) {
                                        var a = b.util.object.clone(m);
                                        b.util.loadImage(a.src, function(u, o) {
                                            o ? d && d(null, !0) : b.Image.prototype._initFilters.call(a, a.filters, function(h) {
                                                a.filters = h || [], b.Image.prototype._initFilters.call(a, [a.resizeFilter], function(p) {
                                                    a.resizeFilter = p[0], b.util.enlivenObjectEnlivables(a, a, function() {
                                                        var l = new b.Image(u, a);
                                                        d(l, !1)
                                                    })
                                                })
                                            })
                                        }, null, a.crossOrigin)
                                    }, b.Image.fromURL = function(m, d, a) {
                                        b.util.loadImage(m, function(u, o) {
                                            d && d(new b.Image(u, a), o)
                                        }, null, a && a.crossOrigin)
                                    }, b.Image.ATTRIBUTE_NAMES = b.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin image-rendering".split(" ")), b.Image.fromElement = function(m, d, a) {
                                        var u = b.parseAttributes(m, b.Image.ATTRIBUTE_NAMES);
                                        b.Image.fromURL(u["xlink:href"], d, f(a ? b.util.object.clone(a) : {}, u))
                                    })
                                }(Ee), b.util.object.extend(b.Object.prototype, {
                                    _getAngleValueForStraighten: function() {
                                        var v = this.angle % 360;
                                        return v > 0 ? 90 * Math.round((v - 1) / 90) : 90 * Math.round(v / 90)
                                    },
                                    straighten: function() {
                                        return this.rotate(this._getAngleValueForStraighten())
                                    },
                                    fxStraighten: function(v) {
                                        var f = function() {},
                                            m = (v = v || {}).onComplete || f,
                                            d = v.onChange || f,
                                            a = this;
                                        return b.util.animate({
                                            target: this,
                                            startValue: this.get("angle"),
                                            endValue: this._getAngleValueForStraighten(),
                                            duration: this.FX_DURATION,
                                            onChange: function(u) {
                                                a.rotate(u), d()
                                            },
                                            onComplete: function() {
                                                a.setCoords(), m()
                                            }
                                        })
                                    }
                                }), b.util.object.extend(b.StaticCanvas.prototype, {
                                    straightenObject: function(v) {
                                        return v.straighten(), this.requestRenderAll(), this
                                    },
                                    fxStraightenObject: function(v) {
                                        return v.fxStraighten({
                                            onChange: this.requestRenderAllBound
                                        })
                                    }
                                }),
                                function() {
                                    "use strict";

                                    function v(m, d) {
                                        var a = "precision " + d + " float;\nvoid main(){}",
                                            u = m.createShader(m.FRAGMENT_SHADER);
                                        return m.shaderSource(u, a), m.compileShader(u), !!m.getShaderParameter(u, m.COMPILE_STATUS)
                                    }

                                    function f(m) {
                                        m && m.tileSize && (this.tileSize = m.tileSize), this.setupGLContext(this.tileSize, this.tileSize), this.captureGPUInfo()
                                    }
                                    b.isWebglSupported = function(m) {
                                        if (b.isLikelyNode) return !1;
                                        m = m || b.WebglFilterBackend.prototype.tileSize;
                                        var d = document.createElement("canvas"),
                                            a = d.getContext("webgl") || d.getContext("experimental-webgl"),
                                            u = !1;
                                        if (a) {
                                            b.maxTextureSize = a.getParameter(a.MAX_TEXTURE_SIZE), u = b.maxTextureSize >= m;
                                            for (var o = ["highp", "mediump", "lowp"], h = 0; h < 3; h++)
                                                if (v(a, o[h])) {
                                                    b.webGlPrecision = o[h];
                                                    break
                                                }
                                        }
                                        return this.isSupported = u, u
                                    }, b.WebglFilterBackend = f, f.prototype = {
                                        tileSize: 2048,
                                        resources: {},
                                        setupGLContext: function(m, d) {
                                            this.dispose(), this.createWebGLCanvas(m, d), this.aPosition = new Float32Array([0, 0, 0, 1, 1, 0, 1, 1]), this.chooseFastestCopyGLTo2DMethod(m, d)
                                        },
                                        chooseFastestCopyGLTo2DMethod: function(m, d) {
                                            var u, a = void 0 !== window.performance;
                                            try {
                                                new ImageData(1, 1), u = !0
                                            } catch (T) {
                                                u = !1
                                            }
                                            var o = "undefined" != typeof ArrayBuffer,
                                                h = "undefined" != typeof Uint8ClampedArray;
                                            if (a && u && o && h) {
                                                var p = b.util.createCanvasElement(),
                                                    l = new ArrayBuffer(m * d * 4);
                                                if (b.forceGLPutImageData) return this.imageBuffer = l, void(this.copyGLTo2D = qr);
                                                var C, D, y = {
                                                    imageBuffer: l,
                                                    destinationWidth: m,
                                                    destinationHeight: d,
                                                    targetCanvas: p
                                                };
                                                p.width = m, p.height = d, C = window.performance.now(), li.call(y, this.gl, y), D = window.performance.now() - C, C = window.performance.now(), qr.call(y, this.gl, y), D > window.performance.now() - C ? (this.imageBuffer = l, this.copyGLTo2D = qr) : this.copyGLTo2D = li
                                            }
                                        },
                                        createWebGLCanvas: function(m, d) {
                                            var a = b.util.createCanvasElement();
                                            a.width = m, a.height = d;
                                            var u = {
                                                    alpha: !0,
                                                    premultipliedAlpha: !1,
                                                    depth: !1,
                                                    stencil: !1,
                                                    antialias: !1
                                                },
                                                o = a.getContext("webgl", u);
                                            o || (o = a.getContext("experimental-webgl", u)), o && (o.clearColor(0, 0, 0, 0), this.canvas = a, this.gl = o)
                                        },
                                        applyFilters: function(m, d, a, u, o, h) {
                                            var l, p = this.gl;
                                            h && (l = this.getCachedTexture(h, d));
                                            var y = {
                                                    originalWidth: d.width || d.originalWidth,
                                                    originalHeight: d.height || d.originalHeight,
                                                    sourceWidth: a,
                                                    sourceHeight: u,
                                                    destinationWidth: a,
                                                    destinationHeight: u,
                                                    context: p,
                                                    sourceTexture: this.createTexture(p, a, u, !l && d),
                                                    targetTexture: this.createTexture(p, a, u),
                                                    originalTexture: l || this.createTexture(p, a, u, !l && d),
                                                    passes: m.length,
                                                    webgl: !0,
                                                    aPosition: this.aPosition,
                                                    programCache: this.programCache,
                                                    pass: 0,
                                                    filterBackend: this,
                                                    targetCanvas: o
                                                },
                                                C = p.createFramebuffer();
                                            return p.bindFramebuffer(p.FRAMEBUFFER, C), m.forEach(function(D) {
                                                    D && D.applyTo(y)
                                                }),
                                                function(v) {
                                                    var f = v.targetCanvas,
                                                        a = v.destinationWidth,
                                                        u = v.destinationHeight;
                                                    (f.width !== a || f.height !== u) && (f.width = a, f.height = u)
                                                }(y), this.copyGLTo2D(p, y), p.bindTexture(p.TEXTURE_2D, null), p.deleteTexture(y.sourceTexture), p.deleteTexture(y.targetTexture), p.deleteFramebuffer(C), o.getContext("2d").setTransform(1, 0, 0, 1, 0, 0), y
                                        },
                                        dispose: function() {
                                            this.canvas && (this.canvas = null, this.gl = null), this.clearWebGLCaches()
                                        },
                                        clearWebGLCaches: function() {
                                            this.programCache = {}, this.textureCache = {}
                                        },
                                        createTexture: function(m, d, a, u) {
                                            var o = m.createTexture();
                                            return m.bindTexture(m.TEXTURE_2D, o), m.texParameteri(m.TEXTURE_2D, m.TEXTURE_MAG_FILTER, m.NEAREST), m.texParameteri(m.TEXTURE_2D, m.TEXTURE_MIN_FILTER, m.NEAREST), m.texParameteri(m.TEXTURE_2D, m.TEXTURE_WRAP_S, m.CLAMP_TO_EDGE), m.texParameteri(m.TEXTURE_2D, m.TEXTURE_WRAP_T, m.CLAMP_TO_EDGE), u ? m.texImage2D(m.TEXTURE_2D, 0, m.RGBA, m.RGBA, m.UNSIGNED_BYTE, u) : m.texImage2D(m.TEXTURE_2D, 0, m.RGBA, d, a, 0, m.RGBA, m.UNSIGNED_BYTE, null), o
                                        },
                                        getCachedTexture: function(m, d) {
                                            if (this.textureCache[m]) return this.textureCache[m];
                                            var a = this.createTexture(this.gl, d.width, d.height, d);
                                            return this.textureCache[m] = a, a
                                        },
                                        evictCachesForKey: function(m) {
                                            this.textureCache[m] && (this.gl.deleteTexture(this.textureCache[m]), delete this.textureCache[m])
                                        },
                                        copyGLTo2D: li,
                                        captureGPUInfo: function() {
                                            if (this.gpuInfo) return this.gpuInfo;
                                            var m = this.gl,
                                                d = {
                                                    renderer: "",
                                                    vendor: ""
                                                };
                                            if (!m) return d;
                                            var a = m.getExtension("WEBGL_debug_renderer_info");
                                            if (a) {
                                                var u = m.getParameter(a.UNMASKED_RENDERER_WEBGL),
                                                    o = m.getParameter(a.UNMASKED_VENDOR_WEBGL);
                                                u && (d.renderer = u.toLowerCase()), o && (d.vendor = o.toLowerCase())
                                            }
                                            return this.gpuInfo = d, d
                                        }
                                    }
                                }(),
                                function() {
                                    "use strict";
                                    var v = function() {};

                                    function f() {}
                                    b.Canvas2dFilterBackend = f, f.prototype = {
                                        evictCachesForKey: v,
                                        dispose: v,
                                        clearWebGLCaches: v,
                                        resources: {},
                                        applyFilters: function(m, d, a, u, o) {
                                            var h = o.getContext("2d");
                                            h.drawImage(d, 0, 0, a, u);
                                            var y = {
                                                sourceWidth: a,
                                                sourceHeight: u,
                                                imageData: h.getImageData(0, 0, a, u),
                                                originalEl: d,
                                                originalImageData: h.getImageData(0, 0, a, u),
                                                canvasEl: o,
                                                ctx: h,
                                                filterBackend: this
                                            };
                                            return m.forEach(function(C) {
                                                C.applyTo(y)
                                            }), (y.imageData.width !== a || y.imageData.height !== u) && (o.width = y.imageData.width, o.height = y.imageData.height), h.putImageData(y.imageData, 0, 0), y
                                        }
                                    }
                                }(), b.Image = b.Image || {}, b.Image.filters = b.Image.filters || {}, b.Image.filters.BaseFilter = b.util.createClass({
                                    type: "BaseFilter",
                                    vertexSource: "attribute vec2 aPosition;\nvarying vec2 vTexCoord;\nvoid main() {\nvTexCoord = aPosition;\ngl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\n}",
                                    fragmentSource: "precision highp float;\nvarying vec2 vTexCoord;\nuniform sampler2D uTexture;\nvoid main() {\ngl_FragColor = texture2D(uTexture, vTexCoord);\n}",
                                    initialize: function(v) {
                                        v && this.setOptions(v)
                                    },
                                    setOptions: function(v) {
                                        for (var f in v) this[f] = v[f]
                                    },
                                    createProgram: function(v, f, m) {
                                        f = f || this.fragmentSource, m = m || this.vertexSource, "highp" !== b.webGlPrecision && (f = f.replace(/precision highp float/g, "precision " + b.webGlPrecision + " float"));
                                        var d = v.createShader(v.VERTEX_SHADER);
                                        if (v.shaderSource(d, m), v.compileShader(d), !v.getShaderParameter(d, v.COMPILE_STATUS)) throw new Error("Vertex shader compile error for " + this.type + ": " + v.getShaderInfoLog(d));
                                        var a = v.createShader(v.FRAGMENT_SHADER);
                                        if (v.shaderSource(a, f), v.compileShader(a), !v.getShaderParameter(a, v.COMPILE_STATUS)) throw new Error("Fragment shader compile error for " + this.type + ": " + v.getShaderInfoLog(a));
                                        var u = v.createProgram();
                                        if (v.attachShader(u, d), v.attachShader(u, a), v.linkProgram(u), !v.getProgramParameter(u, v.LINK_STATUS)) throw new Error('Shader link error for "${this.type}" ' + v.getProgramInfoLog(u));
                                        var o = this.getAttributeLocations(v, u),
                                            h = this.getUniformLocations(v, u) || {};
                                        return h.uStepW = v.getUniformLocation(u, "uStepW"), h.uStepH = v.getUniformLocation(u, "uStepH"), {
                                            program: u,
                                            attributeLocations: o,
                                            uniformLocations: h
                                        }
                                    },
                                    getAttributeLocations: function(v, f) {
                                        return {
                                            aPosition: v.getAttribLocation(f, "aPosition")
                                        }
                                    },
                                    getUniformLocations: function() {
                                        return {}
                                    },
                                    sendAttributeData: function(v, f, m) {
                                        var d = f.aPosition,
                                            a = v.createBuffer();
                                        v.bindBuffer(v.ARRAY_BUFFER, a), v.enableVertexAttribArray(d), v.vertexAttribPointer(d, 2, v.FLOAT, !1, 0, 0), v.bufferData(v.ARRAY_BUFFER, m, v.STATIC_DRAW)
                                    },
                                    _setupFrameBuffer: function(v) {
                                        var m, d, f = v.context;
                                        v.passes > 1 ? (d = v.destinationHeight, (v.sourceWidth !== (m = v.destinationWidth) || v.sourceHeight !== d) && (f.deleteTexture(v.targetTexture), v.targetTexture = v.filterBackend.createTexture(f, m, d)), f.framebufferTexture2D(f.FRAMEBUFFER, f.COLOR_ATTACHMENT0, f.TEXTURE_2D, v.targetTexture, 0)) : (f.bindFramebuffer(f.FRAMEBUFFER, null), f.finish())
                                    },
                                    _swapTextures: function(v) {
                                        v.passes--, v.pass++;
                                        var f = v.targetTexture;
                                        v.targetTexture = v.sourceTexture, v.sourceTexture = f
                                    },
                                    isNeutralState: function() {
                                        var v = this.mainParameter,
                                            f = b.Image.filters[this.type].prototype;
                                        if (v) {
                                            if (Array.isArray(f[v])) {
                                                for (var m = f[v].length; m--;)
                                                    if (this[v][m] !== f[v][m]) return !1;
                                                return !0
                                            }
                                            return f[v] === this[v]
                                        }
                                        return !1
                                    },
                                    applyTo: function(v) {
                                        v.webgl ? (this._setupFrameBuffer(v), this.applyToWebGL(v), this._swapTextures(v)) : this.applyTo2d(v)
                                    },
                                    retrieveShader: function(v) {
                                        return v.programCache.hasOwnProperty(this.type) || (v.programCache[this.type] = this.createProgram(v.context)), v.programCache[this.type]
                                    },
                                    applyToWebGL: function(v) {
                                        var f = v.context,
                                            m = this.retrieveShader(v);
                                        f.bindTexture(f.TEXTURE_2D, 0 === v.pass && v.originalTexture ? v.originalTexture : v.sourceTexture), f.useProgram(m.program), this.sendAttributeData(f, m.attributeLocations, v.aPosition), f.uniform1f(m.uniformLocations.uStepW, 1 / v.sourceWidth), f.uniform1f(m.uniformLocations.uStepH, 1 / v.sourceHeight), this.sendUniformData(f, m.uniformLocations), f.viewport(0, 0, v.destinationWidth, v.destinationHeight), f.drawArrays(f.TRIANGLE_STRIP, 0, 4)
                                    },
                                    bindAdditionalTexture: function(v, f, m) {
                                        v.activeTexture(m), v.bindTexture(v.TEXTURE_2D, f), v.activeTexture(v.TEXTURE0)
                                    },
                                    unbindAdditionalTexture: function(v, f) {
                                        v.activeTexture(f), v.bindTexture(v.TEXTURE_2D, null), v.activeTexture(v.TEXTURE0)
                                    },
                                    getMainParameter: function() {
                                        return this[this.mainParameter]
                                    },
                                    setMainParameter: function(v) {
                                        this[this.mainParameter] = v
                                    },
                                    sendUniformData: function() {},
                                    createHelpLayer: function(v) {
                                        if (!v.helpLayer) {
                                            var f = document.createElement("canvas");
                                            f.width = v.sourceWidth, f.height = v.sourceHeight, v.helpLayer = f
                                        }
                                    },
                                    toObject: function() {
                                        var v = {
                                                type: this.type
                                            },
                                            f = this.mainParameter;
                                        return f && (v[f] = this[f]), v
                                    },
                                    toJSON: function() {
                                        return this.toObject()
                                    }
                                }), b.Image.filters.BaseFilter.fromObject = function(v, f) {
                                    var m = new b.Image.filters[v.type](v);
                                    return f && f(m), m
                                },
                                function(v) {
                                    "use strict";
                                    var f = v.fabric || (v.fabric = {}),
                                        m = f.Image.filters;
                                    m.ColorMatrix = (0, f.util.createClass)(m.BaseFilter, {
                                        type: "ColorMatrix",
                                        fragmentSource: "precision highp float;\nuniform sampler2D uTexture;\nvarying vec2 vTexCoord;\nuniform mat4 uColorMatrix;\nuniform vec4 uConstants;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor *= uColorMatrix;\ncolor += uConstants;\ngl_FragColor = color;\n}",
                                        matrix: [1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0],
                                        mainParameter: "matrix",
                                        colorsOnly: !0,
                                        initialize: function(a) {
                                            this.callSuper("initialize", a), this.matrix = this.matrix.slice(0)
                                        },
                                        applyTo2d: function(a) {
                                            var l, y, C, D, E, o = a.imageData.data,
                                                h = o.length,
                                                p = this.matrix,
                                                T = this.colorsOnly;
                                            for (E = 0; E < h; E += 4) l = o[E], y = o[E + 1], C = o[E + 2], T ? (o[E] = l * p[0] + y * p[1] + C * p[2] + 255 * p[4], o[E + 1] = l * p[5] + y * p[6] + C * p[7] + 255 * p[9], o[E + 2] = l * p[10] + y * p[11] + C * p[12] + 255 * p[14]) : (o[E] = l * p[0] + y * p[1] + C * p[2] + (D = o[E + 3]) * p[3] + 255 * p[4], o[E + 1] = l * p[5] + y * p[6] + C * p[7] + D * p[8] + 255 * p[9], o[E + 2] = l * p[10] + y * p[11] + C * p[12] + D * p[13] + 255 * p[14], o[E + 3] = l * p[15] + y * p[16] + C * p[17] + D * p[18] + 255 * p[19])
                                        },
                                        getUniformLocations: function(a, u) {
                                            return {
                                                uColorMatrix: a.getUniformLocation(u, "uColorMatrix"),
                                                uConstants: a.getUniformLocation(u, "uConstants")
                                            }
                                        },
                                        sendUniformData: function(a, u) {
                                            var o = this.matrix,
                                                p = [o[4], o[9], o[14], o[19]];
                                            a.uniformMatrix4fv(u.uColorMatrix, !1, [o[0], o[1], o[2], o[3], o[5], o[6], o[7], o[8], o[10], o[11], o[12], o[13], o[15], o[16], o[17], o[18]]), a.uniform4fv(u.uConstants, p)
                                        }
                                    }), f.Image.filters.ColorMatrix.fromObject = f.Image.filters.BaseFilter.fromObject
                                }(Ee),
                                function(v) {
                                    "use strict";
                                    var f = v.fabric || (v.fabric = {}),
                                        m = f.Image.filters;
                                    m.Brightness = (0, f.util.createClass)(m.BaseFilter, {
                                        type: "Brightness",
                                        fragmentSource: "precision highp float;\nuniform sampler2D uTexture;\nuniform float uBrightness;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor.rgb += uBrightness;\ngl_FragColor = color;\n}",
                                        brightness: 0,
                                        mainParameter: "brightness",
                                        applyTo2d: function(a) {
                                            if (0 !== this.brightness) {
                                                var h, o = a.imageData.data,
                                                    p = o.length,
                                                    l = Math.round(255 * this.brightness);
                                                for (h = 0; h < p; h += 4) o[h] = o[h] + l, o[h + 1] = o[h + 1] + l, o[h + 2] = o[h + 2] + l
                                            }
                                        },
                                        getUniformLocations: function(a, u) {
                                            return {
                                                uBrightness: a.getUniformLocation(u, "uBrightness")
                                            }
                                        },
                                        sendUniformData: function(a, u) {
                                            a.uniform1f(u.uBrightness, this.brightness)
                                        }
                                    }), f.Image.filters.Brightness.fromObject = f.Image.filters.BaseFilter.fromObject
                                }(Ee),
                                function(v) {
                                    "use strict";
                                    var f = v.fabric || (v.fabric = {}),
                                        m = f.util.object.extend,
                                        d = f.Image.filters;
                                    d.Convolute = (0, f.util.createClass)(d.BaseFilter, {
                                        type: "Convolute",
                                        opaque: !1,
                                        matrix: [0, 0, 0, 0, 1, 0, 0, 0, 0],
                                        fragmentSource: {
                                            Convolute_3_1: "precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[9];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 3.0; h+=1.0) {\nfor (float w = 0.0; w < 3.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];\n}\n}\ngl_FragColor = color;\n}",
                                            Convolute_3_0: "precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[9];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 3.0; h+=1.0) {\nfor (float w = 0.0; w < 3.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",
                                            Convolute_5_1: "precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[25];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 5.0; h+=1.0) {\nfor (float w = 0.0; w < 5.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];\n}\n}\ngl_FragColor = color;\n}",
                                            Convolute_5_0: "precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[25];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 5.0; h+=1.0) {\nfor (float w = 0.0; w < 5.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",
                                            Convolute_7_1: "precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[49];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 7.0; h+=1.0) {\nfor (float w = 0.0; w < 7.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];\n}\n}\ngl_FragColor = color;\n}",
                                            Convolute_7_0: "precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[49];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 7.0; h+=1.0) {\nfor (float w = 0.0; w < 7.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",
                                            Convolute_9_1: "precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[81];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 9.0; h+=1.0) {\nfor (float w = 0.0; w < 9.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];\n}\n}\ngl_FragColor = color;\n}",
                                            Convolute_9_0: "precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[81];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 9.0; h+=1.0) {\nfor (float w = 0.0; w < 9.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}"
                                        },
                                        retrieveShader: function(u) {
                                            var o = Math.sqrt(this.matrix.length),
                                                h = this.type + "_" + o + "_" + (this.opaque ? 1 : 0),
                                                p = this.fragmentSource[h];
                                            return u.programCache.hasOwnProperty(h) || (u.programCache[h] = this.createProgram(u.context, p)), u.programCache[h]
                                        },
                                        applyTo2d: function(u) {
                                            var F, B, G, ie, le, ue, de, fe, ae, _e, be, me, O, o = u.imageData,
                                                h = o.data,
                                                p = this.matrix,
                                                l = Math.round(Math.sqrt(p.length)),
                                                y = Math.floor(l / 2),
                                                C = o.width,
                                                D = o.height,
                                                E = u.ctx.createImageData(C, D),
                                                T = E.data,
                                                I = this.opaque ? 1 : 0;
                                            for (be = 0; be < D; be++)
                                                for (_e = 0; _e < C; _e++) {
                                                    for (le = 4 * (be * C + _e), F = 0, B = 0, G = 0, ie = 0, O = 0; O < l; O++)
                                                        for (me = 0; me < l; me++) ue = _e + me - y, !((de = be + O - y) < 0 || de >= D || ue < 0 || ue >= C) && (F += h[fe = 4 * (de * C + ue)] * (ae = p[O * l + me]), B += h[fe + 1] * ae, G += h[fe + 2] * ae, I || (ie += h[fe + 3] * ae));
                                                    T[le] = F, T[le + 1] = B, T[le + 2] = G, T[le + 3] = I ? h[le + 3] : ie
                                                }
                                            u.imageData = E
                                        },
                                        getUniformLocations: function(u, o) {
                                            return {
                                                uMatrix: u.getUniformLocation(o, "uMatrix"),
                                                uOpaque: u.getUniformLocation(o, "uOpaque"),
                                                uHalfSize: u.getUniformLocation(o, "uHalfSize"),
                                                uSize: u.getUniformLocation(o, "uSize")
                                            }
                                        },
                                        sendUniformData: function(u, o) {
                                            u.uniform1fv(o.uMatrix, this.matrix)
                                        },
                                        toObject: function() {
                                            return m(this.callSuper("toObject"), {
                                                opaque: this.opaque,
                                                matrix: this.matrix
                                            })
                                        }
                                    }), f.Image.filters.Convolute.fromObject = f.Image.filters.BaseFilter.fromObject
                                }(Ee),
                                function(v) {
                                    "use strict";
                                    var f = v.fabric || (v.fabric = {}),
                                        m = f.Image.filters;
                                    m.Grayscale = (0, f.util.createClass)(m.BaseFilter, {
                                        type: "Grayscale",
                                        fragmentSource: {
                                            average: "precision highp float;\nuniform sampler2D uTexture;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat average = (color.r + color.b + color.g) / 3.0;\ngl_FragColor = vec4(average, average, average, color.a);\n}",
                                            lightness: "precision highp float;\nuniform sampler2D uTexture;\nuniform int uMode;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 col = texture2D(uTexture, vTexCoord);\nfloat average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;\ngl_FragColor = vec4(average, average, average, col.a);\n}",
                                            luminosity: "precision highp float;\nuniform sampler2D uTexture;\nuniform int uMode;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 col = texture2D(uTexture, vTexCoord);\nfloat average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;\ngl_FragColor = vec4(average, average, average, col.a);\n}"
                                        },
                                        mode: "average",
                                        mainParameter: "mode",
                                        applyTo2d: function(a) {
                                            var h, l, o = a.imageData.data,
                                                p = o.length,
                                                y = this.mode;
                                            for (h = 0; h < p; h += 4) "average" === y ? l = (o[h] + o[h + 1] + o[h + 2]) / 3 : "lightness" === y ? l = (Math.min(o[h], o[h + 1], o[h + 2]) + Math.max(o[h], o[h + 1], o[h + 2])) / 2 : "luminosity" === y && (l = .21 * o[h] + .72 * o[h + 1] + .07 * o[h + 2]), o[h] = l, o[h + 1] = l, o[h + 2] = l
                                        },
                                        retrieveShader: function(a) {
                                            var u = this.type + "_" + this.mode;
                                            return a.programCache.hasOwnProperty(u) || (a.programCache[u] = this.createProgram(a.context, this.fragmentSource[this.mode])), a.programCache[u]
                                        },
                                        getUniformLocations: function(a, u) {
                                            return {
                                                uMode: a.getUniformLocation(u, "uMode")
                                            }
                                        },
                                        sendUniformData: function(a, u) {
                                            a.uniform1i(u.uMode, 1)
                                        },
                                        isNeutralState: function() {
                                            return !1
                                        }
                                    }), f.Image.filters.Grayscale.fromObject = f.Image.filters.BaseFilter.fromObject
                                }(Ee),
                                function(v) {
                                    "use strict";
                                    var f = v.fabric || (v.fabric = {}),
                                        m = f.Image.filters;
                                    m.Invert = (0, f.util.createClass)(m.BaseFilter, {
                                        type: "Invert",
                                        fragmentSource: "precision highp float;\nuniform sampler2D uTexture;\nuniform int uInvert;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nif (uInvert == 1) {\ngl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);\n} else {\ngl_FragColor = color;\n}\n}",
                                        invert: !0,
                                        mainParameter: "invert",
                                        applyTo2d: function(a) {
                                            var h, o = a.imageData.data,
                                                p = o.length;
                                            for (h = 0; h < p; h += 4) o[h] = 255 - o[h], o[h + 1] = 255 - o[h + 1], o[h + 2] = 255 - o[h + 2]
                                        },
                                        isNeutralState: function() {
                                            return !this.invert
                                        },
                                        getUniformLocations: function(a, u) {
                                            return {
                                                uInvert: a.getUniformLocation(u, "uInvert")
                                            }
                                        },
                                        sendUniformData: function(a, u) {
                                            a.uniform1i(u.uInvert, this.invert)
                                        }
                                    }), f.Image.filters.Invert.fromObject = f.Image.filters.BaseFilter.fromObject
                                }(Ee),
                                function(v) {
                                    "use strict";
                                    var f = v.fabric || (v.fabric = {}),
                                        m = f.util.object.extend,
                                        d = f.Image.filters;
                                    d.Noise = (0, f.util.createClass)(d.BaseFilter, {
                                        type: "Noise",
                                        fragmentSource: "precision highp float;\nuniform sampler2D uTexture;\nuniform float uStepH;\nuniform float uNoise;\nuniform float uSeed;\nvarying vec2 vTexCoord;\nfloat rand(vec2 co, float seed, float vScale) {\nreturn fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);\n}\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;\ngl_FragColor = color;\n}",
                                        mainParameter: "noise",
                                        noise: 0,
                                        applyTo2d: function(u) {
                                            if (0 !== this.noise) {
                                                var p, l, C, h = u.imageData.data,
                                                    y = this.noise;
                                                for (p = 0, l = h.length; p < l; p += 4) C = (.5 - Math.random()) * y, h[p] += C, h[p + 1] += C, h[p + 2] += C
                                            }
                                        },
                                        getUniformLocations: function(u, o) {
                                            return {
                                                uNoise: u.getUniformLocation(o, "uNoise"),
                                                uSeed: u.getUniformLocation(o, "uSeed")
                                            }
                                        },
                                        sendUniformData: function(u, o) {
                                            u.uniform1f(o.uNoise, this.noise / 255), u.uniform1f(o.uSeed, Math.random())
                                        },
                                        toObject: function() {
                                            return m(this.callSuper("toObject"), {
                                                noise: this.noise
                                            })
                                        }
                                    }), f.Image.filters.Noise.fromObject = f.Image.filters.BaseFilter.fromObject
                                }(Ee),
                                function(v) {
                                    "use strict";
                                    var f = v.fabric || (v.fabric = {}),
                                        m = f.Image.filters;
                                    m.Pixelate = (0, f.util.createClass)(m.BaseFilter, {
                                        type: "Pixelate",
                                        blocksize: 4,
                                        mainParameter: "blocksize",
                                        fragmentSource: "precision highp float;\nuniform sampler2D uTexture;\nuniform float uBlocksize;\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nfloat blockW = uBlocksize * uStepW;\nfloat blockH = uBlocksize * uStepW;\nint posX = int(vTexCoord.x / blockW);\nint posY = int(vTexCoord.y / blockH);\nfloat fposX = float(posX);\nfloat fposY = float(posY);\nvec2 squareCoords = vec2(fposX * blockW, fposY * blockH);\nvec4 color = texture2D(uTexture, squareCoords);\ngl_FragColor = color;\n}",
                                        applyTo2d: function(a) {
                                            var l, y, C, D, E, T, I, F, B, G, ie, u = a.imageData,
                                                o = u.data,
                                                h = u.height,
                                                p = u.width;
                                            for (y = 0; y < h; y += this.blocksize)
                                                for (C = 0; C < p; C += this.blocksize)
                                                    for (D = o[l = 4 * y * p + 4 * C], E = o[l + 1], T = o[l + 2], I = o[l + 3], G = Math.min(y + this.blocksize, h), ie = Math.min(C + this.blocksize, p), F = y; F < G; F++)
                                                        for (B = C; B < ie; B++) o[l = 4 * F * p + 4 * B] = D, o[l + 1] = E, o[l + 2] = T, o[l + 3] = I
                                        },
                                        isNeutralState: function() {
                                            return 1 === this.blocksize
                                        },
                                        getUniformLocations: function(a, u) {
                                            return {
                                                uBlocksize: a.getUniformLocation(u, "uBlocksize"),
                                                uStepW: a.getUniformLocation(u, "uStepW"),
                                                uStepH: a.getUniformLocation(u, "uStepH")
                                            }
                                        },
                                        sendUniformData: function(a, u) {
                                            a.uniform1f(u.uBlocksize, this.blocksize)
                                        }
                                    }), f.Image.filters.Pixelate.fromObject = f.Image.filters.BaseFilter.fromObject
                                }(Ee),
                                function(v) {
                                    "use strict";
                                    var f = v.fabric || (v.fabric = {}),
                                        m = f.util.object.extend,
                                        d = f.Image.filters;
                                    d.RemoveColor = (0, f.util.createClass)(d.BaseFilter, {
                                        type: "RemoveColor",
                                        color: "#FFFFFF",
                                        fragmentSource: "precision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uLow;\nuniform vec4 uHigh;\nvarying vec2 vTexCoord;\nvoid main() {\ngl_FragColor = texture2D(uTexture, vTexCoord);\nif(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {\ngl_FragColor.a = 0.0;\n}\n}",
                                        distance: .02,
                                        useAlpha: !1,
                                        applyTo2d: function(u) {
                                            var p, y, C, D, h = u.imageData.data,
                                                l = 255 * this.distance,
                                                E = new f.Color(this.color).getSource(),
                                                T = [E[0] - l, E[1] - l, E[2] - l],
                                                I = [E[0] + l, E[1] + l, E[2] + l];
                                            for (p = 0; p < h.length; p += 4) C = h[p + 1], D = h[p + 2], (y = h[p]) > T[0] && C > T[1] && D > T[2] && y < I[0] && C < I[1] && D < I[2] && (h[p + 3] = 0)
                                        },
                                        getUniformLocations: function(u, o) {
                                            return {
                                                uLow: u.getUniformLocation(o, "uLow"),
                                                uHigh: u.getUniformLocation(o, "uHigh")
                                            }
                                        },
                                        sendUniformData: function(u, o) {
                                            var h = new f.Color(this.color).getSource(),
                                                p = parseFloat(this.distance),
                                                y = [h[0] / 255 + p, h[1] / 255 + p, h[2] / 255 + p, 1];
                                            u.uniform4fv(o.uLow, [0 + h[0] / 255 - p, 0 + h[1] / 255 - p, 0 + h[2] / 255 - p, 1]), u.uniform4fv(o.uHigh, y)
                                        },
                                        toObject: function() {
                                            return m(this.callSuper("toObject"), {
                                                color: this.color,
                                                distance: this.distance
                                            })
                                        }
                                    }), f.Image.filters.RemoveColor.fromObject = f.Image.filters.BaseFilter.fromObject
                                }(Ee),
                                function(v) {
                                    "use strict";
                                    var f = v.fabric || (v.fabric = {}),
                                        m = f.Image.filters,
                                        d = f.util.createClass,
                                        a = {
                                            Brownie: [.5997, .34553, -.27082, 0, .186, -.0377, .86095, .15059, 0, -.1449, .24113, -.07441, .44972, 0, -.02965, 0, 0, 0, 1, 0],
                                            Vintage: [.62793, .32021, -.03965, 0, .03784, .02578, .64411, .03259, 0, .02926, .0466, -.08512, .52416, 0, .02023, 0, 0, 0, 1, 0],
                                            Kodachrome: [1.12855, -.39673, -.03992, 0, .24991, -.16404, 1.08352, -.05498, 0, .09698, -.16786, -.56034, 1.60148, 0, .13972, 0, 0, 0, 1, 0],
                                            Technicolor: [1.91252, -.85453, -.09155, 0, .04624, -.30878, 1.76589, -.10601, 0, -.27589, -.2311, -.75018, 1.84759, 0, .12137, 0, 0, 0, 1, 0],
                                            Polaroid: [1.438, -.062, -.062, 0, 0, -.122, 1.378, -.122, 0, 0, -.016, -.016, 1.483, 0, 0, 0, 0, 0, 1, 0],
                                            Sepia: [.393, .769, .189, 0, 0, .349, .686, .168, 0, 0, .272, .534, .131, 0, 0, 0, 0, 0, 1, 0],
                                            BlackWhite: [1.5, 1.5, 1.5, 0, -1, 1.5, 1.5, 1.5, 0, -1, 1.5, 1.5, 1.5, 0, -1, 0, 0, 0, 1, 0]
                                        };
                                    for (var u in a) m[u] = d(m.ColorMatrix, {
                                        type: u,
                                        matrix: a[u],
                                        mainParameter: !1,
                                        colorsOnly: !0
                                    }), f.Image.filters[u].fromObject = f.Image.filters.BaseFilter.fromObject
                                }(Ee),
                                function(v) {
                                    "use strict";
                                    var f = v.fabric,
                                        m = f.Image.filters;
                                    m.BlendColor = (0, f.util.createClass)(m.BaseFilter, {
                                        type: "BlendColor",
                                        color: "#F95C63",
                                        mode: "multiply",
                                        alpha: 1,
                                        fragmentSource: {
                                            multiply: "gl_FragColor.rgb *= uColor.rgb;\n",
                                            screen: "gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);\n",
                                            add: "gl_FragColor.rgb += uColor.rgb;\n",
                                            diff: "gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);\n",
                                            subtract: "gl_FragColor.rgb -= uColor.rgb;\n",
                                            lighten: "gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);\n",
                                            darken: "gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);\n",
                                            exclusion: "gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);\n",
                                            overlay: "if (uColor.r < 0.5) {\ngl_FragColor.r *= 2.0 * uColor.r;\n} else {\ngl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);\n}\nif (uColor.g < 0.5) {\ngl_FragColor.g *= 2.0 * uColor.g;\n} else {\ngl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);\n}\nif (uColor.b < 0.5) {\ngl_FragColor.b *= 2.0 * uColor.b;\n} else {\ngl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);\n}\n",
                                            tint: "gl_FragColor.rgb *= (1.0 - uColor.a);\ngl_FragColor.rgb += uColor.rgb;\n"
                                        },
                                        buildSource: function(a) {
                                            return "precision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ngl_FragColor = color;\nif (color.a > 0.0) {\n" + this.fragmentSource[a] + "}\n}"
                                        },
                                        retrieveShader: function(a) {
                                            var o, u = this.type + "_" + this.mode;
                                            return a.programCache.hasOwnProperty(u) || (o = this.buildSource(this.mode), a.programCache[u] = this.createProgram(a.context, o)), a.programCache[u]
                                        },
                                        applyTo2d: function(a) {
                                            var p, l, y, C, D, E, T, o = a.imageData.data,
                                                h = o.length,
                                                I = 1 - this.alpha;
                                            p = (T = new f.Color(this.color).getSource())[0] * this.alpha, l = T[1] * this.alpha, y = T[2] * this.alpha;
                                            for (var F = 0; F < h; F += 4) switch (C = o[F], D = o[F + 1], E = o[F + 2], this.mode) {
                                                case "multiply":
                                                    o[F] = C * p / 255, o[F + 1] = D * l / 255, o[F + 2] = E * y / 255;
                                                    break;
                                                case "screen":
                                                    o[F] = 255 - (255 - C) * (255 - p) / 255, o[F + 1] = 255 - (255 - D) * (255 - l) / 255, o[F + 2] = 255 - (255 - E) * (255 - y) / 255;
                                                    break;
                                                case "add":
                                                    o[F] = C + p, o[F + 1] = D + l, o[F + 2] = E + y;
                                                    break;
                                                case "diff":
                                                case "difference":
                                                    o[F] = Math.abs(C - p), o[F + 1] = Math.abs(D - l), o[F + 2] = Math.abs(E - y);
                                                    break;
                                                case "subtract":
                                                    o[F] = C - p, o[F + 1] = D - l, o[F + 2] = E - y;
                                                    break;
                                                case "darken":
                                                    o[F] = Math.min(C, p), o[F + 1] = Math.min(D, l), o[F + 2] = Math.min(E, y);
                                                    break;
                                                case "lighten":
                                                    o[F] = Math.max(C, p), o[F + 1] = Math.max(D, l), o[F + 2] = Math.max(E, y);
                                                    break;
                                                case "overlay":
                                                    o[F] = p < 128 ? 2 * C * p / 255 : 255 - 2 * (255 - C) * (255 - p) / 255, o[F + 1] = l < 128 ? 2 * D * l / 255 : 255 - 2 * (255 - D) * (255 - l) / 255, o[F + 2] = y < 128 ? 2 * E * y / 255 : 255 - 2 * (255 - E) * (255 - y) / 255;
                                                    break;
                                                case "exclusion":
                                                    o[F] = p + C - 2 * p * C / 255, o[F + 1] = l + D - 2 * l * D / 255, o[F + 2] = y + E - 2 * y * E / 255;
                                                    break;
                                                case "tint":
                                                    o[F] = p + C * I, o[F + 1] = l + D * I, o[F + 2] = y + E * I
                                            }
                                        },
                                        getUniformLocations: function(a, u) {
                                            return {
                                                uColor: a.getUniformLocation(u, "uColor")
                                            }
                                        },
                                        sendUniformData: function(a, u) {
                                            var o = new f.Color(this.color).getSource();
                                            o[0] = this.alpha * o[0] / 255, o[1] = this.alpha * o[1] / 255, o[2] = this.alpha * o[2] / 255, o[3] = this.alpha, a.uniform4fv(u.uColor, o)
                                        },
                                        toObject: function() {
                                            return {
                                                type: this.type,
                                                color: this.color,
                                                mode: this.mode,
                                                alpha: this.alpha
                                            }
                                        }
                                    }), f.Image.filters.BlendColor.fromObject = f.Image.filters.BaseFilter.fromObject
                                }(Ee),
                                function(v) {
                                    "use strict";
                                    var f = v.fabric,
                                        m = f.Image.filters;
                                    m.BlendImage = (0, f.util.createClass)(m.BaseFilter, {
                                        type: "BlendImage",
                                        image: null,
                                        mode: "multiply",
                                        alpha: 1,
                                        vertexSource: "attribute vec2 aPosition;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nuniform mat3 uTransformMatrix;\nvoid main() {\nvTexCoord = aPosition;\nvTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;\ngl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\n}",
                                        fragmentSource: {
                                            multiply: "precision highp float;\nuniform sampler2D uTexture;\nuniform sampler2D uImage;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec4 color2 = texture2D(uImage, vTexCoord2);\ncolor.rgba *= color2.rgba;\ngl_FragColor = color;\n}",
                                            mask: "precision highp float;\nuniform sampler2D uTexture;\nuniform sampler2D uImage;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec4 color2 = texture2D(uImage, vTexCoord2);\ncolor.a = color2.a;\ngl_FragColor = color;\n}"
                                        },
                                        retrieveShader: function(a) {
                                            var u = this.type + "_" + this.mode,
                                                o = this.fragmentSource[this.mode];
                                            return a.programCache.hasOwnProperty(u) || (a.programCache[u] = this.createProgram(a.context, o)), a.programCache[u]
                                        },
                                        applyToWebGL: function(a) {
                                            var u = a.context,
                                                o = this.createTexture(a.filterBackend, this.image);
                                            this.bindAdditionalTexture(u, o, u.TEXTURE1), this.callSuper("applyToWebGL", a), this.unbindAdditionalTexture(u, u.TEXTURE1)
                                        },
                                        createTexture: function(a, u) {
                                            return a.getCachedTexture(u.cacheKey, u._element)
                                        },
                                        calculateMatrix: function() {
                                            var a = this.image;
                                            return [1 / a.scaleX, 0, 0, 0, 1 / a.scaleY, 0, -a.left / a._element.width, -a.top / a._element.height, 1]
                                        },
                                        applyTo2d: function(a) {
                                            var C, D, E, T, I, F, B, G, ie, le, de, u = a.imageData,
                                                o = a.filterBackend.resources,
                                                h = u.data,
                                                p = h.length,
                                                l = u.width,
                                                y = u.height,
                                                ue = this.image;
                                            o.blendImage || (o.blendImage = f.util.createCanvasElement()), le = (ie = o.blendImage).getContext("2d"), ie.width !== l || ie.height !== y ? (ie.width = l, ie.height = y) : le.clearRect(0, 0, l, y), le.setTransform(ue.scaleX, 0, 0, ue.scaleY, ue.left, ue.top), le.drawImage(ue._element, 0, 0, l, y), de = le.getImageData(0, 0, l, y).data;
                                            for (var fe = 0; fe < p; fe += 4) switch (I = h[fe], F = h[fe + 1], B = h[fe + 2], G = h[fe + 3], C = de[fe], D = de[fe + 1], E = de[fe + 2], T = de[fe + 3], this.mode) {
                                                case "multiply":
                                                    h[fe] = I * C / 255, h[fe + 1] = F * D / 255, h[fe + 2] = B * E / 255, h[fe + 3] = G * T / 255;
                                                    break;
                                                case "mask":
                                                    h[fe + 3] = T
                                            }
                                        },
                                        getUniformLocations: function(a, u) {
                                            return {
                                                uTransformMatrix: a.getUniformLocation(u, "uTransformMatrix"),
                                                uImage: a.getUniformLocation(u, "uImage")
                                            }
                                        },
                                        sendUniformData: function(a, u) {
                                            var o = this.calculateMatrix();
                                            a.uniform1i(u.uImage, 1), a.uniformMatrix3fv(u.uTransformMatrix, !1, o)
                                        },
                                        toObject: function() {
                                            return {
                                                type: this.type,
                                                image: this.image && this.image.toObject(),
                                                mode: this.mode,
                                                alpha: this.alpha
                                            }
                                        }
                                    }), f.Image.filters.BlendImage.fromObject = function(a, u) {
                                        f.Image.fromObject(a.image, function(o) {
                                            var h = f.util.object.clone(a);
                                            h.image = o, u(new f.Image.filters.BlendImage(h))
                                        })
                                    }
                                }(Ee),
                                function(v) {
                                    "use strict";
                                    var f = v.fabric || (v.fabric = {}),
                                        m = Math.pow,
                                        d = Math.floor,
                                        a = Math.sqrt,
                                        u = Math.abs,
                                        o = Math.round,
                                        h = Math.sin,
                                        p = Math.ceil,
                                        l = f.Image.filters;
                                    l.Resize = (0, f.util.createClass)(l.BaseFilter, {
                                        type: "Resize",
                                        resizeType: "hermite",
                                        scaleX: 1,
                                        scaleY: 1,
                                        lanczosLobes: 3,
                                        getUniformLocations: function(C, D) {
                                            return {
                                                uDelta: C.getUniformLocation(D, "uDelta"),
                                                uTaps: C.getUniformLocation(D, "uTaps")
                                            }
                                        },
                                        sendUniformData: function(C, D) {
                                            C.uniform2fv(D.uDelta, this.horizontal ? [1 / this.width, 0] : [0, 1 / this.height]), C.uniform1fv(D.uTaps, this.taps)
                                        },
                                        retrieveShader: function(C) {
                                            var D = this.getFilterWindow(),
                                                E = this.type + "_" + D;
                                            if (!C.programCache.hasOwnProperty(E)) {
                                                var T = this.generateShader(D);
                                                C.programCache[E] = this.createProgram(C.context, T)
                                            }
                                            return C.programCache[E]
                                        },
                                        getFilterWindow: function() {
                                            return Math.ceil(this.lanczosLobes / this.tempScale)
                                        },
                                        getTaps: function() {
                                            for (var C = this.lanczosCreate(this.lanczosLobes), D = this.tempScale, E = this.getFilterWindow(), T = new Array(E), I = 1; I <= E; I++) T[I - 1] = C(I * D);
                                            return T
                                        },
                                        generateShader: function(C) {
                                            for (var D = new Array(C), E = this.fragmentSourceTOP, T = 1; T <= C; T++) D[T - 1] = T + ".0 * uDelta";
                                            return E += "uniform float uTaps[" + C + "];\n", E += "void main() {\n", E += "  vec4 color = texture2D(uTexture, vTexCoord);\n", E += "  float sum = 1.0;\n", D.forEach(function(I, F) {
                                                E += "  color += texture2D(uTexture, vTexCoord + " + I + ") * uTaps[" + F + "];\n", E += "  color += texture2D(uTexture, vTexCoord - " + I + ") * uTaps[" + F + "];\n", E += "  sum += 2.0 * uTaps[" + F + "];\n"
                                            }), E += "  gl_FragColor = color / sum;\n", E += "}"
                                        },
                                        fragmentSourceTOP: "precision highp float;\nuniform sampler2D uTexture;\nuniform vec2 uDelta;\nvarying vec2 vTexCoord;\n",
                                        applyTo: function(C) {
                                            C.webgl ? (C.passes++, this.width = C.sourceWidth, this.horizontal = !0, this.dW = Math.round(this.width * this.scaleX), this.dH = C.sourceHeight, this.tempScale = this.dW / this.width, this.taps = this.getTaps(), C.destinationWidth = this.dW, this._setupFrameBuffer(C), this.applyToWebGL(C), this._swapTextures(C), C.sourceWidth = C.destinationWidth, this.height = C.sourceHeight, this.horizontal = !1, this.dH = Math.round(this.height * this.scaleY), this.tempScale = this.dH / this.height, this.taps = this.getTaps(), C.destinationHeight = this.dH, this._setupFrameBuffer(C), this.applyToWebGL(C), this._swapTextures(C), C.sourceHeight = C.destinationHeight) : this.applyTo2d(C)
                                        },
                                        isNeutralState: function() {
                                            return 1 === this.scaleX && 1 === this.scaleY
                                        },
                                        lanczosCreate: function(C) {
                                            return function(D) {
                                                if (D >= C || D <= -C) return 0;
                                                if (D < 1.1920929e-7 && D > -1.1920929e-7) return 1;
                                                var E = (D *= Math.PI) / C;
                                                return h(D) / D * h(E) / E
                                            }
                                        },
                                        applyTo2d: function(C) {
                                            var D = C.imageData,
                                                E = this.scaleX,
                                                T = this.scaleY;
                                            this.rcpScaleX = 1 / E, this.rcpScaleY = 1 / T;
                                            var ie, I = D.width,
                                                F = D.height,
                                                B = o(I * E),
                                                G = o(F * T);
                                            "sliceHack" === this.resizeType ? ie = this.sliceByTwo(C, I, F, B, G) : "hermite" === this.resizeType ? ie = this.hermiteFastResize(C, I, F, B, G) : "bilinear" === this.resizeType ? ie = this.bilinearFiltering(C, I, F, B, G) : "lanczos" === this.resizeType && (ie = this.lanczosResize(C, I, F, B, G)), C.imageData = ie
                                        },
                                        sliceByTwo: function(C, D, E, T, I) {
                                            var fe, ae, F = C.imageData,
                                                B = .5,
                                                G = !1,
                                                ie = !1,
                                                le = D * B,
                                                ue = E * B,
                                                de = f.filterBackend.resources,
                                                _e = 0,
                                                be = 0,
                                                me = D,
                                                O = 0;
                                            for (de.sliceByTwo || (de.sliceByTwo = document.createElement("canvas")), ((fe = de.sliceByTwo).width < 1.5 * D || fe.height < E) && (fe.width = 1.5 * D, fe.height = E), (ae = fe.getContext("2d")).clearRect(0, 0, 1.5 * D, E), ae.putImageData(F, 0, 0), T = d(T), I = d(I); !G || !ie;) D = le, E = ue, T < d(le * B) ? le = d(le * B) : (le = T, G = !0), I < d(ue * B) ? ue = d(ue * B) : (ue = I, ie = !0), ae.drawImage(fe, _e, be, D, E, me, O, le, ue), _e = me, be = O, O += ue;
                                            return ae.getImageData(_e, be, T, I)
                                        },
                                        lanczosResize: function(C, D, E, T, I) {
                                            var B = C.imageData.data,
                                                G = C.ctx.createImageData(T, I),
                                                ie = G.data,
                                                le = this.lanczosCreate(this.lanczosLobes),
                                                ue = this.rcpScaleX,
                                                de = this.rcpScaleY,
                                                fe = 2 / this.rcpScaleX,
                                                ae = 2 / this.rcpScaleY,
                                                _e = p(ue * this.lanczosLobes / 2),
                                                be = p(de * this.lanczosLobes / 2),
                                                me = {},
                                                O = {},
                                                N = {};
                                            return function F(k) {
                                                var L, $, R, A, V, W, Q, z, te, oe, ce;
                                                for (O.x = (k + .5) * ue, N.x = d(O.x), L = 0; L < I; L++) {
                                                    for (O.y = (L + .5) * de, N.y = d(O.y), V = 0, W = 0, Q = 0, z = 0, te = 0, $ = N.x - _e; $ <= N.x + _e; $++)
                                                        if (!($ < 0 || $ >= D)) {
                                                            oe = d(1e3 * u($ - O.x)), me[oe] || (me[oe] = {});
                                                            for (var X = N.y - be; X <= N.y + be; X++) X < 0 || X >= E || (ce = d(1e3 * u(X - O.y)), me[oe][ce] || (me[oe][ce] = le(a(m(oe * fe, 2) + m(ce * ae, 2)) / 1e3)), (R = me[oe][ce]) > 0 && (V += R, W += R * B[A = 4 * (X * D + $)], Q += R * B[A + 1], z += R * B[A + 2], te += R * B[A + 3]))
                                                        }
                                                    ie[A = 4 * (L * T + k)] = W / V, ie[A + 1] = Q / V, ie[A + 2] = z / V, ie[A + 3] = te / V
                                                }
                                                return ++k < T ? F(k) : G
                                            }(0)
                                        },
                                        bilinearFiltering: function(C, D, E, T, I) {
                                            var le, ue, de, fe, ae, _e, be, N, O = 0,
                                                k = this.rcpScaleX,
                                                L = this.rcpScaleY,
                                                $ = 4 * (D - 1),
                                                A = C.imageData.data,
                                                V = C.ctx.createImageData(T, I),
                                                W = V.data;
                                            for (de = 0; de < I; de++)
                                                for (fe = 0; fe < T; fe++)
                                                    for (ae = k * fe - (le = d(k * fe)), _e = L * de - (ue = d(L * de)), N = 4 * (ue * D + le), be = 0; be < 4; be++) W[O++] = A[N + be] * (1 - ae) * (1 - _e) + A[N + 4 + be] * ae * (1 - _e) + A[N + $ + be] * _e * (1 - ae) + A[N + $ + 4 + be] * ae * _e;
                                            return V
                                        },
                                        hermiteFastResize: function(C, D, E, T, I) {
                                            for (var F = this.rcpScaleX, B = this.rcpScaleY, G = p(F / 2), ie = p(B / 2), ue = C.imageData.data, de = C.ctx.createImageData(T, I), fe = de.data, ae = 0; ae < I; ae++)
                                                for (var _e = 0; _e < T; _e++) {
                                                    for (var be = 4 * (_e + ae * T), me = 0, O = 0, N = 0, k = 0, L = 0, $ = 0, R = 0, A = (ae + .5) * B, V = d(ae * B); V < (ae + 1) * B; V++)
                                                        for (var W = u(A - (V + .5)) / ie, Q = (_e + .5) * F, z = W * W, te = d(_e * F); te < (_e + 1) * F; te++) {
                                                            var oe = u(Q - (te + .5)) / G,
                                                                ce = a(z + oe * oe);
                                                            ce > 1 && ce < -1 || (me = 2 * ce * ce * ce - 3 * ce * ce + 1) > 0 && (R += me * ue[3 + (oe = 4 * (te + V * D))], N += me, ue[oe + 3] < 255 && (me = me * ue[oe + 3] / 250), k += me * ue[oe], L += me * ue[oe + 1], $ += me * ue[oe + 2], O += me)
                                                        }
                                                    fe[be] = k / O, fe[be + 1] = L / O, fe[be + 2] = $ / O, fe[be + 3] = R / N
                                                }
                                            return de
                                        },
                                        toObject: function() {
                                            return {
                                                type: this.type,
                                                scaleX: this.scaleX,
                                                scaleY: this.scaleY,
                                                resizeType: this.resizeType,
                                                lanczosLobes: this.lanczosLobes
                                            }
                                        }
                                    }), f.Image.filters.Resize.fromObject = f.Image.filters.BaseFilter.fromObject
                                }(Ee),
                                function(v) {
                                    "use strict";
                                    var f = v.fabric || (v.fabric = {}),
                                        m = f.Image.filters;
                                    m.Contrast = (0, f.util.createClass)(m.BaseFilter, {
                                        type: "Contrast",
                                        fragmentSource: "precision highp float;\nuniform sampler2D uTexture;\nuniform float uContrast;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));\ncolor.rgb = contrastF * (color.rgb - 0.5) + 0.5;\ngl_FragColor = color;\n}",
                                        contrast: 0,
                                        mainParameter: "contrast",
                                        applyTo2d: function(a) {
                                            if (0 !== this.contrast) {
                                                var o, p = a.imageData.data,
                                                    h = p.length,
                                                    l = Math.floor(255 * this.contrast),
                                                    y = 259 * (l + 255) / (255 * (259 - l));
                                                for (o = 0; o < h; o += 4) p[o] = y * (p[o] - 128) + 128, p[o + 1] = y * (p[o + 1] - 128) + 128, p[o + 2] = y * (p[o + 2] - 128) + 128
                                            }
                                        },
                                        getUniformLocations: function(a, u) {
                                            return {
                                                uContrast: a.getUniformLocation(u, "uContrast")
                                            }
                                        },
                                        sendUniformData: function(a, u) {
                                            a.uniform1f(u.uContrast, this.contrast)
                                        }
                                    }), f.Image.filters.Contrast.fromObject = f.Image.filters.BaseFilter.fromObject
                                }(Ee),
                                function(v) {
                                    "use strict";
                                    var f = v.fabric || (v.fabric = {}),
                                        m = f.Image.filters;
                                    m.Saturation = (0, f.util.createClass)(m.BaseFilter, {
                                        type: "Saturation",
                                        fragmentSource: "precision highp float;\nuniform sampler2D uTexture;\nuniform float uSaturation;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat rgMax = max(color.r, color.g);\nfloat rgbMax = max(rgMax, color.b);\ncolor.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;\ncolor.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;\ncolor.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;\ngl_FragColor = color;\n}",
                                        saturation: 0,
                                        mainParameter: "saturation",
                                        applyTo2d: function(a) {
                                            if (0 !== this.saturation) {
                                                var l, y, o = a.imageData.data,
                                                    h = o.length,
                                                    p = -this.saturation;
                                                for (l = 0; l < h; l += 4) y = Math.max(o[l], o[l + 1], o[l + 2]), o[l] += y !== o[l] ? (y - o[l]) * p : 0, o[l + 1] += y !== o[l + 1] ? (y - o[l + 1]) * p : 0, o[l + 2] += y !== o[l + 2] ? (y - o[l + 2]) * p : 0
                                            }
                                        },
                                        getUniformLocations: function(a, u) {
                                            return {
                                                uSaturation: a.getUniformLocation(u, "uSaturation")
                                            }
                                        },
                                        sendUniformData: function(a, u) {
                                            a.uniform1f(u.uSaturation, -this.saturation)
                                        }
                                    }), f.Image.filters.Saturation.fromObject = f.Image.filters.BaseFilter.fromObject
                                }(Ee),
                                function(v) {
                                    "use strict";
                                    var f = v.fabric || (v.fabric = {}),
                                        m = f.Image.filters;
                                    m.Vibrance = (0, f.util.createClass)(m.BaseFilter, {
                                        type: "Vibrance",
                                        fragmentSource: "precision highp float;\nuniform sampler2D uTexture;\nuniform float uVibrance;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat max = max(color.r, max(color.g, color.b));\nfloat avg = (color.r + color.g + color.b) / 3.0;\nfloat amt = (abs(max - avg) * 2.0) * uVibrance;\ncolor.r += max != color.r ? (max - color.r) * amt : 0.00;\ncolor.g += max != color.g ? (max - color.g) * amt : 0.00;\ncolor.b += max != color.b ? (max - color.b) * amt : 0.00;\ngl_FragColor = color;\n}",
                                        vibrance: 0,
                                        mainParameter: "vibrance",
                                        applyTo2d: function(a) {
                                            if (0 !== this.vibrance) {
                                                var l, y, D, o = a.imageData.data,
                                                    h = o.length,
                                                    p = -this.vibrance;
                                                for (l = 0; l < h; l += 4) y = Math.max(o[l], o[l + 1], o[l + 2]), D = 2 * Math.abs(y - (o[l] + o[l + 1] + o[l + 2]) / 3) / 255 * p, o[l] += y !== o[l] ? (y - o[l]) * D : 0, o[l + 1] += y !== o[l + 1] ? (y - o[l + 1]) * D : 0, o[l + 2] += y !== o[l + 2] ? (y - o[l + 2]) * D : 0
                                            }
                                        },
                                        getUniformLocations: function(a, u) {
                                            return {
                                                uVibrance: a.getUniformLocation(u, "uVibrance")
                                            }
                                        },
                                        sendUniformData: function(a, u) {
                                            a.uniform1f(u.uVibrance, -this.vibrance)
                                        }
                                    }), f.Image.filters.Vibrance.fromObject = f.Image.filters.BaseFilter.fromObject
                                }(Ee),
                                function(v) {
                                    "use strict";
                                    var f = v.fabric || (v.fabric = {}),
                                        m = f.Image.filters;
                                    m.Blur = (0, f.util.createClass)(m.BaseFilter, {
                                        type: "Blur",
                                        fragmentSource: "precision highp float;\nuniform sampler2D uTexture;\nuniform vec2 uDelta;\nvarying vec2 vTexCoord;\nconst float nSamples = 15.0;\nvec3 v3offset = vec3(12.9898, 78.233, 151.7182);\nfloat random(vec3 scale) {\nreturn fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);\n}\nvoid main() {\nvec4 color = vec4(0.0);\nfloat total = 0.0;\nfloat offset = random(v3offset);\nfor (float t = -nSamples; t <= nSamples; t++) {\nfloat percent = (t + offset - 0.5) / nSamples;\nfloat weight = 1.0 - abs(percent);\ncolor += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;\ntotal += weight;\n}\ngl_FragColor = color / total;\n}",
                                        blur: 0,
                                        mainParameter: "blur",
                                        applyTo: function(a) {
                                            a.webgl ? (this.aspectRatio = a.sourceWidth / a.sourceHeight, a.passes++, this._setupFrameBuffer(a), this.horizontal = !0, this.applyToWebGL(a), this._swapTextures(a), this._setupFrameBuffer(a), this.horizontal = !1, this.applyToWebGL(a), this._swapTextures(a)) : this.applyTo2d(a)
                                        },
                                        applyTo2d: function(a) {
                                            a.imageData = this.simpleBlur(a)
                                        },
                                        simpleBlur: function(a) {
                                            var o, h, u = a.filterBackend.resources,
                                                p = a.imageData.width,
                                                l = a.imageData.height;
                                            u.blurLayer1 || (u.blurLayer1 = f.util.createCanvasElement(), u.blurLayer2 = f.util.createCanvasElement()), h = u.blurLayer2, ((o = u.blurLayer1).width !== p || o.height !== l) && (h.width = o.width = p, h.height = o.height = l);
                                            var E, T, I, F, y = o.getContext("2d"),
                                                C = h.getContext("2d"),
                                                D = 15,
                                                B = .06 * this.blur * .5;
                                            for (y.putImageData(a.imageData, 0, 0), C.clearRect(0, 0, p, l), F = -D; F <= D; F++) I = B * (T = F / D) * p + (E = (Math.random() - .5) / 4), C.globalAlpha = 1 - Math.abs(T), C.drawImage(o, I, E), y.drawImage(h, 0, 0), C.globalAlpha = 1, C.clearRect(0, 0, h.width, h.height);
                                            for (F = -D; F <= D; F++) I = B * (T = F / D) * l + (E = (Math.random() - .5) / 4), C.globalAlpha = 1 - Math.abs(T), C.drawImage(o, E, I), y.drawImage(h, 0, 0), C.globalAlpha = 1, C.clearRect(0, 0, h.width, h.height);
                                            a.ctx.drawImage(o, 0, 0);
                                            var G = a.ctx.getImageData(0, 0, o.width, o.height);
                                            return y.globalAlpha = 1, y.clearRect(0, 0, o.width, o.height), G
                                        },
                                        getUniformLocations: function(a, u) {
                                            return {
                                                delta: a.getUniformLocation(u, "uDelta")
                                            }
                                        },
                                        sendUniformData: function(a, u) {
                                            var o = this.chooseRightDelta();
                                            a.uniform2fv(u.delta, o)
                                        },
                                        chooseRightDelta: function() {
                                            var o, a = 1,
                                                u = [0, 0];
                                            return this.horizontal ? this.aspectRatio > 1 && (a = 1 / this.aspectRatio) : this.aspectRatio < 1 && (a = this.aspectRatio), o = a * this.blur * .12, this.horizontal ? u[0] = o : u[1] = o, u
                                        }
                                    }), m.Blur.fromObject = f.Image.filters.BaseFilter.fromObject
                                }(Ee),
                                function(v) {
                                    "use strict";
                                    var f = v.fabric || (v.fabric = {}),
                                        m = f.Image.filters;
                                    m.Gamma = (0, f.util.createClass)(m.BaseFilter, {
                                        type: "Gamma",
                                        fragmentSource: "precision highp float;\nuniform sampler2D uTexture;\nuniform vec3 uGamma;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec3 correction = (1.0 / uGamma);\ncolor.r = pow(color.r, correction.r);\ncolor.g = pow(color.g, correction.g);\ncolor.b = pow(color.b, correction.b);\ngl_FragColor = color;\ngl_FragColor.rgb *= color.a;\n}",
                                        gamma: [1, 1, 1],
                                        mainParameter: "gamma",
                                        initialize: function(a) {
                                            this.gamma = [1, 1, 1], m.BaseFilter.prototype.initialize.call(this, a)
                                        },
                                        applyTo2d: function(a) {
                                            var D, o = a.imageData.data,
                                                h = this.gamma,
                                                p = o.length,
                                                l = 1 / h[0],
                                                y = 1 / h[1],
                                                C = 1 / h[2];
                                            for (this.rVals || (this.rVals = new Uint8Array(256), this.gVals = new Uint8Array(256), this.bVals = new Uint8Array(256)), D = 0, p = 256; D < p; D++) this.rVals[D] = 255 * Math.pow(D / 255, l), this.gVals[D] = 255 * Math.pow(D / 255, y), this.bVals[D] = 255 * Math.pow(D / 255, C);
                                            for (D = 0, p = o.length; D < p; D += 4) o[D] = this.rVals[o[D]], o[D + 1] = this.gVals[o[D + 1]], o[D + 2] = this.bVals[o[D + 2]]
                                        },
                                        getUniformLocations: function(a, u) {
                                            return {
                                                uGamma: a.getUniformLocation(u, "uGamma")
                                            }
                                        },
                                        sendUniformData: function(a, u) {
                                            a.uniform3fv(u.uGamma, this.gamma)
                                        }
                                    }), f.Image.filters.Gamma.fromObject = f.Image.filters.BaseFilter.fromObject
                                }(Ee),
                                function(v) {
                                    "use strict";
                                    var f = v.fabric || (v.fabric = {}),
                                        m = f.Image.filters;
                                    m.Composed = (0, f.util.createClass)(m.BaseFilter, {
                                        type: "Composed",
                                        subFilters: [],
                                        initialize: function(a) {
                                            this.callSuper("initialize", a), this.subFilters = this.subFilters.slice(0)
                                        },
                                        applyTo: function(a) {
                                            a.passes += this.subFilters.length - 1, this.subFilters.forEach(function(u) {
                                                u.applyTo(a)
                                            })
                                        },
                                        toObject: function() {
                                            return f.util.object.extend(this.callSuper("toObject"), {
                                                subFilters: this.subFilters.map(function(a) {
                                                    return a.toObject()
                                                })
                                            })
                                        },
                                        isNeutralState: function() {
                                            return !this.subFilters.some(function(a) {
                                                return !a.isNeutralState()
                                            })
                                        }
                                    }), f.Image.filters.Composed.fromObject = function(a, u) {
                                        var h = (a.subFilters || []).map(function(l) {
                                                return new f.Image.filters[l.type](l)
                                            }),
                                            p = new f.Image.filters.Composed({
                                                subFilters: h
                                            });
                                        return u && u(p), p
                                    }
                                }(Ee),
                                function(v) {
                                    "use strict";
                                    var f = v.fabric || (v.fabric = {}),
                                        m = f.Image.filters;
                                    m.HueRotation = (0, f.util.createClass)(m.ColorMatrix, {
                                        type: "HueRotation",
                                        rotation: 0,
                                        mainParameter: "rotation",
                                        calculateMatrix: function() {
                                            var a = this.rotation * Math.PI,
                                                u = f.util.cos(a),
                                                o = f.util.sin(a),
                                                h = 1 / 3,
                                                p = Math.sqrt(h) * o,
                                                l = 1 - u;
                                            this.matrix = [1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0], this.matrix[0] = u + l / 3, this.matrix[1] = h * l - p, this.matrix[2] = h * l + p, this.matrix[5] = h * l + p, this.matrix[6] = u + h * l, this.matrix[7] = h * l - p, this.matrix[10] = h * l - p, this.matrix[11] = h * l + p, this.matrix[12] = u + h * l
                                        },
                                        isNeutralState: function(a) {
                                            return this.calculateMatrix(), m.BaseFilter.prototype.isNeutralState.call(this, a)
                                        },
                                        applyTo: function(a) {
                                            this.calculateMatrix(), m.BaseFilter.prototype.applyTo.call(this, a)
                                        }
                                    }), f.Image.filters.HueRotation.fromObject = f.Image.filters.BaseFilter.fromObject
                                }(Ee),
                                function(v) {
                                    "use strict";
                                    var f = v.fabric || (v.fabric = {}),
                                        m = f.util.object.clone;
                                    if (f.Text) f.warn("fabric.Text is already defined");
                                    else {
                                        var d = "fontFamily fontWeight fontSize text underline overline linethrough textAlign fontStyle lineHeight textBackgroundColor charSpacing styles direction path pathStartOffset pathSide pathAlign".split(" ");
                                        f.Text = f.util.createClass(f.Object, {
                                            _dimensionAffectingProps: ["fontSize", "fontWeight", "fontFamily", "fontStyle", "lineHeight", "text", "charSpacing", "textAlign", "styles", "path", "pathStartOffset", "pathSide", "pathAlign"],
                                            _reNewline: /\r?\n/,
                                            _reSpacesAndTabs: /[ \t\r]/g,
                                            _reSpaceAndTab: /[ \t\r]/,
                                            _reWords: /\S+/g,
                                            type: "text",
                                            fontSize: 40,
                                            fontWeight: "normal",
                                            fontFamily: "Times New Roman",
                                            underline: !1,
                                            overline: !1,
                                            linethrough: !1,
                                            textAlign: "left",
                                            fontStyle: "normal",
                                            lineHeight: 1.16,
                                            superscript: {
                                                size: .6,
                                                baseline: -.35
                                            },
                                            subscript: {
                                                size: .6,
                                                baseline: .11
                                            },
                                            textBackgroundColor: "",
                                            stateProperties: f.Object.prototype.stateProperties.concat(d),
                                            cacheProperties: f.Object.prototype.cacheProperties.concat(d),
                                            stroke: null,
                                            shadow: null,
                                            path: null,
                                            pathStartOffset: 0,
                                            pathSide: "left",
                                            pathAlign: "baseline",
                                            _fontSizeFraction: .222,
                                            offsets: {
                                                underline: .1,
                                                linethrough: -.315,
                                                overline: -.88
                                            },
                                            _fontSizeMult: 1.13,
                                            charSpacing: 0,
                                            styles: null,
                                            _measuringContext: null,
                                            deltaY: 0,
                                            direction: "ltr",
                                            _styleProperties: ["stroke", "strokeWidth", "fill", "fontFamily", "fontSize", "fontWeight", "fontStyle", "underline", "overline", "linethrough", "deltaY", "textBackgroundColor"],
                                            __charBounds: [],
                                            CACHE_FONT_SIZE: 400,
                                            MIN_TEXT_WIDTH: 2,
                                            initialize: function(a, u) {
                                                this.styles = u && u.styles || {}, this.text = a, this.__skipDimension = !0, this.callSuper("initialize", u), this.path && this.setPathInfo(), this.__skipDimension = !1, this.initDimensions(), this.setCoords(), this.setupState({
                                                    propertySet: "_dimensionAffectingProps"
                                                })
                                            },
                                            setPathInfo: function() {
                                                var a = this.path;
                                                a && (a.segmentsInfo = f.util.getPathSegmentsInfo(a.path))
                                            },
                                            getMeasuringContext: function() {
                                                return f._measuringContext || (f._measuringContext = this.canvas && this.canvas.contextCache || f.util.createCanvasElement().getContext("2d")), f._measuringContext
                                            },
                                            _splitText: function() {
                                                var a = this._splitTextIntoLines(this.text);
                                                return this.textLines = a.lines, this._textLines = a.graphemeLines, this._unwrappedTextLines = a._unwrappedLines, this._text = a.graphemeText, a
                                            },
                                            initDimensions: function() {
                                                this.__skipDimension || (this._splitText(), this._clearCache(), this.path ? (this.width = this.path.width, this.height = this.path.height) : (this.width = this.calcTextWidth() || this.cursorWidth || this.MIN_TEXT_WIDTH, this.height = this.calcTextHeight()), -1 !== this.textAlign.indexOf("justify") && this.enlargeSpaces(), this.saveState({
                                                    propertySet: "_dimensionAffectingProps"
                                                }))
                                            },
                                            enlargeSpaces: function() {
                                                for (var a, u, h, p, l, y, C = 0, D = this._textLines.length; C < D; C++)
                                                    if (("justify" === this.textAlign || C !== D - 1 && !this.isEndOfWrapping(C)) && (h = 0, p = this._textLines[C], (u = this.getLineWidth(C)) < this.width && (y = this.textLines[C].match(this._reSpacesAndTabs)))) {
                                                        a = (this.width - u) / y.length;
                                                        for (var E = 0, T = p.length; E <= T; E++) l = this.__charBounds[C][E], this._reSpaceAndTab.test(p[E]) ? (l.width += a, l.kernedWidth += a, l.left += h, h += a) : l.left += h
                                                    }
                                            },
                                            isEndOfWrapping: function(a) {
                                                return a === this._textLines.length - 1
                                            },
                                            missingNewlineOffset: function() {
                                                return 1
                                            },
                                            toString: function() {
                                                return "#<fabric.Text (" + this.complexity() + '): { "text": "' + this.text + '", "fontFamily": "' + this.fontFamily + '" }>'
                                            },
                                            _getCacheCanvasDimensions: function() {
                                                var a = this.callSuper("_getCacheCanvasDimensions"),
                                                    u = this.fontSize;
                                                return a.width += u * a.zoomX, a.height += u * a.zoomY, a
                                            },
                                            _render: function(a) {
                                                var u = this.path;
                                                u && !u.isNotVisible() && u._render(a), this._setTextStyles(a), this._renderTextLinesBackground(a), this._renderTextDecoration(a, "underline"), this._renderText(a), this._renderTextDecoration(a, "overline"), this._renderTextDecoration(a, "linethrough")
                                            },
                                            _renderText: function(a) {
                                                "stroke" === this.paintFirst ? (this._renderTextStroke(a), this._renderTextFill(a)) : (this._renderTextFill(a), this._renderTextStroke(a))
                                            },
                                            _setTextStyles: function(a, u, o) {
                                                if (a.textBaseline = "alphabetical", this.path) switch (this.pathAlign) {
                                                    case "center":
                                                        a.textBaseline = "middle";
                                                        break;
                                                    case "ascender":
                                                        a.textBaseline = "top";
                                                        break;
                                                    case "descender":
                                                        a.textBaseline = "bottom"
                                                }
                                                a.font = this._getFontDeclaration(u, o)
                                            },
                                            calcTextWidth: function() {
                                                for (var a = this.getLineWidth(0), u = 1, o = this._textLines.length; u < o; u++) {
                                                    var h = this.getLineWidth(u);
                                                    h > a && (a = h)
                                                }
                                                return a
                                            },
                                            _renderTextLine: function(a, u, o, h, p, l) {
                                                this._renderChars(a, u, o, h, p, l)
                                            },
                                            _renderTextLinesBackground: function(a) {
                                                if (this.textBackgroundColor || this.styleHas("textBackgroundColor")) {
                                                    for (var u, o, p, l, T, I, B, h = a.fillStyle, y = this._getLeftOffset(), C = this._getTopOffset(), D = 0, E = 0, F = this.path, G = 0, ie = this._textLines.length; G < ie; G++)
                                                        if (u = this.getHeightOfLine(G), this.textBackgroundColor || this.styleHas("textBackgroundColor", G)) {
                                                            p = this._textLines[G], o = this._getLineLeftOffset(G), E = 0, D = 0, l = this.getValueOfPropertyAt(G, 0, "textBackgroundColor");
                                                            for (var le = 0, ue = p.length; le < ue; le++) T = this.__charBounds[G][le], I = this.getValueOfPropertyAt(G, le, "textBackgroundColor"), F ? (a.save(), a.translate(T.renderLeft, T.renderTop), a.rotate(T.angle), a.fillStyle = I, I && a.fillRect(-T.width / 2, -u / this.lineHeight * (1 - this._fontSizeFraction), T.width, u / this.lineHeight), a.restore()) : I !== l ? (B = y + o + D, "rtl" === this.direction && (B = this.width - B - E), a.fillStyle = l, l && a.fillRect(B, C, E, u / this.lineHeight), D = T.left, E = T.width, l = I) : E += T.kernedWidth;
                                                            I && !F && (B = y + o + D, "rtl" === this.direction && (B = this.width - B - E), a.fillStyle = I, a.fillRect(B, C, E, u / this.lineHeight)), C += u
                                                        } else C += u;
                                                    a.fillStyle = h, this._removeShadow(a)
                                                }
                                            },
                                            getFontCache: function(a) {
                                                var u = a.fontFamily.toLowerCase();
                                                f.charWidthsCache[u] || (f.charWidthsCache[u] = {});
                                                var o = f.charWidthsCache[u],
                                                    h = a.fontStyle.toLowerCase() + "_" + (a.fontWeight + "").toLowerCase();
                                                return o[h] || (o[h] = {}), o[h]
                                            },
                                            _measureChar: function(a, u, o, h) {
                                                var E, T, I, B, p = this.getFontCache(u),
                                                    C = o + a,
                                                    D = this._getFontDeclaration(u) === this._getFontDeclaration(h),
                                                    F = u.fontSize / this.CACHE_FONT_SIZE;
                                                if (o && void 0 !== p[o] && (I = p[o]), void 0 !== p[a] && (B = E = p[a]), D && void 0 !== p[C] && (B = (T = p[C]) - I), void 0 === E || void 0 === I || void 0 === T) {
                                                    var G = this.getMeasuringContext();
                                                    this._setTextStyles(G, u, !0)
                                                }
                                                return void 0 === E && (B = E = G.measureText(a).width, p[a] = E), void 0 === I && D && o && (I = G.measureText(o).width, p[o] = I), D && void 0 === T && (T = G.measureText(C).width, p[C] = T, B = T - I), {
                                                    width: E * F,
                                                    kernedWidth: B * F
                                                }
                                            },
                                            getHeightOfChar: function(a, u) {
                                                return this.getValueOfPropertyAt(a, u, "fontSize")
                                            },
                                            measureLine: function(a) {
                                                var u = this._measureLine(a);
                                                return 0 !== this.charSpacing && (u.width -= this._getWidthOfCharSpacing()), u.width < 0 && (u.width = 0), u
                                            },
                                            _measureLine: function(a) {
                                                var o, h, l, y, T, I, u = 0,
                                                    p = this._textLines[a],
                                                    D = new Array(p.length),
                                                    E = 0,
                                                    F = this.path,
                                                    B = "right" === this.pathSide;
                                                for (this.__charBounds[a] = D, o = 0; o < p.length; o++) y = this._getGraphemeBox(h = p[o], a, o, l), D[o] = y, u += y.kernedWidth, l = h;
                                                if (D[o] = {
                                                        left: y ? y.left + y.width : 0,
                                                        width: 0,
                                                        kernedWidth: 0,
                                                        height: this.fontSize
                                                    }, F) {
                                                    switch (I = F.segmentsInfo[F.segmentsInfo.length - 1].length, (T = f.util.getPointOnPath(F.path, 0, F.segmentsInfo)).x += F.pathOffset.x, T.y += F.pathOffset.y, this.textAlign) {
                                                        case "left":
                                                            E = B ? I - u : 0;
                                                            break;
                                                        case "center":
                                                            E = (I - u) / 2;
                                                            break;
                                                        case "right":
                                                            E = B ? 0 : I - u
                                                    }
                                                    for (E += this.pathStartOffset * (B ? -1 : 1), o = B ? p.length - 1 : 0; B ? o >= 0 : o < p.length; B ? o-- : o++) E > I ? E %= I : E < 0 && (E += I), this._setGraphemeOnPath(E, y = D[o], T), E += y.kernedWidth
                                                }
                                                return {
                                                    width: u,
                                                    numOfSpaces: 0
                                                }
                                            },
                                            _setGraphemeOnPath: function(a, u, o) {
                                                var p = this.path,
                                                    l = f.util.getPointOnPath(p.path, a + u.kernedWidth / 2, p.segmentsInfo);
                                                u.renderLeft = l.x - o.x, u.renderTop = l.y - o.y, u.angle = l.angle + ("right" === this.pathSide ? Math.PI : 0)
                                            },
                                            _getGraphemeBox: function(a, u, o, h, p) {
                                                var T, l = this.getCompleteStyleDeclaration(u, o),
                                                    y = h ? this.getCompleteStyleDeclaration(u, o - 1) : {},
                                                    C = this._measureChar(a, l, h, y),
                                                    D = C.kernedWidth,
                                                    E = C.width;
                                                0 !== this.charSpacing && (E += T = this._getWidthOfCharSpacing(), D += T);
                                                var I = {
                                                    width: E,
                                                    left: 0,
                                                    height: l.fontSize,
                                                    kernedWidth: D,
                                                    deltaY: l.deltaY
                                                };
                                                if (o > 0 && !p) {
                                                    var F = this.__charBounds[u][o - 1];
                                                    I.left = F.left + F.width + C.kernedWidth - C.width
                                                }
                                                return I
                                            },
                                            getHeightOfLine: function(a) {
                                                if (this.__lineHeights[a]) return this.__lineHeights[a];
                                                for (var u = this._textLines[a], o = this.getHeightOfChar(a, 0), h = 1, p = u.length; h < p; h++) o = Math.max(this.getHeightOfChar(a, h), o);
                                                return this.__lineHeights[a] = o * this.lineHeight * this._fontSizeMult
                                            },
                                            calcTextHeight: function() {
                                                for (var a, u = 0, o = 0, h = this._textLines.length; o < h; o++) a = this.getHeightOfLine(o), u += o === h - 1 ? a / this.lineHeight : a;
                                                return u
                                            },
                                            _getLeftOffset: function() {
                                                return "ltr" === this.direction ? -this.width / 2 : this.width / 2
                                            },
                                            _getTopOffset: function() {
                                                return -this.height / 2
                                            },
                                            _renderTextCommon: function(a, u) {
                                                a.save();
                                                for (var o = 0, h = this._getLeftOffset(), p = this._getTopOffset(), l = 0, y = this._textLines.length; l < y; l++) {
                                                    var C = this.getHeightOfLine(l),
                                                        D = C / this.lineHeight,
                                                        E = this._getLineLeftOffset(l);
                                                    this._renderTextLine(u, a, this._textLines[l], h + E, p + o + D, l), o += C
                                                }
                                                a.restore()
                                            },
                                            _renderTextFill: function(a) {
                                                !this.fill && !this.styleHas("fill") || this._renderTextCommon(a, "fillText")
                                            },
                                            _renderTextStroke: function(a) {
                                                (!this.stroke || 0 === this.strokeWidth) && this.isEmptyStyles() || (this.shadow && !this.shadow.affectStroke && this._removeShadow(a), a.save(), this._setLineDash(a, this.strokeDashArray), a.beginPath(), this._renderTextCommon(a, "strokeText"), a.closePath(), a.restore())
                                            },
                                            _renderChars: function(a, u, o, h, p, l) {
                                                var D, E, I, B, y = this.getHeightOfLine(l),
                                                    C = -1 !== this.textAlign.indexOf("justify"),
                                                    T = "",
                                                    F = 0,
                                                    G = this.path,
                                                    ie = !C && 0 === this.charSpacing && this.isEmptyStyles(l) && !G,
                                                    le = "ltr" === this.direction,
                                                    ue = "ltr" === this.direction ? 1 : -1,
                                                    fe = u.canvas.getAttribute("dir");
                                                if (u.save(), fe !== this.direction && (u.canvas.setAttribute("dir", le ? "ltr" : "rtl"), u.direction = le ? "ltr" : "rtl", u.textAlign = le ? "left" : "right"), p -= y * this._fontSizeFraction / this.lineHeight, ie) return this._renderChar(a, u, l, 0, o.join(""), h, p, y), void u.restore();
                                                for (var ae = 0, _e = o.length - 1; ae <= _e; ae++) B = ae === _e || this.charSpacing || G, T += o[ae], I = this.__charBounds[l][ae], 0 === F ? (h += ue * (I.kernedWidth - I.width), F += I.width) : F += I.kernedWidth, C && !B && this._reSpaceAndTab.test(o[ae]) && (B = !0), B || (D = D || this.getCompleteStyleDeclaration(l, ae), E = this.getCompleteStyleDeclaration(l, ae + 1), B = this._hasStyleChanged(D, E)), B && (G ? (u.save(), u.translate(I.renderLeft, I.renderTop), u.rotate(I.angle), this._renderChar(a, u, l, ae, T, -F / 2, 0, y), u.restore()) : this._renderChar(a, u, l, ae, T, h, p, y), T = "", D = E, h += ue * F, F = 0);
                                                u.restore()
                                            },
                                            _applyPatternGradientTransformText: function(a) {
                                                var o, u = f.util.createCanvasElement(),
                                                    h = this.width + this.strokeWidth,
                                                    p = this.height + this.strokeWidth;
                                                return u.width = h, u.height = p, (o = u.getContext("2d")).beginPath(), o.moveTo(0, 0), o.lineTo(h, 0), o.lineTo(h, p), o.lineTo(0, p), o.closePath(), o.translate(h / 2, p / 2), o.fillStyle = a.toLive(o), this._applyPatternGradientTransform(o, a), o.fill(), o.createPattern(u, "no-repeat")
                                            },
                                            handleFiller: function(a, u, o) {
                                                var h, p;
                                                return o.toLive ? "percentage" === o.gradientUnits || o.gradientTransform || o.patternTransform ? (a.translate(h = -this.width / 2, p = -this.height / 2), a[u] = this._applyPatternGradientTransformText(o), {
                                                    offsetX: h,
                                                    offsetY: p
                                                }) : (a[u] = o.toLive(a, this), this._applyPatternGradientTransform(a, o)) : (a[u] = o, {
                                                    offsetX: 0,
                                                    offsetY: 0
                                                })
                                            },
                                            _setStrokeStyles: function(a, u) {
                                                return a.lineWidth = u.strokeWidth, a.lineCap = this.strokeLineCap, a.lineDashOffset = this.strokeDashOffset, a.lineJoin = this.strokeLineJoin, a.miterLimit = this.strokeMiterLimit, this.handleFiller(a, "strokeStyle", u.stroke)
                                            },
                                            _setFillStyles: function(a, u) {
                                                return this.handleFiller(a, "fillStyle", u.fill)
                                            },
                                            _renderChar: function(a, u, o, h, p, l, y) {
                                                var I, F, C = this._getStyleDeclaration(o, h),
                                                    D = this.getCompleteStyleDeclaration(o, h),
                                                    E = "fillText" === a && D.fill,
                                                    T = "strokeText" === a && D.stroke && D.strokeWidth;
                                                !T && !E || (u.save(), E && (I = this._setFillStyles(u, D)), T && (F = this._setStrokeStyles(u, D)), u.font = this._getFontDeclaration(D), C && C.textBackgroundColor && this._removeShadow(u), C && C.deltaY && (y += C.deltaY), E && u.fillText(p, l - I.offsetX, y - I.offsetY), T && u.strokeText(p, l - F.offsetX, y - F.offsetY), u.restore())
                                            },
                                            setSuperscript: function(a, u) {
                                                return this._setScript(a, u, this.superscript)
                                            },
                                            setSubscript: function(a, u) {
                                                return this._setScript(a, u, this.subscript)
                                            },
                                            _setScript: function(a, u, o) {
                                                var h = this.get2DCursorLocation(a, !0),
                                                    p = this.getValueOfPropertyAt(h.lineIndex, h.charIndex, "fontSize"),
                                                    l = this.getValueOfPropertyAt(h.lineIndex, h.charIndex, "deltaY");
                                                return this.setSelectionStyles({
                                                    fontSize: p * o.size,
                                                    deltaY: l + p * o.baseline
                                                }, a, u), this
                                            },
                                            _hasStyleChanged: function(a, u) {
                                                return a.fill !== u.fill || a.stroke !== u.stroke || a.strokeWidth !== u.strokeWidth || a.fontSize !== u.fontSize || a.fontFamily !== u.fontFamily || a.fontWeight !== u.fontWeight || a.fontStyle !== u.fontStyle || a.deltaY !== u.deltaY
                                            },
                                            _hasStyleChangedForSvg: function(a, u) {
                                                return this._hasStyleChanged(a, u) || a.overline !== u.overline || a.underline !== u.underline || a.linethrough !== u.linethrough
                                            },
                                            _getLineLeftOffset: function(a) {
                                                var u = this.getLineWidth(a),
                                                    o = this.width - u,
                                                    h = this.textAlign,
                                                    p = this.direction,
                                                    y = 0,
                                                    l = this.isEndOfWrapping(a);
                                                return "justify" === h || "justify-center" === h && !l || "justify-right" === h && !l || "justify-left" === h && !l ? 0 : ("center" === h && (y = o / 2), "right" === h && (y = o), "justify-center" === h && (y = o / 2), "justify-right" === h && (y = o), "rtl" === p && (y -= o), y)
                                            },
                                            _clearCache: function() {
                                                this.__lineWidths = [], this.__lineHeights = [], this.__charBounds = []
                                            },
                                            _shouldClearDimensionCache: function() {
                                                var a = this._forceClearCache;
                                                return a || (a = this.hasStateChanged("_dimensionAffectingProps")), a && (this.dirty = !0, this._forceClearCache = !1), a
                                            },
                                            getLineWidth: function(a) {
                                                if (void 0 !== this.__lineWidths[a]) return this.__lineWidths[a];
                                                var o = this.measureLine(a).width;
                                                return this.__lineWidths[a] = o, o
                                            },
                                            _getWidthOfCharSpacing: function() {
                                                return 0 !== this.charSpacing ? this.fontSize * this.charSpacing / 1e3 : 0
                                            },
                                            getValueOfPropertyAt: function(a, u, o) {
                                                var h = this._getStyleDeclaration(a, u);
                                                return h && void 0 !== h[o] ? h[o] : this[o]
                                            },
                                            _renderTextDecoration: function(a, u) {
                                                if (this[u] || this.styleHas(u)) {
                                                    for (var o, h, p, l, y, C, D, E, F, B, G, ie, le, ue, de, fe, T = this._getLeftOffset(), I = this._getTopOffset(), ae = this.path, _e = this._getWidthOfCharSpacing(), be = this.offsets[u], me = 0, O = this._textLines.length; me < O; me++)
                                                        if (o = this.getHeightOfLine(me), this[u] || this.styleHas(u, me)) {
                                                            D = this._textLines[me], ue = o / this.lineHeight, l = this._getLineLeftOffset(me), B = 0, G = 0, E = this.getValueOfPropertyAt(me, 0, u), fe = this.getValueOfPropertyAt(me, 0, "fill"), F = I + ue * (1 - this._fontSizeFraction), h = this.getHeightOfChar(me, 0), y = this.getValueOfPropertyAt(me, 0, "deltaY");
                                                            for (var N = 0, k = D.length; N < k; N++)
                                                                if (ie = this.__charBounds[me][N], le = this.getValueOfPropertyAt(me, N, u), de = this.getValueOfPropertyAt(me, N, "fill"), p = this.getHeightOfChar(me, N), C = this.getValueOfPropertyAt(me, N, "deltaY"), ae && le && de) a.save(), a.fillStyle = fe, a.translate(ie.renderLeft, ie.renderTop), a.rotate(ie.angle), a.fillRect(-ie.kernedWidth / 2, be * p + C, ie.kernedWidth, this.fontSize / 15), a.restore();
                                                                else if ((le !== E || de !== fe || p !== h || C !== y) && G > 0) {
                                                                var L = T + l + B;
                                                                "rtl" === this.direction && (L = this.width - L - G), E && fe && (a.fillStyle = fe, a.fillRect(L, F + be * h + y, G, this.fontSize / 15)), B = ie.left, G = ie.width, E = le, fe = de, h = p, y = C
                                                            } else G += ie.kernedWidth;
                                                            L = T + l + B, "rtl" === this.direction && (L = this.width - L - G), a.fillStyle = de, le && de && a.fillRect(L, F + be * h + y, G - _e, this.fontSize / 15), I += o
                                                        } else I += o;
                                                    this._removeShadow(a)
                                                }
                                            },
                                            _getFontDeclaration: function(a, u) {
                                                var o = a || this,
                                                    h = this.fontFamily,
                                                    p = f.Text.genericFonts.indexOf(h.toLowerCase()) > -1,
                                                    l = void 0 === h || h.indexOf("'") > -1 || h.indexOf(",") > -1 || h.indexOf('"') > -1 || p ? o.fontFamily : '"' + o.fontFamily + '"';
                                                return [f.isLikelyNode ? o.fontWeight : o.fontStyle, f.isLikelyNode ? o.fontStyle : o.fontWeight, u ? this.CACHE_FONT_SIZE + "px" : o.fontSize + "px", l].join(" ")
                                            },
                                            render: function(a) {
                                                !this.visible || this.canvas && this.canvas.skipOffscreen && !this.group && !this.isOnScreen() || (this._shouldClearDimensionCache() && this.initDimensions(), this.callSuper("render", a))
                                            },
                                            _splitTextIntoLines: function(a) {
                                                for (var u = a.split(this._reNewline), o = new Array(u.length), h = ["\n"], p = [], l = 0; l < u.length; l++) o[l] = f.util.string.graphemeSplit(u[l]), p = p.concat(o[l], h);
                                                return p.pop(), {
                                                    _unwrappedLines: o,
                                                    lines: u,
                                                    graphemeText: p,
                                                    graphemeLines: o
                                                }
                                            },
                                            toObject: function(a) {
                                                var u = d.concat(a),
                                                    o = this.callSuper("toObject", u);
                                                return o.styles = m(this.styles, !0), o.path && (o.path = this.path.toObject()), o
                                            },
                                            set: function(a, u) {
                                                this.callSuper("set", a, u);
                                                var o = !1,
                                                    h = !1;
                                                if ("object" == typeof a)
                                                    for (var p in a) "path" === p && this.setPathInfo(), o = o || -1 !== this._dimensionAffectingProps.indexOf(p), h = h || "path" === p;
                                                else o = -1 !== this._dimensionAffectingProps.indexOf(a), h = "path" === a;
                                                return h && this.setPathInfo(), o && (this.initDimensions(), this.setCoords()), this
                                            },
                                            complexity: function() {
                                                return 1
                                            }
                                        }), f.Text.ATTRIBUTE_NAMES = f.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor".split(" ")), f.Text.DEFAULT_SVG_FONT_SIZE = 16, f.Text.fromElement = function(a, u, o) {
                                            if (!a) return u(null);
                                            var h = f.parseAttributes(a, f.Text.ATTRIBUTE_NAMES),
                                                p = h.textAnchor || "left";
                                            if ((o = f.util.object.extend(o ? m(o) : {}, h)).top = o.top || 0, o.left = o.left || 0, h.textDecoration) {
                                                var l = h.textDecoration; - 1 !== l.indexOf("underline") && (o.underline = !0), -1 !== l.indexOf("overline") && (o.overline = !0), -1 !== l.indexOf("line-through") && (o.linethrough = !0), delete o.textDecoration
                                            }
                                            "dx" in h && (o.left += h.dx), "dy" in h && (o.top += h.dy), "fontSize" in o || (o.fontSize = f.Text.DEFAULT_SVG_FONT_SIZE);
                                            var y = "";
                                            "textContent" in a ? y = a.textContent : "firstChild" in a && null !== a.firstChild && "data" in a.firstChild && null !== a.firstChild.data && (y = a.firstChild.data), y = y.replace(/^\s+|\s+$|\n+/g, "").replace(/\s+/g, " ");
                                            var C = o.strokeWidth;
                                            o.strokeWidth = 0;
                                            var D = new f.Text(y, o),
                                                E = D.getScaledHeight() / D.height,
                                                I = ((D.height + D.strokeWidth) * D.lineHeight - D.height) * E,
                                                F = D.getScaledHeight() + I,
                                                B = 0;
                                            "center" === p && (B = D.getScaledWidth() / 2), "right" === p && (B = D.getScaledWidth()), D.set({
                                                left: D.left - B,
                                                top: D.top - (F - D.fontSize * (.07 + D._fontSizeFraction)) / D.lineHeight,
                                                strokeWidth: void 0 !== C ? C : 1
                                            }), u(D)
                                        }, f.Text.fromObject = function(a, u) {
                                            var o = m(a),
                                                h = a.path;
                                            return delete o.path, f.Object._fromObject("Text", o, function(p) {
                                                h ? f.Object._fromObject("Path", h, function(l) {
                                                    p.set("path", l), u(p)
                                                }, "path") : u(p)
                                            }, "text")
                                        }, f.Text.genericFonts = ["sans-serif", "serif", "cursive", "fantasy", "monospace"], f.util.createAccessors && f.util.createAccessors(f.Text)
                                    }
                                }(Ee), b.util.object.extend(b.Text.prototype, {
                                    isEmptyStyles: function(v) {
                                        if (!this.styles || void 0 !== v && !this.styles[v]) return !0;
                                        var f = void 0 === v ? this.styles : {
                                            line: this.styles[v]
                                        };
                                        for (var m in f)
                                            for (var d in f[m])
                                                for (var a in f[m][d]) return !1;
                                        return !0
                                    },
                                    styleHas: function(v, f) {
                                        if (!this.styles || !v || "" === v || void 0 !== f && !this.styles[f]) return !1;
                                        var m = void 0 === f ? this.styles : {
                                            0: this.styles[f]
                                        };
                                        for (var d in m)
                                            for (var a in m[d])
                                                if (void 0 !== m[d][a][v]) return !0;
                                        return !1
                                    },
                                    cleanStyle: function(v) {
                                        if (!this.styles || !v || "" === v) return !1;
                                        var d, a, f = this.styles,
                                            m = 0,
                                            u = !0,
                                            o = 0;
                                        for (var p in f) {
                                            for (var l in d = 0, f[p]) {
                                                var h;
                                                m++, (h = f[p][l]).hasOwnProperty(v) ? (a ? h[v] !== a && (u = !1) : a = h[v], h[v] === this[v] && delete h[v]) : u = !1, 0 !== Object.keys(h).length ? d++ : delete f[p][l]
                                            }
                                            0 === d && delete f[p]
                                        }
                                        for (var C = 0; C < this._textLines.length; C++) o += this._textLines[C].length;
                                        u && m === o && (this[v] = a, this.removeStyle(v))
                                    },
                                    removeStyle: function(v) {
                                        if (this.styles && v && "" !== v) {
                                            var m, d, a, f = this.styles;
                                            for (d in f) {
                                                for (a in m = f[d]) delete m[a][v], 0 === Object.keys(m[a]).length && delete m[a];
                                                0 === Object.keys(m).length && delete f[d]
                                            }
                                        }
                                    },
                                    _extendStyles: function(v, f) {
                                        var m = this.get2DCursorLocation(v);
                                        this._getLineStyle(m.lineIndex) || this._setLineStyle(m.lineIndex), this._getStyleDeclaration(m.lineIndex, m.charIndex) || this._setStyleDeclaration(m.lineIndex, m.charIndex, {}), b.util.object.extend(this._getStyleDeclaration(m.lineIndex, m.charIndex), f)
                                    },
                                    get2DCursorLocation: function(v, f) {
                                        void 0 === v && (v = this.selectionStart);
                                        for (var m = f ? this._unwrappedTextLines : this._textLines, d = m.length, a = 0; a < d; a++) {
                                            if (v <= m[a].length) return {
                                                lineIndex: a,
                                                charIndex: v
                                            };
                                            v -= m[a].length + this.missingNewlineOffset(a)
                                        }
                                        return {
                                            lineIndex: a - 1,
                                            charIndex: m[a - 1].length < v ? m[a - 1].length : v
                                        }
                                    },
                                    getSelectionStyles: function(v, f, m) {
                                        void 0 === v && (v = this.selectionStart || 0), void 0 === f && (f = this.selectionEnd || v);
                                        for (var d = [], a = v; a < f; a++) d.push(this.getStyleAtPosition(a, m));
                                        return d
                                    },
                                    getStyleAtPosition: function(v, f) {
                                        var m = this.get2DCursorLocation(v);
                                        return (f ? this.getCompleteStyleDeclaration(m.lineIndex, m.charIndex) : this._getStyleDeclaration(m.lineIndex, m.charIndex)) || {}
                                    },
                                    setSelectionStyles: function(v, f, m) {
                                        void 0 === f && (f = this.selectionStart || 0), void 0 === m && (m = this.selectionEnd || f);
                                        for (var d = f; d < m; d++) this._extendStyles(d, v);
                                        return this._forceClearCache = !0, this
                                    },
                                    _getStyleDeclaration: function(v, f) {
                                        var m = this.styles && this.styles[v];
                                        return m ? m[f] : null
                                    },
                                    getCompleteStyleDeclaration: function(v, f) {
                                        for (var a, m = this._getStyleDeclaration(v, f) || {}, d = {}, u = 0; u < this._styleProperties.length; u++) d[a = this._styleProperties[u]] = void 0 === m[a] ? this[a] : m[a];
                                        return d
                                    },
                                    _setStyleDeclaration: function(v, f, m) {
                                        this.styles[v][f] = m
                                    },
                                    _deleteStyleDeclaration: function(v, f) {
                                        delete this.styles[v][f]
                                    },
                                    _getLineStyle: function(v) {
                                        return !!this.styles[v]
                                    },
                                    _setLineStyle: function(v) {
                                        this.styles[v] = {}
                                    },
                                    _deleteLineStyle: function(v) {
                                        delete this.styles[v]
                                    }
                                }),
                                function() {
                                    function v(f) {
                                        f.textDecoration && (f.textDecoration.indexOf("underline") > -1 && (f.underline = !0), f.textDecoration.indexOf("line-through") > -1 && (f.linethrough = !0), f.textDecoration.indexOf("overline") > -1 && (f.overline = !0), delete f.textDecoration)
                                    }
                                    b.IText = b.util.createClass(b.Text, b.Observable, {
                                        type: "i-text",
                                        selectionStart: 0,
                                        selectionEnd: 0,
                                        selectionColor: "rgba(17,119,255,0.3)",
                                        isEditing: !1,
                                        editable: !0,
                                        editingBorderColor: "rgba(102,153,255,0.25)",
                                        cursorWidth: 2,
                                        cursorColor: "",
                                        cursorDelay: 1e3,
                                        cursorDuration: 600,
                                        caching: !0,
                                        hiddenTextareaContainer: null,
                                        _reSpace: /\s|\n/,
                                        _currentCursorOpacity: 0,
                                        _selectionDirection: null,
                                        _abortCursorAnimation: !1,
                                        __widthOfSpace: [],
                                        inCompositionMode: !1,
                                        initialize: function(f, m) {
                                            this.callSuper("initialize", f, m), this.initBehavior()
                                        },
                                        setSelectionStart: function(f) {
                                            f = Math.max(f, 0), this._updateAndFire("selectionStart", f)
                                        },
                                        setSelectionEnd: function(f) {
                                            f = Math.min(f, this.text.length), this._updateAndFire("selectionEnd", f)
                                        },
                                        _updateAndFire: function(f, m) {
                                            this[f] !== m && (this._fireSelectionChanged(), this[f] = m), this._updateTextarea()
                                        },
                                        _fireSelectionChanged: function() {
                                            this.fire("selection:changed"), this.canvas && this.canvas.fire("text:selection:changed", {
                                                target: this
                                            })
                                        },
                                        initDimensions: function() {
                                            this.isEditing && this.initDelayedCursor(), this.clearContextTop(), this.callSuper("initDimensions")
                                        },
                                        render: function(f) {
                                            this.clearContextTop(), this.callSuper("render", f), this.cursorOffsetCache = {}, this.renderCursorOrSelection()
                                        },
                                        _render: function(f) {
                                            this.callSuper("_render", f)
                                        },
                                        clearContextTop: function(f) {
                                            if (this.isEditing && this.canvas && this.canvas.contextTop) {
                                                var m = this.canvas.contextTop,
                                                    d = this.canvas.viewportTransform;
                                                m.save(), m.transform(d[0], d[1], d[2], d[3], d[4], d[5]), this.transform(m), this._clearTextArea(m), f || m.restore()
                                            }
                                        },
                                        renderCursorOrSelection: function() {
                                            if (this.isEditing && this.canvas && this.canvas.contextTop) {
                                                var f = this._getCursorBoundaries(),
                                                    m = this.canvas.contextTop;
                                                this.clearContextTop(!0), this.selectionStart === this.selectionEnd ? this.renderCursor(f, m) : this.renderSelection(f, m), m.restore()
                                            }
                                        },
                                        _clearTextArea: function(f) {
                                            var m = this.width + 4,
                                                d = this.height + 4;
                                            f.clearRect(-m / 2, -d / 2, m, d)
                                        },
                                        _getCursorBoundaries: function(f) {
                                            void 0 === f && (f = this.selectionStart);
                                            var m = this._getLeftOffset(),
                                                d = this._getTopOffset(),
                                                a = this._getCursorBoundariesOffsets(f);
                                            return {
                                                left: m,
                                                top: d,
                                                leftOffset: a.left,
                                                topOffset: a.top
                                            }
                                        },
                                        _getCursorBoundariesOffsets: function(f) {
                                            if (this.cursorOffsetCache && "top" in this.cursorOffsetCache) return this.cursorOffsetCache;
                                            var m, d, a, h, u = 0,
                                                o = 0,
                                                p = this.get2DCursorLocation(f);
                                            a = p.charIndex, d = p.lineIndex;
                                            for (var l = 0; l < d; l++) u += this.getHeightOfLine(l);
                                            m = this._getLineLeftOffset(d);
                                            var y = this.__charBounds[d][a];
                                            return y && (o = y.left), 0 !== this.charSpacing && a === this._textLines[d].length && (o -= this._getWidthOfCharSpacing()), h = {
                                                top: u,
                                                left: m + (o > 0 ? o : 0)
                                            }, "rtl" === this.direction && (h.left *= -1), this.cursorOffsetCache = h, this.cursorOffsetCache
                                        },
                                        renderCursor: function(f, m) {
                                            var d = this.get2DCursorLocation(),
                                                a = d.lineIndex,
                                                u = d.charIndex > 0 ? d.charIndex - 1 : 0,
                                                o = this.getValueOfPropertyAt(a, u, "fontSize"),
                                                h = this.scaleX * this.canvas.getZoom(),
                                                p = this.cursorWidth / h,
                                                l = f.topOffset,
                                                y = this.getValueOfPropertyAt(a, u, "deltaY");
                                            l += (1 - this._fontSizeFraction) * this.getHeightOfLine(a) / this.lineHeight - o * (1 - this._fontSizeFraction), this.inCompositionMode && this.renderSelection(f, m), m.fillStyle = this.cursorColor || this.getValueOfPropertyAt(a, u, "fill"), m.globalAlpha = this.__isMousedown ? 1 : this._currentCursorOpacity, m.fillRect(f.left + f.leftOffset - p / 2, l + f.top + y, p, o)
                                        },
                                        renderSelection: function(f, m) {
                                            for (var d = this.inCompositionMode ? this.hiddenTextarea.selectionStart : this.selectionStart, a = this.inCompositionMode ? this.hiddenTextarea.selectionEnd : this.selectionEnd, u = -1 !== this.textAlign.indexOf("justify"), o = this.get2DCursorLocation(d), h = this.get2DCursorLocation(a), p = o.lineIndex, l = h.lineIndex, y = o.charIndex < 0 ? 0 : o.charIndex, C = h.charIndex < 0 ? 0 : h.charIndex, D = p; D <= l; D++) {
                                                var I, E = this._getLineLeftOffset(D) || 0,
                                                    T = this.getHeightOfLine(D),
                                                    F = 0,
                                                    B = 0;
                                                if (D === p && (F = this.__charBounds[p][y].left), D >= p && D < l) B = u && !this.isEndOfWrapping(D) ? this.width : this.getLineWidth(D) || 5;
                                                else if (D === l)
                                                    if (0 === C) B = this.__charBounds[l][C].left;
                                                    else {
                                                        var G = this._getWidthOfCharSpacing();
                                                        B = this.__charBounds[l][C - 1].left + this.__charBounds[l][C - 1].width - G
                                                    }
                                                I = T, (this.lineHeight < 1 || D === l && this.lineHeight > 1) && (T /= this.lineHeight);
                                                var ie = f.left + E + F,
                                                    le = B - F,
                                                    ue = T,
                                                    de = 0;
                                                this.inCompositionMode ? (m.fillStyle = this.compositionColor || "black", ue = 1, de = T) : m.fillStyle = this.selectionColor, "rtl" === this.direction && (ie = this.width - ie - le), m.fillRect(ie, f.top + f.topOffset + de, le, ue), f.topOffset += I
                                            }
                                        },
                                        getCurrentCharFontSize: function() {
                                            var f = this._getCurrentCharIndex();
                                            return this.getValueOfPropertyAt(f.l, f.c, "fontSize")
                                        },
                                        getCurrentCharColor: function() {
                                            var f = this._getCurrentCharIndex();
                                            return this.getValueOfPropertyAt(f.l, f.c, "fill")
                                        },
                                        _getCurrentCharIndex: function() {
                                            var f = this.get2DCursorLocation(this.selectionStart, !0);
                                            return {
                                                l: f.lineIndex,
                                                c: f.charIndex > 0 ? f.charIndex - 1 : 0
                                            }
                                        }
                                    }), b.IText.fromObject = function(f, m) {
                                        if (v(f), f.styles)
                                            for (var d in f.styles)
                                                for (var a in f.styles[d]) v(f.styles[d][a]);
                                        b.Object._fromObject("IText", f, m, "text")
                                    }
                                }(),
                                function() {
                                    var v = b.util.object.clone;
                                    b.util.object.extend(b.IText.prototype, {
                                        initBehavior: function() {
                                            this.initAddedHandler(), this.initRemovedHandler(), this.initCursorSelectionHandlers(), this.initDoubleClickSimulation(), this.mouseMoveHandler = this.mouseMoveHandler.bind(this)
                                        },
                                        onDeselect: function() {
                                            this.isEditing && this.exitEditing(), this.selected = !1
                                        },
                                        initAddedHandler: function() {
                                            var f = this;
                                            this.on("added", function() {
                                                var m = f.canvas;
                                                m && (m._hasITextHandlers || (m._hasITextHandlers = !0, f._initCanvasHandlers(m)), m._iTextInstances = m._iTextInstances || [], m._iTextInstances.push(f))
                                            })
                                        },
                                        initRemovedHandler: function() {
                                            var f = this;
                                            this.on("removed", function() {
                                                var m = f.canvas;
                                                m && (m._iTextInstances = m._iTextInstances || [], b.util.removeFromArray(m._iTextInstances, f), 0 === m._iTextInstances.length && (m._hasITextHandlers = !1, f._removeCanvasHandlers(m)))
                                            })
                                        },
                                        _initCanvasHandlers: function(f) {
                                            f._mouseUpITextHandler = function() {
                                                f._iTextInstances && f._iTextInstances.forEach(function(m) {
                                                    m.__isMousedown = !1
                                                })
                                            }, f.on("mouse:up", f._mouseUpITextHandler)
                                        },
                                        _removeCanvasHandlers: function(f) {
                                            f.off("mouse:up", f._mouseUpITextHandler)
                                        },
                                        _tick: function() {
                                            this._currentTickState = this._animateCursor(this, 1, this.cursorDuration, "_onTickComplete")
                                        },
                                        _animateCursor: function(f, m, d, a) {
                                            var u;
                                            return u = {
                                                isAborted: !1,
                                                abort: function() {
                                                    this.isAborted = !0
                                                }
                                            }, f.animate("_currentCursorOpacity", m, {
                                                duration: d,
                                                onComplete: function() {
                                                    u.isAborted || f[a]()
                                                },
                                                onChange: function() {
                                                    f.canvas && f.selectionStart === f.selectionEnd && f.renderCursorOrSelection()
                                                },
                                                abort: function() {
                                                    return u.isAborted
                                                }
                                            }), u
                                        },
                                        _onTickComplete: function() {
                                            var f = this;
                                            this._cursorTimeout1 && clearTimeout(this._cursorTimeout1), this._cursorTimeout1 = setTimeout(function() {
                                                f._currentTickCompleteState = f._animateCursor(f, 0, this.cursorDuration / 2, "_tick")
                                            }, 100)
                                        },
                                        initDelayedCursor: function(f) {
                                            var m = this,
                                                d = f ? 0 : this.cursorDelay;
                                            this.abortCursorAnimation(), this._currentCursorOpacity = 1, this._cursorTimeout2 = setTimeout(function() {
                                                m._tick()
                                            }, d)
                                        },
                                        abortCursorAnimation: function() {
                                            var f = this._currentTickState || this._currentTickCompleteState,
                                                m = this.canvas;
                                            this._currentTickState && this._currentTickState.abort(), this._currentTickCompleteState && this._currentTickCompleteState.abort(), clearTimeout(this._cursorTimeout1), clearTimeout(this._cursorTimeout2), this._currentCursorOpacity = 0, f && m && m.clearContext(m.contextTop || m.contextContainer)
                                        },
                                        selectAll: function() {
                                            return this.selectionStart = 0, this.selectionEnd = this._text.length, this._fireSelectionChanged(), this._updateTextarea(), this
                                        },
                                        getSelectedText: function() {
                                            return this._text.slice(this.selectionStart, this.selectionEnd).join("")
                                        },
                                        findWordBoundaryLeft: function(f) {
                                            var m = 0,
                                                d = f - 1;
                                            if (this._reSpace.test(this._text[d]))
                                                for (; this._reSpace.test(this._text[d]);) m++, d--;
                                            for (;
                                                /\S/.test(this._text[d]) && d > -1;) m++, d--;
                                            return f - m
                                        },
                                        findWordBoundaryRight: function(f) {
                                            var m = 0,
                                                d = f;
                                            if (this._reSpace.test(this._text[d]))
                                                for (; this._reSpace.test(this._text[d]);) m++, d++;
                                            for (;
                                                /\S/.test(this._text[d]) && d < this._text.length;) m++, d++;
                                            return f + m
                                        },
                                        findLineBoundaryLeft: function(f) {
                                            for (var m = 0, d = f - 1; !/\n/.test(this._text[d]) && d > -1;) m++, d--;
                                            return f - m
                                        },
                                        findLineBoundaryRight: function(f) {
                                            for (var m = 0, d = f; !/\n/.test(this._text[d]) && d < this._text.length;) m++, d++;
                                            return f + m
                                        },
                                        searchWordBoundary: function(f, m) {
                                            for (var d = this._text, a = this._reSpace.test(d[f]) ? f - 1 : f, u = d[a], o = b.reNonWord; !o.test(u) && a > 0 && a < d.length;) u = d[a += m];
                                            return o.test(u) && (a += 1 === m ? 0 : 1), a
                                        },
                                        selectWord: function(f) {
                                            var m = this.searchWordBoundary(f = f || this.selectionStart, -1),
                                                d = this.searchWordBoundary(f, 1);
                                            this.selectionStart = m, this.selectionEnd = d, this._fireSelectionChanged(), this._updateTextarea(), this.renderCursorOrSelection()
                                        },
                                        selectLine: function(f) {
                                            var m = this.findLineBoundaryLeft(f = f || this.selectionStart),
                                                d = this.findLineBoundaryRight(f);
                                            return this.selectionStart = m, this.selectionEnd = d, this._fireSelectionChanged(), this._updateTextarea(), this
                                        },
                                        enterEditing: function(f) {
                                            if (!this.isEditing && this.editable) return this.canvas && (this.canvas.calcOffset(), this.exitEditingOnOthers(this.canvas)), this.isEditing = !0, this.initHiddenTextarea(f), this.hiddenTextarea.focus(), this.hiddenTextarea.value = this.text, this._updateTextarea(), this._saveEditingProps(), this._setEditingProps(), this._textBeforeEdit = this.text, this._tick(), this.fire("editing:entered"), this._fireSelectionChanged(), this.canvas ? (this.canvas.fire("text:editing:entered", {
                                                target: this
                                            }), this.initMouseMoveHandler(), this.canvas.requestRenderAll(), this) : this
                                        },
                                        exitEditingOnOthers: function(f) {
                                            f._iTextInstances && f._iTextInstances.forEach(function(m) {
                                                m.selected = !1, m.isEditing && m.exitEditing()
                                            })
                                        },
                                        initMouseMoveHandler: function() {
                                            this.canvas.on("mouse:move", this.mouseMoveHandler)
                                        },
                                        mouseMoveHandler: function(f) {
                                            if (this.__isMousedown && this.isEditing) {
                                                var m = this.getSelectionStartFromPointer(f.e),
                                                    d = this.selectionStart,
                                                    a = this.selectionEnd;
                                                (m !== this.__selectionStartOnMouseDown || d === a) && (d === m || a === m) || (m > this.__selectionStartOnMouseDown ? (this.selectionStart = this.__selectionStartOnMouseDown, this.selectionEnd = m) : (this.selectionStart = m, this.selectionEnd = this.__selectionStartOnMouseDown), (this.selectionStart !== d || this.selectionEnd !== a) && (this.restartCursorIfNeeded(), this._fireSelectionChanged(), this._updateTextarea(), this.renderCursorOrSelection()))
                                            }
                                        },
                                        _setEditingProps: function() {
                                            this.hoverCursor = "text", this.canvas && (this.canvas.defaultCursor = this.canvas.moveCursor = "text"), this.borderColor = this.editingBorderColor, this.hasControls = this.selectable = !1, this.lockMovementX = this.lockMovementY = !0
                                        },
                                        fromStringToGraphemeSelection: function(f, m, d) {
                                            var a = d.slice(0, f),
                                                u = b.util.string.graphemeSplit(a).length;
                                            if (f === m) return {
                                                selectionStart: u,
                                                selectionEnd: u
                                            };
                                            var o = d.slice(f, m);
                                            return {
                                                selectionStart: u,
                                                selectionEnd: u + b.util.string.graphemeSplit(o).length
                                            }
                                        },
                                        fromGraphemeToStringSelection: function(f, m, d) {
                                            var u = d.slice(0, f).join("").length;
                                            return f === m ? {
                                                selectionStart: u,
                                                selectionEnd: u
                                            } : {
                                                selectionStart: u,
                                                selectionEnd: u + d.slice(f, m).join("").length
                                            }
                                        },
                                        _updateTextarea: function() {
                                            if (this.cursorOffsetCache = {}, this.hiddenTextarea) {
                                                if (!this.inCompositionMode) {
                                                    var f = this.fromGraphemeToStringSelection(this.selectionStart, this.selectionEnd, this._text);
                                                    this.hiddenTextarea.selectionStart = f.selectionStart, this.hiddenTextarea.selectionEnd = f.selectionEnd
                                                }
                                                this.updateTextareaPosition()
                                            }
                                        },
                                        updateFromTextArea: function() {
                                            if (this.hiddenTextarea) {
                                                this.cursorOffsetCache = {}, this.text = this.hiddenTextarea.value, this._shouldClearDimensionCache() && (this.initDimensions(), this.setCoords());
                                                var f = this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart, this.hiddenTextarea.selectionEnd, this.hiddenTextarea.value);
                                                this.selectionEnd = this.selectionStart = f.selectionEnd, this.inCompositionMode || (this.selectionStart = f.selectionStart), this.updateTextareaPosition()
                                            }
                                        },
                                        updateTextareaPosition: function() {
                                            if (this.selectionStart === this.selectionEnd) {
                                                var f = this._calcTextareaPosition();
                                                this.hiddenTextarea.style.left = f.left, this.hiddenTextarea.style.top = f.top
                                            }
                                        },
                                        _calcTextareaPosition: function() {
                                            if (!this.canvas) return {
                                                x: 1,
                                                y: 1
                                            };
                                            var f = this.inCompositionMode ? this.compositionStart : this.selectionStart,
                                                m = this._getCursorBoundaries(f),
                                                d = this.get2DCursorLocation(f),
                                                o = this.getValueOfPropertyAt(d.lineIndex, d.charIndex, "fontSize") * this.lineHeight,
                                                h = m.leftOffset,
                                                p = this.calcTransformMatrix(),
                                                l = {
                                                    x: m.left + h,
                                                    y: m.top + m.topOffset + o
                                                },
                                                y = this.canvas.getRetinaScaling(),
                                                C = this.canvas.upperCanvasEl,
                                                D = C.width / y,
                                                E = C.height / y,
                                                T = D - o,
                                                I = E - o,
                                                F = C.clientWidth / D,
                                                B = C.clientHeight / E;
                                            return l = b.util.transformPoint(l, p), (l = b.util.transformPoint(l, this.canvas.viewportTransform)).x *= F, l.y *= B, l.x < 0 && (l.x = 0), l.x > T && (l.x = T), l.y < 0 && (l.y = 0), l.y > I && (l.y = I), l.x += this.canvas._offset.left, l.y += this.canvas._offset.top, {
                                                left: l.x + "px",
                                                top: l.y + "px",
                                                fontSize: o + "px",
                                                charHeight: o
                                            }
                                        },
                                        _saveEditingProps: function() {
                                            this._savedProps = {
                                                hasControls: this.hasControls,
                                                borderColor: this.borderColor,
                                                lockMovementX: this.lockMovementX,
                                                lockMovementY: this.lockMovementY,
                                                hoverCursor: this.hoverCursor,
                                                selectable: this.selectable,
                                                defaultCursor: this.canvas && this.canvas.defaultCursor,
                                                moveCursor: this.canvas && this.canvas.moveCursor
                                            }
                                        },
                                        _restoreEditingProps: function() {
                                            !this._savedProps || (this.hoverCursor = this._savedProps.hoverCursor, this.hasControls = this._savedProps.hasControls, this.borderColor = this._savedProps.borderColor, this.selectable = this._savedProps.selectable, this.lockMovementX = this._savedProps.lockMovementX, this.lockMovementY = this._savedProps.lockMovementY, this.canvas && (this.canvas.defaultCursor = this._savedProps.defaultCursor, this.canvas.moveCursor = this._savedProps.moveCursor))
                                        },
                                        exitEditing: function() {
                                            var f = this._textBeforeEdit !== this.text,
                                                m = this.hiddenTextarea;
                                            return this.selected = !1, this.isEditing = !1, this.selectionEnd = this.selectionStart, m && (m.blur && m.blur(), m.parentNode && m.parentNode.removeChild(m)), this.hiddenTextarea = null, this.abortCursorAnimation(), this._restoreEditingProps(), this._currentCursorOpacity = 0, this._shouldClearDimensionCache() && (this.initDimensions(), this.setCoords()), this.fire("editing:exited"), f && this.fire("modified"), this.canvas && (this.canvas.off("mouse:move", this.mouseMoveHandler), this.canvas.fire("text:editing:exited", {
                                                target: this
                                            }), f && this.canvas.fire("object:modified", {
                                                target: this
                                            })), this
                                        },
                                        _removeExtraneousStyles: function() {
                                            for (var f in this.styles) this._textLines[f] || delete this.styles[f]
                                        },
                                        removeStyleFromTo: function(f, m) {
                                            var l, y, d = this.get2DCursorLocation(f, !0),
                                                a = this.get2DCursorLocation(m, !0),
                                                u = d.lineIndex,
                                                o = d.charIndex,
                                                h = a.lineIndex,
                                                p = a.charIndex;
                                            if (u !== h) {
                                                if (this.styles[u])
                                                    for (l = o; l < this._unwrappedTextLines[u].length; l++) delete this.styles[u][l];
                                                if (this.styles[h])
                                                    for (l = p; l < this._unwrappedTextLines[h].length; l++)(y = this.styles[h][l]) && (this.styles[u] || (this.styles[u] = {}), this.styles[u][o + l - p] = y);
                                                for (l = u + 1; l <= h; l++) delete this.styles[l];
                                                this.shiftLineStyles(h, u - h)
                                            } else if (this.styles[u]) {
                                                y = this.styles[u];
                                                var D, E, C = p - o;
                                                for (l = o; l < p; l++) delete y[l];
                                                for (E in this.styles[u])(D = parseInt(E, 10)) >= p && (y[D - C] = y[E], delete y[E])
                                            }
                                        },
                                        shiftLineStyles: function(f, m) {
                                            var d = v(this.styles);
                                            for (var a in this.styles) {
                                                var u = parseInt(a, 10);
                                                u > f && (this.styles[u + m] = d[u], d[u - m] || delete this.styles[u])
                                            }
                                        },
                                        restartCursorIfNeeded: function() {
                                            (!this._currentTickState || this._currentTickState.isAborted || !this._currentTickCompleteState || this._currentTickCompleteState.isAborted) && this.initDelayedCursor()
                                        },
                                        insertNewlineStyleObject: function(f, m, d, a) {
                                            var u, o = {},
                                                h = !1,
                                                p = this._unwrappedTextLines[f].length === m;
                                            for (var l in d || (d = 1), this.shiftLineStyles(f, d), this.styles[f] && (u = this.styles[f][0 === m ? m : m - 1]), this.styles[f]) {
                                                var y = parseInt(l, 10);
                                                y >= m && (h = !0, o[y - m] = this.styles[f][l], p && 0 === m || delete this.styles[f][l])
                                            }
                                            var C = !1;
                                            for (h && !p && (this.styles[f + d] = o, C = !0), C && d--; d > 0;) a && a[d - 1] ? this.styles[f + d] = {
                                                0: v(a[d - 1])
                                            } : u ? this.styles[f + d] = {
                                                0: v(u)
                                            } : delete this.styles[f + d], d--;
                                            this._forceClearCache = !0
                                        },
                                        insertCharStyleObject: function(f, m, d, a) {
                                            this.styles || (this.styles = {});
                                            var u = this.styles[f],
                                                o = u ? v(u) : {};
                                            for (var h in d || (d = 1), o) {
                                                var p = parseInt(h, 10);
                                                p >= m && (u[p + d] = o[p], o[p - d] || delete u[p])
                                            }
                                            if (this._forceClearCache = !0, a)
                                                for (; d--;) !Object.keys(a[d]).length || (this.styles[f] || (this.styles[f] = {}), this.styles[f][m + d] = v(a[d]));
                                            else if (u)
                                                for (var l = u[m ? m - 1 : 1]; l && d--;) this.styles[f][m + d] = v(l)
                                        },
                                        insertNewStyleBlock: function(f, m, d) {
                                            for (var a = this.get2DCursorLocation(m, !0), u = [0], o = 0, h = 0; h < f.length; h++) "\n" === f[h] ? u[++o] = 0 : u[o]++;
                                            for (u[0] > 0 && (this.insertCharStyleObject(a.lineIndex, a.charIndex, u[0], d), d = d && d.slice(u[0] + 1)), o && this.insertNewlineStyleObject(a.lineIndex, a.charIndex + u[0], o), h = 1; h < o; h++) u[h] > 0 ? this.insertCharStyleObject(a.lineIndex + h, 0, u[h], d) : d && this.styles[a.lineIndex + h] && d[0] && (this.styles[a.lineIndex + h][0] = d[0]), d = d && d.slice(u[h] + 1);
                                            u[h] > 0 && this.insertCharStyleObject(a.lineIndex + h, 0, u[h], d)
                                        },
                                        setSelectionStartEndWithShift: function(f, m, d) {
                                            d <= f ? (m === f ? this._selectionDirection = "left" : "right" === this._selectionDirection && (this._selectionDirection = "left", this.selectionEnd = f), this.selectionStart = d) : d > f && d < m ? "right" === this._selectionDirection ? this.selectionEnd = d : this.selectionStart = d : (m === f ? this._selectionDirection = "right" : "left" === this._selectionDirection && (this._selectionDirection = "right", this.selectionStart = m), this.selectionEnd = d)
                                        },
                                        setSelectionInBoundaries: function() {
                                            var f = this.text.length;
                                            this.selectionStart > f ? this.selectionStart = f : this.selectionStart < 0 && (this.selectionStart = 0), this.selectionEnd > f ? this.selectionEnd = f : this.selectionEnd < 0 && (this.selectionEnd = 0)
                                        }
                                    })
                                }(), b.util.object.extend(b.IText.prototype, {
                                    initDoubleClickSimulation: function() {
                                        this.__lastClickTime = +new Date, this.__lastLastClickTime = +new Date, this.__lastPointer = {}, this.on("mousedown", this.onMouseDown)
                                    },
                                    onMouseDown: function(v) {
                                        if (this.canvas) {
                                            this.__newClickTime = +new Date;
                                            var f = v.pointer;
                                            this.isTripleClick(f) && (this.fire("tripleclick", v), this._stopEvent(v.e)), this.__lastLastClickTime = this.__lastClickTime, this.__lastClickTime = this.__newClickTime, this.__lastPointer = f, this.__lastIsEditing = this.isEditing, this.__lastSelected = this.selected
                                        }
                                    },
                                    isTripleClick: function(v) {
                                        return this.__newClickTime - this.__lastClickTime < 500 && this.__lastClickTime - this.__lastLastClickTime < 500 && this.__lastPointer.x === v.x && this.__lastPointer.y === v.y
                                    },
                                    _stopEvent: function(v) {
                                        v.preventDefault && v.preventDefault(), v.stopPropagation && v.stopPropagation()
                                    },
                                    initCursorSelectionHandlers: function() {
                                        this.initMousedownHandler(), this.initMouseupHandler(), this.initClicks()
                                    },
                                    doubleClickHandler: function(v) {
                                        !this.isEditing || this.selectWord(this.getSelectionStartFromPointer(v.e))
                                    },
                                    tripleClickHandler: function(v) {
                                        !this.isEditing || this.selectLine(this.getSelectionStartFromPointer(v.e))
                                    },
                                    initClicks: function() {
                                        this.on("mousedblclick", this.doubleClickHandler), this.on("tripleclick", this.tripleClickHandler)
                                    },
                                    _mouseDownHandler: function(v) {
                                        !this.canvas || !this.editable || v.e.button && 1 !== v.e.button || (this.__isMousedown = !0, this.selected && (this.inCompositionMode = !1, this.setCursorByClick(v.e)), this.isEditing && (this.__selectionStartOnMouseDown = this.selectionStart, this.selectionStart === this.selectionEnd && this.abortCursorAnimation(), this.renderCursorOrSelection()))
                                    },
                                    _mouseDownHandlerBefore: function(v) {
                                        !this.canvas || !this.editable || v.e.button && 1 !== v.e.button || (this.selected = this === this.canvas._activeObject)
                                    },
                                    initMousedownHandler: function() {
                                        this.on("mousedown", this._mouseDownHandler), this.on("mousedown:before", this._mouseDownHandlerBefore)
                                    },
                                    initMouseupHandler: function() {
                                        this.on("mouseup", this.mouseUpHandler)
                                    },
                                    mouseUpHandler: function(v) {
                                        if (this.__isMousedown = !1, !(!this.editable || this.group || v.transform && v.transform.actionPerformed || v.e.button && 1 !== v.e.button)) {
                                            if (this.canvas) {
                                                var f = this.canvas._activeObject;
                                                if (f && f !== this) return
                                            }
                                            this.__lastSelected && !this.__corner ? (this.selected = !1, this.__lastSelected = !1, this.enterEditing(v.e), this.selectionStart === this.selectionEnd ? this.initDelayedCursor(!0) : this.renderCursorOrSelection()) : this.selected = !0
                                        }
                                    },
                                    setCursorByClick: function(v) {
                                        var f = this.getSelectionStartFromPointer(v);
                                        v.shiftKey ? this.setSelectionStartEndWithShift(this.selectionStart, this.selectionEnd, f) : (this.selectionStart = f, this.selectionEnd = f), this.isEditing && (this._fireSelectionChanged(), this._updateTextarea())
                                    },
                                    getSelectionStartFromPointer: function(v) {
                                        for (var p, f = this.getLocalPointer(v), m = 0, d = 0, a = 0, u = 0, o = 0, l = 0, y = this._textLines.length; l < y && a <= f.y; l++) a += this.getHeightOfLine(l) * this.scaleY, o = l, l > 0 && (u += this._textLines[l - 1].length + this.missingNewlineOffset(l - 1));
                                        d = this._getLineLeftOffset(o) * this.scaleX, p = this._textLines[o], "rtl" === this.direction && (f.x = this.width * this.scaleX - f.x + d);
                                        for (var C = 0, D = p.length; C < D && (m = d, (d += this.__charBounds[o][C].kernedWidth * this.scaleX) <= f.x); C++) u++;
                                        return this._getNewSelectionStartFromOffset(f, m, d, u, D)
                                    },
                                    _getNewSelectionStartFromOffset: function(v, f, m, d, a) {
                                        var o = m - v.x,
                                            p = d + (o > v.x - f || o < 0 ? 0 : 1);
                                        return this.flipX && (p = a - p), p > this._text.length && (p = this._text.length), p
                                    }
                                }), b.util.object.extend(b.IText.prototype, {
                                    initHiddenTextarea: function() {
                                        this.hiddenTextarea = b.document.createElement("textarea"), this.hiddenTextarea.setAttribute("autocapitalize", "off"), this.hiddenTextarea.setAttribute("autocorrect", "off"), this.hiddenTextarea.setAttribute("autocomplete", "off"), this.hiddenTextarea.setAttribute("spellcheck", "false"), this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea", ""), this.hiddenTextarea.setAttribute("wrap", "off");
                                        var v = this._calcTextareaPosition();
                                        this.hiddenTextarea.style.cssText = "position: absolute; top: " + v.top + "; left: " + v.left + "; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding\uff70top: " + v.fontSize + ";", this.hiddenTextareaContainer ? this.hiddenTextareaContainer.appendChild(this.hiddenTextarea) : b.document.body.appendChild(this.hiddenTextarea), b.util.addListener(this.hiddenTextarea, "keydown", this.onKeyDown.bind(this)), b.util.addListener(this.hiddenTextarea, "keyup", this.onKeyUp.bind(this)), b.util.addListener(this.hiddenTextarea, "input", this.onInput.bind(this)), b.util.addListener(this.hiddenTextarea, "copy", this.copy.bind(this)), b.util.addListener(this.hiddenTextarea, "cut", this.copy.bind(this)), b.util.addListener(this.hiddenTextarea, "paste", this.paste.bind(this)), b.util.addListener(this.hiddenTextarea, "compositionstart", this.onCompositionStart.bind(this)), b.util.addListener(this.hiddenTextarea, "compositionupdate", this.onCompositionUpdate.bind(this)), b.util.addListener(this.hiddenTextarea, "compositionend", this.onCompositionEnd.bind(this)), !this._clickHandlerInitialized && this.canvas && (b.util.addListener(this.canvas.upperCanvasEl, "click", this.onClick.bind(this)), this._clickHandlerInitialized = !0)
                                    },
                                    keysMap: {
                                        9: "exitEditing",
                                        27: "exitEditing",
                                        33: "moveCursorUp",
                                        34: "moveCursorDown",
                                        35: "moveCursorRight",
                                        36: "moveCursorLeft",
                                        37: "moveCursorLeft",
                                        38: "moveCursorUp",
                                        39: "moveCursorRight",
                                        40: "moveCursorDown"
                                    },
                                    keysMapRtl: {
                                        9: "exitEditing",
                                        27: "exitEditing",
                                        33: "moveCursorUp",
                                        34: "moveCursorDown",
                                        35: "moveCursorLeft",
                                        36: "moveCursorRight",
                                        37: "moveCursorRight",
                                        38: "moveCursorUp",
                                        39: "moveCursorLeft",
                                        40: "moveCursorDown"
                                    },
                                    ctrlKeysMapUp: {
                                        67: "copy",
                                        88: "cut"
                                    },
                                    ctrlKeysMapDown: {
                                        65: "selectAll"
                                    },
                                    onClick: function() {
                                        this.hiddenTextarea && this.hiddenTextarea.focus()
                                    },
                                    onKeyDown: function(v) {
                                        if (this.isEditing) {
                                            var f = "rtl" === this.direction ? this.keysMapRtl : this.keysMap;
                                            if (v.keyCode in f) this[f[v.keyCode]](v);
                                            else {
                                                if (!(v.keyCode in this.ctrlKeysMapDown) || !v.ctrlKey && !v.metaKey) return;
                                                this[this.ctrlKeysMapDown[v.keyCode]](v)
                                            }
                                            v.stopImmediatePropagation(), v.preventDefault(), v.keyCode >= 33 && v.keyCode <= 40 ? (this.inCompositionMode = !1, this.clearContextTop(), this.renderCursorOrSelection()) : this.canvas && this.canvas.requestRenderAll()
                                        }
                                    },
                                    onKeyUp: function(v) {
                                        !this.isEditing || this._copyDone || this.inCompositionMode ? this._copyDone = !1 : v.keyCode in this.ctrlKeysMapUp && (v.ctrlKey || v.metaKey) && (this[this.ctrlKeysMapUp[v.keyCode]](v), v.stopImmediatePropagation(), v.preventDefault(), this.canvas && this.canvas.requestRenderAll())
                                    },
                                    onInput: function(v) {
                                        var f = this.fromPaste;
                                        if (this.fromPaste = !1, v && v.stopPropagation(), this.isEditing) {
                                            var u, o, C, D, E, m = this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,
                                                d = this._text.length,
                                                a = m.length,
                                                h = a - d,
                                                p = this.selectionStart,
                                                l = this.selectionEnd,
                                                y = p !== l;
                                            if ("" === this.hiddenTextarea.value) return this.styles = {}, this.updateFromTextArea(), this.fire("changed"), void(this.canvas && (this.canvas.fire("text:changed", {
                                                target: this
                                            }), this.canvas.requestRenderAll()));
                                            var T = this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart, this.hiddenTextarea.selectionEnd, this.hiddenTextarea.value),
                                                I = p > T.selectionStart;
                                            y ? (u = this._text.slice(p, l), h += l - p) : a < d && (u = I ? this._text.slice(l + h, l) : this._text.slice(p, p - h)), o = m.slice(T.selectionEnd - h, T.selectionEnd), u && u.length && (o.length && (C = this.getSelectionStyles(p, p + 1, !1), C = o.map(function() {
                                                return C[0]
                                            })), y ? (D = p, E = l) : I ? (D = l - u.length, E = l) : (D = l, E = l + u.length), this.removeStyleFromTo(D, E)), o.length && (f && o.join("") === b.copiedText && !b.disableStyleCopyPaste && (C = b.copiedTextStyle), this.insertNewStyleBlock(o, p, C)), this.updateFromTextArea(), this.fire("changed"), this.canvas && (this.canvas.fire("text:changed", {
                                                target: this
                                            }), this.canvas.requestRenderAll())
                                        }
                                    },
                                    onCompositionStart: function() {
                                        this.inCompositionMode = !0
                                    },
                                    onCompositionEnd: function() {
                                        this.inCompositionMode = !1
                                    },
                                    onCompositionUpdate: function(v) {
                                        this.compositionStart = v.target.selectionStart, this.compositionEnd = v.target.selectionEnd, this.updateTextareaPosition()
                                    },
                                    copy: function() {
                                        this.selectionStart !== this.selectionEnd && (b.copiedText = this.getSelectedText(), b.copiedTextStyle = b.disableStyleCopyPaste ? null : this.getSelectionStyles(this.selectionStart, this.selectionEnd, !0), this._copyDone = !0)
                                    },
                                    paste: function() {
                                        this.fromPaste = !0
                                    },
                                    _getClipboardData: function(v) {
                                        return v && v.clipboardData || b.window.clipboardData
                                    },
                                    _getWidthBeforeCursor: function(v, f) {
                                        var d, m = this._getLineLeftOffset(v);
                                        return f > 0 && (m += (d = this.__charBounds[v][f - 1]).left + d.width), m
                                    },
                                    getDownCursorOffset: function(v, f) {
                                        var m = this._getSelectionForOffset(v, f),
                                            d = this.get2DCursorLocation(m),
                                            a = d.lineIndex;
                                        if (a === this._textLines.length - 1 || v.metaKey || 34 === v.keyCode) return this._text.length - m;
                                        var u = d.charIndex,
                                            o = this._getWidthBeforeCursor(a, u),
                                            h = this._getIndexOnLine(a + 1, o);
                                        return this._textLines[a].slice(u).length + h + 1 + this.missingNewlineOffset(a)
                                    },
                                    _getSelectionForOffset: function(v, f) {
                                        return v.shiftKey && this.selectionStart !== this.selectionEnd && f ? this.selectionEnd : this.selectionStart
                                    },
                                    getUpCursorOffset: function(v, f) {
                                        var m = this._getSelectionForOffset(v, f),
                                            d = this.get2DCursorLocation(m),
                                            a = d.lineIndex;
                                        if (0 === a || v.metaKey || 33 === v.keyCode) return -m;
                                        var u = d.charIndex,
                                            o = this._getWidthBeforeCursor(a, u),
                                            h = this._getIndexOnLine(a - 1, o),
                                            p = this._textLines[a].slice(0, u),
                                            l = this.missingNewlineOffset(a - 1);
                                        return -this._textLines[a - 1].length + h - p.length + (1 - l)
                                    },
                                    _getIndexOnLine: function(v, f) {
                                        for (var o, h, m = this._textLines[v], a = this._getLineLeftOffset(v), u = 0, p = 0, l = m.length; p < l; p++)
                                            if ((a += o = this.__charBounds[v][p].width) > f) {
                                                h = !0;
                                                var C = a,
                                                    D = Math.abs(a - o - f);
                                                u = Math.abs(C - f) < D ? p : p - 1;
                                                break
                                            }
                                        return h || (u = m.length - 1), u
                                    },
                                    moveCursorDown: function(v) {
                                        this.selectionStart >= this._text.length && this.selectionEnd >= this._text.length || this._moveCursorUpOrDown("Down", v)
                                    },
                                    moveCursorUp: function(v) {
                                        0 === this.selectionStart && 0 === this.selectionEnd || this._moveCursorUpOrDown("Up", v)
                                    },
                                    _moveCursorUpOrDown: function(v, f) {
                                        var d = this["get" + v + "CursorOffset"](f, "right" === this._selectionDirection);
                                        f.shiftKey ? this.moveCursorWithShift(d) : this.moveCursorWithoutShift(d), 0 !== d && (this.setSelectionInBoundaries(), this.abortCursorAnimation(), this._currentCursorOpacity = 1, this.initDelayedCursor(), this._fireSelectionChanged(), this._updateTextarea())
                                    },
                                    moveCursorWithShift: function(v) {
                                        return this.setSelectionStartEndWithShift(this.selectionStart, this.selectionEnd, "left" === this._selectionDirection ? this.selectionStart + v : this.selectionEnd + v), 0 !== v
                                    },
                                    moveCursorWithoutShift: function(v) {
                                        return v < 0 ? (this.selectionStart += v, this.selectionEnd = this.selectionStart) : (this.selectionEnd += v, this.selectionStart = this.selectionEnd), 0 !== v
                                    },
                                    moveCursorLeft: function(v) {
                                        0 === this.selectionStart && 0 === this.selectionEnd || this._moveCursorLeftOrRight("Left", v)
                                    },
                                    _move: function(v, f, m) {
                                        var d;
                                        if (v.altKey) d = this["findWordBoundary" + m](this[f]);
                                        else {
                                            if (!v.metaKey && 35 !== v.keyCode && 36 !== v.keyCode) return this[f] += "Left" === m ? -1 : 1, !0;
                                            d = this["findLineBoundary" + m](this[f])
                                        }
                                        if (void 0 !== typeof d && this[f] !== d) return this[f] = d, !0
                                    },
                                    _moveLeft: function(v, f) {
                                        return this._move(v, f, "Left")
                                    },
                                    _moveRight: function(v, f) {
                                        return this._move(v, f, "Right")
                                    },
                                    moveCursorLeftWithoutShift: function(v) {
                                        var f = !0;
                                        return this._selectionDirection = "left", this.selectionEnd === this.selectionStart && 0 !== this.selectionStart && (f = this._moveLeft(v, "selectionStart")), this.selectionEnd = this.selectionStart, f
                                    },
                                    moveCursorLeftWithShift: function(v) {
                                        return "right" === this._selectionDirection && this.selectionStart !== this.selectionEnd ? this._moveLeft(v, "selectionEnd") : 0 !== this.selectionStart ? (this._selectionDirection = "left", this._moveLeft(v, "selectionStart")) : void 0
                                    },
                                    moveCursorRight: function(v) {
                                        this.selectionStart >= this._text.length && this.selectionEnd >= this._text.length || this._moveCursorLeftOrRight("Right", v)
                                    },
                                    _moveCursorLeftOrRight: function(v, f) {
                                        var m = "moveCursor" + v + "With";
                                        this._currentCursorOpacity = 1, this[m += f.shiftKey ? "Shift" : "outShift"](f) && (this.abortCursorAnimation(), this.initDelayedCursor(), this._fireSelectionChanged(), this._updateTextarea())
                                    },
                                    moveCursorRightWithShift: function(v) {
                                        return "left" === this._selectionDirection && this.selectionStart !== this.selectionEnd ? this._moveRight(v, "selectionStart") : this.selectionEnd !== this._text.length ? (this._selectionDirection = "right", this._moveRight(v, "selectionEnd")) : void 0
                                    },
                                    moveCursorRightWithoutShift: function(v) {
                                        var f = !0;
                                        return this._selectionDirection = "right", this.selectionStart === this.selectionEnd ? (f = this._moveRight(v, "selectionStart"), this.selectionEnd = this.selectionStart) : this.selectionStart = this.selectionEnd, f
                                    },
                                    removeChars: function(v, f) {
                                        void 0 === f && (f = v + 1), this.removeStyleFromTo(v, f), this._text.splice(v, f - v), this.text = this._text.join(""), this.set("dirty", !0), this._shouldClearDimensionCache() && (this.initDimensions(), this.setCoords()), this._removeExtraneousStyles()
                                    },
                                    insertChars: function(v, f, m, d) {
                                        void 0 === d && (d = m), d > m && this.removeStyleFromTo(m, d);
                                        var a = b.util.string.graphemeSplit(v);
                                        this.insertNewStyleBlock(a, m, f), this._text = [].concat(this._text.slice(0, m), a, this._text.slice(d)), this.text = this._text.join(""), this.set("dirty", !0), this._shouldClearDimensionCache() && (this.initDimensions(), this.setCoords()), this._removeExtraneousStyles()
                                    }
                                }),
                                function() {
                                    var v = b.util.toFixed,
                                        f = /  +/g;
                                    b.util.object.extend(b.Text.prototype, {
                                        _toSVG: function() {
                                            var m = this._getSVGLeftTopOffsets(),
                                                d = this._getSVGTextAndBg(m.textTop, m.textLeft);
                                            return this._wrapSVGTextAndBg(d)
                                        },
                                        toSVG: function(m) {
                                            return this._createBaseSVGMarkup(this._toSVG(), {
                                                reviver: m,
                                                noStyle: !0,
                                                withShadow: !0
                                            })
                                        },
                                        _getSVGLeftTopOffsets: function() {
                                            return {
                                                textLeft: -this.width / 2,
                                                textTop: -this.height / 2,
                                                lineTop: this.getHeightOfLine(0)
                                            }
                                        },
                                        _wrapSVGTextAndBg: function(m) {
                                            var a = this.getSvgTextDecoration(this);
                                            return [m.textBgRects.join(""), '\t\t<text xml:space="preserve" ', this.fontFamily ? 'font-family="' + this.fontFamily.replace(/"/g, "'") + '" ' : "", this.fontSize ? 'font-size="' + this.fontSize + '" ' : "", this.fontStyle ? 'font-style="' + this.fontStyle + '" ' : "", this.fontWeight ? 'font-weight="' + this.fontWeight + '" ' : "", a ? 'text-decoration="' + a + '" ' : "", 'style="', this.getSvgStyles(!0), '"', this.addPaintOrder(), " >", m.textSpans.join(""), "</text>\n"]
                                        },
                                        _getSVGTextAndBg: function(m, d) {
                                            var h, a = [],
                                                u = [],
                                                o = m;
                                            this._setSVGBg(u);
                                            for (var p = 0, l = this._textLines.length; p < l; p++) h = this._getLineLeftOffset(p), (this.textBackgroundColor || this.styleHas("textBackgroundColor", p)) && this._setSVGTextLineBg(u, p, d + h, o), this._setSVGTextLineText(a, p, d + h, o), o += this.getHeightOfLine(p);
                                            return {
                                                textSpans: a,
                                                textBgRects: u
                                            }
                                        },
                                        _createTextCharSpan: function(m, d, a, u) {
                                            var o = m !== m.trim() || m.match(f),
                                                h = this.getSvgSpanStyles(d, o),
                                                p = h ? 'style="' + h + '"' : "",
                                                l = d.deltaY,
                                                y = "",
                                                C = b.Object.NUM_FRACTION_DIGITS;
                                            return l && (y = ' dy="' + v(l, C) + '" '), ['<tspan x="', v(a, C), '" y="', v(u, C), '" ', y, p, ">", b.util.string.escapeXml(m), "</tspan>"].join("")
                                        },
                                        _setSVGTextLineText: function(m, d, a, u) {
                                            var p, l, C, D, I, o = this.getHeightOfLine(d),
                                                h = -1 !== this.textAlign.indexOf("justify"),
                                                y = "",
                                                E = 0,
                                                T = this._textLines[d];
                                            u += o * (1 - this._fontSizeFraction) / this.lineHeight;
                                            for (var F = 0, B = T.length - 1; F <= B; F++) I = F === B || this.charSpacing, y += T[F], C = this.__charBounds[d][F], 0 === E ? (a += C.kernedWidth - C.width, E += C.width) : E += C.kernedWidth, h && !I && this._reSpaceAndTab.test(T[F]) && (I = !0), I || (p = p || this.getCompleteStyleDeclaration(d, F), l = this.getCompleteStyleDeclaration(d, F + 1), I = this._hasStyleChangedForSvg(p, l)), I && (D = this._getStyleDeclaration(d, F) || {}, m.push(this._createTextCharSpan(y, D, a, u)), y = "", p = l, a += E, E = 0)
                                        },
                                        _pushTextBgRect: function(m, d, a, u, o, h) {
                                            var p = b.Object.NUM_FRACTION_DIGITS;
                                            m.push("\t\t<rect ", this._getFillAttributes(d), ' x="', v(a, p), '" y="', v(u, p), '" width="', v(o, p), '" height="', v(h, p), '"></rect>\n')
                                        },
                                        _setSVGTextLineBg: function(m, d, a, u) {
                                            for (var y, C, o = this._textLines[d], h = this.getHeightOfLine(d) / this.lineHeight, p = 0, l = 0, D = this.getValueOfPropertyAt(d, 0, "textBackgroundColor"), E = 0, T = o.length; E < T; E++) y = this.__charBounds[d][E], (C = this.getValueOfPropertyAt(d, E, "textBackgroundColor")) !== D ? (D && this._pushTextBgRect(m, D, a + l, u, p, h), l = y.left, p = y.width, D = C) : p += y.kernedWidth;
                                            C && this._pushTextBgRect(m, C, a + l, u, p, h)
                                        },
                                        _getFillAttributes: function(m) {
                                            var d = m && "string" == typeof m ? new b.Color(m) : "";
                                            return d && d.getSource() && 1 !== d.getAlpha() ? 'opacity="' + d.getAlpha() + '" fill="' + d.setAlpha(1).toRgb() + '"' : 'fill="' + m + '"'
                                        },
                                        _getSVGLineTopOffset: function(m) {
                                            for (var a, d = 0, u = 0; u < m; u++) d += this.getHeightOfLine(u);
                                            return a = this.getHeightOfLine(u), {
                                                lineTop: d,
                                                offset: (this._fontSizeMult - this._fontSizeFraction) * a / (this.lineHeight * this._fontSizeMult)
                                            }
                                        },
                                        getSvgStyles: function(m) {
                                            return b.Object.prototype.getSvgStyles.call(this, m) + " white-space: pre;"
                                        }
                                    })
                                }(),
                                function(v) {
                                    "use strict";
                                    var f = v.fabric || (v.fabric = {});
                                    f.Textbox = f.util.createClass(f.IText, f.Observable, {
                                        type: "textbox",
                                        minWidth: 20,
                                        dynamicMinWidth: 2,
                                        __cachedLines: null,
                                        lockScalingFlip: !0,
                                        noScaleCache: !1,
                                        _dimensionAffectingProps: f.Text.prototype._dimensionAffectingProps.concat("width"),
                                        _wordJoiners: /[ \t\r]/,
                                        splitByGrapheme: !1,
                                        initDimensions: function() {
                                            this.__skipDimension || (this.isEditing && this.initDelayedCursor(), this.clearContextTop(), this._clearCache(), this.dynamicMinWidth = 0, this._styleMap = this._generateStyleMap(this._splitText()), this.dynamicMinWidth > this.width && this._set("width", this.dynamicMinWidth), -1 !== this.textAlign.indexOf("justify") && this.enlargeSpaces(), this.height = this.calcTextHeight(), this.saveState({
                                                propertySet: "_dimensionAffectingProps"
                                            }))
                                        },
                                        _generateStyleMap: function(m) {
                                            for (var d = 0, a = 0, u = 0, o = {}, h = 0; h < m.graphemeLines.length; h++) "\n" === m.graphemeText[u] && h > 0 ? (a = 0, u++, d++) : !this.splitByGrapheme && this._reSpaceAndTab.test(m.graphemeText[u]) && h > 0 && (a++, u++), o[h] = {
                                                line: d,
                                                offset: a
                                            }, u += m.graphemeLines[h].length, a += m.graphemeLines[h].length;
                                            return o
                                        },
                                        styleHas: function(m, d) {
                                            if (this._styleMap && !this.isWrapping) {
                                                var a = this._styleMap[d];
                                                a && (d = a.line)
                                            }
                                            return f.Text.prototype.styleHas.call(this, m, d)
                                        },
                                        isEmptyStyles: function(m) {
                                            if (!this.styles) return !0;
                                            var u, o, d = 0,
                                                h = !1,
                                                p = this._styleMap[m],
                                                l = this._styleMap[m + 1];
                                            for (var y in p && (m = p.line, d = p.offset), l && (h = l.line === m, u = l.offset), o = void 0 === m ? this.styles : {
                                                    line: this.styles[m]
                                                })
                                                for (var C in o[y])
                                                    if (C >= d && (!h || C < u))
                                                        for (var D in o[y][C]) return !1;
                                            return !0
                                        },
                                        _getStyleDeclaration: function(m, d) {
                                            if (this._styleMap && !this.isWrapping) {
                                                var a = this._styleMap[m];
                                                if (!a) return null;
                                                m = a.line, d = a.offset + d
                                            }
                                            return this.callSuper("_getStyleDeclaration", m, d)
                                        },
                                        _setStyleDeclaration: function(m, d, a) {
                                            var u = this._styleMap[m];
                                            this.styles[m = u.line][d = u.offset + d] = a
                                        },
                                        _deleteStyleDeclaration: function(m, d) {
                                            var a = this._styleMap[m];
                                            delete this.styles[m = a.line][d = a.offset + d]
                                        },
                                        _getLineStyle: function(m) {
                                            return !!this.styles[this._styleMap[m].line]
                                        },
                                        _setLineStyle: function(m) {
                                            this.styles[this._styleMap[m].line] = {}
                                        },
                                        _wrapText: function(m, d) {
                                            var u, a = [];
                                            for (this.isWrapping = !0, u = 0; u < m.length; u++) a = a.concat(this._wrapLine(m[u], u, d));
                                            return this.isWrapping = !1, a
                                        },
                                        _measureWord: function(m, d, a) {
                                            var o, u = 0;
                                            a = a || 0;
                                            for (var p = 0, l = m.length; p < l; p++) u += this._getGraphemeBox(m[p], d, p + a, o, !0).kernedWidth, o = m[p];
                                            return u
                                        },
                                        _wrapLine: function(m, d, a, u) {
                                            var o = 0,
                                                h = this.splitByGrapheme,
                                                p = [],
                                                l = [],
                                                y = h ? f.util.string.graphemeSplit(m) : m.split(this._wordJoiners),
                                                C = "",
                                                D = 0,
                                                E = h ? "" : " ",
                                                T = 0,
                                                I = 0,
                                                F = 0,
                                                B = !0,
                                                G = this._getWidthOfCharSpacing();
                                            u = u || 0, 0 === y.length && y.push([]), a -= u;
                                            for (var ie = 0; ie < y.length; ie++) C = h ? y[ie] : f.util.string.graphemeSplit(y[ie]), T = this._measureWord(C, d, D), D += C.length, (o += I + T - G) > a && !B ? (p.push(l), l = [], o = T, B = !0) : o += G, !B && !h && l.push(E), l = l.concat(C), I = h ? 0 : this._measureWord([E], d, D), D++, B = !1, T > F && (F = T);
                                            return ie && p.push(l), F + u > this.dynamicMinWidth && (this.dynamicMinWidth = F - G + u), p
                                        },
                                        isEndOfWrapping: function(m) {
                                            return !this._styleMap[m + 1] || this._styleMap[m + 1].line !== this._styleMap[m].line
                                        },
                                        missingNewlineOffset: function(m) {
                                            return this.splitByGrapheme ? this.isEndOfWrapping(m) ? 1 : 0 : 1
                                        },
                                        _splitTextIntoLines: function(m) {
                                            for (var d = f.Text.prototype._splitTextIntoLines.call(this, m), a = this._wrapText(d.lines, this.width), u = new Array(a.length), o = 0; o < a.length; o++) u[o] = a[o].join("");
                                            return d.lines = u, d.graphemeLines = a, d
                                        },
                                        getMinWidth: function() {
                                            return Math.max(this.minWidth, this.dynamicMinWidth)
                                        },
                                        _removeExtraneousStyles: function() {
                                            var m = {};
                                            for (var d in this._styleMap) this._textLines[d] && (m[this._styleMap[d].line] = 1);
                                            for (var d in this.styles) m[d] || delete this.styles[d]
                                        },
                                        toObject: function(m) {
                                            return this.callSuper("toObject", ["minWidth", "splitByGrapheme"].concat(m))
                                        }
                                    }), f.Textbox.fromObject = function(m, d) {
                                        return f.Object._fromObject("Textbox", m, d, "text")
                                    }
                                }(Ee),
                                function() {
                                    var v = b.controlsUtils,
                                        f = v.scaleSkewCursorStyleHandler,
                                        m = v.scaleCursorStyleHandler,
                                        d = v.scalingEqually,
                                        a = v.scalingYOrSkewingX,
                                        u = v.scalingXOrSkewingY,
                                        o = v.scaleOrSkewActionName,
                                        h = b.Object.prototype.controls;
                                    if (h.ml = new b.Control({
                                            x: -.5,
                                            y: 0,
                                            cursorStyleHandler: f,
                                            actionHandler: u,
                                            getActionName: o
                                        }), h.mr = new b.Control({
                                            x: .5,
                                            y: 0,
                                            cursorStyleHandler: f,
                                            actionHandler: u,
                                            getActionName: o
                                        }), h.mb = new b.Control({
                                            x: 0,
                                            y: .5,
                                            cursorStyleHandler: f,
                                            actionHandler: a,
                                            getActionName: o
                                        }), h.mt = new b.Control({
                                            x: 0,
                                            y: -.5,
                                            cursorStyleHandler: f,
                                            actionHandler: a,
                                            getActionName: o
                                        }), h.tl = new b.Control({
                                            x: -.5,
                                            y: -.5,
                                            cursorStyleHandler: m,
                                            actionHandler: d
                                        }), h.tr = new b.Control({
                                            x: .5,
                                            y: -.5,
                                            cursorStyleHandler: m,
                                            actionHandler: d
                                        }), h.bl = new b.Control({
                                            x: -.5,
                                            y: .5,
                                            cursorStyleHandler: m,
                                            actionHandler: d
                                        }), h.br = new b.Control({
                                            x: .5,
                                            y: .5,
                                            cursorStyleHandler: m,
                                            actionHandler: d
                                        }), h.mtr = new b.Control({
                                            x: 0,
                                            y: -.5,
                                            actionHandler: v.rotationWithSnapping,
                                            cursorStyleHandler: v.rotationStyleHandler,
                                            offsetY: -40,
                                            withConnection: !0,
                                            actionName: "rotate"
                                        }), b.Textbox) {
                                        var p = b.Textbox.prototype.controls = {};
                                        p.mtr = h.mtr, p.tr = h.tr, p.br = h.br, p.tl = h.tl, p.bl = h.bl, p.mt = h.mt, p.mb = h.mb, p.mr = new b.Control({
                                            x: .5,
                                            y: 0,
                                            actionHandler: v.changeWidth,
                                            cursorStyleHandler: f,
                                            actionName: "resizing"
                                        }), p.ml = new b.Control({
                                            x: -.5,
                                            y: 0,
                                            actionHandler: v.changeWidth,
                                            cursorStyleHandler: f,
                                            actionName: "resizing"
                                        })
                                    }
                                }()
                        },
                        787: (zi, Ee, Fn) => {
                                "use strict";

                                function b(t) {
                                    return "function" == typeof t
                                }
                                let Xr = !1;
                                const Ht = {
                                    Promise: void 0,
                                    set useDeprecatedSynchronousErrorHandling(t) {
                                        if (t) {
                                            const e = new Error;
                                            console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n" + e.stack)
                                        } else Xr && console.log("RxJS: Back to a better error behavior. Thank you. <3");
                                        Xr = t
                                    },
                                    get useDeprecatedSynchronousErrorHandling() {
                                        return Xr
                                    }
                                };

                                function ai(t) {
                                    setTimeout(() => {
                                        throw t
                                    }, 0)
                                }
                                const li = {
                                        closed: !0,
                                        next(t) {},
                                        error(t) {
                                            if (Ht.useDeprecatedSynchronousErrorHandling) throw t;
                                            ai(t)
                                        },
                                        complete() {}
                                    },
                                    qr = Array.isArray || (t => t && "number" == typeof t.length);

                                function v(t) {
                                    return null !== t && "object" == typeof t
                                }
                                const m = (() => {
                                            function t(e) {
                                                return Error.call(this), this.message = e ? `${e.length} errors occurred during unsubscription:\n${e.map((n,i)=>`${i+1}) ${n.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e,this}return t.prototype=Object.create(Error.prototype),t})();class d{constructor(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:i,_unsubscribe:r,_subscriptions:s}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof d)n.remove(this);else if(null!==n)for(let c=0;c<n.length;++c)n[c].remove(this);if(b(r)){i&&(this._unsubscribe=void 0);try{r.call(this)}catch(c){e=c instanceof m?a(c.errors):[c]}}if(qr(s)){let c=-1,g=s.length;for(;++c<g;){const _=s[c];if(v(_))try{_.unsubscribe()}catch(w){e=e||[],w instanceof m?e=e.concat(a(w.errors)):e.push(w)}}}if(e)throw new m(e)}add(e){let n=e;if(!e)return d.EMPTY;switch(typeof e){case"function":n=new d(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof d)){const s=n;n=new d,n._subscriptions=[s]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:i}=n;if(null===i)n._parentOrParents=this;else if(i instanceof d){if(i===this)return n;n._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return n;i.push(this)}const r=this._subscriptions;return null===r?this._subscriptions=[n]:r.push(n),n}remove(e){const n=this._subscriptions;if(n){const i=n.indexOf(e);-1!==i&&n.splice(i,1)}}}var t;function a(t){return t.reduce((e,n)=>e.concat(n instanceof m?n.errors:n),[])}d.EMPTY=((t=new d).closed=!0,t);const u="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random();class h extends d{constructor(e,n,i){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=li;break;case 1:if(!e){this.destination=li;break}if("object"==typeof e){e instanceof h?(this.syncErrorThrowable=e.syncErrorThrowable,this.destination=e,e.add(this)):(this.syncErrorThrowable=!0,this.destination=new p(this,e));break}default:this.syncErrorThrowable=!0,this.destination=new p(this,e,n,i)}}[u](){return this}static create(e,n,i){const r=new h(e,n,i);return r.syncErrorThrowable=!1,r}next(e){this.isStopped||this._next(e)}error(e){this.isStopped||(this.isStopped=!0,this._error(e))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(e){this.destination.next(e)}_error(e){this.destination.error(e),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:e}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this}}class p extends h{constructor(e,n,i,r){super(),this._parentSubscriber=e;let s,c=this;b(n)?s=n:n&&(s=n.next,i=n.error,r=n.complete,n!==li&&(c=Object.create(n),b(c.unsubscribe)&&this.add(c.unsubscribe.bind(c)),c.unsubscribe=this.unsubscribe.bind(this))),this._context=c,this._next=s,this._error=i,this._complete=r}next(e){if(!this.isStopped&&this._next){const{_parentSubscriber:n}=this;Ht.useDeprecatedSynchronousErrorHandling&&n.syncErrorThrowable?this.__tryOrSetError(n,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}error(e){if(!this.isStopped){const{_parentSubscriber:n}=this,{useDeprecatedSynchronousErrorHandling:i}=Ht;if(this._error)i&&n.syncErrorThrowable?(this.__tryOrSetError(n,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(n.syncErrorThrowable)i?(n.syncErrorValue=e,n.syncErrorThrown=!0):ai(e),this.unsubscribe();else{if(this.unsubscribe(),i)throw e;ai(e)}}}complete(){if(!this.isStopped){const{_parentSubscriber:e}=this;if(this._complete){const n=()=>this._complete.call(this._context);Ht.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(e,n){try{e.call(this._context,n)}catch(i){if(this.unsubscribe(),Ht.useDeprecatedSynchronousErrorHandling)throw i;ai(i)}}__tryOrSetError(e,n,i){if(!Ht.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{n.call(this._context,i)}catch(r){return Ht.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=r,e.syncErrorThrown=!0,!0):(ai(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:e}=this;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}const C="function"==typeof Symbol&&Symbol.observable||"@@observable";function D(t){return t}let I=(()=>{class t{constructor(n){this._isScalar=!1,n&&(this._subscribe=n)}lift(n){const i=new t;return i.source=this,i.operator=n,i}subscribe(n,i,r){const{operator:s}=this,c=function(t,e,n){if(t){if(t instanceof h)return t;if(t[u])return t[u]()}return t||e||n?new h(t,e,n):new h(li)}(n,i,r);if(c.add(s?s.call(c,this.source):this.source||Ht.useDeprecatedSynchronousErrorHandling&&!c.syncErrorThrowable?this._subscribe(c):this._trySubscribe(c)),Ht.useDeprecatedSynchronousErrorHandling&&c.syncErrorThrowable&&(c.syncErrorThrowable=!1,c.syncErrorThrown))throw c.syncErrorValue;return c}_trySubscribe(n){try{return this._subscribe(n)}catch(i){Ht.useDeprecatedSynchronousErrorHandling&&(n.syncErrorThrown=!0,n.syncErrorValue=i),function(t){for(;t;){const{closed:e,destination:n,isStopped:i}=t;if(e||i)return!1;t=n&&n instanceof h?n:null}return!0}(n)?n.error(i):console.warn(i)}}forEach(n,i){return new(i=F(i))((r,s)=>{let c;c=this.subscribe(g=>{try{n(g)}catch(_){s(_),c&&c.unsubscribe()}},s,r)})}_subscribe(n){const{source:i}=this;return i&&i.subscribe(n)}[C](){return this}pipe(...n){return 0===n.length?this:function(t){return 0===t.length?D:1===t.length?t[0]:function(n){return t.reduce((i,r)=>r(i),n)}}(n)(this)}toPromise(n){return new(n=F(n))((i,r)=>{let s;this.subscribe(c=>s=c,c=>r(c),()=>i(s))})}}return t.create=e=>new t(e),t})();function F(t){if(t||(t=Ht.Promise||Promise),!t)throw new Error("no Promise impl found");return t}const G=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})();class ie extends d{constructor(e,n){super(),this.subject=e,this.subscriber=n,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const e=this.subject,n=e.observers;if(this.subject=null,!n||0===n.length||e.isStopped||e.closed)return;const i=n.indexOf(this.subscriber);-1!==i&&n.splice(i,1)}}class le extends h{constructor(e){super(e),this.destination=e}}let ue=(()=>{class t extends I{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[u](){return new le(this)}lift(n){const i=new de(this,this);return i.operator=n,i}next(n){if(this.closed)throw new G;if(!this.isStopped){const{observers:i}=this,r=i.length,s=i.slice();for(let c=0;c<r;c++)s[c].next(n)}}error(n){if(this.closed)throw new G;this.hasError=!0,this.thrownError=n,this.isStopped=!0;const{observers:i}=this,r=i.length,s=i.slice();for(let c=0;c<r;c++)s[c].error(n);this.observers.length=0}complete(){if(this.closed)throw new G;this.isStopped=!0;const{observers:n}=this,i=n.length,r=n.slice();for(let s=0;s<i;s++)r[s].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(n){if(this.closed)throw new G;return super._trySubscribe(n)}_subscribe(n){if(this.closed)throw new G;return this.hasError?(n.error(this.thrownError),d.EMPTY):this.isStopped?(n.complete(),d.EMPTY):(this.observers.push(n),new ie(this,n))}asObservable(){const n=new I;return n.source=this,n}}return t.create=(e,n)=>new de(e,n),t})();class de extends ue{constructor(e,n){super(),this.destination=e,this.source=n}next(e){const{destination:n}=this;n&&n.next&&n.next(e)}error(e){const{destination:n}=this;n&&n.error&&this.destination.error(e)}complete(){const{destination:e}=this;e&&e.complete&&this.destination.complete()}_subscribe(e){const{source:n}=this;return n?this.source.subscribe(e):d.EMPTY}}function fe(t){return t&&"function"==typeof t.schedule}function ae(t,e){return function(i){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return i.lift(new _e(t,e))}}class _e{constructor(e,n){this.project=e,this.thisArg=n}call(e,n){return n.subscribe(new be(e,this.project,this.thisArg))}}class be extends h{constructor(e,n,i){super(e),this.project=n,this.count=0,this.thisArg=i||this}_next(e){let n;try{n=this.project.call(this.thisArg,e,this.count++)}catch(i){return void this.destination.error(i)}this.destination.next(n)}}const me=t=>e=>{for(let n=0,i=t.length;n<i&&!e.closed;n++)e.next(t[n]);e.complete()},k="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator",A=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function V(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}const W=t=>{if(t&&"function"==typeof t[C])return(t=>e=>{const n=t[C]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(e)})(t);if(A(t))return me(t);if(V(t))return(t=>e=>(t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,ai),e))(t);if(t&&"function"==typeof t[k])return(t=>e=>{const n=t[k]();for(;;){let i;try{i=n.next()}catch(r){return e.error(r),e}if(i.done){e.complete();break}if(e.next(i.value),e.closed)break}return"function"==typeof n.return&&e.add(()=>{n.return&&n.return()}),e})(t);{const n=`You provided ${v(t)?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(n)}};function te(t,e){return new I(n=>{const i=new d;let r=0;return i.add(e.schedule(function(){r!==t.length?(n.next(t[r++]),n.closed||i.add(this.schedule())):n.complete()})),i})}function J(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[C]}(t))return function(t,e){return new I(n=>{const i=new d;return i.add(e.schedule(()=>{const r=t[C]();i.add(r.subscribe({next(s){i.add(e.schedule(()=>n.next(s)))},error(s){i.add(e.schedule(()=>n.error(s)))},complete(){i.add(e.schedule(()=>n.complete()))}}))})),i})}(t,e);if(V(t))return function(t,e){return new I(n=>{const i=new d;return i.add(e.schedule(()=>t.then(r=>{i.add(e.schedule(()=>{n.next(r),i.add(e.schedule(()=>n.complete()))}))},r=>{i.add(e.schedule(()=>n.error(r)))}))),i})}(t,e);if(A(t))return te(t,e);if(function(t){return t&&"function"==typeof t[k]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new I(n=>{const i=new d;let r;return i.add(()=>{r&&"function"==typeof r.return&&r.return()}),i.add(e.schedule(()=>{r=t[k](),i.add(e.schedule(function(){if(n.closed)return;let s,c;try{const g=r.next();s=g.value,c=g.done}catch(g){return void n.error(g)}c?n.complete():(n.next(s),this.schedule())}))})),i})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof I?t:new I(W(t))}class ee extends h{constructor(e){super(),this.parent=e}_next(e){this.parent.notifyNext(e)}_error(e){this.parent.notifyError(e),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class ne extends h{notifyNext(e){this.destination.next(e)}notifyError(e){this.destination.error(e)}notifyComplete(){this.destination.complete()}}function Ie(t,e){if(e.closed)return;if(t instanceof I)return t.subscribe(e);let n;try{n=W(t)(e)}catch(i){e.error(i)}return n}function ve(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?i=>i.pipe(ve((r,s)=>J(t(r,s)).pipe(ae((c,g)=>e(r,c,s,g))),n)):("number"==typeof e&&(n=e),i=>i.lift(new Z(t,n)))}class Z{constructor(e,n=Number.POSITIVE_INFINITY){this.project=e,this.concurrent=n}call(e,n){return n.subscribe(new Ce(e,this.project,this.concurrent))}}class Ce extends ne{constructor(e,n,i=Number.POSITIVE_INFINITY){super(e),this.project=n,this.concurrent=i,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)}_tryNext(e){let n;const i=this.index++;try{n=this.project(e,i)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(n)}_innerSub(e){const n=new ee(this),i=this.destination;i.add(n);const r=Ie(e,n);r!==n&&i.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(e){this.destination.next(e)}notifyComplete(){const e=this.buffer;this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function Ue(t=Number.POSITIVE_INFINITY){return ve(D,t)}function Ze(t,e){return e?te(t,e):new I(me(t))}function Ge(...t){let e=Number.POSITIVE_INFINITY,n=null,i=t[t.length-1];return fe(i)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof i&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof I?t[0]:Ue(e)(Ze(t,n))}function wt(){return function(e){return e.lift(new at(e))}}class at{constructor(e){this.connectable=e}call(e,n){const{connectable:i}=this;i._refCount++;const r=new $n(e,i),s=n.subscribe(r);return r.closed||(r.connection=i.connect()),s}}class $n extends h{constructor(e,n){super(e),this.connectable=n}_unsubscribe(){const{connectable:e}=this;if(!e)return void(this.connection=null);this.connectable=null;const n=e._refCount;if(n<=0)return void(this.connection=null);if(e._refCount=n-1,n>1)return void(this.connection=null);const{connection:i}=this,r=e._connection;this.connection=null,r&&(!i||r===i)&&r.unsubscribe()}}class Ei extends I{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._refCount=0,this._isComplete=!1}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let e=this._connection;return e||(this._isComplete=!1,e=this._connection=new d,e.add(this.source.subscribe(new Ua(this.getSubject(),this))),e.closed&&(this._connection=null,e=d.EMPTY)),e}refCount(){return wt()(this)}}const Jt=(()=>{const t=Ei.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class Ua extends le{constructor(e,n){super(e),this.connectable=n}_error(e){this._unsubscribe(),super._error(e)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const e=this.connectable;if(e){this.connectable=null;const n=e._connection;e._refCount=0,e._subject=null,e._connection=null,n&&n.unsubscribe()}}}function zv(){return new ue}function ze(t){for(let e in t)if(t[e]===ze)return e;throw Error("Could not find renamed property on target object.")}function Le(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(Le).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function $a(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const Xv=ze({__forward_ref__:ze});function Xa(t){return t.__forward_ref__=Xa,t.toString=function(){return Le(this())},t}function we(t){return function(t){return"function"==typeof t&&t.hasOwnProperty(Xv)&&t.__forward_ref__===Xa}(t)?t():t}class Si extends Error{constructor(e,n){super(function(t,e){return`${t?`NG0${t}: `:""}${e}`}(e,n)),this.code=e}}function Pt(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():function(t){return"string"==typeof t?t:null==t?"":String(t)}(t)}function io(t,e){const n=e?` in ${e}`:"";throw new Si("201",`No provider for ${Pt(t)} found${n}`)}function zt(t,e){null==t&&function(t,e,n,i){throw new Error(`ASSERTION ERROR: ${t}`+(null==i?"":` [Expected=> ${n} ${i} ${e} <=Actual]`))}(e,t,null,"!=")}function qe(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Ti(t){return{providers:t.providers||[],imports:t.imports||[]}}function qn(t){return Tf(t,ro)||Tf(t,If)}function Tf(t,e){return t.hasOwnProperty(e)?t[e]:null}function xf(t){return t&&(t.hasOwnProperty(Ka)||t.hasOwnProperty(t_))?t[Ka]:null}const ro=ze({\u0275prov:ze}),Ka=ze({\u0275inj:ze}),If=ze({ngInjectableDef:ze}),t_=ze({ngInjectorDef:ze});var Te=(()=>((Te=Te||{})[Te.Default=0]="Default",Te[Te.Host=1]="Host",Te[Te.Self=2]="Self",Te[Te.SkipSelf=4]="SkipSelf",Te[Te.Optional=8]="Optional",Te))();let Qa;function ui(t){const e=Qa;return Qa=t,e}function Mf(t,e,n){const i=qn(t);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:n&Te.Optional?null:void 0!==e?e:void io(Le(t),"Injector")}function ci(t){return{toString:t}.toString()}var en=(()=>((en=en||{})[en.OnPush=0]="OnPush",en[en.Default=1]="Default",en))(),mt=(()=>((mt=mt||{})[mt.Emulated=0]="Emulated",mt[mt.None=2]="None",mt[mt.ShadowDom=3]="ShadowDom",mt))();const i_="undefined"!=typeof globalThis&&globalThis,r_="undefined"!=typeof window&&window,s_="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,$e=i_||"undefined"!=typeof global&&global||r_||s_,$i={},Ke=[],so=ze({\u0275cmp:ze}),Za=ze({\u0275dir:ze}),Ja=ze({\u0275pipe:ze}),Of=ze({\u0275mod:ze}),o_=ze({\u0275loc:ze}),Kn=ze({\u0275fac:ze}),Kr=ze({__NG_ELEMENT_ID__:ze});let a_=0;function el(t){return ci(()=>{const n={},i={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:n,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===en.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||Ke,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||mt.Emulated,id:"c",styles:t.styles||Ke,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,s=t.features,c=t.pipes;return i.id+=a_++,i.inputs=Rf(t.inputs,n),i.outputs=Rf(t.outputs),s&&s.forEach(g=>g(i)),i.directiveDefs=r?()=>("function"==typeof r?r():r).map(Af):null,i.pipeDefs=c?()=>("function"==typeof c?c():c).map(Pf):null,i})}function Af(t){return Ft(t)||function(t){return t[Za]||null}(t)}function Pf(t){return function(t){return t[Ja]||null}(t)}const Ff={};function Qr(t){return ci(()=>{const e={type:t.type,bootstrap:t.bootstrap||Ke,declarations:t.declarations||Ke,imports:t.imports||Ke,exports:t.exports||Ke,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&(Ff[t.id]=t.type),e})}function Rf(t,e){if(null==t)return $i;const n={};for(const i in t)if(t.hasOwnProperty(i)){let r=t[i],s=r;Array.isArray(r)&&(s=r[1],r=r[0]),n[r]=i,e&&(e[r]=s)}return n}function Ft(t){return t[so]||null}function nn(t,e){const n=t[Of]||null;if(!n&&!0===e)throw new Error(`Type ${Le(t)} does not have '\u0275mod' property.`);return n}function Rn(t){return Array.isArray(t)&&"object"==typeof t[1]}function yn(t){return Array.isArray(t)&&!0===t[1]}function il(t){return 0!=(8&t.flags)}function uo(t){return 2==(2&t.flags)}function vn(t){return null!==t.template}function g_(t){return 0!=(512&t[2])}function Ai(t,e){return t.hasOwnProperty(Kn)?t[Kn]:null}class sl{constructor(e,n,i){this.previousValue=e,this.currentValue=n,this.firstChange=i}isFirstChange(){return this.firstChange}}function Nf(t){return t.type.prototype.ngOnChanges&&(t.setInput=v_),y_}function y_(){const t=jf(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===$i)t.previous=e;else for(let i in e)n[i]=e[i];t.current=null,this.ngOnChanges(e)}}function v_(t,e,n,i){const r=jf(t)||function(t,e){return t[Lf]=e}(t,{previous:$i,current:null}),s=r.current||(r.current={}),c=r.previous,g=this.declaredInputs[n],_=c[g];s[g]=new sl(_&&_.currentValue,e,c===$i),t[i]=e}const Lf="__ngSimpleChanges__";function jf(t){return t[Lf]||null}let al;function lt(t){return!!t.listen}const Hf={createRenderer:(t,e)=>void 0!==al?al:"undefined"!=typeof document?document:void 0};function dt(t){for(;Array.isArray(t);)t=t[0];return t}function on(t,e){return dt(e[t.index])}function Xt(t,e){const n=e[t];return Rn(n)?n:n[0]}function Uf(t){return 4==(4&t[2])}function cl(t){return 128==(128&t[2])}function hi(t,e){return null==e?null:t[e]}function Wf(t){t[18]=0}function fl(t,e){t[5]+=e;let n=t,i=t[3];for(;null!==i&&(1===e&&1===n[5]||-1===e&&0===n[5]);)i[5]+=e,n=i,i=i[3]}const Me={lFrame:Qf(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Yf(){return Me.bindingsEnabled}function re(){return Me.lFrame.lView}function Ye(){return Me.lFrame.tView}function yt(){let t=Gf();for(;null!==t&&64===t.type;)t=t.parent;return t}function Gf(){return Me.lFrame.currentTNode}function kn(t,e){const n=Me.lFrame;n.currentTNode=t,n.isParent=e}function hl(){return Me.lFrame.isParent}function go(){return Me.isInCheckNoChangesMode}function po(t){Me.isInCheckNoChangesMode=t}function R_(t,e){const n=Me.lFrame;n.bindingIndex=n.bindingRootIndex=t,gl(e)}function gl(t){Me.lFrame.currentDirectiveIndex=t}function Xf(){return Me.lFrame.currentQueryIndex}function ml(t){Me.lFrame.currentQueryIndex=t}function N_(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function qf(t,e,n){if(n&Te.SkipSelf){let r=e,s=t;for(;!(r=r.parent,null!==r||n&Te.Host||(r=N_(s),null===r||(s=s[15],10&r.type))););if(null===r)return!1;e=r,t=s}const i=Me.lFrame=Kf();return i.currentTNode=e,i.lView=t,!0}function mo(t){const e=Kf(),n=t[1];Me.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function Kf(){const t=Me.lFrame,e=null===t?null:t.child;return null===e?Qf(t):e}function Qf(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function Zf(){const t=Me.lFrame;return Me.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const Jf=Zf;function yo(){const t=Zf();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function di(t){Me.lFrame.selectedIndex=t}function vo(t,e){for(let n=e.directiveStart,i=e.directiveEnd;n<i;n++){const s=t.data[n].type.prototype,{ngAfterContentInit:c,ngAfterContentChecked:g,ngAfterViewInit:_,ngAfterViewChecked:w,ngOnDestroy:S}=s;c&&(t.contentHooks||(t.contentHooks=[])).push(-n,c),g&&((t.contentHooks||(t.contentHooks=[])).push(n,g),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,g)),_&&(t.viewHooks||(t.viewHooks=[])).push(-n,_),w&&((t.viewHooks||(t.viewHooks=[])).push(n,w),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,w)),null!=S&&(t.destroyHooks||(t.destroyHooks=[])).push(n,S)}}function _o(t,e,n){eh(t,e,3,n)}function Co(t,e,n,i){(3&t[2])===n&&eh(t,e,n,i)}function yl(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function eh(t,e,n,i){const s=null!=i?i:-1,c=e.length-1;let g=0;for(let _=void 0!==i?65535&t[18]:0;_<c;_++)if("number"==typeof e[_+1]){if(g=e[_],null!=i&&g>=i)break}else e[_]<0&&(t[18]+=65536),(g<s||-1==s)&&(G_(t,n,e,_),t[18]=(4294901760&t[18])+_+2),_++}function G_(t,e,n,i){const r=n[i]<0,s=n[i+1],g=t[r?-n[i]:n[i]];if(r){if(t[2]>>11<t[18]>>16&&(3&t[2])===e){t[2]+=2048;try{s.call(g)}finally{}}}else try{s.call(g)}finally{}}class ns{constructor(e,n,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=i}}function bo(t,e,n){const i=lt(t);let r=0;for(;r<n.length;){const s=n[r];if("number"==typeof s){if(0!==s)break;r++;const c=n[r++],g=n[r++],_=n[r++];i?t.setAttribute(e,g,_,c):e.setAttributeNS(c,g,_)}else{const c=s,g=n[++r];_l(c)?i&&t.setProperty(e,c,g):i?t.setAttribute(e,c,g):e.setAttribute(c,g),r++}}return r}function th(t){return 3===t||4===t||6===t}function _l(t){return 64===t.charCodeAt(0)}function wo(t,e){if(null!==e&&0!==e.length)if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let i=0;i<e.length;i++){const r=e[i];"number"==typeof r?n=r:0===n||nh(t,n,r,null,-1===n||2===n?e[++i]:null)}}return t}function nh(t,e,n,i,r){let s=0,c=t.length;if(-1===e)c=-1;else for(;s<t.length;){const g=t[s++];if("number"==typeof g){if(g===e){c=-1;break}if(g>e){c=s-1;break}}}for(;s<t.length;){const g=t[s];if("number"==typeof g)break;if(g===n){if(null===i)return void(null!==r&&(t[s+1]=r));if(i===t[s+1])return void(t[s+2]=r)}s++,null!==i&&s++,null!==r&&s++}-1!==c&&(t.splice(c,0,e),s=c+1),t.splice(s++,0,n),null!==i&&t.splice(s++,0,i),null!==r&&t.splice(s++,0,r)}function ih(t){return-1!==t}function er(t){return 32767&t}function tr(t,e){let n=function(t){return t>>16}(t),i=e;for(;n>0;)i=i[15],n--;return i}let Cl=!0;function Do(t){const e=Cl;return Cl=t,e}let Q_=0;function rs(t,e){const n=wl(t,e);if(-1!==n)return n;const i=e[1];i.firstCreatePass&&(t.injectorIndex=e.length,bl(i.data,t),bl(e,null),bl(i.blueprint,null));const r=Eo(t,e),s=t.injectorIndex;if(ih(r)){const c=er(r),g=tr(r,e),_=g[1].data;for(let w=0;w<8;w++)e[s+w]=g[c+w]|_[c+w]}return e[s+8]=r,s}function bl(t,e){t.push(0,0,0,0,0,0,0,0,e)}function wl(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function Eo(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,i=null,r=e;for(;null!==r;){const s=r[1],c=s.type;if(i=2===c?s.declTNode:1===c?r[6]:null,null===i)return-1;if(n++,r=r[15],-1!==i.injectorIndex)return i.injectorIndex|n<<16}return-1}function So(t,e,n){!function(t,e,n){let i;"string"==typeof n?i=n.charCodeAt(0)||0:n.hasOwnProperty(Kr)&&(i=n[Kr]),null==i&&(i=n[Kr]=Q_++);const r=255&i;e.data[t+(r>>5)]|=1<<r}(t,e,n)}function oh(t,e,n){if(n&Te.Optional)return t;io(e,"NodeInjector")}function ah(t,e,n,i){if(n&Te.Optional&&void 0===i&&(i=null),0==(n&(Te.Self|Te.Host))){const r=t[9],s=ui(void 0);try{return r?r.get(e,i,n&Te.Optional):Mf(e,i,n&Te.Optional)}finally{ui(s)}}return oh(i,e,n)}const uh={};function eC(){return new nr(yt(),re())}function tC(t,e,n,i,r,s){const c=e[1],g=c.data[t+8],S=To(g,c,n,null==i?uo(g)&&Cl:i!=c&&0!=(3&g.type),r&Te.Host&&s===g);return null!==S?ss(e,c,S,g):uh}function To(t,e,n,i,r){const s=t.providerIndexes,c=e.data,g=1048575&s,_=t.directiveStart,S=s>>20,M=r?g+S:t.directiveEnd;for(let P=i?g:g+S;P<M;P++){const j=c[P];if(P<_&&n===j||P>=_&&j.type===n)return P}if(r){const P=c[_];if(P&&vn(P)&&P.type===n)return _}return null}function ss(t,e,n,i){let r=t[n];const s=e.data;if(function(t){return t instanceof ns}(r)){const c=r;c.resolving&&function(t,e){throw new Si("200",`Circular dependency in DI detected for ${t}`)}(Pt(s[n]));const g=Do(c.canSeeViewProviders);c.resolving=!0;const _=c.injectImpl?ui(c.injectImpl):null;qf(t,i,Te.Default);try{r=t[n]=c.factory(void 0,s,t,i),e.firstCreatePass&&n>=i.directiveStart&&function(t,e,n){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:s}=e.type.prototype;if(i){const c=Nf(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,c),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,c)}r&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,r),s&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,s),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,s))}(n,s[n],e)}finally{null!==_&&ui(_),Do(g),c.resolving=!1,Jf()}}return r}function ch(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function fh(t,e){return!(t&Te.Self||t&Te.Host&&e)}class nr{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,i){return function(t,e,n,i=Te.Default,r){if(null!==t){const s=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(Kr)?t[Kr]:void 0;return"number"==typeof e?e>=0?255&e:eC:e}(n);if("function"==typeof s){if(!qf(e,t,i))return i&Te.Host?oh(r,n,i):ah(e,n,i,r);try{const c=s(i);if(null!=c||i&Te.Optional)return c;io(n)}finally{Jf()}}else if("number"==typeof s){let c=null,g=wl(t,e),_=-1,w=i&Te.Host?e[16][6]:null;for((-1===g||i&Te.SkipSelf)&&(_=-1===g?Eo(t,e):e[g+8],-1!==_&&fh(i,!1)?(c=e[1],g=er(_),e=tr(_,e)):g=-1);-1!==g;){const S=e[1];if(ch(s,g,S.data)){const x=tC(g,e,n,c,i,w);if(x!==uh)return x}_=e[g+8],-1!==_&&fh(i,e[1].data[g+8]===w)&&ch(s,g,e)?(c=S,g=er(_),e=tr(_,e)):g=-1}}}return ah(e,n,i,r)}(this._tNode,this._lView,e,i,n)}}const rr="__parameters__";function Pi(t,e,n){return ci(()=>{const i=function(t){return function(...n){if(t){const i=t(...n);for(const r in i)this[r]=i[r]}}}(e);function r(...s){if(this instanceof r)return i.apply(this,s),this;const c=new r(...s);return g.annotation=c,g;function g(_,w,S){const x=_.hasOwnProperty(rr)?_[rr]:Object.defineProperty(_,rr,{value:[]})[rr];for(;x.length<=S;)x.push(null);return(x[S]=x[S]||[]).push(c),_}}return n&&(r.prototype=Object.create(n.prototype)),r.prototype.ngMetadataName=t,r.annotationCls=r,r})}class Qe{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=qe({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}toString(){return`InjectionToken ${this._desc}`}}function an(t,e){void 0===e&&(e=t);for(let n=0;n<t.length;n++){let i=t[n];Array.isArray(i)?(e===t&&(e=t.slice(0,n)),an(i,e)):e!==t&&e.push(i)}return e}function Ln(t,e){t.forEach(n=>Array.isArray(n)?Ln(n,e):e(n))}function Io(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Fi(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}const us={},Ml="__NG_DI_FLAG__",ar="ngTempTokenPath",pC=/\n/gm,Ol="__source",Al=ze({provide:String,useValue:ze});let cs;function lr(t){const e=cs;return cs=t,e}function yC(t,e=Te.Default){if(void 0===cs)throw new Error("inject() must be called from an injection context");return null===cs?Mf(t,void 0,e):cs.get(t,e&Te.Optional?null:void 0,e)}function Ve(t,e=Te.Default){return(Qa||yC)(we(t),e)}function Ri(t){const e=[];for(let n=0;n<t.length;n++){const i=we(t[n]);if(Array.isArray(i)){if(0===i.length)throw new Error("Arguments array must have arguments.");let r,s=Te.Default;for(let c=0;c<i.length;c++){const g=i[c],_=vC(g);"number"==typeof _?-1===_?r=g.token:s|=_:r=g}e.push(Ve(r,s))}else e.push(Ve(i))}return e}function fs(t,e){return t[Ml]=e,t.prototype[Ml]=e,t}function vC(t){return t[Ml]}function yh(t,e,n,i){const r=t[ar];throw e[Ol]&&r.unshift(e[Ol]),t.message=function(t,e,n,i=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let r=Le(e);if(Array.isArray(e))r=e.map(Le).join(" -> ");else if("object"==typeof e){let s=[];for(let c in e)if(e.hasOwnProperty(c)){let g=e[c];s.push(c+":"+("string"==typeof g?JSON.stringify(g):Le(g)))}r=`{${s.join(", ")}}`}return`${n}${i?"("+i+")":""}[${r}]: ${t.replace(pC,"\n  ")}`}("\n"+t.message,r,n,i),t.ngTokenPath=r,t[ar]=null,t}const hs=fs(Pi("Inject",t=>({token:t})),-1),jn=fs(Pi("Optional"),8),ki=fs(Pi("SkipSelf"),4),Lh="__ngContext__";function It(t,e){t[Lh]=e}function Vl(t){const e=function(t){return t[Lh]||null}(t);return e?Array.isArray(e)?e:e.lView:null}function ko(t){return t.ngOriginalError}function f0(t,...e){t.error(...e)}class Li{constructor(){this._console=console}handleError(e){const n=this._findOriginalError(e),i=this._findContext(e),r=function(t){return t&&t.ngErrorLogger||f0}(e);r(this._console,"ERROR",e),n&&r(this._console,"ORIGINAL ERROR",n),i&&r(this._console,"ERROR CONTEXT",i)}_findContext(e){return e?function(t){return t.ngDebugContext}(e)||this._findContext(ko(e)):null}_findOriginalError(e){let n=e&&ko(e);for(;n&&ko(n);)n=ko(n);return n||null}}const zh=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind($e))();function Hn(t){return t instanceof Function?t():t}var Qt=(()=>((Qt=Qt||{})[Qt.Important=1]="Important",Qt[Qt.DashCase=2]="DashCase",Qt))();function Wl(t,e){return undefined(t,e)}function vs(t){const e=t[3];return yn(e)?e[3]:e}function Yl(t){return Qh(t[13])}function Gl(t){return Qh(t[4])}function Qh(t){for(;null!==t&&!yn(t);)t=t[4];return t}function hr(t,e,n,i,r){if(null!=i){let s,c=!1;yn(i)?s=i:Rn(i)&&(c=!0,i=i[0]);const g=dt(i);0===t&&null!==n?null==r?id(e,n,g):ji(e,n,g,r||null,!0):1===t&&null!==n?ji(e,n,g,r||null,!0):2===t?function(t,e,n){const i=Lo(t,e);i&&function(t,e,n,i){lt(t)?t.removeChild(e,n,i):e.removeChild(n)}(t,i,e,n)}(e,g,c):3===t&&e.destroyNode(g),null!=s&&function(t,e,n,i,r){const s=n[7];s!==dt(n)&&hr(e,t,i,s,r);for(let g=10;g<n.length;g++){const _=n[g];_s(_[1],_,t,e,i,s)}}(e,t,s,n,r)}}function $l(t,e,n){return lt(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function Jh(t,e){const n=t[9],i=n.indexOf(e),r=e[3];1024&e[2]&&(e[2]&=-1025,fl(r,-1)),n.splice(i,1)}function Xl(t,e){if(t.length<=10)return;const n=10+e,i=t[n];if(i){const r=i[17];null!==r&&r!==t&&Jh(r,i),e>0&&(t[n-1][4]=i[4]);const s=Fi(t,10+e);!function(t,e){_s(t,e,e[11],2,null,null),e[0]=null,e[6]=null}(i[1],i);const c=s[19];null!==c&&c.detachView(s[1]),i[3]=null,i[4]=null,i[2]&=-129}return i}function ed(t,e){if(!(256&e[2])){const n=e[11];lt(n)&&n.destroyNode&&_s(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return ql(t[1],t);for(;e;){let n=null;if(Rn(e))n=e[13];else{const i=e[10];i&&(n=i)}if(!n){for(;e&&!e[4]&&e!==t;)Rn(e)&&ql(e[1],e),e=e[3];null===e&&(e=t),Rn(e)&&ql(e[1],e),n=e&&e[4]}e=n}}(e)}}function ql(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let i=0;i<n.length;i+=2){const r=e[n[i]];if(!(r instanceof ns)){const s=n[i+1];if(Array.isArray(s))for(let c=0;c<s.length;c+=2){const g=r[s[c]],_=s[c+1];try{_.call(g)}finally{}}else try{s.call(r)}finally{}}}}(t,e),function(t,e){const n=t.cleanup,i=e[7];let r=-1;if(null!==n)for(let s=0;s<n.length-1;s+=2)if("string"==typeof n[s]){const c=n[s+1],g="function"==typeof c?c(e):dt(e[c]),_=i[r=n[s+2]],w=n[s+3];"boolean"==typeof w?g.removeEventListener(n[s],_,w):w>=0?i[r=w]():i[r=-w].unsubscribe(),s+=2}else{const c=i[r=n[s+1]];n[s].call(c)}if(null!==i){for(let s=r+1;s<i.length;s++)i[s]();e[7]=null}}(t,e),1===e[1].type&&lt(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&yn(e[3])){n!==e[3]&&Jh(n,e);const i=e[19];null!==i&&i.detachView(t)}}}function td(t,e,n){return function(t,e,n){let i=e;for(;null!==i&&40&i.type;)i=(e=i).parent;if(null===i)return n[0];if(2&i.flags){const r=t.data[i.directiveStart].encapsulation;if(r===mt.None||r===mt.Emulated)return null}return on(i,n)}(t,e.parent,n)}function ji(t,e,n,i,r){lt(t)?t.insertBefore(e,n,i,r):e.insertBefore(n,i,r)}function id(t,e,n){lt(t)?t.appendChild(e,n):e.appendChild(n)}function rd(t,e,n,i,r){null!==i?ji(t,e,n,i,r):id(t,e,n)}function Lo(t,e){return lt(t)?t.parentNode(e):e.parentNode}let ad=function(t,e,n){return 40&t.type?on(t,n):null};function jo(t,e,n,i){const r=td(t,i,e),s=e[11],g=function(t,e,n){return ad(t,e,n)}(i.parent||e[6],i,e);if(null!=r)if(Array.isArray(n))for(let _=0;_<n.length;_++)rd(s,r,n[_],g,!1);else rd(s,r,n,g,!1)}function Bo(t,e){if(null!==e){const n=e.type;if(3&n)return on(e,t);if(4&n)return Ql(-1,t[e.index]);if(8&n){const i=e.child;if(null!==i)return Bo(t,i);{const r=t[e.index];return yn(r)?Ql(-1,r):dt(r)}}if(32&n)return Wl(e,t)()||dt(t[e.index]);{const i=ud(t,e);return null!==i?Array.isArray(i)?i[0]:Bo(vs(t[16]),i):Bo(t,e.next)}}return null}function ud(t,e){return null!==e?t[16][6].projection[e.projection]:null}function Ql(t,e){const n=10+t+1;if(n<e.length){const i=e[n],r=i[1].firstChild;if(null!==r)return Bo(i,r)}return e[7]}function Zl(t,e,n,i,r,s,c){for(;null!=n;){const g=i[n.index],_=n.type;if(c&&0===e&&(g&&It(dt(g),i),n.flags|=4),64!=(64&n.flags))if(8&_)Zl(t,e,n.child,i,r,s,!1),hr(e,t,r,g,s);else if(32&_){const w=Wl(n,i);let S;for(;S=w();)hr(e,t,r,S,s);hr(e,t,r,g,s)}else 16&_?fd(t,e,i,n,r,s):hr(e,t,r,g,s);n=c?n.projectionNext:n.next}}function _s(t,e,n,i,r,s){Zl(n,i,t.firstChild,e,r,s,!1)}function fd(t,e,n,i,r,s){const c=n[16],_=c[6].projection[i.projection];if(Array.isArray(_))for(let w=0;w<_.length;w++)hr(e,t,r,_[w],s);else Zl(t,e,_,c[3],r,s,!0)}function hd(t,e,n){lt(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function Jl(t,e,n){lt(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function dd(t,e,n){let i=t.length;for(;;){const r=t.indexOf(e,n);if(-1===r)return r;if(0===r||t.charCodeAt(r-1)<=32){const s=e.length;if(r+s===i||t.charCodeAt(r+s)<=32)return r}n=r+1}}const gd="ng-template";function L0(t,e,n){let i=0;for(;i<t.length;){let r=t[i++];if(n&&"class"===r){if(r=t[i],-1!==dd(r.toLowerCase(),e,0))return!0}else if(1===r){for(;i<t.length&&"string"==typeof(r=t[i++]);)if(r.toLowerCase()===e)return!0;return!1}}return!1}function pd(t){return 4===t.type&&t.value!==gd}function j0(t,e,n){return e===(4!==t.type||n?t.value:gd)}function B0(t,e,n){let i=4;const r=t.attrs||[],s=function(t){for(let e=0;e<t.length;e++)if(th(t[e]))return e;return t.length}(r);let c=!1;for(let g=0;g<e.length;g++){const _=e[g];if("number"!=typeof _){if(!c)if(4&i){if(i=2|1&i,""!==_&&!j0(t,_,n)||""===_&&1===e.length){if(_n(i))return!1;c=!0}}else{const w=8&i?_:e[++g];if(8&i&&null!==t.attrs){if(!L0(t.attrs,w,n)){if(_n(i))return!1;c=!0}continue}const x=V0(8&i?"class":_,r,pd(t),n);if(-1===x){if(_n(i))return!1;c=!0;continue}if(""!==w){let M;M=x>s?"":r[x+1].toLowerCase();const P=8&i?M:null;if(P&&-1!==dd(P,w,0)||2&i&&w!==M){if(_n(i))return!1;c=!0}}}}else{if(!c&&!_n(i)&&!_n(_))return!1;if(c&&_n(_))continue;c=!1,i=_|1&i}}return _n(i)||c}function _n(t){return 0==(1&t)}function V0(t,e,n,i){if(null===e)return-1;let r=0;if(i||!n){let s=!1;for(;r<e.length;){const c=e[r];if(c===t)return r;if(3===c||6===c)s=!0;else{if(1===c||2===c){let g=e[++r];for(;"string"==typeof g;)g=e[++r];continue}if(4===c)break;if(0===c){r+=4;continue}}r+=s?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const i=t[n];if("number"==typeof i)return-1;if(i===e)return n;n++}return-1}(e,t)}function md(t,e,n=!1){for(let i=0;i<e.length;i++)if(B0(t,e[i],n))return!0;return!1}function yd(t,e){return t?":not("+e.trim()+")":e}function G0(t){let e=t[0],n=1,i=2,r="",s=!1;for(;n<t.length;){let c=t[n];if("string"==typeof c)if(2&i){const g=t[++n];r+="["+c+(g.length>0?'="'+g+'"':"")+"]"}else 8&i?r+="."+c:4&i&&(r+=" "+c);else""!==r&&!_n(c)&&(e+=yd(s,r),r=""),i=c,s=s||!_n(i);n++}return""!==r&&(e+=yd(s,r)),e}const Ae={};function Id(t,e){const n=t.contentQueries;if(null!==n)for(let i=0;i<n.length;i+=2){const r=n[i],s=n[i+1];if(-1!==s){const c=t.data[s];ml(r),c.contentQueries(2,e[s],s)}}}function Cs(t,e,n,i,r,s,c,g,_,w){const S=e.blueprint.slice();return S[0]=r,S[2]=140|i,Wf(S),S[3]=S[15]=t,S[8]=n,S[10]=c||t&&t[10],S[11]=g||t&&t[11],S[12]=_||t&&t[12]||null,S[9]=w||t&&t[9]||null,S[6]=s,S[16]=2==e.type?t[16]:S,S}function dr(t,e,n,i,r){let s=t.data[e];if(null===s)s=function(t,e,n,i,r){const s=Gf(),c=hl(),_=t.data[e]=function(t,e,n,i,r,s){return{type:n,index:i,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,c?s:s&&s.parent,n,e,i,r);return null===t.firstChild&&(t.firstChild=_),null!==s&&(c?null==s.child&&null!==_.parent&&(s.child=_):null===s.next&&(s.next=_)),_}(t,e,n,i,r),Me.lFrame.inI18n&&(s.flags|=64);else if(64&s.type){s.type=n,s.value=i,s.attrs=r;const c=function(){const t=Me.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();s.injectorIndex=null===c?-1:c.injectorIndex}return kn(s,!0),s}function gr(t,e,n,i){if(0===n)return-1;const r=e.length;for(let s=0;s<n;s++)e.push(i),t.blueprint.push(i),t.data.push(null);return r}function bs(t,e,n){mo(e);try{const i=t.viewQuery;null!==i&&vu(1,i,n);const r=t.template;null!==r&&Md(t,e,r,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&Id(t,e),t.staticViewQueries&&vu(2,t.viewQuery,n);const s=t.components;null!==s&&function(t,e){for(let n=0;n<e.length;n++)Sb(t,e[n])}(e,s)}catch(i){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),i}finally{e[2]&=-5,yo()}}function pr(t,e,n,i){const r=e[2];if(256==(256&r))return;mo(e);const s=go();try{Wf(e),function(t){Me.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==n&&Md(t,e,n,2,i);const c=3==(3&r);if(!s)if(c){const w=t.preOrderCheckHooks;null!==w&&_o(e,w,null)}else{const w=t.preOrderHooks;null!==w&&Co(e,w,0,null),yl(e,0)}if(function(t){for(let e=Yl(t);null!==e;e=Gl(e)){if(!e[2])continue;const n=e[9];for(let i=0;i<n.length;i++){const r=n[i],s=r[3];0==(1024&r[2])&&fl(s,1),r[2]|=1024}}}(e),function(t){for(let e=Yl(t);null!==e;e=Gl(e))for(let n=10;n<e.length;n++){const i=e[n],r=i[1];cl(i)&&pr(r,i,r.template,i[8])}}(e),null!==t.contentQueries&&Id(t,e),!s)if(c){const w=t.contentCheckHooks;null!==w&&_o(e,w)}else{const w=t.contentHooks;null!==w&&Co(e,w,1),yl(e,1)}!function(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let i=0;i<n.length;i++){const r=n[i];if(r<0)di(~r);else{const s=r,c=n[++i],g=n[++i];R_(c,s),g(2,e[s])}}}finally{di(-1)}}(t,e);const g=t.components;null!==g&&function(t,e){for(let n=0;n<e.length;n++)Eb(t,e[n])}(e,g);const _=t.viewQuery;if(null!==_&&vu(2,_,i),!s)if(c){const w=t.viewCheckHooks;null!==w&&_o(e,w)}else{const w=t.viewHooks;null!==w&&Co(e,w,2),yl(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),s||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,fl(e[3],-1))}finally{yo()}}function sb(t,e,n,i){const r=e[10],s=!go(),c=Uf(e);try{s&&!c&&r.begin&&r.begin(),c&&bs(t,e,i),pr(t,e,n,i)}finally{s&&!c&&r.end&&r.end()}}function Md(t,e,n,i,r){const s=Me.lFrame.selectedIndex,c=2&i;try{di(-1),c&&e.length>20&&function(t,e,n,i){if(!i)if(3==(3&e[2])){const s=t.preOrderCheckHooks;null!==s&&_o(e,s,n)}else{const s=t.preOrderHooks;null!==s&&Co(e,s,0,n)}di(n)}(t,e,20,go()),n(i,r)}finally{di(s)}}function Ad(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=Wo(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function Wo(t,e,n,i,r,s,c,g,_,w){const S=20+i,x=S+r,M=function(t,e){const n=[];for(let i=0;i<e;i++)n.push(i<t?null:Ae);return n}(S,x),P="function"==typeof w?w():w;return M[1]={type:t,blueprint:M,template:n,queries:null,viewQuery:g,declTNode:e,data:M.slice().fill(null,S),bindingStartIndex:S,expandoStartIndex:x,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof c?c():c,firstChild:null,schemas:_,consts:P,incompleteFirstPass:!1}}function Rd(t,e,n,i){const r=function(t){return t[7]||(t[7]=[])}(e);null===n?r.push(i):(r.push(n),t.firstCreatePass&&function(t){return t.cleanup||(t.cleanup=[])}(t).push(i,r.length-1))}function kd(t,e,n){for(let i in t)if(t.hasOwnProperty(i)){const r=t[i];(n=null===n?{}:n).hasOwnProperty(i)?n[i].push(e,r):n[i]=[e,r]}return n}function Ld(t,e,n,i,r,s){const c=s.hostBindings;if(c){let g=t.hostBindingOpCodes;null===g&&(g=t.hostBindingOpCodes=[]);const _=~e.index;(function(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(g)!=_&&g.push(_),g.push(i,r,c)}}function jd(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function Bd(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function vb(t,e,n){if(n){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)n[e.exportAs[i]]=t;vn(e)&&(n[""]=t)}}function Vd(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function Hd(t,e,n,i,r){t.data[i]=r;const s=r.factory||(r.factory=Ai(r.type)),c=new ns(s,vn(r),null);t.blueprint[i]=c,n[i]=c,Ld(t,e,0,i,gr(t,n,r.hostVars,Ae),r)}function _b(t,e,n){const i=on(e,t),r=Ad(n),s=t[10],c=Yo(t,Cs(t,r,null,n.onPush?64:16,i,e,s,s.createRenderer(i,n),null,null));t[e.index]=c}function Cb(t,e,n,i,r,s){const c=s[e];if(null!==c){const g=i.setInput;for(let _=0;_<c.length;){const w=c[_++],S=c[_++],x=c[_++];null!==g?i.setInput(n,x,w,S):n[S]=x}}}function bb(t,e){let n=null,i=0;for(;i<e.length;){const r=e[i];if(0!==r)if(5!==r){if("number"==typeof r)break;t.hasOwnProperty(r)&&(null===n&&(n=[]),n.push(r,t[r],e[i+1])),i+=2}else i+=2;else i+=4}return n}function Eb(t,e){const n=Xt(e,t);if(cl(n)){const i=n[1];80&n[2]?pr(i,n,i.template,n[8]):n[5]>0&&gu(n)}}function gu(t){for(let i=Yl(t);null!==i;i=Gl(i))for(let r=10;r<i.length;r++){const s=i[r];if(1024&s[2]){const c=s[1];pr(c,s,c.template,s[8])}else s[5]>0&&gu(s)}const n=t[1].components;if(null!==n)for(let i=0;i<n.length;i++){const r=Xt(n[i],t);cl(r)&&r[5]>0&&gu(r)}}function Sb(t,e){const n=Xt(e,t),i=n[1];(function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])})(i,n),bs(i,n,n[8])}function Yo(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function yu(t,e,n){const i=e[10];i.begin&&i.begin();try{pr(t,e,t.template,n)}catch(r){throw function(t,e){const n=t[9],i=n?n.get(Li,null):null;i&&i.handleError(e)}(e,r),r}finally{i.end&&i.end()}}function Wd(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],i=Vl(n),r=i[1];sb(r,i,r.template,n)}}(t[8])}function vu(t,e,n){ml(0),e(t,n)}const Ob=(()=>Promise.resolve(null))();function Go(t,e,n){let i=n?t.styles:null,r=n?t.classes:null,s=0;if(null!==e)for(let c=0;c<e.length;c++){const g=e[c];"number"==typeof g?s=g:1==s?r=$a(r,g):2==s&&(i=$a(i,g+": "+e[++c]+";"))}n?t.styles=i:t.stylesWithoutHost=i,n?t.classes=r:t.classesWithoutHost=r}const mr=new Qe("INJECTOR",-1);class qd{get(e,n=us){if(n===us){const i=new Error(`NullInjectorError: No provider for ${Le(e)}!`);throw i.name="NullInjectorError",i}return n}}const ws=new Qe("Set Injector scope."),Ds={},Fb={};let _u;function Kd(){return void 0===_u&&(_u=new qd),_u}function Qd(t,e=null,n=null,i){return new kb(t,n,e||Kd(),i)}class kb{constructor(e,n,i,r=null){this.parent=i,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const s=[];n&&Ln(n,g=>this.processProvider(g,e,n)),Ln([e],g=>this.processInjectorType(g,[],s)),this.records.set(mr,yr(void 0,this));const c=this.records.get(ws);this.scope=null!=c?c.value:null,this.source=r||("object"==typeof e?null:Le(e))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(e=>e.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(e,n=us,i=Te.Default){this.assertNotDestroyed();const r=lr(this),s=ui(void 0);try{if(!(i&Te.SkipSelf)){let g=this.records.get(e);if(void 0===g){const _=function(t){return"function"==typeof t||"object"==typeof t&&t instanceof Qe}(e)&&qn(e);g=_&&this.injectableDefInScope(_)?yr(Cu(e),Ds):null,this.records.set(e,g)}if(null!=g)return this.hydrate(e,g)}return(i&Te.Self?Kd():this.parent).get(e,n=i&Te.Optional&&n===us?null:n)}catch(c){if("NullInjectorError"===c.name){if((c[ar]=c[ar]||[]).unshift(Le(e)),r)throw c;return yh(c,e,"R3InjectorError",this.source)}throw c}finally{ui(s),lr(r)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(e=>this.get(e))}toString(){const e=[];return this.records.forEach((i,r)=>e.push(Le(r))),`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(e,n,i){if(!(e=we(e)))return!1;let r=xf(e);const s=null==r&&e.ngModule||void 0,c=void 0===s?e:s,g=-1!==i.indexOf(c);if(void 0!==s&&(r=xf(s)),null==r)return!1;if(null!=r.imports&&!g){let S;i.push(c);try{Ln(r.imports,x=>{this.processInjectorType(x,n,i)&&(void 0===S&&(S=[]),S.push(x))})}finally{}if(void 0!==S)for(let x=0;x<S.length;x++){const{ngModule:M,providers:P}=S[x];Ln(P,j=>this.processProvider(j,M,P||Ke))}}this.injectorDefTypes.add(c);const _=Ai(c)||(()=>new c);this.records.set(c,yr(_,Ds));const w=r.providers;if(null!=w&&!g){const S=e;Ln(w,x=>this.processProvider(x,S,w))}return void 0!==s&&void 0!==e.providers}processProvider(e,n,i){let r=vr(e=we(e))?e:we(e&&e.provide);const s=function(t,e,n){return Jd(t)?yr(void 0,t.useValue):yr(function(t,e,n){let i;if(vr(t)){const r=we(t);return Ai(r)||Cu(r)}if(Jd(t))i=()=>we(t.useValue);else if(function(t){return!(!t||!t.useFactory)}(t))i=()=>t.useFactory(...Ri(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))i=()=>Ve(we(t.useExisting));else{const r=we(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return Ai(r)||Cu(r);i=()=>new r(...Ri(t.deps))}return i}(t),Ds)}(e);if(vr(e)||!0!==e.multi)this.records.get(r);else{let c=this.records.get(r);c||(c=yr(void 0,Ds,!0),c.factory=()=>Ri(c.multi),this.records.set(r,c)),r=e,c.multi.push(e)}this.records.set(r,s)}hydrate(e,n){return n.value===Ds&&(n.value=Fb,n.value=n.factory()),"object"==typeof n.value&&n.value&&function(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(n.value)&&this.onDestroy.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;const n=we(e.providedIn);return"string"==typeof n?"any"===n||n===this.scope:this.injectorDefTypes.has(n)}}function Cu(t){const e=qn(t),n=null!==e?e.factory:Ai(t);if(null!==n)return n;if(t instanceof Qe)throw new Error(`Token ${Le(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const i=function(t,e){const n=[];for(let i=0;i<t;i++)n.push(e);return n}(e,"?");throw new Error(`Can't resolve all parameters for ${Le(t)}: (${i.join(", ")}).`)}const n=function(t){const e=t&&(t[ro]||t[If]);if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function yr(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function Jd(t){return null!==t&&"object"==typeof t&&Al in t}function vr(t){return"function"==typeof t}const eg=function(t,e,n){return function(t,e=null,n=null,i){const r=Qd(t,e,n,i);return r._resolveInjectorDefTypes(),r}({name:n},e,t,n)};let tt=(()=>{class t{static create(n,i){return Array.isArray(n)?eg(n,i,""):eg(n.providers,n.parent,n.name||"")}}return t.THROW_IF_NOT_FOUND=us,t.NULL=new qd,t.\u0275prov=qe({token:t,providedIn:"any",factory:()=>Ve(mr)}),t.__NG_ELEMENT_ID__=-1,t})();function nw(t,e){vo(Vl(t)[1],yt())}let zo=null;function _r(){if(!zo){const t=$e.Symbol;if(t&&t.iterator)zo=t.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let n=0;n<e.length;++n){const i=e[n];"entries"!==i&&"size"!==i&&Map.prototype[i]===Map.prototype.entries&&(zo=i)}}}return zo}function Ss(t){return!!xu(t)&&(Array.isArray(t)||!(t instanceof Map)&&_r()in t)}function xu(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Pu(t,e,n,i,r){const c=r?"class":"style";!function(t,e,n,i,r){for(let s=0;s<n.length;){const c=n[s++],g=n[s++],_=e[c],w=t.data[c];null!==w.setInput?w.setInput(_,r,i,g):_[g]=r}}(t,n,e.inputs[c],c,i)}function Fu(t,e,n,i){const r=re(),s=Ye(),c=20+t,g=r[11],_=r[c]=$l(g,e,Me.lFrame.currentNamespace),w=s.firstCreatePass?function(t,e,n,i,r,s,c){const g=e.consts,w=dr(e,t,2,r,hi(g,s));return function(t,e,n,i){let r=!1;if(Yf()){const s=function(t,e,n){const i=t.directiveRegistry;let r=null;if(i)for(let s=0;s<i.length;s++){const c=i[s];md(n,c.selectors,!1)&&(r||(r=[]),So(rs(n,e),t,c.type),vn(c)?(Bd(t,n),r.unshift(c)):r.push(c))}return r}(t,e,n),c=null===i?null:{"":-1};if(null!==s){r=!0,Vd(n,t.data.length,s.length);for(let S=0;S<s.length;S++){const x=s[S];x.providersResolver&&x.providersResolver(x)}let g=!1,_=!1,w=gr(t,e,s.length,null);for(let S=0;S<s.length;S++){const x=s[S];n.mergedAttrs=wo(n.mergedAttrs,x.hostAttrs),Hd(t,n,e,w,x),vb(w,x,c),null!==x.contentQueries&&(n.flags|=8),(null!==x.hostBindings||null!==x.hostAttrs||0!==x.hostVars)&&(n.flags|=128);const M=x.type.prototype;!g&&(M.ngOnChanges||M.ngOnInit||M.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),g=!0),!_&&(M.ngOnChanges||M.ngDoCheck)&&((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),_=!0),w++}!function(t,e){const i=e.directiveEnd,r=t.data,s=e.attrs,c=[];let g=null,_=null;for(let w=e.directiveStart;w<i;w++){const S=r[w],x=S.inputs,M=null===s||pd(e)?null:bb(x,s);c.push(M),g=kd(x,w,g),_=kd(S.outputs,w,_)}null!==g&&(g.hasOwnProperty("class")&&(e.flags|=16),g.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=c,e.inputs=g,e.outputs=_}(t,n)}c&&function(t,e,n){if(e){const i=t.localNames=[];for(let r=0;r<e.length;r+=2){const s=n[e[r+1]];if(null==s)throw new Si("301",`Export of name '${e[r+1]}' not found!`);i.push(e[r],s)}}}(n,i,c)}n.mergedAttrs=wo(n.mergedAttrs,n.attrs)}(e,n,w,hi(g,c)),null!==w.attrs&&Go(w,w.attrs,!1),null!==w.mergedAttrs&&Go(w,w.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,w),w}(c,s,r,0,e,n,i):s.data[c];kn(w,!0);const S=w.mergedAttrs;null!==S&&bo(g,_,S);const x=w.classes;null!==x&&Jl(g,_,x);const M=w.styles;null!==M&&hd(g,_,M),64!=(64&w.flags)&&jo(s,r,_,w),0===Me.lFrame.elementDepthCount&&It(_,r),Me.lFrame.elementDepthCount++,function(t){return 1==(1&t.flags)}(w)&&(function(t,e,n){!Yf()||(function(t,e,n,i){const r=n.directiveStart,s=n.directiveEnd;t.firstCreatePass||rs(n,e),It(i,e);const c=n.initialInputs;for(let g=r;g<s;g++){const _=t.data[g],w=vn(_);w&&_b(e,n,_);const S=ss(e,t,g,n);It(S,e),null!==c&&Cb(0,g-r,S,_,0,c),w&&(Xt(n.index,e)[8]=S)}}(t,e,n,on(n,e)),128==(128&n.flags)&&function(t,e,n){const i=n.directiveStart,r=n.directiveEnd,c=n.index,g=Me.lFrame.currentDirectiveIndex;try{di(c);for(let _=i;_<r;_++){const w=t.data[_],S=e[_];gl(_),(null!==w.hostBindings||0!==w.hostVars||null!==w.hostAttrs)&&jd(w,S)}}finally{di(-1),gl(g)}}(t,e,n))}(s,r,w),function(t,e,n){if(il(e)){const r=e.directiveEnd;for(let s=e.directiveStart;s<r;s++){const c=t.data[s];c.contentQueries&&c.contentQueries(1,n[s],s)}}}(s,w,r)),null!==i&&function(t,e,n=on){const i=e.localNames;if(null!==i){let r=e.index+1;for(let s=0;s<i.length;s+=2){const c=i[s+1],g=-1===c?n(e,t):t[c];t[r++]=g}}}(r,w)}function Ru(){let t=yt();hl()?Me.lFrame.isParent=!1:(t=t.parent,kn(t,!1));const e=t;Me.lFrame.elementDepthCount--;const n=Ye();n.firstCreatePass&&(vo(n,t),il(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&Pu(n,e,re(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&Pu(n,e,re(),e.stylesWithoutHost,!1)}function ku(t){return!!t&&"function"==typeof t.then}const Gg=function(t){return!!t&&"function"==typeof t.subscribe},Vi=void 0;var PD=["en",[["a","p"],["AM","PM"],Vi],[["AM","PM"],Vi,Vi],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Vi,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Vi,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Vi,"{1} 'at' {0}",Vi],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){const e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let Ar={};function Hp(t){return t in Ar||(Ar[t]=$e.ng&&$e.ng.common&&$e.ng.common.locales&&$e.ng.common.locales[t]),Ar[t]}var pe=(()=>((pe=pe||{})[pe.LocaleId=0]="LocaleId",pe[pe.DayPeriodsFormat=1]="DayPeriodsFormat",pe[pe.DayPeriodsStandalone=2]="DayPeriodsStandalone",pe[pe.DaysFormat=3]="DaysFormat",pe[pe.DaysStandalone=4]="DaysStandalone",pe[pe.MonthsFormat=5]="MonthsFormat",pe[pe.MonthsStandalone=6]="MonthsStandalone",pe[pe.Eras=7]="Eras",pe[pe.FirstDayOfWeek=8]="FirstDayOfWeek",pe[pe.WeekendRange=9]="WeekendRange",pe[pe.DateFormat=10]="DateFormat",pe[pe.TimeFormat=11]="TimeFormat",pe[pe.DateTimeFormat=12]="DateTimeFormat",pe[pe.NumberSymbols=13]="NumberSymbols",pe[pe.NumberFormats=14]="NumberFormats",pe[pe.CurrencyCode=15]="CurrencyCode",pe[pe.CurrencySymbol=16]="CurrencySymbol",pe[pe.CurrencyName=17]="CurrencyName",pe[pe.Currencies=18]="Currencies",pe[pe.Directionality=19]="Directionality",pe[pe.PluralCase=20]="PluralCase",pe[pe.ExtraData=21]="ExtraData",pe))();const Ko="en-US";let Up=Ko;function Vu(t){zt(t,"Expected localeId to be defined"),"string"==typeof t&&(Up=t.toLowerCase().replace(/_/g,"-"))}class dm{}const pm="ngComponent";class FE{resolveComponentFactory(e){throw function(t){const e=Error(`No component factory found for ${Le(t)}. Did you add it to @NgModule.entryComponents?`);return e[pm]=t,e}(e)}}let vi=(()=>{class t{}return t.NULL=new FE,t})();function ta(...t){}function Fr(t,e){return new Sn(on(t,e))}const NE=function(){return Fr(yt(),re())};let Sn=(()=>{class t{constructor(n){this.nativeElement=n}}return t.__NG_ELEMENT_ID__=NE,t})();function mm(t){return t instanceof Sn?t.nativeElement:t}class na{}let Xu=(()=>{class t{}return t.\u0275prov=qe({token:t,providedIn:"root",factory:()=>null}),t})();class ia{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const vm=new ia("12.2.16");class _m{constructor(){}supports(e){return Ss(e)}create(e){return new UE(e)}}const HE=(t,e)=>e;class UE{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||HE}forEachItem(e){let n;for(n=this._itHead;null!==n;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,i=this._removalsHead,r=0,s=null;for(;n||i;){const c=!i||n&&n.currentIndex<bm(i,r,s)?n:i,g=bm(c,r,s),_=c.currentIndex;if(c===i)r--,i=i._nextRemoved;else if(n=n._next,null==c.previousIndex)r++;else{s||(s=[]);const w=g-r,S=_-r;if(w!=S){for(let M=0;M<w;M++){const P=M<s.length?s[M]:s[M]=0,j=P+M;S<=j&&j<w&&(s[M]=P+1)}s[c.previousIndex]=S-w}}g!==_&&e(c,g,_)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)e(n)}diff(e){if(null==e&&(e=[]),!Ss(e))throw new Error(`Error trying to diff '${Le(e)}'. Only arrays and iterables are allowed`);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let r,s,c,n=this._itHead,i=!1;if(Array.isArray(e)){this.length=e.length;for(let g=0;g<this.length;g++)s=e[g],c=this._trackByFn(g,s),null!==n&&Object.is(n.trackById,c)?(i&&(n=this._verifyReinsertion(n,s,c,g)),Object.is(n.item,s)||this._addIdentityChange(n,s)):(n=this._mismatch(n,s,c,g),i=!0),n=n._next}else r=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[_r()]();let i;for(;!(i=n.next()).done;)e(i.value)}}(e,g=>{c=this._trackByFn(r,g),null!==n&&Object.is(n.trackById,c)?(i&&(n=this._verifyReinsertion(n,g,c,r)),Object.is(n.item,g)||this._addIdentityChange(n,g)):(n=this._mismatch(n,g,c,r),i=!0),n=n._next,r++}),this.length=r;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,i,r){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,s,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(i,r))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,s,r)):e=this._addAfter(new WE(n,i),s,r),e}_verifyReinsertion(e,n,i,r){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==s?e=this._reinsertAfter(s,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const n=e._next;this._addToRemovals(this._unlink(e)),e=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,s=e._nextRemoved;return null===r?this._removalsHead=s:r._nextRemoved=s,null===s?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(e,n,i),this._addToMoves(e,i),e}_moveAfter(e,n,i){return this._unlink(e),this._insertAfter(e,n,i),this._addToMoves(e,i),e}_addAfter(e,n,i){return this._insertAfter(e,n,i),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,n,i){const r=null===n?this._itHead:n._next;return e._next=r,e._prev=n,null===r?this._itTail=e:r._prev=e,null===n?this._itHead=e:n._next=e,null===this._linkedRecords&&(this._linkedRecords=new Cm),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const n=e._prev,i=e._next;return null===n?this._itHead=i:n._next=i,null===i?this._itTail=n:i._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Cm),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class WE{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class YE{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===n||n<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){const n=e._prevDup,i=e._nextDup;return null===n?this._head=i:n._nextDup=i,null===i?this._tail=n:i._prevDup=n,null===this._head}}class Cm{constructor(){this.map=new Map}put(e){const n=e.trackById;let i=this.map.get(n);i||(i=new YE,this.map.set(n,i)),i.add(e)}get(e,n){const r=this.map.get(e);return r?r.get(e,n):null}remove(e){const n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function bm(t,e,n){const i=t.previousIndex;if(null===i)return i;let r=0;return n&&i<n.length&&(r=n[i]),i+e+r}class wm{constructor(){}supports(e){return e instanceof Map||xu(e)}create(){return new GE}}class GE{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let n;for(n=this._mapHead;null!==n;n=n._next)e(n)}forEachPreviousItem(e){let n;for(n=this._previousMapHead;null!==n;n=n._nextPrevious)e(n)}forEachChangedItem(e){let n;for(n=this._changesHead;null!==n;n=n._nextChanged)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}diff(e){if(e){if(!(e instanceof Map||xu(e)))throw new Error(`Error trying to diff '${Le(e)}'. Only maps and objects are allowed`)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._mapHead;if(this._appendAfter=null,this._forEach(e,(i,r)=>{if(n&&n.key===r)this._maybeAddToChanges(n,i),this._appendAfter=n,n=n._next;else{const s=this._getOrCreateRecordForKey(r,i);n=this._insertBeforeOrAppend(n,s)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(let i=n;null!==i;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,n){if(e){const i=e._prev;return n._next=e,n._prev=i,e._prev=n,i&&(i._next=n),e===this._mapHead&&(this._mapHead=n),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=n,n._prev=this._appendAfter):this._mapHead=n,this._appendAfter=n,null}_getOrCreateRecordForKey(e,n){if(this._records.has(e)){const r=this._records.get(e);this._maybeAddToChanges(r,n);const s=r._prev,c=r._next;return s&&(s._next=c),c&&(c._prev=s),r._next=null,r._prev=null,r}const i=new zE(e);return this._records.set(e,i),i.currentValue=n,this._addToAdditions(i),i}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,n){Object.is(n,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=n,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,n){e instanceof Map?e.forEach(n):Object.keys(e).forEach(i=>n(e[i],i))}}class zE{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Dm(){return new Ps([new _m])}let Ps=(()=>{class t{constructor(n){this.factories=n}static create(n,i){if(null!=i){const r=i.factories.slice();n=n.concat(r)}return new t(n)}static extend(n){return{provide:t,useFactory:i=>t.create(n,i||Dm()),deps:[[t,new ki,new jn]]}}find(n){const i=this.factories.find(r=>r.supports(n));if(null!=i)return i;throw new Error(`Cannot find a differ supporting object '${n}' of type '${function(t){return t.name||typeof t}(n)}'`)}}return t.\u0275prov=qe({token:t,providedIn:"root",factory:Dm}),t})();function Em(){return new Rr([new wm])}let Rr=(()=>{class t{constructor(n){this.factories=n}static create(n,i){if(i){const r=i.factories.slice();n=n.concat(r)}return new t(n)}static extend(n){return{provide:t,useFactory:i=>t.create(n,i||Em()),deps:[[t,new ki,new jn]]}}find(n){const i=this.factories.find(r=>r.supports(n));if(i)return i;throw new Error(`Cannot find a differ supporting object '${n}'`)}}return t.\u0275prov=qe({token:t,providedIn:"root",factory:Em}),t})();function ra(t,e,n,i,r=!1){for(;null!==n;){const s=e[n.index];if(null!==s&&i.push(dt(s)),yn(s))for(let g=10;g<s.length;g++){const _=s[g],w=_[1].firstChild;null!==w&&ra(_[1],_,w,i)}const c=n.type;if(8&c)ra(t,e,n.child,i);else if(32&c){const g=Wl(n,e);let _;for(;_=g();)i.push(_)}else if(16&c){const g=ud(e,n);if(Array.isArray(g))i.push(...g);else{const _=vs(e[16]);ra(_[1],_,g,i,!0)}}n=r?n.projectionNext:n.next}return i}class Fs{constructor(e,n){this._lView=e,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,n=e[1];return ra(n,e,n.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(yn(e)){const n=e[8],i=n?n.indexOf(this):-1;i>-1&&(Xl(e,i),Fi(n,i))}this._attachedToViewContainer=!1}ed(this._lView[1],this._lView)}onDestroy(e){Rd(this._lView[1],this._lView,null,e)}markForCheck(){!function(t){for(;t;){t[2]|=64;const e=vs(t);if(g_(t)&&!e)return t;t=e}}(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){yu(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){po(!0);try{yu(t,e,n)}finally{po(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function(t,e){_s(t,e,e[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=e}}class XE extends Fs{constructor(e){super(e),this._view=e}detectChanges(){Wd(this._view)}checkNoChanges(){!function(t){po(!0);try{Wd(t)}finally{po(!1)}}(this._view)}get context(){return null}}const KE=function(t){return function(t,e,n){if(uo(t)&&!n){const i=Xt(t.index,e);return new Fs(i,i)}return 47&t.type?new Fs(e[16],e):null}(yt(),re(),16==(16&t))};let Sm=(()=>{class t{}return t.__NG_ELEMENT_ID__=KE,t})();const JE=[new wm],tS=new Ps([new _m]),nS=new Rr(JE),rS=function(){return sa(yt(),re())};let ni=(()=>{class t{}return t.__NG_ELEMENT_ID__=rS,t})();const sS=ni,oS=class extends sS{constructor(e,n,i){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=i}createEmbeddedView(e){const n=this._declarationTContainer.tViews,i=Cs(this._declarationLView,n,e,16,null,n.declTNode,null,null,null,null);i[17]=this._declarationLView[this._declarationTContainer.index];const s=this._declarationLView[19];return null!==s&&(i[19]=s.createEmbeddedView(n)),bs(n,i,e),new Fs(i)}};function sa(t,e){return 4&t.type?new oS(e,t,Fr(t,e)):null}class Hi{}const cS=function(){return Im(yt(),re())};let zn=(()=>{class t{}return t.__NG_ELEMENT_ID__=cS,t})();const hS=zn,Tm=class extends hS{constructor(e,n,i){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=i}get element(){return Fr(this._hostTNode,this._hostLView)}get injector(){return new nr(this._hostTNode,this._hostLView)}get parentInjector(){const e=Eo(this._hostTNode,this._hostLView);if(ih(e)){const n=tr(e,this._hostLView),i=er(e);return new nr(n[1].data[i+8],n)}return new nr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const n=xm(this._lContainer);return null!==n&&n[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,n,i){const r=e.createEmbeddedView(n||{});return this.insert(r,i),r}createComponent(e,n,i,r,s){const c=i||this.parentInjector;if(!s&&null==e.ngModule&&c){const _=c.get(Hi,null);_&&(s=_)}const g=e.create(c,r,void 0,s);return this.insert(g.hostView,n),g}insert(e,n){const i=e._lView,r=i[1];if(function(t){return yn(t[3])}(i)){const S=this.indexOf(e);if(-1!==S)this.detach(S);else{const x=i[3],M=new Tm(x,x[6],x[3]);M.detach(M.indexOf(e))}}const s=this._adjustIndex(n),c=this._lContainer;!function(t,e,n,i){const r=10+i,s=n.length;i>0&&(n[r-1][4]=e),i<s-10?(e[4]=n[r],Io(n,10+i,e)):(n.push(e),e[4]=null),e[3]=n;const c=e[17];null!==c&&n!==c&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(c,e);const g=e[19];null!==g&&g.insertView(t),e[2]|=128}(r,i,c,s);const g=Ql(s,c),_=i[11],w=Lo(_,c[7]);return null!==w&&function(t,e,n,i,r,s){i[0]=r,i[6]=e,_s(t,i,n,1,r,s)}(r,c[6],_,i,w,g),e.attachToViewContainerRef(),Io(qu(c),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){const n=xm(this._lContainer);return null!==n?n.indexOf(e):-1}remove(e){const n=this._adjustIndex(e,-1),i=Xl(this._lContainer,n);i&&(Fi(qu(this._lContainer),n),ed(i[1],i))}detach(e){const n=this._adjustIndex(e,-1),i=Xl(this._lContainer,n);return i&&null!=Fi(qu(this._lContainer),n)?new Fs(i):null}_adjustIndex(e,n=0){return null==e?this.length+n:e}};function xm(t){return t[8]}function qu(t){return t[8]||(t[8]=[])}function Im(t,e){let n;const i=e[t.index];if(yn(i))n=i;else{let r;if(8&t.type)r=dt(i);else{const s=e[11];r=s.createComment("");const c=on(t,e);ji(s,Lo(s,c),r,function(t,e){return lt(t)?t.nextSibling(e):e.nextSibling}(s,c),!1)}e[t.index]=n=function(t,e,n,i){return new Array(t,!0,!1,e,null,0,i,n,null,null)}(i,e,r,t),Yo(e,n)}return new Tm(n,t,e)}const jr={};class Xm extends vi{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const n=Ft(e);return new Km(n,this.ngModule)}}function qm(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const lT=new Qe("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>zh});class Km extends dm{constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=function(t){return t.map(G0).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}get inputs(){return qm(this.componentDef.inputs)}get outputs(){return qm(this.componentDef.outputs)}create(e,n,i,r){const s=(r=r||this.ngModule)?function(t,e){return{get:(n,i,r)=>{const s=t.get(n,jr,r);return s!==jr||i===jr?s:e.get(n,i,r)}}}(e,r.injector):e,c=s.get(na,Hf),g=s.get(Xu,null),_=c.createRenderer(null,this.componentDef),w=this.componentDef.selectors[0][0]||"div",S=i?function(t,e,n){if(lt(t))return t.selectRootElement(e,n===mt.ShadowDom);let i="string"==typeof e?t.querySelector(e):e;return i.textContent="",i}(_,i,this.componentDef.encapsulation):$l(c.createRenderer(null,this.componentDef),w,function(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(w)),x=this.componentDef.onPush?576:528,M=function(t,e){return{components:[],scheduler:t||zh,clean:Ob,playerHandler:e||null,flags:0}}(),P=Wo(0,null,null,1,0,null,null,null,null,null),j=Cs(null,P,M,x,null,null,c,_,g,s);let Y,H;mo(j);try{const se=function(t,e,n,i,r,s){const c=n[1];n[20]=t;const _=dr(c,20,2,"#host",null),w=_.mergedAttrs=e.hostAttrs;null!==w&&(Go(_,w,!0),null!==t&&(bo(r,t,w),null!==_.classes&&Jl(r,t,_.classes),null!==_.styles&&hd(r,t,_.styles)));const S=i.createRenderer(t,e),x=Cs(n,Ad(e),null,e.onPush?64:16,n[20],_,i,S,s||null,null);return c.firstCreatePass&&(So(rs(_,n),c,e.type),Bd(c,_),Vd(_,n.length,1)),Yo(n,x),n[20]=x}(S,this.componentDef,j,c,_);if(S)if(i)bo(_,S,["ng-version",vm.full]);else{const{attrs:K,classes:ye}=function(t){const e=[],n=[];let i=1,r=2;for(;i<t.length;){let s=t[i];if("string"==typeof s)2===r?""!==s&&e.push(s,t[++i]):8===r&&n.push(s);else{if(!_n(r))break;r=s}i++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);K&&bo(_,S,K),ye&&ye.length>0&&Jl(_,S,ye.join(" "))}if(H=function(t,e){return t.data[e]}(P,20),void 0!==n){const K=H.projection=[];for(let ye=0;ye<this.ngContentSelectors.length;ye++){const De=n[ye];K.push(null!=De?Array.from(De):null)}}Y=function(t,e,n,i,r){const s=n[1],c=function(t,e,n){const i=yt();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),Hd(t,i,e,gr(t,e,1,null),n));const r=ss(e,t,i.directiveStart,i);It(r,e);const s=on(i,e);return s&&It(s,e),r}(s,n,e);if(i.components.push(c),t[8]=c,r&&r.forEach(_=>_(c,e)),e.contentQueries){const _=yt();e.contentQueries(1,c,_.directiveStart)}const g=yt();return!s.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(di(g.index),Ld(n[1],g,0,g.directiveStart,g.directiveEnd,e),jd(e,c)),c}(se,this.componentDef,j,M,[nw]),bs(P,j,null)}finally{yo()}return new fT(this.componentType,Y,Fr(H,j),j,H)}}class fT extends class{}{constructor(e,n,i,r,s){super(),this.location=i,this._rootLView=r,this._tNode=s,this.instance=n,this.hostView=this.changeDetectorRef=new XE(r),this.componentType=e}get injector(){return new nr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}const Br=new Map;class gT extends Hi{constructor(e,n){super(),this._parent=n,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Xm(this);const i=nn(e),r=function(t){return t[o_]||null}(e);r&&Vu(r),this._bootstrapComponents=Hn(i.bootstrap),this._r3Injector=Qd(e,n,[{provide:Hi,useValue:this},{provide:vi,useValue:this.componentFactoryResolver}],Le(e)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(e)}get(e,n=tt.THROW_IF_NOT_FOUND,i=Te.Default){return e===tt||e===Hi||e===mr?this:this._r3Injector.get(e,n,i)}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class lc extends class{}{constructor(e){super(),this.moduleType=e,null!==nn(e)&&function(t){const e=new Set;!function n(i){const r=nn(i,!0),s=r.id;null!==s&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${Le(e)} vs ${Le(e.name)}`)}(s,Br.get(s),i),Br.set(s,i));const c=Hn(r.imports);for(const g of c)e.has(g)||(e.add(g),n(g))}(t)}(e)}create(e){return new gT(this.moduleType,e)}}function uc(t){return e=>{setTimeout(t,void 0,e)}}const ii=class extends ue{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,i){var r,s,c;let g=e,_=n||(()=>null),w=i;if(e&&"object"==typeof e){const x=e;g=null===(r=x.next)||void 0===r?void 0:r.bind(x),_=null===(s=x.error)||void 0===s?void 0:s.bind(x),w=null===(c=x.complete)||void 0===c?void 0:c.bind(x)}this.__isAsync&&(_=uc(_),g&&(g=uc(g)),w&&(w=uc(w)));const S=super.subscribe({next:g,error:_,complete:w});return e instanceof d&&e.add(S),S}};function FT(){return this._results[_r()]()}class ca{constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const n=_r(),i=ca.prototype;i[n]||(i[n]=FT)}get changes(){return this._changes||(this._changes=new ii)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){const i=this;i.dirty=!1;const r=an(e);(this._changesDetected=!function(t,e,n){if(t.length!==e.length)return!1;for(let i=0;i<t.length;i++){let r=t[i],s=e[i];if(n&&(r=n(r),s=n(s)),s!==r)return!1}return!0}(i._results,r,n))&&(i._results=r,i.length=r.length,i.last=r[this.length-1],i.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class cc{constructor(e){this.queryList=e,this.matches=null}clone(){return new cc(this.queryList)}setDirty(){this.queryList.setDirty()}}class fc{constructor(e=[]){this.queries=e}createEmbeddedView(e){const n=e.queries;if(null!==n){const i=null!==e.contentQueries?e.contentQueries[0]:n.length,r=[];for(let s=0;s<i;s++){const c=n.getByIndex(s);r.push(this.queries[c.indexInDeclarationView].clone())}return new fc(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)null!==ly(e,n).matches&&this.queries[n].setDirty()}}class ry{constructor(e,n,i=null){this.predicate=e,this.flags=n,this.read=i}}class hc{constructor(e=[]){this.queries=e}elementStart(e,n){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let i=0;i<this.length;i++){const r=null!==n?n.length:0,s=this.getByIndex(i).embeddedTView(e,r);s&&(s.indexInDeclarationView=i,null!==n?n.push(s):n=[s])}return null!==n?new hc(n):null}template(e,n){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class dc{constructor(e,n=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new dc(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const n=this._declarationNodeIndex;let i=e.parent;for(;null!==i&&8&i.type&&i.index!==n;)i=i.parent;return n===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(e,n){const i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){const s=i[r];this.matchTNodeWithReadOption(e,n,NT(n,s)),this.matchTNodeWithReadOption(e,n,To(n,e,s,!1,!1))}else i===ni?4&n.type&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,To(n,e,i,!1,!1))}matchTNodeWithReadOption(e,n,i){if(null!==i){const r=this.metadata.read;if(null!==r)if(r===Sn||r===zn||r===ni&&4&n.type)this.addMatch(n.index,-2);else{const s=To(n,e,r,!1,!1);null!==s&&this.addMatch(n.index,s)}else this.addMatch(n.index,i)}}addMatch(e,n){null===this.matches?this.matches=[e,n]:this.matches.push(e,n)}}function NT(t,e){const n=t.localNames;if(null!==n)for(let i=0;i<n.length;i+=2)if(n[i]===e)return n[i+1];return null}function jT(t,e,n,i){return-1===n?function(t,e){return 11&t.type?Fr(t,e):4&t.type?sa(t,e):null}(e,t):-2===n?function(t,e,n){return n===Sn?Fr(e,t):n===ni?sa(e,t):n===zn?Im(e,t):void 0}(t,e,i):ss(t,t[1],n,e)}function sy(t,e,n,i){const r=e[19].queries[i];if(null===r.matches){const s=t.data,c=n.matches,g=[];for(let _=0;_<c.length;_+=2){const w=c[_];g.push(w<0?null:jT(e,s[w],c[_+1],n.metadata.read))}r.matches=g}return r.matches}function gc(t,e,n,i){const r=t.queries.getByIndex(n),s=r.matches;if(null!==s){const c=sy(t,e,r,n);for(let g=0;g<s.length;g+=2){const _=s[g];if(_>0)i.push(c[g/2]);else{const w=s[g+1],S=e[-_];for(let x=10;x<S.length;x++){const M=S[x];M[17]===M[3]&&gc(M[1],M,w,i)}if(null!==S[9]){const x=S[9];for(let M=0;M<x.length;M++){const P=x[M];gc(P[1],P,w,i)}}}}}return i}function pc(t){const e=re(),n=Ye(),i=Xf();ml(i+1);const r=ly(n,i);if(t.dirty&&Uf(e)===(2==(2&r.metadata.flags))){if(null===r.matches)t.reset([]);else{const s=r.crossesNgTemplate?gc(n,e,i,[]):sy(n,e,r,i);t.reset(s,mm),t.notifyOnChanges()}return!0}return!1}function mc(t,e,n){const i=Ye();i.firstCreatePass&&(function(t,e,n){null===t.queries&&(t.queries=new hc),t.queries.track(new dc(e,n))}(i,new ry(t,e,n),-1),2==(2&e)&&(i.staticViewQueries=!0)),function(t,e,n){const i=new ca(4==(4&n));Rd(t,e,i,i.destroy),null===e[19]&&(e[19]=new fc),e[19].queries.push(new cc(i))}(i,re(),e)}function yc(){return function(t,e){return t[19].queries[e].queryList}(re(),Xf())}function ly(t,e){return t.queries.getByIndex(e)}const da=new Qe("Application Initializer");let Hr=(()=>{class t{constructor(n){this.appInits=n,this.resolve=ta,this.reject=ta,this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,r)=>{this.resolve=i,this.reject=r})}runInitializers(){if(this.initialized)return;const n=[],i=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let r=0;r<this.appInits.length;r++){const s=this.appInits[r]();if(ku(s))n.push(s);else if(Gg(s)){const c=new Promise((g,_)=>{s.subscribe({complete:g,error:_})});n.push(c)}}Promise.all(n).then(()=>{i()}).catch(r=>{this.reject(r)}),0===n.length&&i(),this.initialized=!0}}return t.\u0275fac=function(n){return new(n||t)(Ve(da,8))},t.\u0275prov=qe({token:t,factory:t.\u0275fac}),t})();const Gs=new Qe("AppId"),mx={provide:Gs,useFactory:function(){return`${Dc()}${Dc()}${Dc()}`},deps:[]};function Dc(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Ty=new Qe("Platform Initializer"),Ec=new Qe("Platform ID"),yx=new Qe("appBootstrapListener");let Sc=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=qe({token:t,factory:t.\u0275fac}),t})();const Ci=new Qe("LocaleId"),xy=new Qe("DefaultCurrencyCode");class _x{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}}const Tc=function(t){return new lc(t)},Cx=Tc,bx=function(t){return Promise.resolve(Tc(t))},Iy=function(t){const e=Tc(t),i=Hn(nn(t).declarations).reduce((r,s)=>{const c=Ft(s);return c&&r.push(new Km(c)),r},[]);return new _x(e,i)},wx=Iy,Dx=function(t){return Promise.resolve(Iy(t))};let pa=(()=>{class t{constructor(){this.compileModuleSync=Cx,this.compileModuleAsync=bx,this.compileModuleAndAllComponentsSync=wx,this.compileModuleAndAllComponentsAsync=Dx}clearCache(){}clearCacheFor(n){}getModuleId(n){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=qe({token:t,factory:t.\u0275fac}),t})();const Tx=(()=>Promise.resolve(0))();function xc(t){"undefined"==typeof Zone?Tx.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class Et{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ii(!1),this.onMicrotaskEmpty=new ii(!1),this.onStable=new ii(!1),this.onError=new ii(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&n,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function(){let t=$e.requestAnimationFrame,e=$e.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=()=>{!function(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call($e,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Mc(t),t.isCheckStableRunning=!0,Ic(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Mc(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,i,r,s,c,g)=>{try{return My(t),n.invokeTask(r,s,c,g)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||t.shouldCoalesceRunChangeDetection)&&e(),Oy(t)}},onInvoke:(n,i,r,s,c,g,_)=>{try{return My(t),n.invoke(r,s,c,g,_)}finally{t.shouldCoalesceRunChangeDetection&&e(),Oy(t)}},onHasTask:(n,i,r,s)=>{n.hasTask(r,s),i===r&&("microTask"==s.change?(t._hasPendingMicrotasks=s.microTask,Mc(t),Ic(t)):"macroTask"==s.change&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,i,r,s)=>(n.handleError(r,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}(r)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Et.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Et.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(e,n,i){return this._inner.run(e,n,i)}runTask(e,n,i,r){const s=this._inner,c=s.scheduleEventTask("NgZoneEvent: "+r,e,Ix,ta,ta);try{return s.runTask(c,n,i)}finally{s.cancelTask(c)}}runGuarded(e,n,i){return this._inner.runGuarded(e,n,i)}runOutsideAngular(e){return this._outer.run(e)}}const Ix={};function Ic(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Mc(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function My(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Oy(t){t._nesting--,Ic(t)}class Ax{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ii,this.onMicrotaskEmpty=new ii,this.onStable=new ii,this.onError=new ii}run(e,n,i){return e.apply(n,i)}runGuarded(e,n,i){return e.apply(n,i)}runOutsideAngular(e){return e()}runTask(e,n,i,r){return e.apply(n,i)}}let Oc=(()=>{class t{constructor(n){this._ngZone=n,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Et.assertNotInAngularZone(),xc(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())xc(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(n)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,i,r){let s=-1;i&&i>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(c=>c.timeoutId!==s),n(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:n,timeoutId:s,updateCb:r})}whenStable(n,i,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,i,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(n,i,r){return[]}}return t.\u0275fac=function(n){return new(n||t)(Ve(Et))},t.\u0275prov=qe({token:t,factory:t.\u0275fac}),t})(),Ay=(()=>{class t{constructor(){this._applications=new Map,Ac.addToWindow(this)}registerApplication(n,i){this._applications.set(n,i)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,i=!0){return Ac.findTestabilityInTree(this,n,i)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=qe({token:t,factory:t.\u0275fac}),t})();class Px{addToWindow(e){}findTestabilityInTree(e,n,i){return null}}let Ac=new Px,Py=!0,Fy=!1;let In;const ky=new Qe("AllowMultipleToken");function Ny(t,e,n=[]){const i=`Platform: ${e}`,r=new Qe(i);return(s=[])=>{let c=Ly();if(!c||c.injector.get(ky,!1))if(t)t(n.concat(s).concat({provide:r,useValue:!0}));else{const g=n.concat(s).concat({provide:r,useValue:!0},{provide:ws,useValue:"platform"});!function(t){if(In&&!In.destroyed&&!In.injector.get(ky,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");In=t.get(jy);const e=t.get(Ty,null);e&&e.forEach(n=>n())}(tt.create({providers:g,name:i}))}return function(t){const e=Ly();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(r)}}function Ly(){return In&&!In.destroyed?In:null}let jy=(()=>{class t{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,i){const g=function(t,e){let n;return n="noop"===t?new Ax:("zone.js"===t?void 0:t)||new Et({enableLongStackTrace:(Fy=!0,Py),shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),n}(i?i.ngZone:void 0,{ngZoneEventCoalescing:i&&i.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:i&&i.ngZoneRunCoalescing||!1}),_=[{provide:Et,useValue:g}];return g.run(()=>{const w=tt.create({providers:_,parent:this.injector,name:n.moduleType.name}),S=n.create(w),x=S.injector.get(Li,null);if(!x)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return g.runOutsideAngular(()=>{const M=g.onError.subscribe({next:P=>{x.handleError(P)}});S.onDestroy(()=>{Pc(this._modules,S),M.unsubscribe()})}),function(t,e,n){try{const i=n();return ku(i)?i.catch(r=>{throw e.runOutsideAngular(()=>t.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>t.handleError(i)),i}}(x,g,()=>{const M=S.injector.get(Hr);return M.runInitializers(),M.donePromise.then(()=>(Vu(S.injector.get(Ci,Ko)||Ko),this._moduleDoBootstrap(S),S))})})}bootstrapModule(n,i=[]){const r=By({},i);return function(t,e,n){const i=new lc(n);return Promise.resolve(i)}(0,0,n).then(s=>this.bootstrapModuleFactory(s,r))}_moduleDoBootstrap(n){const i=n.injector.get(Ur);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>i.bootstrap(r));else{if(!n.instance.ngDoBootstrap)throw new Error(`The module ${Le(n.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);n.instance.ngDoBootstrap(i)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(n=>n.destroy()),this._destroyListeners.forEach(n=>n()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(n){return new(n||t)(Ve(tt))},t.\u0275prov=qe({token:t,factory:t.\u0275fac}),t})();function By(t,e){return Array.isArray(e)?e.reduce(By,t):Object.assign(Object.assign({},t),e)}let Ur=(()=>{class t{constructor(n,i,r,s,c){this._zone=n,this._injector=i,this._exceptionHandler=r,this._componentFactoryResolver=s,this._initStatus=c,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const g=new I(w=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{w.next(this._stable),w.complete()})}),_=new I(w=>{let S;this._zone.runOutsideAngular(()=>{S=this._zone.onStable.subscribe(()=>{Et.assertNotInAngularZone(),xc(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,w.next(!0))})})});const x=this._zone.onUnstable.subscribe(()=>{Et.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{w.next(!1)}))});return()=>{S.unsubscribe(),x.unsubscribe()}});this.isStable=Ge(g,_.pipe(t=>wt()(function(t,e){return function(i){let r;r="function"==typeof t?t:function(){return t};const s=Object.create(i,Jt);return s.source=i,s.subjectFactory=r,s}}(zv)(t))))}bootstrap(n,i){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let r;r=n instanceof dm?n:this._componentFactoryResolver.resolveComponentFactory(n),this.componentTypes.push(r.componentType);const s=function(t){return t.isBoundToModule}(r)?void 0:this._injector.get(Hi),g=r.create(tt.NULL,[],i||r.selector,s),_=g.location.nativeElement,w=g.injector.get(Oc,null),S=w&&g.injector.get(Ay);return w&&S&&S.registerApplication(_,w),g.onDestroy(()=>{this.detachView(g.hostView),Pc(this.components,g),S&&S.unregisterApplication(_)}),this._loadComponent(g),g}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(n))}finally{this._runningTick=!1}}attachView(n){const i=n;this._views.push(i),i.attachToAppRef(this)}detachView(n){const i=n;Pc(this._views,i),i.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n),this._injector.get(yx,[]).concat(this._bootstrapListeners).forEach(r=>r(n))}ngOnDestroy(){this._views.slice().forEach(n=>n.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(n){return new(n||t)(Ve(Et),Ve(tt),Ve(Li),Ve(vi),Ve(Hr))},t.\u0275prov=qe({token:t,factory:t.\u0275fac}),t})();function Pc(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const s1=Ny(null,"core",[{provide:Ec,useValue:"unknown"},{provide:jy,deps:[tt]},{provide:Ay,deps:[]},{provide:Sc,deps:[]}]),c1=[{provide:Ur,useClass:Ur,deps:[Et,tt,Li,vi,Hr]},{provide:lT,deps:[Et],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(n){e.push(n)}}},{provide:Hr,useClass:Hr,deps:[[new jn,da]]},{provide:pa,useClass:pa,deps:[]},mx,{provide:Ps,useFactory:function(){return tS},deps:[]},{provide:Rr,useFactory:function(){return nS},deps:[]},{provide:Ci,useFactory:function(t){return Vu(t=t||"undefined"!=typeof $localize&&$localize.locale||Ko),t},deps:[[new hs(Ci),new jn,new ki]]},{provide:xy,useValue:"USD"}];let h1=(()=>{class t{constructor(n){}}return t.\u0275fac=function(n){return new(n||t)(Ve(Ur))},t.\u0275mod=Qr({type:t}),t.\u0275inj=Ti({providers:c1}),t})(),Sa=null;function Ks(){return Sa}const Vt=new Qe("DocumentToken");var gt=(()=>((gt=gt||{})[gt.Zero=0]="Zero",gt[gt.One=1]="One",gt[gt.Two=2]="Two",gt[gt.Few=3]="Few",gt[gt.Many=4]="Many",gt[gt.Other=5]="Other",gt))();const CI=function(t){return function(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=Hp(e);if(n)return n;const i=e.split("-")[0];if(n=Hp(i),n)return n;if("en"===i)return PD;throw new Error(`Missing locale data for the locale "${t}".`)}(t)[pe.PluralCase]};class ka{}let qI=(()=>{class t extends ka{constructor(n){super(),this.locale=n}getPluralCategory(n,i){switch(CI(i||this.locale)(n)){case gt.Zero:return"zero";case gt.One:return"one";case gt.Two:return"two";case gt.Few:return"few";case gt.Many:return"many";default:return"other"}}}return t.\u0275fac=function(n){return new(n||t)(Ve(Ci))},t.\u0275prov=qe({token:t,factory:t.\u0275fac}),t})(),MM=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Qr({type:t}),t.\u0275inj=Ti({providers:[{provide:ka,useClass:qI}]}),t})();class of extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function(t){Sa||(Sa=t)}(new of)}onAndCancel(e,n,i){return e.addEventListener(n,i,!1),()=>{e.removeEventListener(n,i,!1)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return(n=n||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return"window"===n?window:"document"===n?e:"body"===n?e.body:null}getBaseHref(e){const n=(Js=Js||document.querySelector("base"),Js?Js.getAttribute("href"):null);return null==n?null:function(t){Na=Na||document.createElement("a"),Na.setAttribute("href",t);const e=Na.pathname;return"/"===e.charAt(0)?e:`/${e}`}(n)}resetBaseElement(){Js=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const i=n.indexOf("="),[r,s]=-1==i?[n,""]:[n.slice(0,i),n.slice(i+1)];if(r.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let Na,Js=null;const Mv=new Qe("TRANSITION_ID"),BM=[{provide:da,useFactory:function(t,e,n){return()=>{n.get(Hr).donePromise.then(()=>{const i=Ks(),r=e.querySelectorAll(`style[ng-transition="${t}"]`);for(let s=0;s<r.length;s++)i.remove(r[s])})}},deps:[Mv,Vt,tt],multi:!0}];class af{static init(){!function(t){Ac=t}(new af)}addToWindow(e){$e.getAngularTestability=(i,r=!0)=>{const s=e.findTestabilityInTree(i,r);if(null==s)throw new Error("Could not find testability for element.");return s},$e.getAllAngularTestabilities=()=>e.getAllTestabilities(),$e.getAllAngularRootElements=()=>e.getAllRootElements(),$e.frameworkStabilizers||($e.frameworkStabilizers=[]),$e.frameworkStabilizers.push(i=>{const r=$e.getAllAngularTestabilities();let s=r.length,c=!1;const g=function(_){c=c||_,s--,0==s&&i(c)};r.forEach(function(_){_.whenStable(g)})})}findTestabilityInTree(e,n,i){if(null==n)return null;const r=e.getTestability(n);return null!=r?r:i?Ks().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null}}let VM=(()=>{class t{build(){return new XMLHttpRequest}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=qe({token:t,factory:t.\u0275fac}),t})();const eo=new Qe("EventManagerPlugins");let ja=(()=>{class t{constructor(n,i){this._zone=i,this._eventNameToPlugin=new Map,n.forEach(r=>r.manager=this),this._plugins=n.slice().reverse()}addEventListener(n,i,r){return this._findPluginFor(i).addEventListener(n,i,r)}addGlobalEventListener(n,i,r){return this._findPluginFor(i).addGlobalEventListener(n,i,r)}getZone(){return this._zone}_findPluginFor(n){const i=this._eventNameToPlugin.get(n);if(i)return i;const r=this._plugins;for(let s=0;s<r.length;s++){const c=r[s];if(c.supports(n))return this._eventNameToPlugin.set(n,c),c}throw new Error(`No event manager plugin found for event ${n}`)}}return t.\u0275fac=function(n){return new(n||t)(Ve(eo),Ve(Et))},t.\u0275prov=qe({token:t,factory:t.\u0275fac}),t})();class lf{constructor(e){this._doc=e}addGlobalEventListener(e,n,i){const r=Ks().getGlobalEventTarget(this._doc,e);if(!r)throw new Error(`Unsupported event target ${r} for event ${n}`);return this.addEventListener(r,n,i)}}let Av=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(n){const i=new Set;n.forEach(r=>{this._stylesSet.has(r)||(this._stylesSet.add(r),i.add(r))}),this.onStylesAdded(i)}onStylesAdded(n){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=qe({token:t,factory:t.\u0275fac}),t})(),to=(()=>{class t extends Av{constructor(n){super(),this._doc=n,this._hostNodes=new Map,this._hostNodes.set(n.head,[])}_addStylesToHost(n,i,r){n.forEach(s=>{const c=this._doc.createElement("style");c.textContent=s,r.push(i.appendChild(c))})}addHost(n){const i=[];this._addStylesToHost(this._stylesSet,n,i),this._hostNodes.set(n,i)}removeHost(n){const i=this._hostNodes.get(n);i&&i.forEach(Pv),this._hostNodes.delete(n)}onStylesAdded(n){this._hostNodes.forEach((i,r)=>{this._addStylesToHost(n,r,i)})}ngOnDestroy(){this._hostNodes.forEach(n=>n.forEach(Pv))}}return t.\u0275fac=function(n){return new(n||t)(Ve(Vt))},t.\u0275prov=qe({token:t,factory:t.\u0275fac}),t})();function Pv(t){Ks().remove(t)}const uf={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},cf=/%COMP%/g;function Ba(t,e,n){for(let i=0;i<e.length;i++){let r=e[i];Array.isArray(r)?Ba(t,r,n):(r=r.replace(cf,t),n.push(r))}return n}function kv(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let ff=(()=>{class t{constructor(n,i,r){this.eventManager=n,this.sharedStylesHost=i,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new hf(n)}createRenderer(n,i){if(!n||!i)return this.defaultRenderer;switch(i.encapsulation){case mt.Emulated:{let r=this.rendererByCompId.get(i.id);return r||(r=new tO(this.eventManager,this.sharedStylesHost,i,this.appId),this.rendererByCompId.set(i.id,r)),r.applyToHost(n),r}case 1:case mt.ShadowDom:return new nO(this.eventManager,this.sharedStylesHost,n,i);default:if(!this.rendererByCompId.has(i.id)){const r=Ba(i.id,i.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(i.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(n){return new(n||t)(Ve(ja),Ve(to),Ve(Gs))},t.\u0275prov=qe({token:t,factory:t.\u0275fac}),t})();class hf{constructor(e){this.eventManager=e,this.data=Object.create(null)}destroy(){}createElement(e,n){return n?document.createElementNS(uf[n]||n,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,n){e.appendChild(n)}insertBefore(e,n,i){e&&e.insertBefore(n,i)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let i="string"==typeof e?document.querySelector(e):e;if(!i)throw new Error(`The selector "${e}" did not match any elements`);return n||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,i,r){if(r){n=r+":"+n;const s=uf[r];s?e.setAttributeNS(s,n,i):e.setAttribute(n,i)}else e.setAttribute(n,i)}removeAttribute(e,n,i){if(i){const r=uf[i];r?e.removeAttributeNS(r,n):e.removeAttribute(`${i}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,i,r){r&(Qt.DashCase|Qt.Important)?e.style.setProperty(n,i,r&Qt.Important?"important":""):e.style[n]=i}removeStyle(e,n,i){i&Qt.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,i){e[n]=i}setValue(e,n){e.nodeValue=n}listen(e,n,i){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,n,kv(i)):this.eventManager.addEventListener(e,n,kv(i))}}class tO extends hf{constructor(e,n,i,r){super(e),this.component=i;const s=Ba(r+"-"+i.id,i.styles,[]);n.addStyles(s),this.contentAttr=function(t){return"_ngcontent-%COMP%".replace(cf,t)}(r+"-"+i.id),this.hostAttr=function(t){return"_nghost-%COMP%".replace(cf,t)}(r+"-"+i.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,n){const i=super.createElement(e,n);return super.setAttribute(i,this.contentAttr,""),i}}class nO extends hf{constructor(e,n,i,r){super(e),this.sharedStylesHost=n,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=Ba(r.id,r.styles,[]);for(let c=0;c<s.length;c++){const g=document.createElement("style");g.textContent=s[c],this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,i){return super.insertBefore(this.nodeOrShadowRoot(e),n,i)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let iO=(()=>{class t extends lf{constructor(n){super(n)}supports(n){return!0}addEventListener(n,i,r){return n.addEventListener(i,r,!1),()=>this.removeEventListener(n,i,r)}removeEventListener(n,i,r){return n.removeEventListener(i,r)}}return t.\u0275fac=function(n){return new(n||t)(Ve(Vt))},t.\u0275prov=qe({token:t,factory:t.\u0275fac}),t})();const jv=["alt","control","meta","shift"],cO={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Bv={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},fO={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let hO=(()=>{class t extends lf{constructor(n){super(n)}supports(n){return null!=t.parseEventName(n)}addEventListener(n,i,r){const s=t.parseEventName(i),c=t.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ks().onAndCancel(n,s.domEventName,c))}static parseEventName(n){const i=n.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const s=t._normalizeKey(i.pop());let c="";if(jv.forEach(_=>{const w=i.indexOf(_);w>-1&&(i.splice(w,1),c+=_+".")}),c+=s,0!=i.length||0===s.length)return null;const g={};return g.domEventName=r,g.fullKey=c,g}static getEventFullKey(n){let i="",r=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&Bv.hasOwnProperty(e)&&(e=Bv[e]))}return cO[e]||e}(n);return r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),jv.forEach(s=>{s!=r&&fO[s](n)&&(i+=s+".")}),i+=r,i}static eventCallback(n,i,r){return s=>{t.getEventFullKey(s)===n&&r.runGuarded(()=>i(s))}}static _normalizeKey(n){switch(n){case"esc":return"escape";default:return n}}}return t.\u0275fac=function(n){return new(n||t)(Ve(Vt))},t.\u0275prov=qe({token:t,factory:t.\u0275fac}),t})();const CO=Ny(s1,"browser",[{provide:Ec,useValue:"browser"},{provide:Ty,useValue:function(){of.makeCurrent(),af.init()},multi:!0},{provide:Vt,useFactory:function(){return function(t){al=t}(document),document},deps:[]}]),bO=[[],{provide:ws,useValue:"root"},{provide:Li,useFactory:function(){return new Li},deps:[]},{provide:eo,useClass:iO,multi:!0,deps:[Vt,Et,Ec]},{provide:eo,useClass:hO,multi:!0,deps:[Vt]},[],{provide:ff,useClass:ff,deps:[ja,to,Gs]},{provide:na,useExisting:ff},{provide:Av,useExisting:to},{provide:to,useClass:to,deps:[Vt]},{provide:Oc,useClass:Oc,deps:[Et]},{provide:ja,useClass:ja,deps:[eo,Et]},{provide:class{},useClass:VM,deps:[]},[]];let wO=(()=>{class t{constructor(n){if(n)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(n){return{ngModule:t,providers:[{provide:Gs,useValue:n.appId},{provide:Mv,useExisting:Gs},BM]}}}return t.\u0275fac=function(n){return new(n||t)(Ve(t,12))},t.\u0275mod=Qr({type:t}),t.\u0275inj=Ti({providers:bO,imports:[MM,h1]}),t})();"undefined"!=typeof window&&window;class OO extends d{constructor(e,n){super()}schedule(e,n=0){return this}}class AO extends OO{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){if(this.closed)return this;this.state=e;const i=this.id,r=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(r,i,n)),this.pending=!0,this.delay=n,this.id=this.id||this.requestAsyncId(r,this.id,n),this}requestAsyncId(e,n,i=0){return setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,n,i=0){if(null!==i&&this.delay===i&&!1===this.pending)return n;clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(e,n);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r,i=!1;try{this.work(e)}catch(s){i=!0,r=!!s&&s||new Error(s)}if(i)return this.unsubscribe(),r}_unsubscribe(){const e=this.id,n=this.scheduler,i=n.actions,r=i.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&i.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null}}let Hv=(()=>{class t{constructor(n,i=t.now){this.SchedulerAction=n,this.now=i}schedule(n,i=0,r){return new this.SchedulerAction(this,n).schedule(r,i)}}return t.now=()=>Date.now(),t})();class Di extends Hv{constructor(e,n=Hv.now){super(e,()=>Di.delegate&&Di.delegate!==this?Di.delegate.now():n()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(e,n=0,i){return Di.delegate&&Di.delegate!==this?Di.delegate.schedule(e,n,i):super.schedule(e,n,i)}flush(e){const{actions:n}=this;if(this.active)return void n.push(e);let i;this.active=!0;do{if(i=e.execute(e.state,e.delay))break}while(e=n.shift());if(this.active=!1,i){for(;e=n.shift();)e.unsubscribe();throw i}}}const RO=new class extends Di{}(class extends AO{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,i=0){return null!==i&&i>0||null===i&&this.delay>0?super.requestAsyncId(e,n,i):e.flush(this)}}),kO=new I(t=>t.complete());class gn{constructor(e,n,i){this.kind=e,this.value=n,this.error=i,this.hasValue="N"===e}observe(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}}do(e,n,i){switch(this.kind){case"N":return e&&e(this.value);case"E":return n&&n(this.error);case"C":return i&&i()}}accept(e,n,i){return e&&"function"==typeof e.next?this.observe(e):this.do(e,n,i)}toObservable(){switch(this.kind){case"N":return function(...t){let e=t[t.length-1];return fe(e)?(t.pop(),te(t,e)):Ze(t)}(this.value);case"E":return function(t,e){return new I(n=>n.error(t))}(this.error);case"C":return function(t){return t?function(t){return new I(e=>t.schedule(()=>e.complete()))}(t):kO}()}throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new gn("N",e):gn.undefinedValueNotification}static createError(e){return new gn("E",void 0,e)}static createComplete(){return gn.completeNotification}}gn.completeNotification=new gn("C"),gn.undefinedValueNotification=new gn("N",void 0);class Va extends h{constructor(e,n,i=0){super(e),this.scheduler=n,this.delay=i}static dispatch(e){const{notification:n,destination:i}=e;n.observe(i),this.unsubscribe()}scheduleMessage(e){this.destination.add(this.scheduler.schedule(Va.dispatch,this.delay,new UO(e,this.destination)))}_next(e){this.scheduleMessage(gn.createNext(e))}_error(e){this.scheduleMessage(gn.createError(e)),this.unsubscribe()}_complete(){this.scheduleMessage(gn.createComplete()),this.unsubscribe()}}class UO{constructor(e,n){this.notification=e,this.destination=n}}class WO extends ue{constructor(e=Number.POSITIVE_INFINITY,n=Number.POSITIVE_INFINITY,i){super(),this.scheduler=i,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=e<1?1:e,this._windowTime=n<1?1:n,n===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(e){if(!this.isStopped){const n=this._events;n.push(e),n.length>this._bufferSize&&n.shift()}super.next(e)}nextTimeWindow(e){this.isStopped||(this._events.push(new YO(this._getNow(),e)),this._trimBufferThenGetEvents()),super.next(e)}_subscribe(e){const n=this._infiniteTimeWindow,i=n?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,s=i.length;let c;if(this.closed)throw new G;if(this.isStopped||this.hasError?c=d.EMPTY:(this.observers.push(e),c=new ie(this,e)),r&&e.add(e=new Va(e,r)),n)for(let g=0;g<s&&!e.closed;g++)e.next(i[g]);else for(let g=0;g<s&&!e.closed;g++)e.next(i[g].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),c}_getNow(){return(this.scheduler||RO).now()}_trimBufferThenGetEvents(){const e=this._getNow(),n=this._bufferSize,i=this._windowTime,r=this._events,s=r.length;let c=0;for(;c<s&&!(e-r[c].time<i);)c++;return s>n&&(c=Math.max(c,s-n)),c>0&&r.splice(0,c),r}}class YO{constructor(e,n){this.time=e,this.value=n}}function Uv(t,e){return"function"==typeof e?n=>n.pipe(Uv((i,r)=>J(t(i,r)).pipe(ae((s,c)=>e(i,s,r,c))))):n=>n.lift(new GO(t))}class GO{constructor(e){this.project=e}call(e,n){return n.subscribe(new zO(e,this.project))}}class zO extends ne{constructor(e,n){super(e),this.project=n,this.index=0}_next(e){let n;const i=this.index++;try{n=this.project(e,i)}catch(r){return void this.destination.error(r)}this._innerSub(n)}_innerSub(e){const n=this.innerSubscription;n&&n.unsubscribe();const i=new ee(this),r=this.destination;r.add(i),this.innerSubscription=Ie(e,i),this.innerSubscription!==i&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:e}=this;(!e||e.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(e){this.destination.next(e)}}const Ha={schedule(t,e){const n=setTimeout(t,e);return()=>clearTimeout(n)},scheduleBeforeRender(t){if("undefined"==typeof window)return Ha.schedule(t,0);if(void 0===window.requestAnimationFrame)return Ha.schedule(t,16);const e=window.requestAnimationFrame(t);return()=>window.cancelAnimationFrame(e)}};let yf;function nA(t,e,n){let i=n;return function(t){return!!t&&t.nodeType===Node.ELEMENT_NODE}(t)&&e.some((r,s)=>!("*"===r||!function(t,e){if(!yf){const n=Element.prototype;yf=n.matches||n.matchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector||n.webkitMatchesSelector}return t.nodeType===Node.ELEMENT_NODE&&yf.call(t,e)}(t,r)||(i=s,0))),i}class rA{constructor(e,n){this.componentFactory=n.get(vi).resolveComponentFactory(e)}create(e){return new sA(this.componentFactory,e)}}class sA{constructor(e,n){this.componentFactory=e,this.injector=n,this.eventEmitters=new WO(1),this.events=this.eventEmitters.pipe(Uv(i=>Ge(...i))),this.componentRef=null,this.viewChangeDetectorRef=null,this.inputChanges=null,this.hasInputChanges=!1,this.implementsOnChanges=!1,this.scheduledChangeDetectionFn=null,this.scheduledDestroyFn=null,this.initialInputValues=new Map,this.unchangedInputs=new Set(this.componentFactory.inputs.map(({propName:i})=>i)),this.ngZone=this.injector.get(Et),this.elementZone="undefined"==typeof Zone?null:this.ngZone.run(()=>Zone.current)}connect(e){this.runInZone(()=>{if(null!==this.scheduledDestroyFn)return this.scheduledDestroyFn(),void(this.scheduledDestroyFn=null);null===this.componentRef&&this.initializeComponent(e)})}disconnect(){this.runInZone(()=>{null===this.componentRef||null!==this.scheduledDestroyFn||(this.scheduledDestroyFn=Ha.schedule(()=>{null!==this.componentRef&&(this.componentRef.destroy(),this.componentRef=null,this.viewChangeDetectorRef=null)},10))})}getInputValue(e){return this.runInZone(()=>null===this.componentRef?this.initialInputValues.get(e):this.componentRef.instance[e])}setInputValue(e,n){this.runInZone(()=>{null!==this.componentRef?function(t,e){return t===e||t!=t&&e!=e}(n,this.getInputValue(e))&&(void 0!==n||!this.unchangedInputs.has(e))||(this.recordInputChange(e,n),this.unchangedInputs.delete(e),this.hasInputChanges=!0,this.componentRef.instance[e]=n,this.scheduleDetectChanges()):this.initialInputValues.set(e,n)})}initializeComponent(e){const n=tt.create({providers:[],parent:this.injector}),i=function(t,e){const n=t.childNodes,i=e.map(()=>[]);let r=-1;e.some((s,c)=>"*"===s&&(r=c,!0));for(let s=0,c=n.length;s<c;++s){const g=n[s],_=nA(g,e,r);-1!==_&&i[_].push(g)}return i}(e,this.componentFactory.ngContentSelectors);this.componentRef=this.componentFactory.create(n,i,e),this.viewChangeDetectorRef=this.componentRef.injector.get(Sm),this.implementsOnChanges=function(t){return"function"==typeof t}(this.componentRef.instance.ngOnChanges),this.initializeInputs(),this.initializeOutputs(this.componentRef),this.detectChanges(),this.injector.get(Ur).attachView(this.componentRef.hostView)}initializeInputs(){this.componentFactory.inputs.forEach(({propName:e})=>{this.initialInputValues.has(e)&&this.setInputValue(e,this.initialInputValues.get(e))}),this.initialInputValues.clear()}initializeOutputs(e){const n=this.componentFactory.outputs.map(({propName:i,templateName:r})=>e.instance[i].pipe(ae(c=>({name:r,value:c}))));this.eventEmitters.next(n)}callNgOnChanges(e){if(!this.implementsOnChanges||null===this.inputChanges)return;const n=this.inputChanges;this.inputChanges=null,e.instance.ngOnChanges(n)}markViewForCheck(e){this.hasInputChanges&&(this.hasInputChanges=!1,e.markForCheck())}scheduleDetectChanges(){this.scheduledChangeDetectionFn||(this.scheduledChangeDetectionFn=Ha.scheduleBeforeRender(()=>{this.scheduledChangeDetectionFn=null,this.detectChanges()}))}recordInputChange(e,n){if(!this.implementsOnChanges)return;null===this.inputChanges&&(this.inputChanges={});const i=this.inputChanges[e];if(i)return void(i.currentValue=n);const r=this.unchangedInputs.has(e),s=r?void 0:this.getInputValue(e);this.inputChanges[e]=new sl(s,n,r)}detectChanges(){null!==this.componentRef&&(this.callNgOnChanges(this.componentRef),this.markViewForCheck(this.viewChangeDetectorRef),this.componentRef.changeDetectorRef.detectChanges())}runInZone(e){return this.elementZone&&Zone.current!==this.elementZone?this.ngZone.run(e):e()}}class oA extends HTMLElement{constructor(){super(...arguments),this.ngElementEventsSubscription=null}}var oi=Fn(258);const Wv="tooltip";class vf{constructor(e=new oi.fabric.Canvas("canvas",{fireRightClick:!0,stopContextMenu:!0}),n){this.canvas=e,this.canvasWrapper=n,this.canvas.selection=!1,this.registerMouseEvents()}registerMouseEvents(){const e=this;this.canvas.on("mouse:move",n=>e.onMouseMove(n)),this.canvas.on("mouse:over",n=>e.onMouseOver(n)),this.canvas.on("mouse:out",n=>e.onMouseOut(n)),this.canvas.on("mouse:up",n=>e.onMouseUp(n))}destroy(){this.canvas.off("mouse:move"),this.canvas.off("mouse:over"),this.canvas.off("mouse:out"),this.canvas.off("mouse:up"),this.canvas.dispose(),this.canvas=void 0}onMouseMove(e){this.currentMousePoint=this.canvas.getPointer(e.e)}isRect(e){var n,i;return"rect"===(null===(i=null===(n=e.target)||void 0===n?void 0:n.data)||void 0===i?void 0:i.type)}onMouseUp(e){this.isRect(e)&&e.target.data.detectedObject.hasText()&&navigator.clipboard.writeText(e.target.data.detectedObject.text).then()}onMouseOut(e){if(this.isRect(e)){e.target.set("stroke","red");const n=this.findObjectByTypeAndId(Wv,e.target.data.id);return this.canvas.remove(n),void this.canvas.renderAll()}}rightBottomCorner(){return{x:oi.fabric.util.invertTransform(this.canvas.viewportTransform)[4]+this.canvas.width/this.canvas.getZoom(),y:oi.fabric.util.invertTransform(this.canvas.viewportTransform)[5]+this.canvas.height/this.canvas.getZoom()}}onMouseOver(e){var n,i,r;this.isRect(e)&&(this.currentMousePoint=this.canvas.getPointer(e.e),null===(n=e.target)||void 0===n||n.set("stroke","green"),this.drawTooltip(null===(i=e.target)||void 0===i?void 0:i.data.id,null===(r=e.target)||void 0===r?void 0:r.data.detectedObject),this.canvas.renderAll())}findObjectByTypeAndId(e,n){return this.canvas.getObjects().find(i=>{var r,s;return(null===(r=i.data)||void 0===r?void 0:r.id)===n&&(null===(s=i.data)||void 0===s?void 0:s.type)===e})}static imageStrToFabricImage(e){return new I(n=>{oi.fabric.Image.fromURL(e,i=>{if(void 0===i.getElement())return n.error(i),void n.complete();n.next(i),n.complete()})})}static rescaleImage(e,n){e.scaleToWidth(n),e.scaleToHeight(n*e.height/e.width)}setCanvasSizeToImageSize(e){this.canvas.setWidth(e.width),this.canvas.setHeight(e.height)}drawImage(e){return vf.imageStrToFabricImage(e).pipe(ae(n=>{const i=this.canvasWrapper.clientWidth;this.canvas.setWidth(i),this.canvas.setHeight(i*n.height/n.width),this.canvas.setZoom(i/n.width),n.lockMovementX=!0,n.lockMovementY=!0,n.lockScalingX=!0,n.lockScalingY=!0,n.hasControls=!1,n.selectable=!1,n.hoverCursor="default",this.canvas.add(n)}))}placeObjectAroundPoint(e,n){return e.left=n.x-e.width/2,e.left<=0&&(e.left=0),e.left+e.width>this.rightBottomCorner().x&&(e.left=this.rightBottomCorner().x-e.width),e.top=n.y+20/this.canvas.getZoom(),e.top+e.height>this.rightBottomCorner().y&&(e.top=n.y-e.height-10),e}placeObjectAroundMouse(e){return this.placeObjectAroundPoint(e,this.currentMousePoint)}buildTooltip(e,n){const i=new oi.fabric.Text(e,{fontFamily:"Source Sans Pro",fontSize:Math.round(18/this.canvas.getZoom()),originX:"center",originY:"center",fill:"white",lockMovementX:!0,lockMovementY:!0,lockScalingX:!0,lockScalingY:!0,lockRotation:!0,hasControls:!1}),r=new oi.fabric.Rect({fill:"rgba(0,0,0, 0.9)",originX:"center",originY:"center",rx:10,ry:10,stroke:"black",strokeWidth:1,strokeUniform:!0,width:i.getLineWidth(0)+20,height:i.getHeightOfLine(0)+20});return new oi.fabric.Group([r,i],{data:{type:Wv,id:n},visible:!0,lockMovementX:!0,lockMovementY:!0,lockScalingX:!0,lockScalingY:!0,lockRotation:!0,hasControls:!1})}drawTooltip(e,n){let i=n.name.replace("_"," ");i.startsWith("icon")&&(i="icon"),n.hasText()&&(i+=": "+n.text),n.hasColors()&&(i+=", colors: "+n.colors.join(", "));const r=this.buildTooltip(i,e);this.placeObjectAroundMouse(r),this.canvas.add(r)}drawRect(e,n){const i=new oi.fabric.Rect({data:{id:e,type:"rect",detectedObject:n},top:n.bbox.ymin,left:n.bbox.xmin,width:n.bbox.width,height:n.bbox.height,stroke:"red",strokeWidth:1,strokeUniform:!0,fill:"rgba(0,0,0,0)",lockMovementX:!0,lockMovementY:!0,lockScalingX:!0,lockScalingY:!0,lockRotation:!0,hasControls:!1,hoverCursor:n.hasText()?"pointer":"default"});this.canvas.add(i)}resizeCanvas(){if(void 0===this.canvas)return;const e=this.canvasWrapper.clientWidth,n=this.canvas.getWidth()/this.canvas.getHeight(),i=e,r=i/this.canvas.getWidth(),s=this.canvas.getZoom()*r;this.canvas.setDimensions({width:i,height:i/n}),this.canvas.setViewportTransform([s,0,0,s,0,0])}}class uA{constructor(e,n,i,r){this.xmin=e,this.ymin=n,this.xmax=i,this.ymax=r,this.width=i-e,this.height=r-n,this.size=this.width*this.height}}class _f{constructor(e,n,i,r){this.name=e,this.bbox=r,this.text=n,this.colors=i}hasText(){return this.text.length>0}hasColors(){return this.colors.length>0}isIcon(){return"icon"===this.name}static fromJson(e){return new _f(e.name,e.text,e.colors,new uA(e.bndbox.xmin,e.bndbox.ymin,e.bndbox.xmax,e.bndbox.ymax))}}const cA=["canvas"],fA=["canvaswrapper"];let Yv=(()=>{class t{constructor(){this.imagestr="",this.shouldrenderimage=!0,this.detectedobjects=[]}setupMutationOvserver(){const n=document.getElementsByTagName("bounding-box-renderer")[0],r=this;this.observer=new MutationObserver(function(c){for(const g of c)"attributes"===g.type&&"imagestr"==g.attributeName&&(r.imagestr=g.target.getAttribute("imagestr"),r.startDrawing()),"attributes"===g.type&&"shouldrenderimage"==g.attributeName&&(r.shouldrenderimage="true"==g.target.getAttribute("shouldrenderimage"),r.startDrawing()),"attributes"===g.type&&"detectedobjects"==g.attributeName&&(r.detectedobjects=JSON.parse(g.target.getAttribute("detectedobjects")).map(_=>_f.fromJson(_)),r.startDrawing())}),this.observer.observe(n,{attributes:!0,childList:!0,subtree:!0})}ngOnDestroy(){this.observer.disconnect(),this.uninitCanvas()}ngAfterViewInit(){this.setupMutationOvserver()}startDrawing(){""!==this.imagestr&&this.detectedobjects.length>0&&(this.canvas&&this.uninitCanvas(),this.initCanvas(),this.renderCanvas())}renderCanvas(){!this.canvas||(!0===this.shouldrenderimage?this.canvas.drawImage(this.imagestr).subscribe(()=>{this.drawRects()}):this.drawRects())}drawRects(){Array.from(this.detectedobjects).sort((i,r)=>-i.bbox.size+r.bbox.size).forEach((i,r)=>{this.canvas.drawRect(r,i)})}getCanvasWrapperWidth(){return this.canvasWrapperHtml.nativeElement.clientWidth}initCanvas(){this.canvas=new vf(new oi.fabric.Canvas(this.canvasHtml.nativeElement,{fireRightClick:!0,stopContextMenu:!0}),this.canvasWrapperHtml.nativeElement),this.canvas.canvas.setWidth(this.getCanvasWrapperWidth())}uninitCanvas(){this.canvas.destroy()}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=el({type:t,selectors:[["bounding-box-renderer"]],viewQuery:function(n,i){if(1&n&&(mc(cA,5),mc(fA,5)),2&n){let r;pc(r=yc())&&(i.canvasHtml=r.first),pc(r=yc())&&(i.canvasWrapperHtml=r.first)}},inputs:{imagestr:"imagestr",shouldrenderimage:"shouldrenderimage",detectedobjects:"detectedobjects"},decls:4,vars:0,consts:[["id","canvas-wrapper"],["canvaswrapper",""],["id","canvas"],["canvas",""]],template:function(n,i){1&n&&(Fu(0,"div",0,1),function(t,e,n,i){Fu(t,e,n,i),Ru()}(2,"canvas",2,3),Ru())},encapsulation:2}),t})(),hA=(()=>{class t{constructor(n){this.injector=n}ngDoBootstrap(){const n=function(t,e){const n=function(t,e){return e.get(vi).resolveComponentFactory(t).inputs}(t,e.injector),i=e.strategyFactory||new rA(t,e.injector),r=function(t){const e={};return t.forEach(({propName:n,templateName:i})=>{e[function(t){return t.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}(i)]=n}),e}(n);class s extends oA{constructor(g){super(),this.injector=g}get ngElementStrategy(){if(!this._ngElementStrategy){const g=this._ngElementStrategy=i.create(this.injector||e.injector);n.forEach(({propName:_})=>{if(!this.hasOwnProperty(_))return;const w=this[_];delete this[_],g.setInputValue(_,w)})}return this._ngElementStrategy}attributeChangedCallback(g,_,w,S){this.ngElementStrategy.setInputValue(r[g],w)}connectedCallback(){let g=!1;this.ngElementStrategy.events&&(this.subscribeToEvents(),g=!0),this.ngElementStrategy.connect(this),g||this.subscribeToEvents()}disconnectedCallback(){this._ngElementStrategy&&this._ngElementStrategy.disconnect(),this.ngElementEventsSubscription&&(this.ngElementEventsSubscription.unsubscribe(),this.ngElementEventsSubscription=null)}subscribeToEvents(){this.ngElementEventsSubscription=this.ngElementStrategy.events.subscribe(g=>{const _=function(t,e,n){if("function"!=typeof CustomEvent){const s=t.createEvent("CustomEvent");return s.initCustomEvent(e,!1,!1,n),s}return new CustomEvent(e,{bubbles:!1,cancelable:!1,detail:n})}(this.ownerDocument,g.name,g.value);this.dispatchEvent(_)})}}return s.observedAttributes=Object.keys(r),n.forEach(({propName:c})=>{Object.defineProperty(s.prototype,c,{get(){return this.ngElementStrategy.getInputValue(c)},set(g){this.ngElementStrategy.setInputValue(c,g)},configurable:!0,enumerable:!0})}),s}(Yv,{injector:this.injector});customElements.define("bounding-box-renderer",n)}}return t.\u0275fac=function(n){return new(n||t)(Ve(tt))},t.\u0275mod=Qr({type:t,bootstrap:[Yv]}),t.\u0275inj=Ti({providers:[],imports:[[wO]]}),t})();(function(){if(Fy)throw new Error("Cannot enable prod mode after platform setup.");Py=!1})(),CO().bootstrapModule(hA).catch(t=>console.error(t))},450:()=>{},529:()=>{},536:()=>{}},zi=>{zi(zi.s=787)}]);
    </script>
</body>
</html>
